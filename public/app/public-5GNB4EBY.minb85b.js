import{a as w1,b as x1,c as O1,d as Qg,e as i_,f as u_,g as Oc,h as N_,i as D_,j as B_,k as K_}from"https://app.gitbook.com/public/app/chunks/chunk-JEFVIKAJ.min.js";import{a as Bx,b as O_,c as L_}from"https://app.gitbook.com/public/app/chunks/chunk-M4DWWQ3A.min.js";import{a as W1,b as qD,c as T_,d as M_}from"https://app.gitbook.com/public/app/chunks/chunk-Q3B5MCKM.min.js";import{a as Jr,b as F_,c as id}from"https://app.gitbook.com/public/app/chunks/chunk-E7IX44W4.min.js";import{a as uh}from"https://app.gitbook.com/public/app/chunks/chunk-PUSSBFNH.min.js";import{a as Aa,b as em,c as NO,d as AO}from"https://app.gitbook.com/public/app/chunks/chunk-TCCNHHJO.min.js";import{A as j1,B as ur,C as $1,D as Cc,E as Z1,G as Iw,H as l_,I as Ew,J as td,L as I_,M as E_,a as Xu,b as wi,c as xw,d as pe,e as Dt,f as Ug,g as sm,h as z1,i as Pw,j as Yg,k as Zu,l as jg,m as F1,n as V1,o as q1,p as G1,q as $g,r as Zg,s as H1,t as Jg,u as K1,v as X1,w as U1,x as Sc,y as Ju,z as Y1}from"https://app.gitbook.com/public/app/chunks/chunk-EBJXCCWN.min.js";import{a as nh}from"https://app.gitbook.com/public/app/chunks/chunk-2YVOSJQ2.min.js";import{a as Is}from"https://app.gitbook.com/public/app/chunks/chunk-4R4BWE4W.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-QKYFLOIO.min.js";import{a as a_,b as P_,c as W_,d as z_}from"https://app.gitbook.com/public/app/chunks/chunk-67BEUMU7.min.js";import{a as e_}from"https://app.gitbook.com/public/app/chunks/chunk-XEXUUABY.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JE3FFDV2.min.js";import{a as nd}from"https://app.gitbook.com/public/app/chunks/chunk-C5RWMWVJ.min.js";import{a as oh}from"https://app.gitbook.com/public/app/chunks/chunk-QEBHTKPN.min.js";import{a as ad,b as V_,c as q_}from"https://app.gitbook.com/public/app/chunks/chunk-VDOWUZDR.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-UMNW7V6U.min.js";import{a as og,b as Ex,e as wO,f as _w,g as In,h as am,i as Mn,j as um,k as ah,l as s_,m as hh,n as ra,p as G_,q as H_}from"https://app.gitbook.com/public/app/chunks/chunk-FAN33JTI.min.js";import{a as Ge,b as Qr,c as yh}from"https://app.gitbook.com/public/app/chunks/chunk-A5IS2AAP.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-RIQZVD73.min.js";import{a as rh,b as r_,d as dh,e as w_}from"https://app.gitbook.com/public/app/chunks/chunk-D4XXMTBQ.min.js";import{a as gh}from"https://app.gitbook.com/public/app/chunks/chunk-CW3UIM3Q.min.js";import{c as vh}from"https://app.gitbook.com/public/app/chunks/chunk-KBRIAYEC.min.js";import{b as Jp,c as Qp,e as MO,f as LO}from"https://app.gitbook.com/public/app/chunks/chunk-SKZKBQPY.min.js";import{a as Gg}from"https://app.gitbook.com/public/app/chunks/chunk-JISAFPVM.min.js";import{a as kc}from"https://app.gitbook.com/public/app/chunks/chunk-S7RKAKJY.min.js";import{a as rd,c as Tl,d as A_}from"https://app.gitbook.com/public/app/chunks/chunk-PU6D4A72.min.js";import{a as oa}from"https://app.gitbook.com/public/app/chunks/chunk-R6O3E5S7.min.js";import{b as b_}from"https://app.gitbook.com/public/app/chunks/chunk-LBGKIZNJ.min.js";import{a as yo,b as Ps,c as Es,d as Ct,e as Ir,f as xc,g as lh,h as Ga,j as __,k as R_,m as Mw}from"https://app.gitbook.com/public/app/chunks/chunk-DT32VSEG.min.js";import{f as B1}from"https://app.gitbook.com/public/app/chunks/chunk-7DMNRJN5.min.js";import{a as c_,c as h_,d as y_,e as v_,g as k_,i as El,j as x_}from"https://app.gitbook.com/public/app/chunks/chunk-5LJEHTMH.min.js";import{a as Fx,c as Ms,d as S_,e as mh,f as Rc,g as fh,h as C_}from"https://app.gitbook.com/public/app/chunks/chunk-PHSYE44V.min.js";import{a as s1,b as be}from"https://app.gitbook.com/public/app/chunks/chunk-AA23LJF7.min.js";import{a as $o,b as dm,c as Je,d as ph}from"https://app.gitbook.com/public/app/chunks/chunk-3LRAIGUQ.min.js";import{$ as r1,K as Ix,L as Ur,M as Wx,N as Au,O as ng,P as zx,V as Ag,W as o1,X as Nt,Y as Dg,Z as n1,ba as i1,ca as a1,da as re,ha as Bg,ia as kw,ja as _c,ka as d_,la as Il,ma as p_,na as m_,oa as Tw,ra as f_,sa as bo,ta as _i,ua as g_,va as od}from"https://app.gitbook.com/public/app/chunks/chunk-CNJJYRY2.min.js";import{a as na}from"https://app.gitbook.com/public/app/chunks/chunk-345KJ6LV.min.js";import{a as ZO,b as vo,c as ih,e as lm,f as No,g as ch,h as Ts,i as qa}from"https://app.gitbook.com/public/app/chunks/chunk-Y4UYXNY7.min.js";import{a as Qu,b as eh,c as no,d as th,e as J1,f as Q1,g as t_,h as ie,i as o_,j as n_,k as ed,l as cm,m as ce,n as sh}from"https://app.gitbook.com/public/app/chunks/chunk-D7GXTBFE.min.js";import{a as Nu,b as Z,d as Pr,f as Zr}from"https://app.gitbook.com/public/app/chunks/chunk-YOC5VDWA.min.js";import{d as ye}from"https://app.gitbook.com/public/app/chunks/chunk-PMXJMTM6.min.js";import{$c as bw,Ac as kg,Ae as hc,Bc as SO,Cc as CO,Ce as Ku,Dc as bi,De as GO,Ec as kO,Ee as yc,Fc as xg,Gc as xO,Ge as HO,Hc as Og,He as Eg,Ib as iw,Ic as OO,Ie as KO,Jb as ys,Jc as _O,Jd as FO,Je as om,Kc as RO,Lc as PO,Ld as VO,Mc as vw,Md as ww,Nb as aw,Nc as IO,Nd as Pg,Ne as Tg,Ob as Nx,Oc as EO,Oe as XO,Pb as sw,Pc as TO,Pe as UO,Qc as _g,Rc as $p,Rd as Ig,Sb as Ax,Sc as Qi,Tb as cw,Tc as Zp,Ub as lw,Uc as Rr,Vc as Rt,Ve as nm,Wc as cr,We as YO,Xc as Da,Yc as lr,Ye as Cw,Zc as F,_c as tm,a as eg,ad as DO,af as jO,b as cn,bc as Vx,bd as Gu,bf as $O,c as wl,cd as Pn,d as _x,dc as qx,dd as Hu,e as Rx,ed as BO,f as Ea,hd as WO,id as oo,j as tg,jc as Ux,jd as Ba,jf as Ol,k as Px,kc as ji,lc as Yx,ld as ea,lf as Mg,mc as qp,mf as JO,nb as Ta,nc as jx,nf as QO,ob as Yi,oc as $x,tb as Tx,td as Rg,tf as e1,ub as Mx,uc as Zx,ud as zO,uf as Lg,vb as Lx,vf as Ng,wf as t1,yc as Jx,ye as qO,zc as Qx,ze as Sw}from"https://app.gitbook.com/public/app/chunks/chunk-477HE6RH.min.js";import{b as Oi}from"https://app.gitbook.com/public/app/chunks/chunk-JGOGDNAD.min.js";import{$ as E1,A as C1,B as Mo,C as mt,D as ju,E as Wa,J as xe,K as Lo,M as k1,N as H,P as Tn,Q as Hg,S as bc,T as za,U as wc,V as _1,W as R1,X as P1,Y as I1,Z as Fa,_ as Pl,a as BD,aa as T1,b as vc,c as Ow,d as c1,e as Wg,f as l1,fa as M1,g as u1,ga as $u,h as U,ha as xi,i as _l,ia as L1,j as At,ja as Va,k as h1,ka as bt,na as V,o as Rw,oa as N1,p as Yo,pa as A1,q as rm,qa as ho,r as En,ra as Kg,s as Uu,sa as Xg,ta as im,u as b1,va as D1,w as ki,x as Yu,y as S1,z as jo}from"https://app.gitbook.com/public/app/chunks/chunk-CF7J3Y72.min.js";import{c as Ui}from"https://app.gitbook.com/public/app/chunks/chunk-4MH4QYR7.min.js";import{$ as bs,$a as uO,A as oO,Aa as Cs,Ab as yO,B as cg,Ba as jr,Bb as Re,C as Gt,Ca as ar,Cb as FD,D as Gp,Da as sr,Db as VD,E as WD,Ea as $r,Eb as ee,Fa as fo,Fb as Ji,Ga as Xp,Gb as vO,H as nO,Hb as bO,I as Hp,Ia as Rn,Ib as Vu,J as fc,Ja as Up,Jb as qu,Ka as Yp,La as gc,Ma as ug,Na,Oa as Wu,Pa as dg,Q as Kp,Qa as pg,R as rO,Ra as mg,S as iO,Sa as ks,T as zD,U as aO,Ua as jp,V as mw,Va as xs,W as rr,Wa as fg,X as La,Xa as gg,Y as sO,Ya as We,Z as _n,Za as hw,_ as vs,_a as Os,aa as ln,ab as dO,b as Gx,ba as $i,bb as St,c as dw,ca as cO,cb as zu,da as Fe,db as yw,e as Hx,ea as qe,eb as hg,f as pw,fa as tt,fb as to,g as rg,ga as uo,ha as po,hb as kl,i as Du,ia as Ht,ib as pO,j as vi,ja as mo,jb as mO,k as Kx,ka as Xo,kb as fO,l as Xx,la as de,lb as yg,ma as ws,mb as vg,na as Kt,nb as _s,o as Ma,oa as To,ob as bg,p as eO,pa as fw,q as ig,qa as lO,qb as Fu,ra as gw,rb as gO,s as Bu,sa as Sl,sb as wg,ta as lg,tb as Sg,u as ag,ua as ir,ub as hO,v as qt,va as Or,vb as Uo,w as Eo,wa as Yr,wb as Cg,xa as Ss,xb as Zi,y as tO,ya as Cl,yb as pt,z as he,za as _r,zb as xl}from"https://app.gitbook.com/public/app/chunks/chunk-I5TBQ4HQ.min.js";import{a as Ze}from"https://app.gitbook.com/public/app/chunks/chunk-TFATNSDK.min.js";import{B as D,C as ta,D as d1,E as $,F as p1,G as v,H as A,I as g,J as w,K as m1,L as zg,M as Fg,N as Vg,P as Ue,Q as qg,R as go,S as je,T as f1,U as g1,V as Rl,W as y1,X as v1,Y as Rs,Z as Si,_,aa as Ci,ba as W,ca as G,m as k,n as DD,o as q,q as Cx,r as Lt,t as kx,u as xx,v as tr,w as or,x as Xr,y as Ox}from"https://app.gitbook.com/public/app/chunks/chunk-FFQIYGJD.min.js";import{b as nr,c as uw}from"https://app.gitbook.com/public/app/chunks/chunk-N5XZ4L4B.min.js";import{a as Vp}from"https://app.gitbook.com/public/app/chunks/chunk-644MUXOE.min.js";import{b as Ce,c as ze,d as ue,e as Dx,f as sg}from"https://app.gitbook.com/public/app/chunks/chunk-XAGBDEI3.min.js";import{b as Te,c as AD,d as b,f as c}from"https://app.gitbook.com/public/app/chunks/chunk-JSCW7V4P.min.js";var aP=Te((Mne,iP)=>{c();var l8="Expected a function",nP=NaN,u8="[object Symbol]",d8=/^\s+|\s+$/g,p8=/^[-+]0x[0-9a-f]+$/i,m8=/^0b[01]+$/i,f8=/^0o[0-7]+$/i,g8=parseInt,h8=typeof window=="object"&&window&&window.Object===Object&&window,y8=typeof self=="object"&&self&&self.Object===Object&&self,v8=h8||y8||Function("return this")(),b8=Object.prototype,w8=b8.toString,S8=Math.max,C8=Math.min,Yw=function(){return v8.Date.now()};function k8(t,o,e){var n,r,i,a,s,l,u=0,d=!1,p=!1,f=!0;if(typeof t!="function")throw new TypeError(l8);o=rP(o)||0,jw(e)&&(d=!!e.leading,p="maxWait"in e,i=p?S8(rP(e.maxWait)||0,o):i,f="trailing"in e?!!e.trailing:f);function m(L){var R=n,T=r;return n=r=void 0,u=L,a=t.apply(T,R),a}function h(L){return u=L,s=setTimeout(C,o),d?m(L):a}function y(L){var R=L-l,T=L-u,M=o-R;return p?C8(M,i-T):M}function S(L){var R=L-l,T=L-u;return l===void 0||R>=o||R<0||p&&T>=i}function C(){var L=Yw();if(S(L))return x(L);s=setTimeout(C,y(L))}function x(L){return s=void 0,f&&n?m(L):(n=r=void 0,a)}function O(){s!==void 0&&clearTimeout(s),u=0,n=l=r=s=void 0}function E(){return s===void 0?a:x(Yw())}function P(){var L=Yw(),R=S(L);if(n=arguments,r=this,l=L,R){if(s===void 0)return h(l);if(p)return s=setTimeout(C,o),m(l)}return s===void 0&&(s=setTimeout(C,o)),a}return P.cancel=O,P.flush=E,P}function jw(t){var o=typeof t;return!!t&&(o=="object"||o=="function")}function x8(t){return!!t&&typeof t=="object"}function O8(t){return typeof t=="symbol"||x8(t)&&w8.call(t)==u8}function rP(t){if(typeof t=="number")return t;if(O8(t))return nP;if(jw(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=jw(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=t.replace(d8,"");var e=m8.test(t);return e||f8.test(t)?g8(t.slice(2),e?2:8):p8.test(t)?nP:+t}iP.exports=k8});var lP=Te((Nne,cP)=>{c();var sP=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};cP.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return sP()}try{return __global__||sP()}finally{delete Object.prototype.__global__}}()});var uP=Te((Dne,_8)=>{_8.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"}});var pP=Te((Bne,dP)=>{c();dP.exports=uP().version});var gP=Te((zne,fP)=>{c();var Al;if(typeof globalThis=="object")Al=globalThis;else try{Al=lP()}catch{}finally{if(!Al&&typeof window<"u"&&(Al=window),!Al)throw new Error("Could not determine global this")}var vm=Al.WebSocket||Al.MozWebSocket,R8=pP();function mP(t,o){var e;return o?e=new vm(t,o):e=new vm(t),e}vm&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(t){Object.defineProperty(mP,t,{get:function(){return vm[t]}})});fP.exports={w3cwebsocket:vm?mP:null,version:R8}});var xP=Te(kP=>{c();(function(t){var o=function(e){var n={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function r(I){return I&&DataView.prototype.isPrototypeOf(I)}if(n.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=ArrayBuffer.isView||function(I){return I&&i.indexOf(Object.prototype.toString.call(I))>-1};function s(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(I))throw new TypeError("Invalid character in header field name");return I.toLowerCase()}function l(I){return typeof I!="string"&&(I=String(I)),I}function u(I){var N={next:function(){var z=I.shift();return{done:z===void 0,value:z}}};return n.iterable&&(N[Symbol.iterator]=function(){return N}),N}function d(I){this.map={},I instanceof d?I.forEach(function(N,z){this.append(z,N)},this):Array.isArray(I)?I.forEach(function(N){this.append(N[0],N[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(N){this.append(N,I[N])},this)}d.prototype.append=function(I,N){I=s(I),N=l(N);var z=this.map[I];this.map[I]=z?z+", "+N:N},d.prototype.delete=function(I){delete this.map[s(I)]},d.prototype.get=function(I){return I=s(I),this.has(I)?this.map[I]:null},d.prototype.has=function(I){return this.map.hasOwnProperty(s(I))},d.prototype.set=function(I,N){this.map[s(I)]=l(N)},d.prototype.forEach=function(I,N){for(var z in this.map)this.map.hasOwnProperty(z)&&I.call(N,this.map[z],z,this)},d.prototype.keys=function(){var I=[];return this.forEach(function(N,z){I.push(z)}),u(I)},d.prototype.values=function(){var I=[];return this.forEach(function(N){I.push(N)}),u(I)},d.prototype.entries=function(){var I=[];return this.forEach(function(N,z){I.push([z,N])}),u(I)},n.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function p(I){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}function f(I){return new Promise(function(N,z){I.onload=function(){N(I.result)},I.onerror=function(){z(I.error)}})}function m(I){var N=new FileReader,z=f(N);return N.readAsArrayBuffer(I),z}function h(I){var N=new FileReader,z=f(N);return N.readAsText(I),z}function y(I){for(var N=new Uint8Array(I),z=new Array(N.length),Y=0;Y<N.length;Y++)z[Y]=String.fromCharCode(N[Y]);return z.join("")}function S(I){if(I.slice)return I.slice(0);var N=new Uint8Array(I.byteLength);return N.set(new Uint8Array(I)),N.buffer}function C(){return this.bodyUsed=!1,this._initBody=function(I){this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:n.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:n.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():n.arrayBuffer&&n.blob&&r(I)?(this._bodyArrayBuffer=S(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||a(I))?this._bodyArrayBuffer=S(I):this._bodyText=I=Object.prototype.toString.call(I):this._bodyText="",this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var I=p(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var I=p(this);if(I)return I;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(I){var N=I.toUpperCase();return x.indexOf(N)>-1?N:I}function E(I,N){N=N||{};var z=N.body;if(I instanceof E){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,N.headers||(this.headers=new d(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!z&&I._bodyInit!=null&&(z=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=N.credentials||this.credentials||"same-origin",(N.headers||!this.headers)&&(this.headers=new d(N.headers)),this.method=O(N.method||this.method||"GET"),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(z)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function P(I){var N=new FormData;return I.trim().split("&").forEach(function(z){if(z){var Y=z.split("="),Q=Y.shift().replace(/\+/g," "),te=Y.join("=").replace(/\+/g," ");N.append(decodeURIComponent(Q),decodeURIComponent(te))}}),N}function L(I){var N=new d,z=I.replace(/\r?\n[\t ]+/g," ");return z.split(/\r?\n/).forEach(function(Y){var Q=Y.split(":"),te=Q.shift().trim();if(te){var _e=Q.join(":").trim();N.append(te,_e)}}),N}C.call(E.prototype);function R(I,N){N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in N?N.statusText:"OK",this.headers=new d(N.headers),this.url=N.url||"",this._initBody(I)}C.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},R.error=function(){var I=new R(null,{status:0,statusText:""});return I.type="error",I};var T=[301,302,303,307,308];R.redirect=function(I,N){if(T.indexOf(N)===-1)throw new RangeError("Invalid status code");return new R(null,{status:N,headers:{location:I}})},e.DOMException=t.DOMException;try{new e.DOMException}catch{e.DOMException=function(N,z){this.message=N,this.name=z;var Y=Error(N);this.stack=Y.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function M(I,N){return new Promise(function(z,Y){var Q=new E(I,N);if(Q.signal&&Q.signal.aborted)return Y(new e.DOMException("Aborted","AbortError"));var te=new XMLHttpRequest;function _e(){te.abort()}te.onload=function(){var Ae={status:te.status,statusText:te.statusText,headers:L(te.getAllResponseHeaders()||"")};Ae.url="responseURL"in te?te.responseURL:Ae.headers.get("X-Request-URL");var Be="response"in te?te.response:te.responseText;z(new R(Be,Ae))},te.onerror=function(){Y(new TypeError("Network request failed"))},te.ontimeout=function(){Y(new TypeError("Network request failed"))},te.onabort=function(){Y(new e.DOMException("Aborted","AbortError"))},te.open(Q.method,Q.url,!0),Q.credentials==="include"?te.withCredentials=!0:Q.credentials==="omit"&&(te.withCredentials=!1),"responseType"in te&&n.blob&&(te.responseType="blob"),Q.headers.forEach(function(Ae,Be){te.setRequestHeader(Be,Ae)}),Q.signal&&(Q.signal.addEventListener("abort",_e),te.onreadystatechange=function(){te.readyState===4&&Q.signal.removeEventListener("abort",_e)}),te.send(typeof Q._bodyInit>"u"?null:Q._bodyInit)})}return M.polyfill=!0,t.fetch||(t.fetch=M,t.Headers=d,t.Request=E,t.Response=R),e.Headers=d,e.Request=E,e.Response=R,e.fetch=M,Object.defineProperty(e,"__esModule",{value:!0}),e}({})})(typeof self<"u"?self:kP)});var mI=Te(iS=>{c();Object.defineProperty(iS,"__esModule",{value:!0});var rB=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},iB="src/index.js",aB=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),dI=k(),sB=lB(dI),cB=q();function lB(t){return t&&t.__esModule?t:{default:t}}function uB(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function dB(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function uI(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function pB(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var pI=function(t){pB(o,t);function o(){var e,n,r,i;dB(this,o);for(var a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];return i=(n=(r=uI(this,(e=o.__proto__||Object.getPrototypeOf(o)).call.apply(e,[this].concat(s))),r),r.state={width:1,height:1},r.measure=function(u){r.setState({width:u.nativeEvent.layout.width,height:u.nativeEvent.layout.height}),r.props.onLayout&&r.props.onLayout(u)},r.getAngle=function(){if(r.props.useAngle)return r.props.angle+"deg";var u=Math.atan2(r.state.width*(r.props.end.y-r.props.start.y),r.state.height*(r.props.end.x-r.props.start.x))+Math.PI/2;return u+"rad"},r.getColors=function(){return r.props.colors.map(function(u,d){var p=r.props.locations[d],f="";return p&&(f=" "+p*100+"%"),u+f}).join(",")},n),uI(r,i)}return aB(o,[{key:"render",value:function(){var n=this.props,r=n.start,i=n.end,a=n.colors,s=n.locations,l=n.useAngle,u=n.angleCenter,d=n.angle,p=n.style,f=n.children,m=uB(n,["start","end","colors","locations","useAngle","angleCenter","angle","style","children"]);return sB.default.createElement(cB.View,rB({},m,{style:[p,{backgroundImage:"linear-gradient("+this.getAngle()+","+this.getColors()+")"}],onLayout:this.measure,__source:{fileName:iB,lineNumber:76}}),f)}}]),o}(dI.PureComponent);pI.defaultProps={start:{x:.5,y:0},end:{x:.5,y:1},locations:[],colors:[],useAngle:!1,angle:0};iS.default=pI});var sE=Te((Zpe,$B)=>{$B.exports="https://app.gitbook.com/public/app/assets/youtube.raw-KIFNDQS6.svg"});var cE=Te((Jpe,ZB)=>{ZB.exports="https://app.gitbook.com/public/app/assets/soundcloud.raw-2NJLH377.svg"});var lE=Te((Qpe,JB)=>{JB.exports="https://app.gitbook.com/public/app/assets/loom.raw-3KUBFJOQ.svg"});var uE=Te((eme,QB)=>{QB.exports="https://app.gitbook.com/public/app/assets/github.raw-G362N2HA.svg"});var dE=Te((tme,e3)=>{e3.exports="https://app.gitbook.com/public/app/assets/github.dark.raw-A2MHFBQG.svg"});var pE=Te((ome,t3)=>{t3.exports="https://app.gitbook.com/public/app/assets/framer.raw-BZOKEAUJ.svg"});var mE=Te((nme,o3)=>{o3.exports="https://app.gitbook.com/public/app/assets/framer.dark.raw-HVTXI7EB.svg"});var fE=Te((rme,n3)=>{n3.exports="https://app.gitbook.com/public/app/assets/codepen.raw-PGSLYKJU.svg"});var gE=Te((ime,r3)=>{r3.exports="https://app.gitbook.com/public/app/assets/codepen.dark.raw-HNDMNQX3.svg"});var hE=Te((ame,i3)=>{i3.exports="https://app.gitbook.com/public/app/assets/dribbble.raw-KBB5DOUQ.svg"});var yE=Te((sme,a3)=>{a3.exports="https://app.gitbook.com/public/app/assets/trello.raw-5HIIOOAI.svg"});var vE=Te((cme,s3)=>{s3.exports="https://app.gitbook.com/public/app/assets/typeform.raw-74VPCTO6.svg"});var bE=Te((lme,c3)=>{c3.exports="https://app.gitbook.com/public/app/assets/typeform.dark.raw-47MGSH5W.svg"});var wE=Te((ume,l3)=>{l3.exports="https://app.gitbook.com/public/app/assets/google-docs.raw-I6UHVZFS.svg"});var SE=Te((dme,u3)=>{u3.exports="https://app.gitbook.com/public/app/assets/google-sheets.raw-IGZ6R7IJ.svg"});var CE=Te((pme,d3)=>{d3.exports="https://app.gitbook.com/public/app/assets/google-slides.raw-WGHORNC6.svg"});var kE=Te((mme,p3)=>{p3.exports="https://app.gitbook.com/public/app/assets/google-forms.raw-7C25TP6G.svg"});var WT=Te((nye,Q5)=>{Q5.exports={"100":"Continue","101":"Switching Protocols","102":"Processing","103":"Early Hints","200":"OK","201":"Created","202":"Accepted","203":"Non-Authoritative Information","204":"No Content","205":"Reset Content","206":"Partial Content","207":"Multi-Status","208":"Already Reported","226":"IM Used","300":"Multiple Choices","301":"Moved Permanently","302":"Found","303":"See Other","304":"Not Modified","305":"Use Proxy","307":"Temporary Redirect","308":"Permanent Redirect","400":"Bad Request","401":"Unauthorized","402":"Payment Required","403":"Forbidden","404":"Not Found","405":"Method Not Allowed","406":"Not Acceptable","407":"Proxy Authentication Required","408":"Request Timeout","409":"Conflict","410":"Gone","411":"Length Required","412":"Precondition Failed","413":"Payload Too Large","414":"URI Too Long","415":"Unsupported Media Type","416":"Range Not Satisfiable","417":"Expectation Failed","418":"I'm a Teapot","421":"Misdirected Request","422":"Unprocessable Entity","423":"Locked","424":"Failed Dependency","425":"Too Early","426":"Upgrade Required","428":"Precondition Required","429":"Too Many Requests","431":"Request Header Fields Too Large","451":"Unavailable For Legal Reasons","500":"Internal Server Error","501":"Not Implemented","502":"Bad Gateway","503":"Service Unavailable","504":"Gateway Timeout","505":"HTTP Version Not Supported","506":"Variant Also Negotiates","507":"Insufficient Storage","508":"Loop Detected","509":"Bandwidth Limit Exceeded","510":"Not Extended","511":"Network Authentication Required"}});var VT=Te((rye,FT)=>{"use strict";c();var XS=WT();FT.exports=da;da.message=XS;da.code=eW(XS);da.codes=tW(XS);da.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};da.empty={204:!0,205:!0,304:!0};da.retry={502:!0,503:!0,504:!0};function eW(t){var o={};return Object.keys(t).forEach(function(n){var r=t[n],i=Number(n);o[r.toLowerCase()]=i}),o}function tW(t){return Object.keys(t).map(function(e){return Number(e)})}function oW(t){var o=t.toLowerCase();if(!Object.prototype.hasOwnProperty.call(da.code,o))throw new Error('invalid status message: "'+t+'"');return da.code[o]}function zT(t){if(!Object.prototype.hasOwnProperty.call(da.message,t))throw new Error("invalid status code: "+t);return da.message[t]}function da(t){if(typeof t=="number")return zT(t);if(typeof t!="string")throw new TypeError("code must be a number or string");var o=parseInt(t,10);return isNaN(o)?oW(t):zT(o)}});var pM=Te((Vy,dM)=>{c();(function(t,o){typeof define=="function"&&define.amd?define(o):typeof Vy=="object"&&typeof Vy.nodeName!="string"?dM.exports=o():t.RangeFix=o()})(Vy,function(){var t,o={};o.isBroken=function(){var r,i,a,s,l,u,d,p;return t===void 0&&(i=document.createElement("p"),a=document.createElement("span"),s=document.createTextNode("aa"),l=document.createTextNode("aa"),u=document.createElement("img"),u.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="),d=document.createRange(),t={},i.appendChild(s),i.appendChild(a),a.appendChild(u),a.appendChild(l),document.body.appendChild(i),d.setStart(s,1),d.setEnd(a,0),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length>1,t.getClientRects||(d.setEnd(l,1),t.getClientRects=t.getBoundingClientRect=d.getClientRects().length===2),t.getBoundingClientRect||(d.setEnd(d.startContainer,d.startOffset),r=d.getBoundingClientRect(),t.getBoundingClientRect=r.top===0&&r.left===0),document.body.removeChild(i),p=window.ActiveXObject&&new Function("/*@cc_on return @_jscript_version; @*/")(),t.ieZoom=!!p&&p<=10),t};function e(r){var i;return!r||screen.deviceXDPI===screen.logicalXDPI?r:"length"in r?Array.prototype.map.call(r,e):(i=screen.deviceXDPI/screen.logicalXDPI,{top:r.top/i,bottom:r.bottom/i,left:r.left/i,right:r.right/i,width:r.width/i,height:r.height/i})}function n(r,i){var a,s=0,l=1024;if(l>=i.length)return Array.prototype.push.apply(r,i);for(;s<i.length;)a=Array.prototype.push.apply(r,Array.prototype.slice.call(i,s,s+l)),s+=l;return a}return o.getClientRects=function(r){var i,a,s,l,u,d=this.isBroken();if(d.ieZoom)return e(r.getClientRects());if(!d.getClientRects)return r.getClientRects();i=[],s=[],a=r.endContainer,l=r.endOffset,u=document.createRange();function p(f){for(var m=0;f=f.previousSibling;)m++;return m}for(;a!==r.commonAncestorContainer;)u.setStart(a,0),u.setEnd(a,l),n(s,u.getClientRects()),l=p(a),a=a.parentNode;return u=r.cloneRange(),u.setEnd(a,l),n(i,u.getClientRects()),n(i,s),i},o.getBoundingClientRect=function(r){var i,a,s,l,u,d,p=this.getClientRects(r);if(p.length===0)return null;if(u=r.getBoundingClientRect(),d=this.isBroken(),d.ieZoom)return e(u);if(!d.getBoundingClientRect)return u;if(u.width===0&&u.height===0)return p[0];for(i=0,a=p.length;i<a;i++)l=p[i],s?(s.left=Math.min(s.left,l.left),s.top=Math.min(s.top,l.top),s.right=Math.max(s.right,l.right),s.bottom=Math.max(s.bottom,l.bottom)):s={left:l.left,top:l.top,right:l.right,bottom:l.bottom};return s&&(s.width=s.right-s.left,s.height=s.bottom-s.top),s},o})});var f6=Te((JMe,rF)=>{rF.exports="https://app.gitbook.com/public/app/assets/default-page-cover-K4LPTE6Y.png"});var aN=Te((N3e,iN)=>{"use strict";c();var XV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";iN.exports=XV});var uN=Te((D3e,lN)=>{"use strict";c();var UV=aN();function sN(){}function cN(){}cN.resetWarningCache=sN;lN.exports=function(){function t(n,r,i,a,s,l){if(l!==UV){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function o(){return t}var e={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:o,element:t,elementType:t,instanceOf:o,node:t,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:cN,resetWarningCache:sN};return e.PropTypes=e,e}});var pN=Te((F3e,dN)=>{c();dN.exports=uN()();var W3e,z3e});var bN=Te(JC=>{"use strict";c();Object.defineProperty(JC,"__esModule",{value:!0});var $C=Object.assign||function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},YV=function(){function t(o,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(o,r.key,r)}}return function(o,e,n){return e&&t(o.prototype,e),n&&t(o,n),o}}(),hN=k(),Pf=yN(hN),jV=pN(),Go=yN(jV);function yN(t){return t&&t.__esModule?t:{default:t}}function $V(t,o){var e={};for(var n in t)o.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function ZV(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function JV(t,o){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o&&(typeof o=="object"||typeof o=="function")?o:t}function QV(t,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof o);t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o&&(Object.setPrototypeOf?Object.setPrototypeOf(t,o):t.__proto__=o)}var mN={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},eq=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],tq=function(o){return eq.forEach(function(e){return delete o[e]}),o},fN=function(o,e){e.style.fontSize=o.fontSize,e.style.fontFamily=o.fontFamily,e.style.fontWeight=o.fontWeight,e.style.fontStyle=o.fontStyle,e.style.letterSpacing=o.letterSpacing,e.style.textTransform=o.textTransform},vN=typeof window<"u"&&window.navigator?/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent):!1,gN=function(){return vN?"_"+Math.random().toString(36).substr(2,12):void 0},ZC=function(t){QV(o,t);function o(e){ZV(this,o);var n=JV(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.inputRef=function(r){n.input=r,typeof n.props.inputRef=="function"&&n.props.inputRef(r)},n.placeHolderSizerRef=function(r){n.placeHolderSizer=r},n.sizerRef=function(r){n.sizer=r},n.state={inputWidth:e.minWidth,inputId:e.id||gN()},n}return YV(o,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"UNSAFE_componentWillReceiveProps",value:function(n){var r=n.id;r!==this.props.id&&this.setState({inputId:r||gN()})}},{key:"componentDidUpdate",value:function(n,r){r.inputWidth!==this.state.inputWidth&&typeof this.props.onAutosize=="function"&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(!(!this.mounted||!window.getComputedStyle)){var n=this.input&&window.getComputedStyle(this.input);n&&(fN(n,this.sizer),this.placeHolderSizer&&fN(n,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(!(!this.mounted||!this.sizer||typeof this.sizer.scrollWidth>"u")){var n=void 0;this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?n=Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:n=this.sizer.scrollWidth+2;var r=this.props.type==="number"&&this.props.extraWidth===void 0?16:parseInt(this.props.extraWidth)||0;n+=r,n<this.props.minWidth&&(n=this.props.minWidth),n!==this.state.inputWidth&&this.setState({inputWidth:n})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var n=this.props.injectStyles;return vN&&n?Pf.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var n=[this.props.defaultValue,this.props.value,""].reduce(function(s,l){return s??l}),r=$C({},this.props.style);r.display||(r.display="inline-block");var i=$C({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=$V(this.props,[]);return tq(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=i,Pf.default.createElement("div",{className:this.props.className,style:r},this.renderStyles(),Pf.default.createElement("input",$C({},a,{ref:this.inputRef})),Pf.default.createElement("div",{ref:this.sizerRef,style:mN},n),this.props.placeholder?Pf.default.createElement("div",{ref:this.placeHolderSizerRef,style:mN},this.props.placeholder):null)}}]),o}(hN.Component);ZC.propTypes={className:Go.default.string,defaultValue:Go.default.any,extraWidth:Go.default.oneOfType([Go.default.number,Go.default.string]),id:Go.default.string,injectStyles:Go.default.bool,inputClassName:Go.default.string,inputRef:Go.default.func,inputStyle:Go.default.object,minWidth:Go.default.oneOfType([Go.default.number,Go.default.string]),onAutosize:Go.default.func,onChange:Go.default.func,placeholder:Go.default.string,placeholderIsMinWidth:Go.default.bool,style:Go.default.object,value:Go.default.any};ZC.defaultProps={minWidth:1,injectStyles:!0};JC.default=ZC});var A2=Te(Bk=>{"use strict";c();Object.defineProperty(Bk,"__esModule",{value:!0});var hG={justifyContent:"center",alignItems:"center",overflow:"hidden",backgroundColor:"transparent"};Bk.default={container:hG}});var Wk=Te(wp=>{"use strict";c();Object.defineProperty(wp,"__esModule",{value:!0});wp.ImageZoomState=wp.ImageZoomProps=void 0;var yG=function(){function t(){this.cropWidth=100,this.cropHeight=100,this.imageWidth=100,this.imageHeight=100,this.panToMove=!0,this.pinchToZoom=!0,this.enableDoubleClickZoom=!0,this.clickDistance=10,this.maxOverflow=100,this.longPressTime=800,this.doubleClickInterval=175,this.style={},this.swipeDownThreshold=230,this.enableSwipeDown=!1,this.enableCenterFocus=!0,this.useHardwareTextureAndroid=!0,this.minScale=.6,this.maxScale=10,this.useNativeDriver=!1,this.onClick=function(){},this.onDoubleClick=function(){},this.onLongPress=function(){},this.horizontalOuterRangeOffset=function(){},this.onDragLeft=function(){},this.responderRelease=function(){},this.onMove=function(){},this.layoutChange=function(){},this.onSwipeDown=function(){},this.onStartShouldSetPanResponder=function(){return!0},this.onPanResponderTerminationRequest=function(){return!1}}return t}();wp.ImageZoomProps=yG;var vG=function(){function t(){this.centerX=.5,this.centerY=.5}return t}();wp.ImageZoomState=vG});var B2=Te(ku=>{"use strict";c();var bG=ku&&ku.__extends||function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},t(o,e)};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Vf=ku&&ku.__assign||function(){return Vf=Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},Vf.apply(this,arguments)};Object.defineProperty(ku,"__esModule",{value:!0});var Tb=k(),jt=q(),wG=A2(),D2=Wk(),SG=function(t){bG(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new D2.ImageZoomState,e.lastPositionX=null,e.positionX=0,e.animatedPositionX=new jt.Animated.Value(0),e.lastPositionY=null,e.positionY=0,e.animatedPositionY=new jt.Animated.Value(0),e.scale=1,e.animatedScale=new jt.Animated.Value(1),e.zoomLastDistance=null,e.zoomCurrentDistance=0,e.lastTouchStartTime=0,e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.centerDiffX=0,e.centerDiffY=0,e.lastClickTime=0,e.doubleClickX=0,e.doubleClickY=0,e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.imagePanResponder=jt.PanResponder.create({onStartShouldSetPanResponder:e.props.onStartShouldSetPanResponder,onPanResponderTerminationRequest:e.props.onPanResponderTerminationRequest,onMoveShouldSetPanResponder:e.props.onMoveShouldSetPanResponder,onPanResponderGrant:function(n){if(e.lastPositionX=null,e.lastPositionY=null,e.zoomLastDistance=null,e.horizontalWholeCounter=0,e.verticalWholeCounter=0,e.lastTouchStartTime=new Date().getTime(),e.isDoubleClick=!1,e.isLongPress=!1,e.isHorizontalWrap=!1,e.singleClickTimeout&&clearTimeout(e.singleClickTimeout),n.nativeEvent.changedTouches.length>1){var r=(n.nativeEvent.changedTouches[0].pageX+n.nativeEvent.changedTouches[1].pageX)/2;e.centerDiffX=r-e.props.cropWidth/2;var i=(n.nativeEvent.changedTouches[0].pageY+n.nativeEvent.changedTouches[1].pageY)/2;e.centerDiffY=i-e.props.cropHeight/2}e.longPressTimeout&&clearTimeout(e.longPressTimeout);var a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;if(e.longPressTimeout=setTimeout(function(){e.isLongPress=!0,e.props.onLongPress&&e.props.onLongPress({locationX:s,locationY:l,pageX:u,pageY:d})},e.props.longPressTime),n.nativeEvent.changedTouches.length<=1)if(new Date().getTime()-e.lastClickTime<(e.props.doubleClickInterval||0)){if(e.lastClickTime=0,e.doubleClickX=n.nativeEvent.changedTouches[0].pageX,e.doubleClickY=n.nativeEvent.changedTouches[0].pageY,e.props.onDoubleClick&&e.props.onDoubleClick({locationX:n.nativeEvent.changedTouches[0].locationX,locationY:n.nativeEvent.changedTouches[0].locationY,pageX:e.doubleClickX,pageY:e.doubleClickY}),clearTimeout(e.longPressTimeout),e.isDoubleClick=!0,e.props.enableDoubleClickZoom){if(e.scale>1||e.scale<1)e.scale=1,e.positionX=0,e.positionY=0;else{var p=e.scale;e.scale=2;var f=e.scale-p;e.positionX=(e.props.cropWidth/2-e.doubleClickX)*f/e.scale,e.positionY=(e.props.cropHeight/2-e.doubleClickY)*f/e.scale}e.imageDidMove("centerOn"),jt.Animated.parallel([jt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}),jt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}),jt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver})]).start()}}else e.lastClickTime=new Date().getTime()},onPanResponderMove:function(n,r){if(!e.isDoubleClick){if(n.nativeEvent.changedTouches.length<=1){var i=r.dx-(e.lastPositionX||0);e.lastPositionX===null&&(i=0);var a=r.dy-(e.lastPositionY||0);if(e.lastPositionY===null&&(a=0),e.lastPositionX=r.dx,e.lastPositionY=r.dy,e.horizontalWholeCounter+=i,e.verticalWholeCounter+=a,(Math.abs(e.horizontalWholeCounter)>5||Math.abs(e.verticalWholeCounter)>5)&&clearTimeout(e.longPressTimeout),e.props.panToMove){if(e.swipeDownOffset===0){if(Math.abs(i)>Math.abs(a)&&(e.isHorizontalWrap=!0),e.props.imageWidth*e.scale>e.props.cropWidth){e.horizontalWholeOuterCounter>0?i<0?e.horizontalWholeOuterCounter>Math.abs(i)?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i:e.horizontalWholeOuterCounter<0&&(i>0?Math.abs(e.horizontalWholeOuterCounter)>i?(e.horizontalWholeOuterCounter+=i,i=0):(i+=e.horizontalWholeOuterCounter,e.horizontalWholeOuterCounter=0,e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(0)):e.horizontalWholeOuterCounter+=i),e.positionX+=i/e.scale;var s=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-s?(e.positionX=-s,e.horizontalWholeOuterCounter+=-1/1e10):e.positionX>s&&(e.positionX=s,e.horizontalWholeOuterCounter+=1/1e10),e.animatedPositionX.setValue(e.positionX)}else e.horizontalWholeOuterCounter+=i;e.horizontalWholeOuterCounter>(e.props.maxOverflow||0)?e.horizontalWholeOuterCounter=e.props.maxOverflow||0:e.horizontalWholeOuterCounter<-(e.props.maxOverflow||0)&&(e.horizontalWholeOuterCounter=-(e.props.maxOverflow||0)),e.horizontalWholeOuterCounter!==0&&e.props.horizontalOuterRangeOffset&&e.props.horizontalOuterRangeOffset(e.horizontalWholeOuterCounter)}e.props.imageHeight*e.scale>e.props.cropHeight?(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY)):e.props.enableSwipeDown&&!e.isHorizontalWrap&&(e.swipeDownOffset+=a,e.swipeDownOffset>0&&(e.positionY+=a/e.scale,e.animatedPositionY.setValue(e.positionY),e.scale=e.scale-a/1e3,e.animatedScale.setValue(e.scale)))}}else if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),e.props.pinchToZoom){var l=void 0,u=void 0;n.nativeEvent.changedTouches[0].locationX>n.nativeEvent.changedTouches[1].locationX?(l=n.nativeEvent.changedTouches[1].pageX,u=n.nativeEvent.changedTouches[0].pageX):(l=n.nativeEvent.changedTouches[0].pageX,u=n.nativeEvent.changedTouches[1].pageX);var d=void 0,p=void 0;n.nativeEvent.changedTouches[0].locationY>n.nativeEvent.changedTouches[1].locationY?(d=n.nativeEvent.changedTouches[1].pageY,p=n.nativeEvent.changedTouches[0].pageY):(d=n.nativeEvent.changedTouches[0].pageY,p=n.nativeEvent.changedTouches[1].pageY);var f=u-l,m=p-d,h=Math.sqrt(f*f+m*m);if(e.zoomCurrentDistance=Number(h.toFixed(1)),e.zoomLastDistance!==null){var y=(e.zoomCurrentDistance-e.zoomLastDistance)/200,S=e.scale+y;S<(e.props.minScale||0)&&(S=e.props.minScale||0),S>(e.props.maxScale||0)&&(S=e.props.maxScale||0);var C=e.scale;e.scale=S,e.animatedScale.setValue(e.scale);var x=e.scale-C;e.positionX-=e.centerDiffX*x/e.scale,e.positionY-=e.centerDiffY*x/e.scale,e.animatedPositionX.setValue(e.positionX),e.animatedPositionY.setValue(e.positionY)}e.zoomLastDistance=e.zoomCurrentDistance}e.imageDidMove("onPanResponderMove")}},onPanResponderRelease:function(n,r){if(e.longPressTimeout&&clearTimeout(e.longPressTimeout),!e.isDoubleClick&&!e.isLongPress){var i=Math.sqrt(r.dx*r.dx+r.dy*r.dy),a=n.nativeEvent,s=a.locationX,l=a.locationY,u=a.pageX,d=a.pageY;n.nativeEvent.changedTouches.length===1&&i<(e.props.clickDistance||0)?e.singleClickTimeout=setTimeout(function(){e.props.onClick&&e.props.onClick({locationX:s,locationY:l,pageX:u,pageY:d})},e.props.doubleClickInterval):(e.props.responderRelease&&e.props.responderRelease(r.vx,e.scale),e.panResponderReleaseResolve())}},onPanResponderTerminate:function(){}}),e.resetScale=function(){e.positionX=0,e.positionY=0,e.scale=1,e.animatedScale.setValue(1)},e.panResponderReleaseResolve=function(){if(e.props.enableSwipeDown&&e.props.swipeDownThreshold&&e.swipeDownOffset>e.props.swipeDownThreshold){e.props.onSwipeDown&&e.props.onSwipeDown();return}if(e.props.enableCenterFocus&&e.scale<1&&(e.scale=1,jt.Animated.timing(e.animatedScale,{toValue:e.scale,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageWidth*e.scale<=e.props.cropWidth&&(e.positionX=0,jt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale<=e.props.cropHeight&&(e.positionY=0,jt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.props.imageHeight*e.scale>e.props.cropHeight){var n=(e.props.imageHeight*e.scale-e.props.cropHeight)/2/e.scale;e.positionY<-n?e.positionY=-n:e.positionY>n&&(e.positionY=n),jt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}if(e.props.imageWidth*e.scale>e.props.cropWidth){var r=(e.props.imageWidth*e.scale-e.props.cropWidth)/2/e.scale;e.positionX<-r?e.positionX=-r:e.positionX>r&&(e.positionX=r),jt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()}e.props.enableCenterFocus&&e.scale===1&&(e.positionX=0,e.positionY=0,jt.Animated.timing(e.animatedPositionX,{toValue:e.positionX,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start(),jt.Animated.timing(e.animatedPositionY,{toValue:e.positionY,duration:100,useNativeDriver:!!e.props.useNativeDriver}).start()),e.horizontalWholeOuterCounter=0,e.swipeDownOffset=0,e.imageDidMove("onPanResponderRelease")},e}return o.prototype.componentDidMount=function(){this.props.centerOn&&this.centerOn(this.props.centerOn)},o.prototype.componentDidUpdate=function(e){(this.props.centerOn&&!e.centerOn||this.props.centerOn&&e.centerOn&&this.didCenterOnChange(e.centerOn,this.props.centerOn))&&this.centerOn(this.props.centerOn)},o.prototype.imageDidMove=function(e){this.props.onMove&&this.props.onMove({type:e,positionX:this.positionX,positionY:this.positionY,scale:this.scale,zoomCurrentDistance:this.zoomCurrentDistance})},o.prototype.didCenterOnChange=function(e,n){return e.x!==n.x||e.y!==n.y||e.scale!==n.scale},o.prototype.centerOn=function(e){var n=this;this.positionX=e.x,this.positionY=e.y,this.scale=e.scale;var r=e.duration||300;jt.Animated.parallel([jt.Animated.timing(this.animatedScale,{toValue:this.scale,duration:r,useNativeDriver:!!this.props.useNativeDriver}),jt.Animated.timing(this.animatedPositionX,{toValue:this.positionX,duration:r,useNativeDriver:!!this.props.useNativeDriver}),jt.Animated.timing(this.animatedPositionY,{toValue:this.positionY,duration:r,useNativeDriver:!!this.props.useNativeDriver})]).start(function(){n.imageDidMove("centerOn")})},o.prototype.handleLayout=function(e){this.props.layoutChange&&this.props.layoutChange(e)},o.prototype.reset=function(){this.scale=1,this.animatedScale.setValue(this.scale),this.positionX=0,this.animatedPositionX.setValue(this.positionX),this.positionY=0,this.animatedPositionY.setValue(this.positionY)},o.prototype.render=function(){var e={transform:[{scale:this.animatedScale},{translateX:this.animatedPositionX},{translateY:this.animatedPositionY}]},n=jt.StyleSheet.flatten(this.props.style);return Tb.createElement(jt.View,{style:Vf(Vf(Vf({},wG.default.container),n),{width:this.props.cropWidth,height:this.props.cropHeight}),...this.imagePanResponder.panHandlers},Tb.createElement(jt.Animated.View,{style:e,renderToHardwareTextureAndroid:this.props.useHardwareTextureAndroid},Tb.createElement(jt.View,{onLayout:this.handleLayout.bind(this),style:{width:this.props.imageWidth,height:this.props.imageHeight}},this.props.children)))},o.defaultProps=new D2.ImageZoomProps,o}(Tb.Component);ku.default=SG});var W2=Te(dl=>{"use strict";c();var CG=dl&&dl.__createBinding||(Object.create?function(t,o,e,n){n===void 0&&(n=e),Object.defineProperty(t,n,{enumerable:!0,get:function(){return o[e]}})}:function(t,o,e,n){n===void 0&&(n=e),t[n]=o[e]}),kG=dl&&dl.__exportStar||function(t,o){for(var e in t)e!=="default"&&!o.hasOwnProperty(e)&&CG(o,t,e)};Object.defineProperty(dl,"__esModule",{value:!0});var xG=B2();dl.default=xG.default;kG(Wk(),dl)});var zk=Te(Mb=>{"use strict";c();Object.defineProperty(Mb,"__esModule",{value:!0});Mb.default=function(t,o,e){return{modalContainer:{backgroundColor:e,justifyContent:"center",alignItems:"center",overflow:"hidden"},watchOrigin:{position:"absolute",width:t,bottom:20,justifyContent:"center",alignItems:"center"},watchOriginTouchable:{paddingLeft:10,paddingRight:10,paddingTop:5,paddingBottom:5,borderRadius:30,borderColor:"white",borderWidth:.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},watchOriginText:{color:"white",backgroundColor:"transparent"},imageStyle:{},container:{backgroundColor:e},moveBox:{flexDirection:"row",alignItems:"center"},menuContainer:{position:"absolute",width:t,height:o,left:0,bottom:0,zIndex:12},menuShadow:{position:"absolute",width:t,height:o,backgroundColor:"black",left:0,bottom:0,opacity:.2,zIndex:10},menuContent:{position:"absolute",width:t,left:0,bottom:0,zIndex:11},operateContainer:{justifyContent:"center",alignItems:"center",backgroundColor:"white",height:40,borderBottomColor:"#ccc",borderBottomWidth:1},operateText:{color:"#333"},loadingTouchable:{width:t,height:o},loadingContainer:{flex:1,justifyContent:"center",alignItems:"center"},arrowLeftContainer:{position:"absolute",top:0,bottom:0,left:0,justifyContent:"center",zIndex:13},arrowRightContainer:{position:"absolute",top:0,bottom:0,right:0,justifyContent:"center",zIndex:13}}};Mb.simpleStyle={count:{position:"absolute",left:0,right:0,top:38,zIndex:13,justifyContent:"center",alignItems:"center",backgroundColor:"transparent"},countText:{color:"white",fontSize:16,backgroundColor:"transparent",textShadowColor:"rgba(0, 0, 0, 0.3)",textShadowOffset:{width:0,height:.5},textShadowRadius:0}}});var qk=Te(Lb=>{"use strict";c();Object.defineProperty(Lb,"__esModule",{value:!0});var Fk=k(),Vk=q(),z2=zk(),OG=function(){function t(){this.show=!1,this.imageUrls=[],this.flipThreshold=80,this.maxOverflow=300,this.index=0,this.failImageSource=void 0,this.backgroundColor="black",this.footerContainerStyle={},this.menuContext={saveToLocal:"save to the album",cancel:"cancel"},this.saveToLocalByLongPress=!0,this.enableImageZoom=!0,this.style={},this.enableSwipeDown=!1,this.enablePreload=!1,this.pageAnimateTime=100,this.useNativeDriver=!1,this.onLongPress=function(){},this.onClick=function(){},this.onDoubleClick=function(){},this.onSave=function(){},this.onMove=function(){},this.renderHeader=function(){return null},this.renderFooter=function(){return null},this.renderIndicator=function(o,e){return Fk.createElement(Vk.View,{style:z2.simpleStyle.count},Fk.createElement(Vk.Text,{style:z2.simpleStyle.countText},o+"/"+e))},this.renderImage=function(o){return Fk.createElement(Vk.Image,o)},this.renderArrowLeft=function(){return null},this.renderArrowRight=function(){return null},this.onShowModal=function(){},this.onCancel=function(){},this.onSwipeDown=function(){},this.loadingRender=function(){return null},this.onSaveToCamera=function(){},this.onChange=function(){}}return t}();Lb.Props=OG;var _G=function(){function t(){this.show=!1,this.currentShowIndex=0,this.prevIndexProp=0,this.imageLoaded=!1,this.imageSizes=[],this.isShowMenu=!1}return t}();Lb.State=_G});var q2=Te(ac=>{"use strict";c();var RG=ac&&ac.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,e){o.__proto__=e}||function(o,e){for(var n in e)e.hasOwnProperty(n)&&(o[n]=e[n])};return function(o,e){t(o,e);function n(){this.constructor=o}o.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),xu=ac&&ac.__assign||Object.assign||function(t){for(var o,e=1,n=arguments.length;e<n;e++){o=arguments[e];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])}return t},PG=ac&&ac.__rest||function(t,o){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)o.indexOf(n[r])<0&&(e[n[r]]=t[n[r]]);return e};Object.defineProperty(ac,"__esModule",{value:!0});var it=k(),Se=q(),F2=W2(),V2=zk(),Gk=qk(),IG=function(t){RG(o,t);function o(){var e=t!==null&&t.apply(this,arguments)||this;return e.state=new Gk.State,e.fadeAnim=new Se.Animated.Value(0),e.standardPositionX=0,e.positionXNumber=0,e.positionX=new Se.Animated.Value(0),e.width=0,e.height=0,e.styles=V2.default(0,0,"transparent"),e.hasLayout=!1,e.loadedIndex=new Map,e.handleLongPressWithIndex=new Map,e.imageRefs=[],e.resetImageByIndex=function(n){e.imageRefs[n]&&e.imageRefs[n].reset()},e.preloadImage=function(n){n<e.state.imageSizes.length&&e.loadImage(n+1)},e.handleHorizontalOuterRangeOffset=function(n){n===void 0&&(n=0),e.positionXNumber=e.standardPositionX+n,e.positionX.setValue(e.positionXNumber);var r=Se.I18nManager.isRTL?-n:n;r<0?(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1):r>0&&(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1)},e.handleResponderRelease=function(n){n===void 0&&(n=0);var r=Se.I18nManager.isRTL?-n:n,i=Se.I18nManager.isRTL?e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0),a=Se.I18nManager.isRTL?e.positionXNumber-e.standardPositionX>(e.props.flipThreshold||0):e.positionXNumber-e.standardPositionX<-(e.props.flipThreshold||0);if(r>.7){e.goBack.call(e),(e.state.currentShowIndex||0>0)&&e.loadImage((e.state.currentShowIndex||0)-1);return}else if(r<-.7){e.goNext.call(e),(e.state.currentShowIndex||0<e.props.imageUrls.length-1)&&e.loadImage((e.state.currentShowIndex||0)+1);return}if(i)e.goBack.call(e);else if(a){e.goNext.call(e);return}else{e.resetPosition.call(e);return}},e.goBack=function(){if(e.state.currentShowIndex===0){e.resetPosition.call(e);return}e.positionXNumber=Se.I18nManager.isRTL?e.standardPositionX-e.width:e.standardPositionX+e.width,e.standardPositionX=e.positionXNumber,Se.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)-1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.goNext=function(){if(e.state.currentShowIndex===e.props.imageUrls.length-1){e.resetPosition.call(e);return}e.positionXNumber=Se.I18nManager.isRTL?e.standardPositionX+e.width:e.standardPositionX-e.width,e.standardPositionX=e.positionXNumber,Se.Animated.timing(e.positionX,{toValue:e.positionXNumber,duration:e.props.pageAnimateTime,useNativeDriver:!!e.props.useNativeDriver}).start();var n=(e.state.currentShowIndex||0)+1;e.setState({currentShowIndex:n},function(){e.props.onChange&&e.props.onChange(e.state.currentShowIndex)})},e.handleLongPress=function(n){e.props.saveToLocalByLongPress&&e.setState({isShowMenu:!0}),e.props.onLongPress&&e.props.onLongPress(n)},e.handleClick=function(){e.props.onClick&&e.props.onClick(e.handleCancel,e.state.currentShowIndex)},e.handleDoubleClick=function(){e.props.onDoubleClick&&e.props.onDoubleClick(e.handleCancel)},e.handleCancel=function(){e.hasLayout=!1,e.props.onCancel&&e.props.onCancel()},e.handleLayout=function(n){n.nativeEvent.layout.width!==e.width&&(e.hasLayout=!0,e.width=n.nativeEvent.layout.width,e.height=n.nativeEvent.layout.height,e.styles=V2.default(e.width,e.height,e.props.backgroundColor||"transparent"),e.forceUpdate(),e.jumpToCurrentImage())},e.saveToLocal=function(){e.props.onSave?e.props.onSave(e.props.imageUrls[e.state.currentShowIndex||0].url):(Se.CameraRoll.saveToCameraRoll(e.props.imageUrls[e.state.currentShowIndex||0].url),e.props.onSaveToCamera(e.state.currentShowIndex)),e.setState({isShowMenu:!1})},e.handleLeaveMenu=function(){e.setState({isShowMenu:!1})},e.handleSwipeDown=function(){e.props.onSwipeDown&&e.props.onSwipeDown(),e.handleCancel()},e}return o.prototype.componentDidMount=function(){this.init(this.props)},o.getDerivedStateFromProps=function(e,n){return e.index!==n.prevIndexProp?{currentShowIndex:e.index,prevIndexProp:e.index}:null},o.prototype.componentDidUpdate=function(e,n){e.index!==this.props.index&&(this.loadImage(this.props.index||0),this.jumpToCurrentImage(),Se.Animated.timing(this.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!this.props.useNativeDriver}).start())},o.prototype.init=function(e){var n=this;if(e.imageUrls.length===0)return this.fadeAnim.setValue(0),this.setState(new Gk.State);var r=[];e.imageUrls.forEach(function(i){r.push({width:i.width||0,height:i.height||0,status:"loading"})}),this.setState({currentShowIndex:e.index,prevIndexProp:e.index||0,imageSizes:r},function(){n.loadImage(e.index||0),n.jumpToCurrentImage(),Se.Animated.timing(n.fadeAnim,{toValue:1,duration:200,useNativeDriver:!!e.useNativeDriver}).start()})},o.prototype.jumpToCurrentImage=function(){this.positionXNumber=this.width*(this.state.currentShowIndex||0)*(Se.I18nManager.isRTL?1:-1),this.standardPositionX=this.positionXNumber,this.positionX.setValue(this.positionXNumber)},o.prototype.loadImage=function(e){var n=this;if(this.state.imageSizes[e]&&!this.loadedIndex.has(e)){this.loadedIndex.set(e,!0);var r=this.props.imageUrls[e],i=xu({},this.state.imageSizes[e]),a=function(){if(!(n.state.imageSizes[e]&&n.state.imageSizes[e].status!=="loading")){var u=n.state.imageSizes.slice();u[e]=i,n.setState({imageSizes:u})}};if(this.state.imageSizes[e].status!=="success"){if(this.state.imageSizes[e].width>0&&this.state.imageSizes[e].height>0){i.status="success",a();return}var s=!1,l=!1;if((!r.url||r.url.startsWith("file:"))&&(l=!0),r.width&&r.height){this.props.enablePreload&&l===!1&&Se.Image.prefetch(r.url),i.width=r.width,i.height=r.height,i.status="success",a();return}Se.Image.getSize(r.url,function(u,d){i.width=u,i.height=d,i.status="success",a()},function(){try{var u=Se.Image.resolveAssetSource(r.props.source);i.width=u.width,i.height=u.height,i.status="success",a()}catch{i.status="fail",a()}})}}},o.prototype.resetPosition=function(){this.positionXNumber=this.standardPositionX,Se.Animated.timing(this.positionX,{toValue:this.standardPositionX,duration:150,useNativeDriver:!!this.props.useNativeDriver}).start()},o.prototype.getContent=function(){var e=this,n=this.width,r=this.height,i=this.props.imageUrls.map(function(a,s){if((e.state.currentShowIndex||0)>s+1||(e.state.currentShowIndex||0)<s-1)return it.createElement(Se.View,{key:s,style:{width:n,height:r}});e.handleLongPressWithIndex.has(s)||e.handleLongPressWithIndex.set(s,e.handleLongPress.bind(e,a));var l=e.state.imageSizes[s]&&e.state.imageSizes[s].width,u=e.state.imageSizes[s]&&e.state.imageSizes[s].height,d=e.state.imageSizes[s];if(!d||!d.status)return it.createElement(Se.View,{key:s,style:{width:n,height:r}});if(l>n){var p=n/l;l*=p,u*=p}if(u>r){var f=r/u;l*=f,u*=f}var m=function(h){var y=h.children,S=PG(h,["children"]);return it.createElement(F2.default,{cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(s),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,pinchToZoom:e.props.enableImageZoom,enableDoubleClickZoom:e.props.enableImageZoom,doubleClickInterval:e.props.doubleClickInterval,...S},y)};switch(d.status){case"loading":return it.createElement(m,{key:s,style:xu({},e.styles.modalContainer,e.styles.loadingContainer),imageWidth:n,imageHeight:r},it.createElement(Se.View,{style:e.styles.loadingContainer},e.props.loadingRender()));case"success":return a.props||(a.props={}),a.props.style||(a.props.style={}),a.props.style=xu({},e.styles.imageStyle,a.props.style,{width:l,height:u}),typeof a.props.source=="number"||(a.props.source||(a.props.source={}),a.props.source=xu({uri:a.url},a.props.source)),e.props.enablePreload&&e.preloadImage(e.state.currentShowIndex||0),it.createElement(F2.default,{key:s,ref:function(h){return e.imageRefs[s]=h},cropWidth:e.width,cropHeight:e.height,maxOverflow:e.props.maxOverflow,horizontalOuterRangeOffset:e.handleHorizontalOuterRangeOffset,responderRelease:e.handleResponderRelease,onMove:e.props.onMove,onLongPress:e.handleLongPressWithIndex.get(s),onClick:e.handleClick,onDoubleClick:e.handleDoubleClick,imageWidth:l,imageHeight:u,enableSwipeDown:e.props.enableSwipeDown,swipeDownThreshold:e.props.swipeDownThreshold,onSwipeDown:e.handleSwipeDown,panToMove:!e.state.isShowMenu,pinchToZoom:e.props.enableImageZoom&&!e.state.isShowMenu,enableDoubleClickZoom:e.props.enableImageZoom&&!e.state.isShowMenu,doubleClickInterval:e.props.doubleClickInterval,minScale:e.props.minScale,maxScale:e.props.maxScale},e.props.renderImage(a.props));case"fail":return it.createElement(m,{key:s,style:e.styles.modalContainer,imageWidth:e.props.failImageSource?e.props.failImageSource.width:n,imageHeight:e.props.failImageSource?e.props.failImageSource.height:r},e.props.failImageSource&&e.props.renderImage({source:{uri:e.props.failImageSource.url},style:{width:e.props.failImageSource.width,height:e.props.failImageSource.height}}))}});return it.createElement(Se.Animated.View,{style:{zIndex:9}},it.createElement(Se.Animated.View,{style:xu({},this.styles.container,{opacity:this.fadeAnim})},this.props.renderHeader(this.state.currentShowIndex),it.createElement(Se.View,{style:this.styles.arrowLeftContainer},it.createElement(Se.TouchableWithoutFeedback,{onPress:this.goBack},it.createElement(Se.View,null,this.props.renderArrowLeft()))),it.createElement(Se.View,{style:this.styles.arrowRightContainer},it.createElement(Se.TouchableWithoutFeedback,{onPress:this.goNext},it.createElement(Se.View,null,this.props.renderArrowRight()))),it.createElement(Se.Animated.View,{style:xu({},this.styles.moveBox,{transform:[{translateX:this.positionX}],width:this.width*this.props.imageUrls.length})},i),this.props.renderIndicator((this.state.currentShowIndex||0)+1,this.props.imageUrls.length),this.props.imageUrls[this.state.currentShowIndex||0]&&this.props.imageUrls[this.state.currentShowIndex||0].originSizeKb&&this.props.imageUrls[this.state.currentShowIndex||0].originUrl&&it.createElement(Se.View,{style:this.styles.watchOrigin},it.createElement(Se.TouchableOpacity,{style:this.styles.watchOriginTouchable},it.createElement(Se.Text,{style:this.styles.watchOriginText},"\u67E5\u770B\u539F\u56FE(2M)"))),it.createElement(Se.View,{style:[{bottom:0,position:"absolute",zIndex:9},this.props.footerContainerStyle]},this.props.renderFooter(this.state.currentShowIndex||0))))},o.prototype.getMenu=function(){return this.state.isShowMenu?this.props.menus?it.createElement(Se.View,{style:this.styles.menuContainer},this.props.menus({cancel:this.handleLeaveMenu,saveToLocal:this.saveToLocal})):it.createElement(Se.View,{style:this.styles.menuContainer},it.createElement(Se.View,{style:this.styles.menuShadow}),it.createElement(Se.View,{style:this.styles.menuContent},it.createElement(Se.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.saveToLocal,style:this.styles.operateContainer},it.createElement(Se.Text,{style:this.styles.operateText},this.props.menuContext.saveToLocal)),it.createElement(Se.TouchableHighlight,{underlayColor:"#F2F2F2",onPress:this.handleLeaveMenu,style:this.styles.operateContainer},it.createElement(Se.Text,{style:this.styles.operateText},this.props.menuContext.cancel)))):null},o.prototype.render=function(){var e=null;return e=it.createElement(Se.View,null,this.getContent(),this.getMenu()),it.createElement(Se.View,{onLayout:this.handleLayout,style:xu({flex:1,overflow:"hidden"},this.props.style)},e)},o.defaultProps=new Gk.Props,o}(it.Component);ac.default=IG});var H2=Te(qf=>{"use strict";c();Object.defineProperty(qf,"__esModule",{value:!0});var G2=q2();qf.ImageViewer=G2.default;var EG=qk();qf.ImageViewerPropsDefine=EG.Props;qf.default=G2.default});c();c();(function(){"use strict";var t="ListFormat"in Intl;function o(K,ne){if(!(K instanceof ne))throw new TypeError("Cannot call a class as a function")}function e(K,ne){for(var j=0;j<ne.length;j++){var oe=ne[j];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(K,oe.key,oe)}}function n(K,ne,j){return ne&&e(K.prototype,ne),j&&e(K,j),K}var r=["conjunction","disjunction","unit"],i=["long","short","narrow"],a=["lookup","best fit"];function s(K){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?s=function(j){return typeof j}:s=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},s(K)}function l(K){return typeof Symbol=="function"&&s(Symbol.iterator)==="symbol"?l=function(j){return s(j)}:l=function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":s(j)},l(K)}function u(K){if(K==null)throw new TypeError("Argument ".concat(K," cannot be converted to an Object"));return typeof K=="boolean"?new Boolean(K):typeof K=="number"?new Number(K):typeof K=="string"?new String(K):l(K)==="symbol"?new Object(K):K}var d;function p(K){d=K}function f(){return d}function m(){if(d==null)throw new ReferenceError("Could not determine locale: No default locale has been configured");return d}var h=new WeakMap,y={relevantExtensionKeys:[],localeData:{},availableLocales:[]};function S(K,ne,j){var oe=h.get(K);oe==null&&(oe=Object.create(null),h.set(K,oe)),oe[ne]=j}function C(K,ne){var j=h.get(K);if(j==null)throw new ReferenceError("No internal slots has been allocated for the given instance of ListFormat");return j[ne]}function x(K,ne){var j=h.get(K);return j!=null&&ne in j}var O=/-u(?:-[0-9a-z]{2,8})+/gi;function E(K){return K.replace(O,"")}function P(K,ne){for(var j=ne;;){if(K.includes(j))return j;var oe=j.lastIndexOf("-");if(oe===-1)return;oe>=2&&j.charAt(oe-2)==="-"&&(oe-=2),j=j.slice(0,oe)}}function L(K,ne){var j=[],oe=!0,me=!1,Ee=void 0;try{for(var at=ne[Symbol.iterator](),Ye;!(oe=(Ye=at.next()).done);oe=!0){var st=Ye.value,ct=E(st),et=P(K,ct);et!==void 0&&j.push(st)}}catch(lo){me=!0,Ee=lo}finally{try{!oe&&at.return!=null&&at.return()}finally{if(me)throw Ee}}return j}function R(K,ne){return L(K,ne)}function T(K){return typeof K=="string"||l(K)==="symbol"}function M(K,ne){if(l(K)!=="object")throw new TypeError("Given argument ".concat(K," must be of type Object"));if(!T(ne))throw new TypeError("Given argument ".concat(ne," must be a PropertyKey"));return K[ne]}function I(K){return!!K}function N(K){return K+""}function z(K,ne,j,oe,me){var Ee=M(K,ne);if(Ee!==void 0){if(j!=="boolean"&&j!=="string")throw new TypeError("Expected type ".concat(j," to be 'boolean' or 'string"));if(j==="boolean"&&(Ee=I(Ee)),j==="string"&&(Ee=N(Ee)),oe!==void 0&&!oe.includes(Ee))throw new RangeError("Value ".concat(Ee," out of range for options property ").concat(ne));return Ee}else return me}function Y(K,ne,j){var oe;return j!==void 0?(j=u(j),oe=z(j,"localeMatcher","string",a,"best fit")):oe="best fit",oe==="best fit"?R(K,ne):L(K,ne)}function Q(K){var ne=K.availableLocales,j=K.requestedLocales,oe=Object.create(null),me=!0,Ee=!1,at=void 0;try{for(var Ye=j[Symbol.iterator](),st;!(me=(st=Ye.next()).done);me=!0){var ct=st.value,et=E(ct),lo=P(ne,et);if(lo!==void 0){if(oe.locale=lo,ct!==et){var Io=ct.match(O);oe.extension=Io==null?"":Io[0]}return oe}}}catch(Ra){Ee=!0,at=Ra}finally{try{!me&&Ye.return!=null&&Ye.return()}finally{if(Ee)throw at}}var an=m();return oe.locale=an,oe}function te(K){return Q(K)}function _e(K,ne,j,oe,me){var Ee=j.localeMatcher,at=Ee==="lookup"?Q({availableLocales:K,requestedLocales:ne}):te({availableLocales:K,requestedLocales:ne}),Ye=at.locale,st=Object.create(null);st.dataLocale=Ye;var ct="-u";if(ct.length>2){var et=String.prototype.indexOf.call(Ye,"-x-");if(et===-1)Ye="".concat(Ye).concat(ct);else{var lo=Ye.slice(0,et),Io=Ye.slice(et);Ye="".concat(lo).concat(ct).concat(Io)}Ye=Intl.getCanonicalLocales(Ye)[0]}return st.locale=Ye,st}function Ae(K){if(Array.isArray(K)){for(var ne=0,j=new Array(K.length);ne<K.length;ne++)j[ne]=K[ne];return j}}function Be(K){if(Symbol.iterator in Object(K)||Object.prototype.toString.call(K)==="[object Arguments]")return Array.from(K)}function dt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function eo(K){return Ae(K)||Be(K)||dt()}function Vr(K){if(K===void 0)return[];var ne=eo(K);if(ne.some(function(j){return typeof j!="string"}))throw new TypeError("All List items must be strings");return ne}function On(K){return Object.prototype.toString.call(K)==="[object Object]"}function xr(K){return Array.isArray(K)||On(K)}function qr(K,ne){for(var j=[],oe=String.prototype.indexOf.call(K,"{",0),me=0,Ee=K.length;K[oe]!==void 0;){var at=String.prototype.indexOf.call(K,"}",oe);if(at<=oe)throw new TypeError("Expected endIndex: ".concat(at," to be greater than beginIndex: ").concat(oe));if(oe>me){var Ye=K.slice(me,oe);j.push({type:"literal",value:Ye})}var st=K.slice(oe+1,at);if(ne[Number(st)]==null)throw new TypeError("Expected placeables to have a part for PropertyKey: ".concat(st));var ct=ne[Number(st)];if(xr(ct.value)){var et=!0,lo=!1,Io=void 0;try{for(var an=ct.value[Symbol.iterator](),Ra;!(et=(Ra=an.next()).done);et=!0){var Mu=Ra.value;j.push(Mu)}}catch(Pa){lo=!0,Io=Pa}finally{try{!et&&an.return!=null&&an.return()}finally{if(lo)throw Io}}}else j.push(ct);me=at+1,oe=String.prototype.indexOf.call(K,"{",me)}if(me<Ee){var Dp=K.slice(me,Ee);j.push({type:"literal",value:Dp})}return j}function Gr(K,ne){var j,oe=ne.length;if(oe===0)return[];if(oe===2){j=C(K,"templatePair");var me={type:"element",value:ne[0]},Ee={type:"element",value:ne[1]},at={0:me,1:Ee};return qr(j,at)}for(var Ye={type:"element",value:ne[oe-1]},st=[Ye],ct=oe-2;ct>=0;){ct===0?j=C(K,"templateStart"):ct<oe-2?j=C(K,"templateMiddle"):j=C(K,"templateEnd");var et={type:"element",value:ne[ct]},lo={type:"element",value:st},Io={0:et,1:lo};st=qr(j,Io),ct--}return st}function wt(K,ne){var j=Gr(K,ne),oe="",me=!0,Ee=!1,at=void 0;try{for(var Ye=j[Symbol.iterator](),st;!(me=(st=Ye.next()).done);me=!0){var ct=st.value;oe+=ct.value}}catch(et){Ee=!0,at=et}finally{try{!me&&Ye.return!=null&&Ye.return()}finally{if(Ee)throw at}}return oe}function dc(K,ne){return Gr(K,ne)}var rn=function(){function K(){o(this,K);var ne=arguments[0],j=arguments[1];if((this instanceof K?this.constructor:void 0)===void 0)throw new TypeError("Constructor Intl.ListFormat requires 'new'");var oe=Intl.getCanonicalLocales(ne);j=j===void 0?Object.create(null):u(j);var me=Object.create(null),Ee=z(j,"localeMatcher","string",a,"best fit");me.localeMatcher=Ee;var at=z(j,"type","string",r,"conjunction");S(this,"type",at);var Ye=z(j,"style","string",i,"long");S(this,"style",Ye);var st=y.localeData,ct=_e(y.availableLocales,oe,me),et=ct.dataLocale,lo=st[et],Io=lo.formats[at],an=Io[Ye];S(this,"templatePair",an.Pair),S(this,"templateStart",an.Start),S(this,"templateMiddle",an.Middle),S(this,"templateEnd",an.End),S(this,"locale",ct.locale),S(this,"initializedListFormat",this)}return n(K,[{key:"format",value:function(j){var oe=this;if(!(oe instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));if(!x(oe,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.format called on incompatible receiver ".concat(this.toString()));var me=Vr(j);return wt(oe,me)}},{key:"formatToParts",value:function(j){var oe=this;if(!(oe instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));if(!x(oe,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.formatToParts called on incompatible receiver ".concat(this.toString()));var me=Vr(j);return dc(oe,me)}},{key:"resolvedOptions",value:function(){var j=this;if(!(j instanceof Object))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));if(!x(j,"initializedListFormat"))throw new TypeError("Method Intl.ListFormat.prototype.resolvedOptions called on incompatible receiver ".concat(this.toString()));var oe=C(this,"locale"),me=C(this,"type"),Ee=C(this,"style");return{locale:oe,type:me,style:Ee}}}],[{key:"supportedLocalesOf",value:function(j){var oe=arguments[1],me=y.availableLocales,Ee=Intl.getCanonicalLocales(j);return Y(me,Ee,oe)}},{key:"__addLocaleData",value:function(j){var oe=j.data,me=j.locale,Ee=f();Ee==null&&p(me),y.localeData[me]=oe,y.availableLocales.includes(me)||y.availableLocales.push(me)}}]),K}();Object.defineProperty(rn.prototype,Symbol.toStringTag,{writable:!1,enumerable:!1,value:"Intl.ListFormat",configurable:!0});function gi(){if(typeof Intl>"u")throw new TypeError("Could not define Intl.ListFormat: Expected 'Intl' to exist. Remember to include polyfill for Intl.getCanonicalLocales before applying this polyfill");Intl.ListFormat=rn}t||gi()})();c();"__addLocaleData"in Intl.ListFormat&&Intl.ListFormat.__addLocaleData({locale:"en",data:{formats:{conjunction:{long:{Pair:"{0} and {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, and {1}"},short:{Pair:"{0} & {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, & {1}"},narrow:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"}},disjunction:{long:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},short:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"},narrow:{Pair:"{0} or {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, or {1}"}},unit:{long:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},short:{Pair:"{0}, {1}",Start:"{0}, {1}",Middle:"{0}, {1}",End:"{0}, {1}"},narrow:{Pair:"{0} {1}",Start:"{0} {1}",Middle:"{0} {1}",End:"{0} {1}"}}}}});var yx=b(q());c();c();function X_(){return`https://${Ea.services.content.host}`}c();function U_(t,o){let e=[],n=0;for(;n<t.length;)e.push(t.slice(n,n+o)),n+=o;return e}function Y_(t){let o=t.reduce((r,i)=>r+i.length,0),e=new Uint8Array(o),n=0;return t.forEach(r=>{e.set(r,n),n+=r.length}),e}c();function j_(t){return{type:"link",id:Aa(),edits:{},...t}}c();var pm=100;var Lw=200;function $_(t){return t.replace(/(\r\n|\r|\n)/g," ")}function bh(t){return $_(t).trim().slice(0,pm).trim()||"Untitled"}function Z_(t){return $_(t).trim().slice(0,Lw).trim()}function GD(t){return Dx()(["docs","editorial","landing"]).includes(t)}function sd(t){return typeof t.cover?.yPos=="number"}function cd(t){return t?.layout?typeof t.layout=="string"&&GD(t.layout)?t.layout:"custom":"docs"}function ld(t){let o=cd(t),e={docs:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!0,outline:!0,pagination:!0},editorial:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!0,pagination:!0},landing:{cover:!0,coverSize:"full",title:!0,description:!0,tableOfContents:!1,outline:!1,pagination:!0}};switch(o){case"docs":return e.docs;case"editorial":return e.editorial;case"landing":return e.landing;case"custom":return typeof t?.layout=="object"?t.layout:e.docs;default:Ce(o)}}c();function J_(t,o){let{pageId:e,rename:n=!1}=o;return{...structuredClone(t),id:e,title:n?bh(`Copy of ${t.title}`):t.title,git:void 0,pages:t.type==="link"?void 0:[]}}c();var HD=Ze("hive:revisions:diff");function Nw(t,o){let e=[];return o.forEach(n=>{let r=t[n];if(!r){HD.warning(`Couldn't find page ${n} although it is referenced. This may indicate a bad page tree normalization.`);return}e.push({renderKey:n,page:r,pages:r.type==="link"?[]:Nw(t,r.pages)})}),e}c();function Q_(t,o){return{edits:MO([o]),...t,id:t.id||Aa()}}c();function eR(t,o,e,n){if(e.blobId)return new URL(`/content/${o}/blobs/${e.blobId}/${e.name}`,t).toString();if(e.downloadURL)return n?n(e.downloadURL):e.downloadURL;throw new Error("File does not have a download URL")}c();c();function Pc(t,o,e={}){let n;if(e.into){let r=F.getIn(t,["pages",e.into]);if(!r||!Gu(r))throw new Error(`Cannot insert page into ${e.into}`);n=F.get(r,"pages")}else n=F.getIn(t,["rootPages"]);if(!n)throw new Error(`Cannot insert page into ${e.into}`);e.at!==void 0?F.insert(n,e.at,[o.id]):F.push(n,[o.id]),F.setIn(t,["pages",o.id],cr(t)?Da(o):o)}function tR(t,o,e){let n=Pn(t,e),r=n?F.get(n,"pages"):F.get(t,"rootPages"),i=F.findIndex(r,s=>s===e);if(i<0)return{at:i};let a=n?F.get(n,"id"):void 0;return o==="after"?{into:a,at:i+1}:{into:a,at:i}}function oR(t,o,e){let n=tR(t,"before",e);if(!(n.at===void 0||n?.at<0))return Pc(t,o,n)}function wh(t,o,e){let n=tR(t,"after",e);if(!(n.at===void 0||n?.at<0))return Pc(t,o,n)}c();function ia(t,o,e){let n=F.getIn(t,["pages",o]);if(n)if(typeof e=="function"){e(n);return}else Object.entries(e).forEach(([r,i])=>{F.set(n,r,cr(t)?Da(i):i)})}function nR(t,o,e){ia(t,o,n=>{if(!tm(n))return;let r=ld(lr(n));F.set(n,"layout",{...r,...e})})}function rR(t,o,e){ia(t,o,{title:bh(e)})}function iR(t,o,e){ia(t,o,n=>{tm(n)&&F.set(n,"description",Z_(e))})}function Aw(t,o){let{originalPageId:e,parentPageId:n}=o,r=o.newPageId||Aa(),i=F.getIn(t,["pages",e]);if(!i)return;let a=J_(cr(i)?lr(i):i,{pageId:r,rename:!n});n?Pc(t,a,{into:n}):wh(t,a,e);let s;if(Gu(i)){let l=F.get(i,"pages");s=F.map(l,u=>{let d=Aa();return Aw(t,{originalPageId:u,parentPageId:a.id,newPageId:d}),d})}return ia(t,a.id,{pages:s}),r}c();c();c();function Ic(t,o){let e=BO(t,o),n=[];return e.forEach(r=>{n.push(r),F.get(r,"type")!=="link"&&n.push(...Ic(t,F.get(r,"id")))}),n}function aR(t,o,e){return F.getIn(t,["pages",e])?Hu(t,e).some(i=>F.get(i,"id")===o):!1}function mm(t,o,e={}){let n=F.getIn(t,["pages",o]);if(!n)return;let r=Pn(t,o);if(e.deleteEmptyGroupParent&&r&&F.get(r,"type")==="group"&&F.get(r,"pages").length===1)return mm(t,F.get(r,"id"));let i=[F.get(n,"id")];F.get(n,"type")!=="link"&&Ic(t,o).forEach(u=>{i.push(F.get(u,"id"))}),[...F.entries(F.get(t,"pages"))].some(([,l])=>tm(l)&&!i.includes(F.get(l,"id")))&&(F.delArrayValue(r?F.get(r,"pages"):F.get(t,"rootPages"),o),i.forEach(l=>{F.del(F.get(t,"pages"),l);let u=F.get(t,"conflicts");u&&F.getIn(u,["pages",l])&&F.delIn(u,["pages",l])}))}function KD(t,o,e){if(o===e)return!1;let n=F.getIn(t,["pages",o]),r=F.getIn(t,["pages",e]);if(!n||!r||DO(r)||bw(n))return!1;let i=Hu(t,e);return!(F.findIndex(i,a=>F.get(a,"id")===o)>=0)}function Sh(t,o,e,n={}){let r=F.getIn(t,["pages",o]),i=e?F.getIn(t,["pages",e]):void 0;if(i&&!Gu(i))throw new Error("Cannot move page under a link");if(!r||e&&!KD(t,o,e))return;let a=F.get(t,"rootPages"),s=i?F.get(i,"pages"):a,l=typeof n.at=="number"?n.at:s.length,u=Pn(t,o),d=u?F.get(u,"pages"):a,p=F.findIndex(d,m=>m===o),f=u?F.get(u,"id")===e:!e;l===p&&f||(p>=0&&(F.delArrayIndex(d,p,1),f&&(l=p<=l?l-1:l)),F.insert(s,l,[o]),n.deleteEmptyGroupParent&&u&&bw(u)&&F.get(u,"pages").length===0&&mm(t,F.get(u,"id")))}function sR(t,o,e){let n=Pn(t,e),r=n?F.get(n,"pages"):F.get(t,"rootPages"),i=F.findIndex(r,a=>a===e);return{at:o==="after"?i+1:i,parentId:n?F.get(n,"id"):void 0}}function cR(t,o,e){let{at:n,parentId:r}=sR(t,"before",e);n<0||Sh(t,o,r,{at:n})}function lR(t,o,e){let{at:n,parentId:r}=sR(t,"after",e);n<0||Sh(t,o,r,{at:n})}c();function uR(t,o){if(F.getIn(t,["files",o.id]))throw new Error("File with same ID already exists in revision");let n=F.get(t,"files");F.set(n,o.id,o)}function dR(t,o){F.delIn(t,["files",o])}function pR(t,o,e){let n=F.getIn(t,["files",o]);if(!n)throw new Error("File doesn't exist in revision");Object.entries(e).forEach(([r,i])=>{F.set(n,r,cr(t)?Da(i):i)})}c();var Ec=Ze("normalizeRevision");function fR(t){let o=F.get(t,"id"),e=F.get(t,"contentId"),n=F.get(t,"pages"),r=F.get(t,"rootPages"),i=F.get(t,"conflicts"),a=F.values(F.get(t,"parents")),s=new Set(F.keys(n)),l;if(a.length>3)throw new Error(`Revision ${e}/${o} has more than 3 parents`);if(a.includes(o)){let m=a.filter(h=>h!==o);if(m.length===0)throw new Error(`Revision ${e}/${o} has no more parents after removing itself as parent`);F.set(t,"parents",m),Ec.warning(`${e}/${o}: updated parents to remove itself as parent. New parents:`,m)}let u=F.get(t,"customFields");u?mR(u):F.set(t,"customFields",{});let d=m=>{let h=[];if(m.forEach(y=>{p(y)&&h.push(y)}),h.length!==m.length)return h},p=m=>{if(!s.has(m))return!1;s.delete(m);let h=F.get(n,m);if(!h)return!1;let y=F.get(h,"customFields");if(y&&mR(y),F.get(h,"type")==="link")return XD(e,o,m,h),!0;let S=h;l===void 0&&F.get(h,"type")==="document"&&(l=F.get(h,"id"));let C=d(F.get(S,"pages"));return C&&(F.set(S,"pages",C),Ec.warning(`${e}/${o}: updated children for page ${m}. New children pages:`,C)),!0},f=d(r);if(f&&(F.set(t,"rootPages",f),Ec.warning(`${e}/${o}: normalized rootPages. New root pages:`,f)),s.size>0){let m=Array.from(s);F.push(r,m),Ec.warning(`${e}/${o}: made pages with invalid parent into rootPages. Pages:`,m)}if(!l){let m=NO();Pc(t,m),Ec.warning(`${e}/${o}: created empty page document ${m.id} as none were found. `)}if(i!==void 0){let m=F.get(i,"pages"),h=F.keys(m),y=h.reduce((S,C)=>{let x=F.get(n,C);return!x||F.get(x,"type")==="link"||F.get(x,"type")==="group"?S.add(C):S},new Set);y.size>0&&(y.size===h.length?(F.del(t,"conflicts"),Ec.warning(`${e}/${o}: normalized conflicts. All were invalid and have been removed.`)):(y.forEach(S=>{F.del(m,S)}),Ec.warning(`${e}/${o}: normalized conflicts. New conflicts:`,i)))}}function mR(t){for(let[o,e]of F.entries(t)){let n=F.get(e,"value");typeof n!="string"&&typeof n!="number"&&typeof n!="boolean"&&!Array.isArray(lr(n))&&F.del(t,o)}}function XD(t,o,e,n){let r=F.get(n,"target");(typeof r!="object"||typeof F.get(r,"kind")!="string")&&(Ec.warning(`${t}/${o}: normalized invalid link ${e}, with target ${JSON.stringify(lr(r))}`),F.set(n,"type","document"),F.set(n,"pages",[]),F.del(n,"target"))}c();function gR(t){return F.get(t,"conflicts")!==void 0}function UD(t,o,e){if(!gR(t))return;let n=F.getIn(t,["conflicts","pages"]);n&&F.has(n,o)&&F.set(n,o,e),YD(t)}function YD(t){if(!gR(t))return;let o=F.getIn(t,["conflicts","pages"]);if(o){for(let[,e]of F.entries(o))if(e!==!1)return;F.del(t,"conflicts")}}function hR(t,o){UD(t,o,!1)}c();function yR(t,o,e=void 0){ia(t,o,n=>{if(F.get(n,"type")!=="document")return;let i={ref:e,yPos:0};F.set(n,"cover",cr(t)?Da(i):i)})}function vR(t,o){ia(t,o,e=>{F.get(e,"type")==="document"&&F.del(e,"cover")})}function bR(t,o,e){ia(t,o,n=>{if(F.get(n,"type")!=="document")return;let i=F.get(n,"cover");i&&F.set(i,"yPos",e)})}c();function wR(t,o="Page",e=!1){let n=F.get(t,"pages"),i=F.values(n).map(l=>F.get(l,"title")),a=new Set(i);if(!e&&!a.has(o))return o;let s=l=>{let u=` ${l}`,d=`${o.slice(0,pm-u.length)}${u}`;return a.has(d)?s(l+1):d};return s(1)}c();function SR(t){F.get(t,"customFields")||F.set(t,"customFields",{})}function CR(t,o){SR(t),xR(t,o)}function kR(t,o,e){let n=F.getIn(t,["pages",o]);n&&(SR(n),xR(n,e))}function xR(t,o){Object.entries(o).forEach(([e,n])=>{F.getIn(t,["customFields",e])?F.setIn(t,["customFields",e,"value"],n.value):F.setIn(t,["customFields",e],cr(t)?Da(n):n)})}c();function OR(t,o){let e=F.get(t,"edits");F.set(t,"edits",Qp(e,Array.isArray(o)?o:[o]))}c();function _R(t,o,e){let n=F.getIn(t,["pages",o,"edits"]);if(!n)return;let r=(()=>Array.isArray(e)?Qp(n,e):typeof e=="string"?Qp(n,[e]):LO(n,e))();F.setIn(t,["pages",o,"edits"],r)}c();function Ch(t){return t.getMap("data")}c();var RR=bi(t=>({id:t.get("id"),type:t.get("type"),contentId:t.get("contentId"),conflicts:lr(t.get("conflicts")),parents:t.get("parents").toArray(),mergedFrom:t.get("mergedFrom"),rolledBackBy:t.get("rolledBackBy"),git:lr(t.get("git")),rootPages:t.get("rootPages").toArray(),pages:jD(t.get("pages")),files:$D(t.get("files")),edits:lr(t.get("edits")),customFields:lr(t.get("customFields"))})),jD=bi(t=>{let o={};return t.forEach((e,n)=>{o[n]=cr(e)?PR(e):lr(e)}),o}),$D=bi(t=>{let o={};return t.forEach((e,n)=>{o[n]=cr(e)?PR(e):lr(e)}),o}),PR=bi(t=>lr(t));c();var IR={insertPage:Pc,insertPageAfter:wh,insertPageBefore:oR,removePage:mm,updatePage:ia,updatePageLayout:nR,movePage:Sh,movePageAfter:lR,movePageBefore:cR,addPageCover:yR,removePageCover:vR,movePageCover:bR,renamePage:rR,setPageDescription:iR,duplicatePage:Aw,resolveConflict:hR,insertFile:uR,removeFile:dR,updateFile:pR,getPageParent:Pn,getUniquePageTitle:wR,updateRevisionCustomFields:CR,updatePageCustomFields:kR,markRevisionAsEdited:OR,markPageAsEdited:_R};function ER(t){let o={revision:t};for(let e in IR)o[e]=(...n)=>IR[e](t,...n);return o}c();c();c();var wo=b(zD()),we=wo.Reader,aa=wo.Writer,B=wo.util,J=wo.roots.default||(wo.roots.default={}),SU=J.PromptInitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.stateVector=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.stateVector),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.PromptInitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.stateVector=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("stateVector"))throw B.ProtocolError("missing required 'stateVector'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.stateVector&&typeof e.stateVector.length=="number"||B.isString(e.stateVector)))return"stateVector: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.PromptInitMessage)return e;let n=new J.PromptInitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.stateVector!=null&&(typeof e.stateVector=="string"?B.base64.decode(e.stateVector,n.stateVector=B.newBuffer(B.base64.length(e.stateVector)),0):e.stateVector.length>=0&&(n.stateVector=e.stateVector)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.stateVector="":(r.stateVector=[],n.bytes!==Array&&(r.stateVector=B.newBuffer(r.stateVector))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.stateVector!=null&&e.hasOwnProperty("stateVector")&&(r.stateVector=n.bytes===String?B.base64.encode(e.stateVector,0,e.stateVector.length):n.bytes===Array?Array.prototype.slice.call(e.stateVector):e.stateVector),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/PromptInitMessage"},t})(),CU=J.InitMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.InitMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.InitMessage)return e;let n=new J.InitMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/InitMessage"},t})(),kU=J.UpdateMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.index=0,t.prototype.count=0,t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(8).int32(e.id),e.index!=null&&Object.hasOwnProperty.call(e,"index")&&n.uint32(16).int32(e.index),e.count!=null&&Object.hasOwnProperty.call(e,"count")&&n.uint32(24).int32(e.count),n.uint32(34).bytes(e.update),e.version!=null&&Object.hasOwnProperty.call(e,"version")&&n.uint32(40).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.UpdateMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.index=e.int32();break}case 3:{i.count=e.int32();break}case 4:{i.update=e.bytes();break}case 5:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.index!=null&&e.hasOwnProperty("index")&&!B.isInteger(e.index))return"index: integer expected";if(e.count!=null&&e.hasOwnProperty("count")&&!B.isInteger(e.count))return"count: integer expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";if(e.version!=null&&e.hasOwnProperty("version"))switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.UpdateMessage)return e;let n=new J.UpdateMessage;switch(e.id!=null&&(n.id=e.id|0),e.index!=null&&(n.index=e.index|0),e.count!=null&&(n.count=e.count|0),e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.index=0,r.count=0,n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.index!=null&&e.hasOwnProperty("index")&&(r.index=e.index),e.count!=null&&e.hasOwnProperty("count")&&(r.count=e.count),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdateMessage"},t})(),ZD=J.StoredUpdate=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.update=B.newBuffer([]),t.prototype.version=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(18).bytes(e.update),n.uint32(24).int32(e.version),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.StoredUpdate;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 2:{i.update=e.bytes();break}case 3:{i.version=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("update"))throw B.ProtocolError("missing required 'update'",{instance:i});if(!i.hasOwnProperty("version"))throw B.ProtocolError("missing required 'version'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!(e.update&&typeof e.update.length=="number"||B.isString(e.update)))return"update: buffer expected";switch(e.version){default:return"version: enum value expected";case 0:case 1:case 2:break}return null},t.fromObject=function(e){if(e instanceof J.StoredUpdate)return e;let n=new J.StoredUpdate;switch(e.update!=null&&(typeof e.update=="string"?B.base64.decode(e.update,n.update=B.newBuffer(B.base64.length(e.update)),0):e.update.length>=0&&(n.update=e.update)),e.version){default:if(typeof e.version=="number"){n.version=e.version;break}break;case"UNSPECIFIED":case 0:n.version=0;break;case"V1":case 1:n.version=1;break;case"V2":case 2:n.version=2;break}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(n.bytes===String?r.update="":(r.update=[],n.bytes!==Array&&(r.update=B.newBuffer(r.update))),r.version=n.enums===String?"UNSPECIFIED":0),e.update!=null&&e.hasOwnProperty("update")&&(r.update=n.bytes===String?B.base64.encode(e.update,0,e.update.length):n.bytes===Array?Array.prototype.slice.call(e.update):e.update),e.version!=null&&e.hasOwnProperty("version")&&(r.version=n.enums===String?J.UpdateFormatVersion[e.version]===void 0?e.version:J.UpdateFormatVersion[e.version]:e.version),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/StoredUpdate"},t})(),xU=J.UpdatePresenceMessage=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.data=B.emptyObject,t.prototype.positions=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=aa.create()),n.uint32(8).int32(e.id),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(26).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.UpdatePresenceMessage,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.data===B.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.data[a]=s;break}case 3:{i.positions===B.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",s=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!B.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!B.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(e.positions!=null&&e.hasOwnProperty("positions")){if(!B.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||B.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.UpdatePresenceMessage)return e;let n=new J.UpdatePresenceMessage;if(e.id!=null&&(n.id=e.id|0),e.data){if(typeof e.data!="object")throw TypeError(".UpdatePresenceMessage.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.positions){if(typeof e.positions!="object")throw TypeError(".UpdatePresenceMessage.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?B.base64.decode(e.positions[r[i]],n.positions[r[i]]=B.newBuffer(B.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults&&(r.id=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?B.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/UpdatePresenceMessage"},t})(),OU=J.AckMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.message=0,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(8).int32(e.id),n.uint32(16).int32(e.message),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.AckMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.message=e.int32();break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("message"))throw B.ProtocolError("missing required 'message'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){return typeof e!="object"||e===null?"object expected":B.isInteger(e.id)?B.isInteger(e.message)?null:"message: integer expected":"id: integer expected"},t.fromObject=function(e){if(e instanceof J.AckMessage)return e;let n=new J.AckMessage;return e.id!=null&&(n.id=e.id|0),e.message!=null&&(n.message=e.message|0),n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.message=0),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.message!=null&&e.hasOwnProperty("message")&&(r.message=e.message),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/AckMessage"},t})(),_U=J.BroadcastPresencesMessage=(()=>{function t(o){if(this.presences={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.presences=B.emptyObject,t.prototype.selfClientId="",t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=aa.create()),n.uint32(8).int32(e.id),e.presences!=null&&Object.hasOwnProperty.call(e,"presences"))for(let r=Object.keys(e.presences),i=0;i<r.length;++i)n.uint32(18).fork().uint32(10).string(r[i]),J.Presence.encode(e.presences[r[i]],n.uint32(18).fork()).ldelim().ldelim();return n.uint32(26).string(e.selfClientId),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.BroadcastPresencesMessage,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.int32();break}case 2:{i.presences===B.emptyObject&&(i.presences={});let u=e.uint32()+e.pos;for(a="",s=null;e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=J.Presence.decode(e,e.uint32());break;default:e.skipType(d&7);break}}i.presences[a]=s;break}case 3:{i.selfClientId=e.string();break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("selfClientId"))throw B.ProtocolError("missing required 'selfClientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";if(e.presences!=null&&e.hasOwnProperty("presences")){if(!B.isObject(e.presences))return"presences: object expected";let n=Object.keys(e.presences);for(let r=0;r<n.length;++r){let i=J.Presence.verify(e.presences[n[r]]);if(i)return"presences."+i}}return B.isString(e.selfClientId)?null:"selfClientId: string expected"},t.fromObject=function(e){if(e instanceof J.BroadcastPresencesMessage)return e;let n=new J.BroadcastPresencesMessage;if(e.id!=null&&(n.id=e.id|0),e.presences){if(typeof e.presences!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences={};for(let r=Object.keys(e.presences),i=0;i<r.length;++i){if(typeof e.presences[r[i]]!="object")throw TypeError(".BroadcastPresencesMessage.presences: object expected");n.presences[r[i]]=J.Presence.fromObject(e.presences[r[i]])}}return e.selfClientId!=null&&(n.selfClientId=String(e.selfClientId)),n},t.toObject=function(e,n){n||(n={});let r={};(n.objects||n.defaults)&&(r.presences={}),n.defaults&&(r.id=0,r.selfClientId=""),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id);let i;if(e.presences&&(i=Object.keys(e.presences)).length){r.presences={};for(let a=0;a<i.length;++a)r.presences[i[a]]=J.Presence.toObject(e.presences[i[a]],n)}return e.selfClientId!=null&&e.hasOwnProperty("selfClientId")&&(r.selfClientId=e.selfClientId),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastPresencesMessage"},t})(),RU=J.BroadcastOperationMessage=(()=>{function t(o){if(o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id=0,t.prototype.operation=null,t.create=function(e){return new t(e)},t.encode=function(e,n){return n||(n=aa.create()),n.uint32(8).int32(e.id),J.ContentOperation.encode(e.operation,n.uint32(18).fork()).ldelim(),n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.BroadcastOperationMessage;for(;e.pos<r;){let a=e.uint32();switch(a>>>3){case 1:{i.id=e.int32();break}case 2:{i.operation=J.ContentOperation.decode(e,e.uint32());break}default:e.skipType(a&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("operation"))throw B.ProtocolError("missing required 'operation'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isInteger(e.id))return"id: integer expected";{let n=J.ContentOperation.verify(e.operation);if(n)return"operation."+n}return null},t.fromObject=function(e){if(e instanceof J.BroadcastOperationMessage)return e;let n=new J.BroadcastOperationMessage;if(e.id!=null&&(n.id=e.id|0),e.operation!=null){if(typeof e.operation!="object")throw TypeError(".BroadcastOperationMessage.operation: object expected");n.operation=J.ContentOperation.fromObject(e.operation)}return n},t.toObject=function(e,n){n||(n={});let r={};return n.defaults&&(r.id=0,r.operation=null),e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.operation!=null&&e.hasOwnProperty("operation")&&(r.operation=J.ContentOperation.toObject(e.operation,n)),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/BroadcastOperationMessage"},t})(),Ml=J.Message=(()=>{function t(e){if(e)for(let n=Object.keys(e),r=0;r<n.length;++r)e[n[r]]!=null&&(this[n[r]]=e[n[r]])}t.prototype.promptInit=null,t.prototype.init=null,t.prototype.update=null,t.prototype.updatePresence=null,t.prototype.broadcastPresences=null,t.prototype.broadcastOperation=null,t.prototype.ack=null;let o;return Object.defineProperty(t.prototype,"message",{get:B.oneOfGetter(o=["promptInit","init","update","updatePresence","broadcastPresences","broadcastOperation","ack"]),set:B.oneOfSetter(o)}),t.create=function(n){return new t(n)},t.encode=function(n,r){return r||(r=aa.create()),n.promptInit!=null&&Object.hasOwnProperty.call(n,"promptInit")&&J.PromptInitMessage.encode(n.promptInit,r.uint32(10).fork()).ldelim(),n.init!=null&&Object.hasOwnProperty.call(n,"init")&&J.InitMessage.encode(n.init,r.uint32(18).fork()).ldelim(),n.update!=null&&Object.hasOwnProperty.call(n,"update")&&J.UpdateMessage.encode(n.update,r.uint32(26).fork()).ldelim(),n.updatePresence!=null&&Object.hasOwnProperty.call(n,"updatePresence")&&J.UpdatePresenceMessage.encode(n.updatePresence,r.uint32(34).fork()).ldelim(),n.broadcastPresences!=null&&Object.hasOwnProperty.call(n,"broadcastPresences")&&J.BroadcastPresencesMessage.encode(n.broadcastPresences,r.uint32(42).fork()).ldelim(),n.broadcastOperation!=null&&Object.hasOwnProperty.call(n,"broadcastOperation")&&J.BroadcastOperationMessage.encode(n.broadcastOperation,r.uint32(50).fork()).ldelim(),n.ack!=null&&Object.hasOwnProperty.call(n,"ack")&&J.AckMessage.encode(n.ack,r.uint32(58).fork()).ldelim(),r},t.encodeDelimited=function(n,r){return this.encode(n,r).ldelim()},t.decode=function(n,r){n instanceof we||(n=we.create(n));let i=r===void 0?n.len:n.pos+r,a=new J.Message;for(;n.pos<i;){let s=n.uint32();switch(s>>>3){case 1:{a.promptInit=J.PromptInitMessage.decode(n,n.uint32());break}case 2:{a.init=J.InitMessage.decode(n,n.uint32());break}case 3:{a.update=J.UpdateMessage.decode(n,n.uint32());break}case 4:{a.updatePresence=J.UpdatePresenceMessage.decode(n,n.uint32());break}case 5:{a.broadcastPresences=J.BroadcastPresencesMessage.decode(n,n.uint32());break}case 6:{a.broadcastOperation=J.BroadcastOperationMessage.decode(n,n.uint32());break}case 7:{a.ack=J.AckMessage.decode(n,n.uint32());break}default:n.skipType(s&7);break}}return a},t.decodeDelimited=function(n){return n instanceof we||(n=new we(n)),this.decode(n,n.uint32())},t.verify=function(n){if(typeof n!="object"||n===null)return"object expected";let r={};if(n.promptInit!=null&&n.hasOwnProperty("promptInit")){r.message=1;{let i=J.PromptInitMessage.verify(n.promptInit);if(i)return"promptInit."+i}}if(n.init!=null&&n.hasOwnProperty("init")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.InitMessage.verify(n.init);if(i)return"init."+i}}if(n.update!=null&&n.hasOwnProperty("update")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.UpdateMessage.verify(n.update);if(i)return"update."+i}}if(n.updatePresence!=null&&n.hasOwnProperty("updatePresence")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.UpdatePresenceMessage.verify(n.updatePresence);if(i)return"updatePresence."+i}}if(n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.BroadcastPresencesMessage.verify(n.broadcastPresences);if(i)return"broadcastPresences."+i}}if(n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.BroadcastOperationMessage.verify(n.broadcastOperation);if(i)return"broadcastOperation."+i}}if(n.ack!=null&&n.hasOwnProperty("ack")){if(r.message===1)return"message: multiple values";r.message=1;{let i=J.AckMessage.verify(n.ack);if(i)return"ack."+i}}return null},t.fromObject=function(n){if(n instanceof J.Message)return n;let r=new J.Message;if(n.promptInit!=null){if(typeof n.promptInit!="object")throw TypeError(".Message.promptInit: object expected");r.promptInit=J.PromptInitMessage.fromObject(n.promptInit)}if(n.init!=null){if(typeof n.init!="object")throw TypeError(".Message.init: object expected");r.init=J.InitMessage.fromObject(n.init)}if(n.update!=null){if(typeof n.update!="object")throw TypeError(".Message.update: object expected");r.update=J.UpdateMessage.fromObject(n.update)}if(n.updatePresence!=null){if(typeof n.updatePresence!="object")throw TypeError(".Message.updatePresence: object expected");r.updatePresence=J.UpdatePresenceMessage.fromObject(n.updatePresence)}if(n.broadcastPresences!=null){if(typeof n.broadcastPresences!="object")throw TypeError(".Message.broadcastPresences: object expected");r.broadcastPresences=J.BroadcastPresencesMessage.fromObject(n.broadcastPresences)}if(n.broadcastOperation!=null){if(typeof n.broadcastOperation!="object")throw TypeError(".Message.broadcastOperation: object expected");r.broadcastOperation=J.BroadcastOperationMessage.fromObject(n.broadcastOperation)}if(n.ack!=null){if(typeof n.ack!="object")throw TypeError(".Message.ack: object expected");r.ack=J.AckMessage.fromObject(n.ack)}return r},t.toObject=function(n,r){r||(r={});let i={};return n.promptInit!=null&&n.hasOwnProperty("promptInit")&&(i.promptInit=J.PromptInitMessage.toObject(n.promptInit,r),r.oneofs&&(i.message="promptInit")),n.init!=null&&n.hasOwnProperty("init")&&(i.init=J.InitMessage.toObject(n.init,r),r.oneofs&&(i.message="init")),n.update!=null&&n.hasOwnProperty("update")&&(i.update=J.UpdateMessage.toObject(n.update,r),r.oneofs&&(i.message="update")),n.updatePresence!=null&&n.hasOwnProperty("updatePresence")&&(i.updatePresence=J.UpdatePresenceMessage.toObject(n.updatePresence,r),r.oneofs&&(i.message="updatePresence")),n.broadcastPresences!=null&&n.hasOwnProperty("broadcastPresences")&&(i.broadcastPresences=J.BroadcastPresencesMessage.toObject(n.broadcastPresences,r),r.oneofs&&(i.message="broadcastPresences")),n.broadcastOperation!=null&&n.hasOwnProperty("broadcastOperation")&&(i.broadcastOperation=J.BroadcastOperationMessage.toObject(n.broadcastOperation,r),r.oneofs&&(i.message="broadcastOperation")),n.ack!=null&&n.hasOwnProperty("ack")&&(i.ack=J.AckMessage.toObject(n.ack,r),r.oneofs&&(i.message="ack")),i},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(n){return n===void 0&&(n="type.googleapis.com"),n+"/Message"},t})(),PU=J.Presence=(()=>{function t(o){if(this.data={},this.positions={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.data=B.emptyObject,t.prototype.joinTimestamp=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updateTimestamp=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.clientId="",t.prototype.positions=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=aa.create()),e.data!=null&&Object.hasOwnProperty.call(e,"data"))for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.uint32(10).fork().uint32(10).string(r[i]).uint32(18).string(e.data[r[i]]).ldelim();if(n.uint32(16).int64(e.joinTimestamp),n.uint32(24).int64(e.updateTimestamp),n.uint32(34).string(e.clientId),e.positions!=null&&Object.hasOwnProperty.call(e,"positions"))for(let r=Object.keys(e.positions),i=0;i<r.length;++i)n.uint32(42).fork().uint32(10).string(r[i]).uint32(18).bytes(e.positions[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.Presence,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.data===B.emptyObject&&(i.data={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.data[a]=s;break}case 2:{i.joinTimestamp=e.int64();break}case 3:{i.updateTimestamp=e.int64();break}case 4:{i.clientId=e.string();break}case 5:{i.positions===B.emptyObject&&(i.positions={});let u=e.uint32()+e.pos;for(a="",s=[];e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.bytes();break;default:e.skipType(d&7);break}}i.positions[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("joinTimestamp"))throw B.ProtocolError("missing required 'joinTimestamp'",{instance:i});if(!i.hasOwnProperty("updateTimestamp"))throw B.ProtocolError("missing required 'updateTimestamp'",{instance:i});if(!i.hasOwnProperty("clientId"))throw B.ProtocolError("missing required 'clientId'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(e.data!=null&&e.hasOwnProperty("data")){if(!B.isObject(e.data))return"data: object expected";let n=Object.keys(e.data);for(let r=0;r<n.length;++r)if(!B.isString(e.data[n[r]]))return"data: string{k:string} expected"}if(!B.isInteger(e.joinTimestamp)&&!(e.joinTimestamp&&B.isInteger(e.joinTimestamp.low)&&B.isInteger(e.joinTimestamp.high)))return"joinTimestamp: integer|Long expected";if(!B.isInteger(e.updateTimestamp)&&!(e.updateTimestamp&&B.isInteger(e.updateTimestamp.low)&&B.isInteger(e.updateTimestamp.high)))return"updateTimestamp: integer|Long expected";if(!B.isString(e.clientId))return"clientId: string expected";if(e.positions!=null&&e.hasOwnProperty("positions")){if(!B.isObject(e.positions))return"positions: object expected";let n=Object.keys(e.positions);for(let r=0;r<n.length;++r)if(!(e.positions[n[r]]&&typeof e.positions[n[r]].length=="number"||B.isString(e.positions[n[r]])))return"positions: buffer{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.Presence)return e;let n=new J.Presence;if(e.data){if(typeof e.data!="object")throw TypeError(".Presence.data: object expected");n.data={};for(let r=Object.keys(e.data),i=0;i<r.length;++i)n.data[r[i]]=String(e.data[r[i]])}if(e.joinTimestamp!=null&&(B.Long?(n.joinTimestamp=B.Long.fromValue(e.joinTimestamp)).unsigned=!1:typeof e.joinTimestamp=="string"?n.joinTimestamp=parseInt(e.joinTimestamp,10):typeof e.joinTimestamp=="number"?n.joinTimestamp=e.joinTimestamp:typeof e.joinTimestamp=="object"&&(n.joinTimestamp=new B.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber())),e.updateTimestamp!=null&&(B.Long?(n.updateTimestamp=B.Long.fromValue(e.updateTimestamp)).unsigned=!1:typeof e.updateTimestamp=="string"?n.updateTimestamp=parseInt(e.updateTimestamp,10):typeof e.updateTimestamp=="number"?n.updateTimestamp=e.updateTimestamp:typeof e.updateTimestamp=="object"&&(n.updateTimestamp=new B.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber())),e.clientId!=null&&(n.clientId=String(e.clientId)),e.positions){if(typeof e.positions!="object")throw TypeError(".Presence.positions: object expected");n.positions={};for(let r=Object.keys(e.positions),i=0;i<r.length;++i)typeof e.positions[r[i]]=="string"?B.base64.decode(e.positions[r[i]],n.positions[r[i]]=B.newBuffer(B.base64.length(e.positions[r[i]])),0):e.positions[r[i]].length>=0&&(n.positions[r[i]]=e.positions[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.data={},r.positions={}),n.defaults){if(B.Long){let a=new B.Long(0,0,!1);r.joinTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.joinTimestamp=n.longs===String?"0":0;if(B.Long){let a=new B.Long(0,0,!1);r.updateTimestamp=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updateTimestamp=n.longs===String?"0":0;r.clientId=""}let i;if(e.data&&(i=Object.keys(e.data)).length){r.data={};for(let a=0;a<i.length;++a)r.data[i[a]]=e.data[i[a]]}if(e.joinTimestamp!=null&&e.hasOwnProperty("joinTimestamp")&&(typeof e.joinTimestamp=="number"?r.joinTimestamp=n.longs===String?String(e.joinTimestamp):e.joinTimestamp:r.joinTimestamp=n.longs===String?B.Long.prototype.toString.call(e.joinTimestamp):n.longs===Number?new B.LongBits(e.joinTimestamp.low>>>0,e.joinTimestamp.high>>>0).toNumber():e.joinTimestamp),e.updateTimestamp!=null&&e.hasOwnProperty("updateTimestamp")&&(typeof e.updateTimestamp=="number"?r.updateTimestamp=n.longs===String?String(e.updateTimestamp):e.updateTimestamp:r.updateTimestamp=n.longs===String?B.Long.prototype.toString.call(e.updateTimestamp):n.longs===Number?new B.LongBits(e.updateTimestamp.low>>>0,e.updateTimestamp.high>>>0).toNumber():e.updateTimestamp),e.clientId!=null&&e.hasOwnProperty("clientId")&&(r.clientId=e.clientId),e.positions&&(i=Object.keys(e.positions)).length){r.positions={};for(let a=0;a<i.length;++a)r.positions[i[a]]=n.bytes===String?B.base64.encode(e.positions[i[a]],0,e.positions[i[a]].length):n.bytes===Array?Array.prototype.slice.call(e.positions[i[a]]):e.positions[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/Presence"},t})(),IU=J.ContentOperation=(()=>{function t(o){if(this.payload={},o)for(let e=Object.keys(o),n=0;n<e.length;++n)o[e[n]]!=null&&(this[e[n]]=o[e[n]])}return t.prototype.id="",t.prototype.status=0,t.prototype.createdAt=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updatedAt=B.Long?B.Long.fromBits(0,0,!1):0,t.prototype.updateId=0,t.prototype.expireAfter=0,t.prototype.cursor=0,t.prototype.target=0,t.prototype.payload=B.emptyObject,t.create=function(e){return new t(e)},t.encode=function(e,n){if(n||(n=aa.create()),n.uint32(10).string(e.id),n.uint32(16).int32(e.status),n.uint32(24).int64(e.createdAt),n.uint32(32).int64(e.updatedAt),n.uint32(40).int32(e.updateId),n.uint32(48).int32(e.expireAfter),n.uint32(56).int32(e.cursor),n.uint32(64).int32(e.target),e.payload!=null&&Object.hasOwnProperty.call(e,"payload"))for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.uint32(74).fork().uint32(10).string(r[i]).uint32(18).string(e.payload[r[i]]).ldelim();return n},t.encodeDelimited=function(e,n){return this.encode(e,n).ldelim()},t.decode=function(e,n){e instanceof we||(e=we.create(e));let r=n===void 0?e.len:e.pos+n,i=new J.ContentOperation,a,s;for(;e.pos<r;){let l=e.uint32();switch(l>>>3){case 1:{i.id=e.string();break}case 2:{i.status=e.int32();break}case 3:{i.createdAt=e.int64();break}case 4:{i.updatedAt=e.int64();break}case 5:{i.updateId=e.int32();break}case 6:{i.expireAfter=e.int32();break}case 7:{i.cursor=e.int32();break}case 8:{i.target=e.int32();break}case 9:{i.payload===B.emptyObject&&(i.payload={});let u=e.uint32()+e.pos;for(a="",s="";e.pos<u;){let d=e.uint32();switch(d>>>3){case 1:a=e.string();break;case 2:s=e.string();break;default:e.skipType(d&7);break}}i.payload[a]=s;break}default:e.skipType(l&7);break}}if(!i.hasOwnProperty("id"))throw B.ProtocolError("missing required 'id'",{instance:i});if(!i.hasOwnProperty("status"))throw B.ProtocolError("missing required 'status'",{instance:i});if(!i.hasOwnProperty("createdAt"))throw B.ProtocolError("missing required 'createdAt'",{instance:i});if(!i.hasOwnProperty("updatedAt"))throw B.ProtocolError("missing required 'updatedAt'",{instance:i});if(!i.hasOwnProperty("updateId"))throw B.ProtocolError("missing required 'updateId'",{instance:i});if(!i.hasOwnProperty("expireAfter"))throw B.ProtocolError("missing required 'expireAfter'",{instance:i});if(!i.hasOwnProperty("cursor"))throw B.ProtocolError("missing required 'cursor'",{instance:i});if(!i.hasOwnProperty("target"))throw B.ProtocolError("missing required 'target'",{instance:i});return i},t.decodeDelimited=function(e){return e instanceof we||(e=new we(e)),this.decode(e,e.uint32())},t.verify=function(e){if(typeof e!="object"||e===null)return"object expected";if(!B.isString(e.id))return"id: string expected";switch(e.status){default:return"status: enum value expected";case 0:case 1:case 2:case 3:break}if(!B.isInteger(e.createdAt)&&!(e.createdAt&&B.isInteger(e.createdAt.low)&&B.isInteger(e.createdAt.high)))return"createdAt: integer|Long expected";if(!B.isInteger(e.updatedAt)&&!(e.updatedAt&&B.isInteger(e.updatedAt.low)&&B.isInteger(e.updatedAt.high)))return"updatedAt: integer|Long expected";if(!B.isInteger(e.updateId))return"updateId: integer expected";if(!B.isInteger(e.expireAfter))return"expireAfter: integer expected";if(!B.isInteger(e.cursor))return"cursor: integer expected";if(!B.isInteger(e.target))return"target: integer expected";if(e.payload!=null&&e.hasOwnProperty("payload")){if(!B.isObject(e.payload))return"payload: object expected";let n=Object.keys(e.payload);for(let r=0;r<n.length;++r)if(!B.isString(e.payload[n[r]]))return"payload: string{k:string} expected"}return null},t.fromObject=function(e){if(e instanceof J.ContentOperation)return e;let n=new J.ContentOperation;switch(e.id!=null&&(n.id=String(e.id)),e.status){default:if(typeof e.status=="number"){n.status=e.status;break}break;case"STARTING":case 0:n.status=0;break;case"RUNNING":case 1:n.status=1;break;case"SUCCESS":case 2:n.status=2;break;case"ERROR":case 3:n.status=3;break}if(e.createdAt!=null&&(B.Long?(n.createdAt=B.Long.fromValue(e.createdAt)).unsigned=!1:typeof e.createdAt=="string"?n.createdAt=parseInt(e.createdAt,10):typeof e.createdAt=="number"?n.createdAt=e.createdAt:typeof e.createdAt=="object"&&(n.createdAt=new B.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber())),e.updatedAt!=null&&(B.Long?(n.updatedAt=B.Long.fromValue(e.updatedAt)).unsigned=!1:typeof e.updatedAt=="string"?n.updatedAt=parseInt(e.updatedAt,10):typeof e.updatedAt=="number"?n.updatedAt=e.updatedAt:typeof e.updatedAt=="object"&&(n.updatedAt=new B.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber())),e.updateId!=null&&(n.updateId=e.updateId|0),e.expireAfter!=null&&(n.expireAfter=e.expireAfter|0),e.cursor!=null&&(n.cursor=e.cursor|0),e.target!=null&&(n.target=e.target|0),e.payload){if(typeof e.payload!="object")throw TypeError(".ContentOperation.payload: object expected");n.payload={};for(let r=Object.keys(e.payload),i=0;i<r.length;++i)n.payload[r[i]]=String(e.payload[r[i]])}return n},t.toObject=function(e,n){n||(n={});let r={};if((n.objects||n.defaults)&&(r.payload={}),n.defaults){if(r.id="",r.status=n.enums===String?"STARTING":0,B.Long){let a=new B.Long(0,0,!1);r.createdAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.createdAt=n.longs===String?"0":0;if(B.Long){let a=new B.Long(0,0,!1);r.updatedAt=n.longs===String?a.toString():n.longs===Number?a.toNumber():a}else r.updatedAt=n.longs===String?"0":0;r.updateId=0,r.expireAfter=0,r.cursor=0,r.target=0}e.id!=null&&e.hasOwnProperty("id")&&(r.id=e.id),e.status!=null&&e.hasOwnProperty("status")&&(r.status=n.enums===String?J.ContentOperationStatus[e.status]===void 0?e.status:J.ContentOperationStatus[e.status]:e.status),e.createdAt!=null&&e.hasOwnProperty("createdAt")&&(typeof e.createdAt=="number"?r.createdAt=n.longs===String?String(e.createdAt):e.createdAt:r.createdAt=n.longs===String?B.Long.prototype.toString.call(e.createdAt):n.longs===Number?new B.LongBits(e.createdAt.low>>>0,e.createdAt.high>>>0).toNumber():e.createdAt),e.updatedAt!=null&&e.hasOwnProperty("updatedAt")&&(typeof e.updatedAt=="number"?r.updatedAt=n.longs===String?String(e.updatedAt):e.updatedAt:r.updatedAt=n.longs===String?B.Long.prototype.toString.call(e.updatedAt):n.longs===Number?new B.LongBits(e.updatedAt.low>>>0,e.updatedAt.high>>>0).toNumber():e.updatedAt),e.updateId!=null&&e.hasOwnProperty("updateId")&&(r.updateId=e.updateId),e.expireAfter!=null&&e.hasOwnProperty("expireAfter")&&(r.expireAfter=e.expireAfter),e.cursor!=null&&e.hasOwnProperty("cursor")&&(r.cursor=e.cursor),e.target!=null&&e.hasOwnProperty("target")&&(r.target=e.target);let i;if(e.payload&&(i=Object.keys(e.payload)).length){r.payload={};for(let a=0;a<i.length;++a)r.payload[i[a]]=e.payload[i[a]]}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,wo.util.toJSONOptions)},t.getTypeUrl=function(e){return e===void 0&&(e="type.googleapis.com"),e+"/ContentOperation"},t})(),EU=J.ContentOperationStatus=(()=>{let t={},o=Object.create(t);return o[t[0]="STARTING"]=0,o[t[1]="RUNNING"]=1,o[t[2]="SUCCESS"]=2,o[t[3]="ERROR"]=3,o})(),Ls=J.UpdateFormatVersion=(()=>{let t={},o=Object.create(t);return o[t[0]="UNSPECIFIED"]=0,o[t[1]="V1"]=1,o[t[2]="V2"]=2,o})();var JD=.9*1024*1024;function TR(t,o=0){let e=o;return{newMessageID:()=>(e+=1,e),write:n=>{if(n.init){let r=n.init;Bw(r.update,(i,a,s)=>{t(kh({init:{...r,index:a,count:s,update:i}}),r.id)})}else if(n.update){let r=n.update;Bw(r.update,(i,a,s)=>{t(kh({update:{...r,index:a,count:s,update:i}}),r.id)})}else if(n.promptInit){let r=n.promptInit;Bw(r.stateVector,(i,a,s)=>{t(kh({promptInit:{...r,index:a,count:s,stateVector:i}}),r.id)})}else t(kh(n),n[Object.keys(n)[0]].id)}}}function kh(t){let o=Ml.verify(t);if(o)throw new Error(`ProtoBufObject message is not valid: ${o}`);let e=Ml.create(t);return Ml.encode(e).finish()}function Bw(t,o){U_(t,JD).forEach((n,r,i)=>{o(n,r,i.length)})}c();function MR(t){let o=new Map,e=(n,r)=>{if(!n.id||n.index===void 0||n.count===void 0)return r(n);let i=o.get(n.id)||[];if(i.push(n),o.set(n.id,i),i.length===n.count){let a=Y_(i.sort((l,u)=>(l.index||0)-(u.index||0)).map(l=>"update"in l?l.update:l.stateVector)),s=r({...n,..."update"in n?{update:a}:{stateVector:a}});return o.delete(n.id),s}};return n=>QD(n,{promptInit:r=>e(r,i=>t.promptInit(i)),init:r=>e(r,i=>t.init(i)),update:r=>e(r,i=>t.update(i)),updatePresence:t.updatePresence,broadcastOperation:t.broadcastOperation,broadcastPresences:t.broadcastPresences,ack:t.ack})}function QD(t,o){let e=Ml.decode(t),n=Ml.toObject(e);if(n.promptInit)return o.promptInit(n.promptInit);if(n.init)return o.init(n.init);if(n.update)return o.update(n.update);if(n.updatePresence)return o.updatePresence(n.updatePresence);if(n.broadcastOperation)return o.broadcastOperation(n.broadcastOperation);if(n.broadcastPresences)return o.broadcastPresences(n.broadcastPresences);if(n.ack)return o.ack(n.ack)}c();var FU=Ze("datasync:storage");function Ww(t,o,e,n){switch(o){case null:case void 0:case Ls.UNSPECIFIED:case Ls.V1:{let r=Array.isArray(e)?TO(e):e;xO(t,r,n);break}case Ls.V2:{let r=Array.isArray(e)?_g(e):e;xg(t,r,n);break}default:Ce(o)}}c();var NR=bi(t=>{let o=t.getAttribute("data");return fc.create({key:t.getAttribute("key"),nodes:xh(t),data:o?zw(o):void 0})}),xh=bi(t=>Ma.create(t.toArray().map(o=>{if(o instanceof Rr)return AR(o);if(o instanceof Rt)return e9(o);throw new Error(`Unknown node type: ${o}`)}))),e9=bi(t=>{let e=t.toDelta().map(n=>oO.create({text:n.insert,marks:t9(n.attributes||{})}));return cg.create({key:t.getAttribute("key"),leaves:Ma.create(e)})}),AR=bi(t=>{let o=t.getAttribute("key");switch(t.nodeName){case"block":{let e=t,n=e.getAttribute("data"),r=e.getAttribute("fragments");return Gt.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?zw(n):void 0,nodes:xh(t),fragments:r?LR(r):void 0})}case"inline":{let e=t,n=e.getAttribute("data"),r=e.getAttribute("fragments");return Hp.create({key:o,type:e.getAttribute("type"),isVoid:e.getAttribute("isVoid"),data:n?zw(n):void 0,nodes:xh(t),fragments:r?LR(r):void 0})}case"fragment":{let e=t;return nO.create({key:o,type:e.getAttribute("type"),fragment:e.getAttribute("fragment"),nodes:xh(t)})}default:throw new Error(`Unknown object type: ${t.nodeName}`)}}),LR=bi(t=>eO.create(t.toArray().map(o=>{if(!(o instanceof Rr))throw new Error(`Unknown node type: ${o}`);let e=AR(o);return[e.fragmentKey,e]})));function t9(t){return ig.create(Object.keys(t).map(o=>tO.create({type:o,data:t[o]})))}var zw=bi(t=>Bu.create(t.toJSON()));c();function Ll(t){let o=t.object;switch(o){case"block":return n9(t);case"inline":return r9(t);case"text":return a9(t);default:throw new Error(`Unknown node type: ${o}`)}}function o9(t){return t.toArray().map(o=>Ll(o))}function Fw(t,o){t.delete(0,t.length),t.insert(0,o9(o))}function n9(t,o=new Rr(t.object)){return o.setAttribute("key",t.key),t.isVoid?o.setAttribute("isVoid",t.isVoid):o.removeAttribute("isVoid"),o.setAttribute("type",t.type),BR(o,t.data),Fw(o,t.nodes),DR(o,t.fragments),o}function r9(t,o=new Rr(t.object)){return o.setAttribute("key",t.key),t.isVoid?o.setAttribute("isVoid",t.isVoid):o.removeAttribute("isVoid"),o.setAttribute("type",t.type),BR(o,t.data),Fw(o,t.nodes),DR(o,t.fragments),o}function i9(t,o=new Zp){return o.delete(0,o.length),t.forEach(e=>{o.push([Vw(e)])}),o}function DR(t,o){if(o.size===0){t.removeAttribute("fragments");return}let e=t.getAttribute("fragments");e||(e=new Zp,t.setAttribute("fragments",e)),i9(o,e)}function Vw(t,o=new Rr(t.object)){return o.setAttribute("key",t.key),t.type&&o.setAttribute("type",t.type),t.fragment&&o.setAttribute("fragment",t.fragment),Fw(o,t.nodes),o}function a9(t,o=new Rt){let e=0;return o.setAttribute("key",t.key),o.delete(0,o.length),t.leaves.forEach(n=>{o.insert(e,n.text,Oh(n.marks)),e+=n.text.length}),o}function Oh(t){if(t.size===0)return{};let o={};return t.forEach(e=>{o[e.type]=e.data.toObject()}),o}function BR(t,o){if(o.size===0){t.removeAttribute("data");return}let e=t.getAttribute("data");e||(e=new Qi,t.setAttribute("data",e)),qw(o,e)}function qw(t,o=new Qi){return o.clear(),t.forEach((e,n)=>{o.set(n,ud(e))}),o}function ud(t){if(t==null||typeof t=="number"||typeof t=="string"||typeof t=="boolean")return t;if(Array.isArray(t)){let o=new $p;return t.forEach(e=>{o.push([ud(e)])}),o}else{let o=new Qi;return Object.keys(t).forEach(e=>{o.set(e,ud(t[e]))}),o}}c();c();function Ln(t,o){let e=t;for(let n=0;n<o.length;n++){let r=o[n];if(e instanceof Rt)throw new Error("Invalid path, expected a node with descendants");if(r<e.length)e=e.get(r);else{let i=e.getAttribute("fragments");i&&(e=i.get(r-e.length))}if(!e)throw new Error("Invalid path, expected a node")}return e}function Nl(t,o){let e=o.slice(0,-1),n=Ln(t,e);if(n instanceof Rt)throw new Error("Invalid path, expected a node with descendants");let r=o[o.length-1];return{parent:n,index:r}}function fm(t,o){let e=t.getAttribute("data");e||(e=new Qi,t.setAttribute("data",e));let n=e;for(let r=0;r<o.length;r++){let i=o[r],a=n,s=a.get(i);if(s===void 0){let[l,u]=s9(o.slice(r+1));return a.set(i,l),u}else{if(!(s instanceof Qi))throw new Error(`Invalid data path (${o.slice(0,r+1).join(".")}), expected a map`);n=s}}return n}function s9(t){let o=new Qi,e=o;for(let n=0;n<t.length;n++){let r=new Qi;e.set(t[n],r),e=r}return[o,e]}function Gw(t,o){t.operations.forEach(([e,n,r])=>{c9(o,e,n.document,r.document)})}function c9(t,o,e,n){switch(o.type){case"insert_text":l9(t,e,o);break;case"remove_text":u9(t,e,o);break;case"add_mark":d9(t,o);break;case"remove_mark":p9(t,o);break;case"remove_node":m9(t,o);break;case"insert_node":f9(t,o);break;case"set_node":v9(t,o);break;case"move_node":g9(t,e,n,o);break;case"split_node":h9(t,e,o);break;case"merge_node":y9(t,e,o);break;case"insert_fragment":b9(t,o);break;case"remove_fragment":w9(t,o);break;case"set_data":S9(t,o);break;case"remove_data":C9(t,o);break;case"insert_array_data":k9(t,o);break;case"remove_array_data":x9(t,o);break;case"set_selection":break;default:throw new Error(`Unsupported operation type: ${o.type}`)}}function l9(t,o,e){let n=Ln(t,[...e.path]);if(!(n instanceof Rt))throw new Error("Invalid operation path, expected a text node");n.insert(e.offset,e.text,Oh(e.marks))}function u9(t,o,e){let n=Ln(t,[...e.path]);if(!(n instanceof Rt))throw new Error("Invalid operation path, expected a text node");n.delete(e.offset,e.text.length)}function d9(t,o){let e=Ln(t,[...o.path]);if(!(e instanceof Rt))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,Oh(ig.create([o.mark])))}function p9(t,o){let e=Ln(t,[...o.path]);if(!(e instanceof Rt))throw new Error("Invalid operation path, expected a text node");e.format(o.offset,o.length,{[o.mark.type]:null})}function m9(t,o){let{parent:e,index:n}=Nl(t,[...o.path]);e.delete(n)}function f9(t,o){let{parent:e,index:n}=Nl(t,[...o.path]);e.insert(n,[Ll(o.node)])}function g9(t,o,e,n){let{parent:r,index:i}=Nl(t,[...n.path]),{parent:a,index:s}=Nl(t,[...n.newPath]),l=e.assertPath(n.path),u=o.assertNode(l.key),d=Ll(u);r.delete(i),a.insert(s,[d])}function h9(t,o,e){let{parent:n,index:r}=Nl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for split_node");let a=i.nodes.get(r);if(!a)throw new Error("Node not found in parent nodes");let s=i.nodes.get(r+1);if(!s)throw new Error("New node not found in parent nodes");n.delete(r),n.insert(r,[Ll(a),Ll(s)])}function y9(t,o,e){let{parent:n,index:r}=Nl(t,[...e.path]),i=o.assertNode(n.getAttribute("key"));if(i.object==="text")throw new Error("Invalid operation path, expected a node with descendants for merge_node");let a=i.nodes.get(r-1);if(!a)throw new Error("Merged node not found in parent nodes");n.delete(r-1,2),n.insert(r-1,[Ll(a)])}function v9(t,o){let e=Ln(t,[...o.path]);if(typeof o.properties!="string"){if("key"in o.properties&&o.properties.key!==void 0&&e.setAttribute("key",o.properties.key),"type"in o.properties&&o.properties.type!==void 0&&e.setAttribute("type",o.properties.type),"isVoid"in o.properties&&o.properties.isVoid!==void 0){if(e instanceof Rt)throw new Error("Should not set isVoid on a text");e.setAttribute("isVoid",o.properties.isVoid)}if("data"in o.properties&&o.properties.data!==void 0){if(e instanceof Rt)throw new Error("Should not set data on a text");qw(Bu.create(o.properties.data),e.getAttribute("data"))}}}function b9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1,i=Vw(o.node),a=n.getAttribute("fragments");a||(a=new Zp,n.setAttribute("fragments",a)),a.insert(r,[i])}function w9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Expect a fragment node");let n=e,r=o.fragmentPath[o.fragmentPath.length-1]-1;n.getAttribute("fragments").delete(r)}function S9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Should not set data on a text");let n=ud(o.data),r=fm(e,o.dataPath.slice(0,-1)),i=o.dataPath[o.dataPath.length-1];r.set(i,n)}function C9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Should not set data on a text");let n=fm(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1];n.delete(r)}function k9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Should not set data on a text");let n=fm(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof $p))return;let a=ud(o.data);i.insert(o.dataIndex,[a])}function x9(t,o){let e=Ln(t,[...o.path]);if(e instanceof Rt)throw new Error("Should not set data on a text");let n=fm(e,o.dataPath.slice(0,-1)),r=o.dataPath[o.dataPath.length-1],i=n.get(r);if(!i||!(i instanceof $p))return;let a;for(;a=i.toArray().findIndex(s=>s===o.data)!==-1;)i.delete(a)}c();function gm(t){return t.get("data",Rr)}c();function FR(t,o,e){let n=gm(o);return Gp.isBlockRange(e)?{anchor:e.anchorBlock?zR(n,t,e.anchorBlock):void 0,focus:e.focusBlock?zR(n,t,e.focusBlock):void 0}:{anchor:e.anchorKey?WR(n,t,e.anchorKey,e.anchorOffset):void 0,focus:e.focusKey?WR(n,t,e.focusKey,e.focusOffset):void 0}}function VR(t,o){if(!(!o.anchor||!o.focus)){if(o.anchor.type instanceof Rt){if(!(o.focus.type instanceof Rt))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key");return he.create({anchorKey:e,anchorOffset:o.anchor.index,focusKey:n,focusOffset:o.focus.index}).normalize(t)}if(o.anchor.type instanceof Rr){if(!(o.focus.type instanceof Rr))return;let e=o.anchor.type.getAttribute("key"),n=o.focus.type.getAttribute("key"),r=t.getDescendant(e),i=t.getDescendant(n);if(!r||!i||!r.isBlock()||!i.isBlock())return;let a=r.nodes.get(o.anchor.index),s=i.nodes.get(o.focus.index);return!a||!s?void 0:Gp.create({anchorBlock:a.key,focusBlock:s?.key}).normalize(t)}}}function WR(t,o,e,n){let r=o.getPath(e);return r?{type:Ln(t,r),index:n,assoc:0}:void 0}function zR(t,o,e){let n=o.getPath(e);return n?{type:Ln(t,n.slice(0,-1)),index:n[n.length-1],assoc:0}:void 0}c();var O9=Ze("hive-core:normalizeYDocument");function qR(t){let o=new Set,e=new Set;return GR(t,o,e),e.size>0&&O9.warning(`Found ${e.size} duplicated keys in Y document. This is a bug in Hive.`),e.size}function GR(t,o,e){HR(t,o,e);let n=t.getAttribute("fragments");n&&_9(n,o,e)}function _9(t,o,e){HR(t,o,e)}function HR(t,o,e){let n=0;t.forEach((r,i)=>{let a=r.getAttribute("key");if(o.has(a)){e.add(a),CO(t),t.delete(i-n),n++;return}o.add(a),!(r instanceof Rt)&&GR(r,o,e)})}c();c();c();c();c();c();c();var un=crypto;var Ns=new TextEncoder,ei=new TextDecoder,$Y=2**32;var KR=t=>{let o=atob(t),e=new Uint8Array(o.length);for(let n=0;n<o.length;n++)e[n]=o.charCodeAt(n);return e},Tc=t=>{let o=t;o instanceof Uint8Array&&(o=ei.decode(o)),o=o.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return KR(o)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};c();c();c();var _h=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(o){var e;super(o),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,(e=Error.captureStackTrace)===null||e===void 0||e.call(Error,this,this.constructor)}};var Er=class extends _h{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};c();c();var Rh=un.getRandomValues.bind(un);c();c();c();c();c();c();c();c();function L9(t){return typeof t=="object"&&t!==null}function dr(t){if(!L9(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let o=t;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(t)===o}c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();var U9=Symbol();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();c();var Xw=Tc;c();function Uw(t){if(typeof t!="string")throw new Er("JWTs must use Compact JWS serialization, JWT must be a string");let{1:o,length:e}=t.split(".");if(e===5)throw new Er("Only JWTs using Compact JWS serialization can be decoded");if(e!==3)throw new Er("Invalid JWT");if(!o)throw new Er("JWTs must contain a payload");let n;try{n=Xw(o)}catch{throw new Er("Failed to parse the base64url encoded payload")}let r;try{r=JSON.parse(ei.decode(n))}catch{throw new Er("Failed to parse the decoded payload as JSON")}if(!dr(r))throw new Er("Invalid JWT Claims Set");return r}c();c();c();c();function oP(t){let o=Uw(t);return{expiration:o.exp?o.exp*1e3:Date.now()+6*60*60*1e3,payload:{userId:o.userId,content:o.content}}}c();var c8=new Xu(Mg,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"name",weight:.7},{name:"keywords",weight:.3}]});function Eh(t){return c8.search(t).map(o=>o.item)}c();var Fh=b(k());c();var vP=b(Vp(),1),bP=b(aP(),1);c();var hP=b(Vp(),1),yP=b(gP(),1);var Ws=Ze("hive:socket");var Th=class{constructor(o){this.state="closed";this.destroyed=!1;this.openBackoffDelay=1e3;this.pendingMessages=[];this.events=new hP.EventEmitter;this.getSocketURL=o}async open(){if(this.assertNotDestroyed(),this.webSocket)throw new Error("WebSocket already opened");this.clearScheduledReconnection();let o=await this.getSocketURL();return this.setState("connecting"),new Promise((e,n)=>{Ws.info("Opening WebSocket:",o);let r=new yP.default.w3cwebsocket(o);this.webSocket=r;try{r.binaryType="arraybuffer"}catch{}r.onopen=()=>{if(this.destroyed){r.close();return}Ws.warning("WebSocket opened"),this.setState("open"),this.sendPendingMessages(),e()},r.onclose=i=>{if(this.destroyed)return;let a=this.state;if(this.close("closed"),a==="connecting"){Ws.error("Websocket closed before initial connection",i),n(new Error("Websocket closed before initial connection"));return}a==="open"&&(Ws.warning("WebSocket unexpectedly closed, reconnecting:",i.code,i.reason),this.scheduleReconnection())},r.onerror=i=>{if(this.destroyed)return;let a=this.state;if(this.close("errored"),a==="connecting"){Ws.error("Websocket error with initial connection",i);let s=new Error("Websocket errored before being opened");Nu(s,{attachments:[{name:"operations.json",type:"application/json",body:JSON.stringify(i)}]}),n(s);return}Ws.error("WebSocket error, reconnecting:",i),this.scheduleReconnection()},r.onmessage=i=>{if(this.destroyed){r.close();return}let a=i.data;a instanceof ArrayBuffer&&this.events.emit("message",new Uint8Array(a))}})}close(o="closed"){this.assertNotDestroyed(),this.setState(o),this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0),this.webSocket&&(Ws.info("Closing WebSocket"),this.webSocket.close(),this.webSocket=void 0)}destroy(){this.close(),this.events.removeAllListeners(),this.destroyed=!0}scheduleReconnection(){this.openBackoffTimer||(this.webSocket&&this.close(),Ws.info("Scheduling reconnection in",this.openBackoffDelay,"ms"),this.openBackoffTimer=setTimeout(()=>{this.open(),this.openBackoffDelay=Math.min(this.openBackoffDelay*2,3e4)},this.openBackoffDelay))}async forceScheduledReconnection(){if(!this.openBackoffTimer)throw new Error("No scheduled reconnection");await this.open()}clearScheduledReconnection(){this.openBackoffTimer&&(clearTimeout(this.openBackoffTimer),this.openBackoffTimer=void 0)}listen(o,e){return this.assertNotDestroyed(),this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}send(o){if(this.assertNotDestroyed(),this.state!=="open"||!this.webSocket){this.pendingMessages.push(o);return}this.webSocket.send(o)}sendPendingMessages(){let o=this.webSocket;this.state!=="open"||!o||(this.pendingMessages.forEach(e=>o.send(e)),this.pendingMessages=[])}setState(o){this.state!==o&&(Ws.info("socket changing state from",this.state,"to",o),this.state=o,this.events.emit("state",o))}assertNotDestroyed(){if(this.destroyed)throw new Error("socket is destroyed")}};var pn=Ze("hive:datasync");var pd=class{constructor(o,e,n={}){this.state="closed";this.operation=null;this.clientId=null;this.socket=null;this.encoder=null;this.currentPresence=null;this.beforeTransactionPresence=null;this.pendingMessages=new Set;this.pendingMessagesResolves=[];this.destroyed=!1;this.events=new vP.EventEmitter;this.batchUpdates=[];let{YType:r=Qi,readOnly:i=!1}=n;if(typeof globalThis.window>"u")throw new Error("HiveDataSyncClient can only be used in the browser, or in node process when running tests");this.client=o,this.doc=new kO({guid:e}),this.presences=[],this.YType=r,this.#e=i;let a=this.doc.get("data",r);this.undoManager=new EO(a,{trackedOrigins:new Set(["local"])}),this.undoManager.on("stack-item-added",s=>{s.stackItem.meta.set("positionsBefore",this.beforeTransactionPresence?.positions),s.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-updated",s=>{s.stackItem.meta.set("positions",this.currentPresence?.positions)}),this.undoManager.on("stack-item-popped",s=>{let l=s.type==="undo"?this.undoManager.redoStack:this.undoManager.undoStack,u=l[l.length-1];u&&(u.meta.set("positions",s.stackItem.meta.get("positionsBefore")),u.meta.set("positionsBefore",s.stackItem.meta.get("positions")));let d=s.stackItem.meta.get("positionsBefore");d&&this.events.emit("restorePositions",d)}),this.doc.on("updateV2",(s,l)=>{l!=="remote"&&(this.dangerouslyPaused?this.dangerouslyPaused.push(s):this.batchUpdate(s)),pn.info("call update listeners"),this.events.emit("update",l)}),this.doc.on("sync",()=>{this.doc.isSynced&&pn.info(`doc "${this.doc.guid}" is synced`),this.updateState()})}#e;updateState(){let o="closed";if(this.socket)switch(this.socket.state){case"connecting":o="connecting";break;case"open":this.doc.isSynced?o="open":o="connecting";break;case"errored":o="errored";break}o!==this.state&&(this.state=o,this.events.emit("state",o))}get presence(){return this.currentPresence||null}get readOnly(){return this.#e??!1}setReadOnly(o){this.readOnly&&!o?this.sendPromptInit():!this.readOnly&&o&&this.flushBatchUpdates(),this.#e=o}get clock(){let o=this.doc.get("data",this.YType);return SO(o)}open(o,e,n,r={}){if(this.assertNotDestroyed(),this.socket)switch(this.socket.state){case"open":case"connecting":return this.doc.isLoaded?void 0:this.doc.whenLoaded;case"errored":return Promise.reject(new Error("Connection failed to establish with the server"));case"closed":{let u=this.socket;this.socket=null,u.destroy();break}default:Ce(this.socket.state)}pn.info("opening datasync socket",e,n,r);let i=this.client.getSocket(o,e,n,r);this.socket=i;let a=MR({promptInit:u=>{this.sendInit(u.stateVector)},init:({update:u,version:d})=>{Ww(this.doc,d,u,"remote"),this.doc.emit("sync",[!0])},update:({update:u,version:d})=>{Ww(this.doc,d,u,"remote")},updatePresence:()=>{},broadcastOperation:u=>{this.operation={...u.operation,payload:u.operation.payload||{},createdAt:Number(u.operation.createdAt),updatedAt:Number(u.operation.updatedAt)},this.events.emit("operation",this.operation)},broadcastPresences:u=>{pn.info("received broadcast presences message");let d=this.clientId;this.clientId=u.selfClientId,d!==u.selfClientId&&(pn.info("client id changed to",u.selfClientId),this.events.emit("clientId",u.selfClientId)),this.presences=Object.values(u.presences||{}).map(p=>({clientId:p.clientId,joinTimestamp:Number(p.joinTimestamp),updateTimestamp:Number(p.updateTimestamp),data:p.data||{},positions:Object.fromEntries(Object.entries(p.positions||{}).map(([f,m])=>[f,PO(m)]))})).sort((p,f)=>p.joinTimestamp-f.joinTimestamp),this.events.emit("presences")},ack:u=>{this.ackMessage(u.message)}});this.encoder=TR((u,d)=>{this.pendingMessages.add(d),i.send(u)}),i.listen("state",u=>{this.updateState(),u==="open"?(this.sendPromptInit(),this.sendPresence()):this.doc.isSynced&&this.doc.emit("sync",[!1])}),i.listen("message",u=>{a(u)});let s=new Yi(`hive:datasync:open:${e}`);if(s.setLabels(n),s.wrapPromise(i.open()),this.doc.isLoaded){pn.info(`doc "${this.doc.guid}" is already loaded`);return}pn.info(`waiting for doc "${this.doc.guid}" to be loaded`);let l=new Yi(`hive:datasync:sync:${e}`);return l.setLabels(n),l.wrapPromise(this.doc.whenLoaded.then(()=>{pn.info(`doc "${this.doc.guid}" is loaded`)}))}close(){if(this.assertNotDestroyed(),!this.socket){pn.info("closing datasync, but socket is already closed");return}pn.info("closing datasync socket"),this.socket.destroy(),this.socket=null,this.encoder=null}destroy(){this.close(),this.batchDebounceFlush?.cancel(),this.undoManager.destroy(),this.doc.destroy(),this.events.removeAllListeners(),this.destroyed=!0}listen(o,e){return this.assertNotDestroyed(),this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}waitForSync(){if(this.assertNotDestroyed(),this.pendingMessages.size!==0)return pn.info("waiting for sync, pending messages count is",this.pendingMessages.size),new Promise(o=>{this.pendingMessagesResolves.push(o)})}transact(o){return this.assertNotDestroyed(),pn.info("start transaction on document"),this.beforeTransactionPresence=this.currentPresence,this.doc.transact(()=>o(this.doc),"local")}setPresence(o){this.assertNotDestroyed(),pn.info("set presence",o),this.currentPresence={data:o.data||this.currentPresence?.data||{},positions:Object.fromEntries(Object.entries(o.positions||{}).map(([e,n])=>n?[e,_O(n.type,n.index,n.assoc)]:null).filter(ue))},this.sendPresence()}undo(){this.undoManager.undo()}redo(){this.undoManager.redo()}stopCapturing(){this.undoManager.stopCapturing()}hasBatchingEnabled(){return!!this.batchDebounceFlush}hasBatchedUpdates(){return this.batchUpdates.length>0}resetBatchingInterval(o,e=o*5){o?(this.batchDebounceFlush?.cancel(),this.batchDebounceFlush=(0,bP.default)(()=>{this.flushBatchUpdates()},o,{maxWait:e})):(this.flushBatchUpdates(),this.batchDebounceFlush=void 0)}disableBatching(){this.resetBatchingInterval(0)}flushBatchUpdates(){if(this.readOnly||(this.batchDebounceFlush?.cancel(),this.batchUpdates.length===0))return;let o=this.batchUpdates;this.batchUpdates=[];let e=_g(o);this.sendUpdate(e)}sendPresence(){!this.encoder||!this.currentPresence||(pn.info("sending presence to server"),this.encoder.write({updatePresence:{id:this.encoder.newMessageID(),data:this.currentPresence.data,positions:Object.fromEntries(Object.entries(this.currentPresence.positions).map(([o,e])=>[o,RO(e)]))}}))}sendPromptInit(){this.encoder&&(pn.info("sending prompt to init to server"),this.encoder.write({promptInit:{id:this.encoder.newMessageID(),stateVector:OO(this.doc),version:Ls.V2}}))}sendInit(o){!this.encoder||this.readOnly||(pn.info("sending init to server"),this.encoder.write({init:{id:this.encoder.newMessageID(),update:Og(this.doc,o),version:Ls.V2}}))}batchUpdate(o){if(!this.readOnly){if(!this.batchDebounceFlush){this.sendUpdate(o);return}this.batchUpdates.push(o),this.batchDebounceFlush()}}sendUpdate(o){!this.encoder||this.readOnly||(pn.info("sending update to server",o.byteLength),this.encoder.write({update:{id:this.encoder.newMessageID(),update:o,version:Ls.V2}}))}ackMessage(o){this.pendingMessages.delete(o),this.pendingMessages.size===0&&(this.pendingMessagesResolves.forEach(e=>e()),this.pendingMessagesResolves=[])}assertNotDestroyed(){if(this.destroyed)throw new Error("datasync is destroyed")}dangerouslyPauseSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}async dangerouslyResumeSync(){throw new Error("dangerouslyPauseSync should only be used for testing")}};c();var wP=b(Vp(),1);var bm=class{constructor(o,e,n,r={}){this.events=new wP.default;this.manager=o,this.contentId=n.contentId,this.branchId=n.branchId,this.dataSync=new pd(o.client,e,{readOnly:r.readOnly}),this._change=ER(Ch(this.dataSync.doc)),this.dataSync.listen("update",()=>{this.dataSync.doc.transact(()=>{fR(Ch(this.dataSync.doc))},"local"),this.#e=RR(Ch(this.dataSync.doc)),this.events.emit("update")})}#e;get revision(){return this.#e}get presences(){return this.dataSync.presences}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/datasync",{branchId:this.branchId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return o==="update"?(this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}):this.dataSync.listen(o,e)}openPage(o){let e=this.dataSync.presence;this.manager.touch(this),e&&this.dataSync.setPresence({data:{...e.data,pageId:o}})}syncChange(o){return this.manager.touch(this),this.dataSync.transact(n=>o(this._change))}async change(o){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");let e=this.syncChange(o);return await this.waitForSync(),e}};c();var SP=b(Vp(),1);var wm=class{constructor(o,e,n,r={}){this.events=new SP.EventEmitter;this.manager=o,this.contentId=n.contentId,this.branchId=n.branchId,this.pageId=n.pageId,this.singleEditBatchingInterval=r.singleEditBatchingInterval??1500,this.#e=Kp.create(),this.dataSync=new pd(o.client,e,{YType:Rr,readOnly:r.readOnly}),this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.dataSync.listen("restorePositions",i=>{let a=this.createSelectionFromRelatives(this.value.document,i);a=a?a.normalize(this.value.document):he.create(),this.#e.selection.isFocused&&(a=a.focus()),this.#e=this.#e.merge({selection:a}),this.events.emit("value")}),this.dataSync.listen("update",i=>{i==="local"||this.createSlateValue(),this.events.emit("value")}),this.dataSync.listen("presences",()=>{this.dataSync.presences.length>0?this.dataSync.hasBatchingEnabled()&&this.dataSync.disableBatching():this.dataSync.hasBatchingEnabled()||this.dataSync.resetBatchingInterval(this.singleEditBatchingInterval),this.updateSelections()}),this.dataSync.listen("state",i=>{i==="open"&&this.updateSelections()})}#e;get value(){return this.#e}createSlateValue(){let o=gm(this.dataSync.doc);this.dataSync.doc.transact(()=>qR(o),"local");let e=NR(o);this.#e=this.dataSync.doc.transact(()=>{let n=this.value.selection,r=vO[e.data.get("schemaType")||"document"],i=Kp.create({document:e},{normalize:!1}).setSchema(r);if(i.document!==e)throw new Error("Document should not be modified by creation of Value");let a=i.change({save:!1}).normalize();a.value.document!==i.document&&(i=i.merge({document:a.value.document}),Gw(a,o));let s=this.dataSync.presence?this.createSelectionFromRelatives(i.document,this.dataSync.presence.positions):void 0;return s&&(s=s.normalize(e)),s&&n.isFocused&&(s=s.focus()),i=i.merge({selection:s??he.create()}),i},"local")}keepAlive(){return this.manager.keepAlive(this)}open(o={}){return this.dataSync.presence||this.dataSync.setPresence({data:o}),this.dataSync.open(this.contentId,"/branches/:branchId/pages/:pageId/document/datasync",{branchId:this.branchId,pageId:this.pageId},this.manager.clientId?{clientId:this.manager.clientId}:{})}close(){this.manager.close(this)}destroy(){this.dataSync.destroy()}waitForSync(){return this.dataSync.waitForSync()}listen(o,e){return this.events.addListener(o,e),()=>{this.events.removeListener(o,e)}}applyChange(o){if(this.dataSync.readOnly)throw new Error("can't apply change when dataSync is in read-only mode");this.manager.touch(this);let e=this.value;if(this.#e=o.value,e.document!==o.value.document?(this.dataSync.transact(n=>{Gw(o,gm(n))}),this.updateSelections()):this.events.emit("value"),o.value.selection!==e.selection){let n=o.value.selection;this.dataSync.setPresence({data:{...this.dataSync.presence?.data||{}},positions:FR(o.value.document,this.dataSync.doc,n)})}o.value.selection.isBlurred&&this.dataSync.flushBatchUpdates()}async change(o){let e=this.value.change();return o(e),this.applyChange(e),this.waitForSync()}updateSelections(){this.dataSync.state!=="open"?this.selections=Ma.create():this.selections=Ma.create(this.dataSync.presences.map(o=>{let e=this.createSelectionFromRelatives(this.value.document,o.positions);return e?e.merge({data:Bu.create({clientId:o.clientId,...o.data})}):null}).filter(ue)),this.events.emit("selections")}undo(){return this.dataSync.undo()}redo(){return this.dataSync.redo()}createSelectionFromRelatives(o,e){let n=this.dataSync.doc;return VR(o,{anchor:e.anchor&&vw(e.anchor,n)||void 0,focus:e.focus&&vw(e.focus,n)||void 0})}};c();var Mh=class{constructor(o,e={}){this.browserCache=e.browserCache,this.cache=nr({getKey:n=>n,getValue:async n=>{let r=await o(n),i=Array.isArray(r)?r:[r],a={};if(i.forEach(s=>{let l=oP(s),u={token:s,metadata:l};Object.keys(l.payload.content).forEach(d=>{a[d]=u,n!==d&&this.cache.write(d,u)})}),!a[n])throw new Ui.Forbidden(`No authentication for content "${n}"`);return a[n]},ttl:n=>n.metadata.expiration-(Date.now()+5*60*1e3),effects:this.browserCache?[this.browserCache.effect]:[]})}async getParsedToken(o){return await this.cache.readAsync(o)}async getToken(o){let{token:e}=await this.getParsedToken(o);return e}async clearCache(){this.cache.clearAll(),this.browserCache&&await this.browserCache.clearCache()}};c();c();c();var Nh=Symbol("HiveDataSyncCacheOrigin"),Lh=class{};var P8="hive-docs",Nc=Ze("hive:browsercache"),I8=100,Ah=class extends Lh{constructor(){super();this.updateCountByGuid=new Map;this.db=new Fx(P8),this.db.version(1).stores({updates:"++id,guid,at,state"})}get updates(){return this.db.table("updates")}async clear(){await this.db.delete()}registerDoc(e){let n=()=>{let r=(a,s)=>{s!==Nh&&this.pushUpdate(e,a).catch(l=>{Nc.error(`error pushing update for ${e.guid}`,l)})},i=()=>{e.off("updateV2",r),e.off("destroy",i)};e.on("updateV2",r),e.on("destroy",i),this.fetchUpdates(e).catch(a=>{Nc.error(`error fetching updates for ${e.guid}`,a)})};this.db.isOpen()?n():(this.db.on("ready",n),this.db.open().catch(r=>{Nc.error("error opening IndexedDB",r)}))}async fetchUpdates(e){let n=await this.updates.where("guid").equals(e.guid).toArray();if(!n.length){Nc.info(`no updates found for ${e.guid}`);return}Nc.info(`fetched ${n.length} updates for ${e.guid}`);let r=0;IO(e,()=>{for(let i of n)e.transact(()=>{r+=i.value.byteLength,xg(e,i.value,Nh)})},Nh,!1),Nc.info(`loaded ${n.length} updates (${r} bytes) for ${e.guid}`),e.emit("load",[]),this.updateCountByGuid.set(e.guid,n.length)}async pushUpdate(e,n){let r=this.updateCountByGuid.get(e.guid)??0;if(r>=I8){await this.resetDoc(e);return}Nc.info(`push update for ${e.guid} (${n.byteLength} bytes, ${r+1} updates)`);let i=Date.now();await this.updates.add({guid:e.guid,value:n,at:i,state:!1}),this.updateCountByGuid.set(e.guid,(this.updateCountByGuid.get(e.guid)??0)+1)}async resetDoc(e){let n=Og(e);Nc.info(`reset cache for ${e.guid} with ${n.byteLength} bytes`),await this.db.transaction("rw",this.updates,async r=>{await this.updates.where("guid").equals(e.guid).delete();let i=Date.now();await this.updates.add({guid:e.guid,value:n,at:i,state:!0})}),this.updateCountByGuid.set(e.guid,0)}};var CP=Ze("hive:datasync-manager"),$w=2,Dh=class{constructor(o,e={}){this.syncs=new Map;this.ids=new WeakMap;this.gcClock=0;this.cache=new Ah;this.client=o,this.ttl=e.ttl??1e3*60*5}async clearCache(){await this.cache.clear()}close(o){let e=this.ids.get(o);if(!e)throw new Error("Unknown sync client");let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");n.sync.destroy(),this.syncs.delete(e),this.ids.delete(o)}closeAll(){this.stopGarbageCollect(),[...this.syncs.values()].map(o=>o.sync.close()),this.syncs=new Map,this.ids=new WeakMap}touch(o){let e=this.ids.get(o);if(!e)return!1;let n=this.syncs.get(e);if(!n)throw new Error("Expected sync client to be registered");return n.clock=this.gcClock,!0}keepAlive(o){this.touch(o);let e=setInterval(()=>{this.touch(o)||n()},this.ttl/2),n=()=>{e&&clearInterval(e),e=void 0};return n}branch(o,e,n){let r=n?.readOnly??!1,i=this.getSync(`content/${o}/branches/${e}/datasync`,a=>new bm(this,a,{contentId:o,branchId:e},{readOnly:r}),n);if(i&&!(i instanceof bm))throw new Error(`Expected HiveBranchRevision, got ${i.constructor.name}`);return i}pageDocument(o,e,n,r){let i=this.getSync(`content/${o}/branches/${e}/pages/${n}/document/datasync`,a=>new wm(this,a,{contentId:o,branchId:e,pageId:n},r),r);if(i&&!(i instanceof wm))throw new Error(`Expected HiveBranchDocument, got ${i.constructor.name}`);return i}getSync(o,e,n){let r=n?.readOnly??!1,i=this.syncs.get(o);if(i)return i.sync.dataSync.setReadOnly(r),i.sync;if(n?.autoInit===!1)return;let a=e(o);return this.syncs.set(o,{sync:a,clock:this.gcClock}),this.ids.set(a,o),a.dataSync.listen("clientId",s=>{this.clientId=s}),this.cache.registerDoc(a.dataSync.doc),CP.info(`initialize sync for "${o}"`),this.startGarbageCollect(),a}garbageCollect(){this.gcClock+=1;for(let[o,{sync:e,clock:n}]of this.syncs.entries())if(n<this.gcClock-$w){let r=(this.gcClock-n)*(this.ttl/$w);CP.info(`garbage collection "${o}", last active ~${r}ms ago`),this.close(e)}this.syncs.size===0&&this.stopGarbageCollect()}startGarbageCollect(){this.gcInterval||(this.gcInterval=setInterval(()=>this.garbageCollect(),this.ttl/$w))}stopGarbageCollect(){this.gcInterval&&(clearInterval(this.gcInterval),this.gcInterval=void 0)}};c();var Bh=class{constructor(o){this.branchesCache=nr({getValue:async o=>{try{return await this.client.getBranch(o.contentId,o.branchId)}catch(e){if(e.statusCode===404)return;throw e}}});this.revisionsCache=nr({getValue:async o=>{try{return await this.client.getRevision(o.contentId,o.revisionId)}catch(e){if(e.statusCode===404)return;throw e}}});this.branchesHistoryCache=nr({getValue:async o=>await this.client.getBranchHistory(o.contentId,o.branchId,{page:o.initialRevisionId,limit:o.size,...o.git!==void 0?{git:o.git}:{}})});this.documentsCache=nr({getValue:async o=>{try{return await this.client.getDocument(o.contentId,o.documentId)}catch(e){if(e.statusCode===404)return;throw e}},toJS:o=>o!==void 0?iO(o):"undefined",fromJS:o=>o!=="undefined"?rO(o):void 0});this.client=o}getBranchHistory(o,e,n){return Au(this.branchesHistoryCache.readCacheState({contentId:o,branchId:e,initialRevisionId:n.page,size:n.limit,...n.git!==void 0?{git:n.git}:{}}))}getBranchRevision(o,e){let n=this.client.sync.branch(o,e,{autoInit:!1});return n?n.revision:ng(Au(this.branchesCache.readCacheState({contentId:o,branchId:e})),r=>{if(r)return this.getRevision(o,r.revision)})}getBranchPageDocument(o,e,n){let r=this.client.sync.pageDocument(o,e,n,{autoInit:!1});return r?r.value.document:ng(Au(this.branchesCache.readCacheState({contentId:o,branchId:e})),i=>{if(i)return ng(this.getRevision(o,i.revision),a=>{if(a){let s=a.pages[n];return s?.type!=="document"?void 0:s.document?this.getDocument(o,s.document):qu(s.id).document}})})}getRevision(o,e){return Au(this.revisionsCache.readCacheState({contentId:o,revisionId:e}))}getDocument(o,e){return Au(this.documentsCache.readCacheState({contentId:o,documentId:e}))}toJSON(){return{documents:this.documentsCache.toJS(),revisions:this.revisionsCache.toJS(),branches:this.branchesCache.toJS()}}fromJSON(o){o.documents&&this.documentsCache.fromJS(o.documents),o.revisions&&this.revisionsCache.fromJS(o.revisions),o.branches&&this.branchesCache.fromJS(o.branches)}};c();var nie=b(xP(),1);c();var OP={};c();var _P=b(Vp(),1);var Wh=class{constructor(o,e,n,r,i){this.id=void 0;this.state=null;this.events=new _P.default;this.client=o,this.contentId=e,this.path=n,this.pathParams=r,i&&(this.id=i)}async start(o={}){if(this.id)throw new Error("Operation already started");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)})).json();return this.setState(n),n}async update(o){if(!this.id)throw new Error("Operation not started or HiveContentOperation() is called without an existing operation ID");let n=await(await this.client.request(this.contentId,this.path,{path:this.pathParams},{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...o,id:this.id})})).json();return this.setState(n),n}async markAsSucceeded(){return this.update({status:2})}setState(o){this.id=o.id,this.state=o,this.events.emit("update",o)}listen(o){return this.events.on("update",o),()=>{this.events.off("update",o)}}};var E8=Ze("hive:client"),RP=typeof globalThis.window<"u"||!1,zh=class{constructor(o,e,n={}){this.isRunningAtEdge=RP;let r;this.getEndpoint=typeof o=="string"?()=>Promise.resolve(o):async()=>(r||(r=await o()),r),this.auth=new Mh(e,{browserCache:n.tokensBrowserCache}),this.store=new Bh(this),this.sync=new Dh(this),this.clientId=Aa(),n.locationHint&&(this.isRunningAtEdge=n.locationHint)}close(){this.sync.closeAll()}async clearAuthCache(){await Promise.all([this.auth.clearCache(),this.sync.clearCache()]),this.close()}getSocket(o,e,n,r){if(!this.isRunningAtEdge||!RP)throw new Error("HiveClient#getSocket can only be called from the edge");let i=async()=>{let a=PP(o,e,n),s=await this.auth.getToken(o),l=await this.getEndpoint(),u=new URL(a,l);if(u.protocol=u.protocol.replace("http","ws"),r)for(let[d,p]of Object.entries(r))u.searchParams.set(d,p);return u.searchParams.set("authToken",s),u.toString()};return new Th(i)}async getBranch(o,e){return await(await this.request(o,"/branches/:branchId",{path:{branchId:e}})).json()}async getBranchRevision(o,e,n){return await(await this.request(o,"/branches/:branchId/save",{path:{branchId:e},query:n?{mask:n.join(",")}:{}},{method:"POST"})).json()}async saveBranch(o,e){return{revisionId:(await this.getBranchRevision(o,e,["id"])).id}}async getBranchHistory(o,e,n={}){let{limit:r=10,page:i,git:a,refresh:s}=n;return await(await this.request(o,"/branches/:branchId/history",{path:{branchId:e},query:{limit:r.toString(),...i?{page:i}:{},...a!==void 0?{git:`${a}`}:{},...s!==void 0?{refresh:`${s}`}:{}}})).json()}async getRevision(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e},query:n?{mask:n.join(",")}:{}})).json()}getRevisionInfo(o,e){return this.getRevision(o,e,wO)}async mergeBranch(o,e){if(!this.isRunningAtEdge)throw new Error("HiveClient#mergeBranch can only be called from the edge");return await(await this.request(o,"/branches/:branchId/merge",{path:{branchId:e}},{method:"POST"})).json()}async rollbackBranch(o,e,n){await this.request(o,"/branches/:branchId/rollback",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})}async updateBranch(o,e){return await(await this.request(o,"/branches/:branchId/update",{path:{branchId:e}},{method:"POST"})).json()}async checkoutBranch(o,e,n,r={}){return(await this.request(o,"/branches/:branchId/checkout",{path:{branchId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",...T8(r.operationId)},body:JSON.stringify(n)})).json()}async getDocument(o,e){let r=await(await this.request(o,"/documents/:documentId",{path:{documentId:e}},{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})).arrayBuffer();return mw(new Uint8Array(r))}async getPageDocument(o,e,n){if(!this.isRunningAtEdge)throw new Error("HiveClient#getPageDocument can only be called from the edge");let i=await(await this.request(o,"/branches/:branchId/pages/:pageId/document",{path:{branchId:e,pageId:n}})).arrayBuffer();return mw(new Uint8Array(i))}async createDocument(o,e,n={}){return await(await this.request(o,"/documents",{query:n.documentId?{documentId:n.documentId}:{}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/octet-stream"},body:aO(n.skipNormalization?e:bO(e),{preserveKeys:!0})})).json()}async createRevision(o,e){return await(await this.request(o,"/revisions",{},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}getContentOperation(o,e,n,r){return new Wh(this,o,e,n,r)}getBranchContentOperation(o,e,n){return this.getContentOperation(o,"/branches/:branchId/operation",{branchId:e},n)}async createFileBlob(o,e,n){let r=await this.request(o,"/blobs",{query:{name:e.name}},{method:"POST",headers:{Accept:"application/json","Content-Type":e.contentType},body:n}),{blobId:i}=await r.json();return{blobId:i,downloadURL:eR(await this.getEndpoint(),o,{blobId:i,name:e.name})}}async updateRevisionMetadata(o,e,n){return await(await this.request(o,"/revisions/:revisionId",{path:{revisionId:e}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)})).json()}async duplicateContent(o,e){return(await this.request(o.contentId,"/branches/:branchId/duplicate",{path:{branchId:o.branchId}},{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({origin:e,page:o.pageId})})).json()}async triggerAlarm(o,e={force:!1}){o.pageId?await this.request(o.contentId,"/branches/:branchId/pages/:pageId/document/alarm",{path:{branchId:o.branchId,pageId:o.pageId},query:{force:String(e.force)}},{method:"POST"}):await this.request(o.contentId,"/branches/:branchId/alarm",{path:{branchId:o.branchId},query:{force:String(e.force)}},{method:"POST"})}async request(o,e,n,r={},i={}){let{retries:a=3}=i,{path:s={},query:l={}}=n,u=Aa(),d=new Yi(`hive:request:${(r.method||"GET").toLowerCase()}:${e}`);return d.label("contentId",o),d.setLabels({requestId:u,clientId:this.clientId,locationHint:this.isRunningAtEdge,...n}),d.wrap(async()=>{let p=PP(o,e,s),f=await this.auth.getToken(o),m=await this.getEndpoint(),h=new URL(p,m);h.search=new URLSearchParams(l).toString();let y=new Headers(r.headers||{});y.set("Authorization",`Bearer ${f}`),y.set("X-Request-Id",u),y.set("X-Client-Id",this.clientId),typeof this.isRunningAtEdge=="string"&&y.set("X-Hive-Location-Hint",this.isRunningAtEdge);let S=await IP(()=>fetch(h.toString(),{...OP,...r,headers:y}),a),C=S.headers.get("cf-ray");if(d.label("rayId",C),!S.ok)try{let x="";try{x=(await S.clone().json()).error.message}catch{x=`Unexpected text response: ${await S.text()}`}throw Ui.fromStatusCode(S.status,x)}catch(x){throw x.statusCode?x:new Error(`Unexpected response with status code ${S.status}: ${x.message}`)}return S})}};function PP(t,o,e){for(let[n,r]of Object.entries(e))o=o.replace(`:${n}`,r);return`content/${t}${o}`}function T8(t){return t?{"X-Content-Operation-Id":t}:{}}async function IP(t,o=3,e=500){if(o<=0)return t();try{let n=await t();if(n.status===504||n.status===503)throw Ui.fromStatusCode(n.status,n.statusText);return n}catch(n){if(E8.error("retry because of error",n,{attemptsLeft:o,delay:e}),o>0)return await new Promise(r=>setTimeout(r,e)),IP(t,o-1,e*2);throw n}}function Zw(t){let{children:o}=t,e=Fh.useMemo(()=>{if(t.client)return t.client;let n=new zh(t.endpoint,t.fetchContentAuthToken,{tokensBrowserCache:t.tokensBrowserCache});return t.store&&n.store.fromJSON(t.store),n},[t.client,t.endpoint,t.fetchContentAuthToken,t.store]);return Fh.createElement(s1.Provider,{value:e},o)}c();var md=b(k());var M8=md.createContext(null);function $t(){return md.useContext(M8)}c();var EP=b(k());function TP(t){let e=be().sync.pageDocument(t.branch.contentId,t.branch.branchId,t.pageId,{readOnly:t.readOnly}),n=e.open(t.presence);if(n)throw n;return EP.useEffect(()=>{let r=e.keepAlive();return()=>{e.dataSync.state==="open"&&e.dataSync.setPresence({positions:{}}),r()}},[e]),e}c();var Ac=b(k());function MP(t){let o=Ac.useMemo(()=>({getCurrentValue:()=>t.value,subscribe:a=>t.listen("value",a)}),[t]),e=Ac.useMemo(()=>({getCurrentValue:()=>t.selections,subscribe:a=>t.listen("selections",a)}),[t]),n=Ac.useSyncExternalStore(o.subscribe,o.getCurrentValue),r=Ac.useSyncExternalStore(e.subscribe,e.getCurrentValue),i=Ac.useCallback(a=>{t.applyChange(a)},[t]);return[n,r,i]}c();var Vh=b(k());function LP(t){let o=t.dataSync,e=Vh.useMemo(()=>({getCurrentValue:()=>o.presences,subscribe:n=>o.listen("presences",n)}),[o]);return Vh.useSyncExternalStore(e.subscribe,e.getCurrentValue)}c();var NP=b(k());function AP(t){return NP.useMemo(()=>({onKeyDown(o,e){if(xw.isRedo(o))return t.redo(),o.preventDefault(),e;if(xw.isUndo(o))return t.undo(),o.preventDefault(),e}}),[t])}c();var Jw=b(k());function DP(t){let o=Jw.default.useMemo(()=>({getCurrentValue:()=>{if(t)return t.clock},subscribe:e=>t?t.listen("update",e):()=>{}}),[t]);return Jw.default.useSyncExternalStore(o.subscribe,o.getCurrentValue,()=>{})}c();var fd=b(k());c();var sa=JSON.parse('{"button":"button_nHYaP","primary":"primary_t4-q8","secondary":"secondary_N24Yh","rounded":"rounded_-bdo9","iconOnly":"iconOnly_t2JNX","icon":"icon_sNfFo","label":"label_7wj5k","small":"small_vXHK5","medium":"medium_CpI3p","large":"large_Lqq9j","disabled":"disabled_vwRFY"}');var Qw=fd.default.forwardRef(function(o,e){let{label:n,labelStyle:r,leadingIcon:i,trailingIcon:a,rounded:s=!1,disabled:l=!1,active:u=!1,iconOnly:d=!1,size:p="medium",kind:f="default",id:m,testID:h,inlineStyle:y,style:S,onPress:C,onPressStart:x,onPressEnd:O,preventFocusOnPress:E,...P}=o,{pressProps:L}=Wg({onPress:C,onPressStart:x,onPressEnd:O,isDisabled:l,preventFocusOnPress:E}),T=!!(i||a)&&d;return fd.default.createElement(U,{id:m,as:"button",...L,"aria-disabled":l,disabled:l,"aria-label":T?n:void 0,type:"button",style:[sa.button,[sa[f]],[sa[p]],{[sa.active]:u,[sa.disabled]:l,[sa.iconOnly]:T,[sa.rounded]:s},S],inlineStyle:y,ref:e,"data-testid":h,...P},i?fd.default.createElement(i,{style:[sa.icon]}):null,!d&&n?fd.default.createElement(At,{as:"span",style:[sa.label,r]},n):null,a?fd.default.createElement(a,{style:[sa.icon]}):null)});c();function BP(t){let{r:o,g:e,b:n}=f1(t);return Math.sqrt(.299*(o*o)+.587*(e*e)+.114*(n*n))}function Ka(t){return BP(t)>150?"light":"dark"}function qh(t){let o=BP(t);return o>240?"lightest":o>215?"light":o>190?"semiLight":o>165?"medium":o>140?"semiDark":o>115?"dark":"darkest"}c();function WP(t){return t.charAt(0).toUpperCase()+t.slice(1)}c();var gd=b(k()),Gh=b(BD());function zP(t=2e3){let[o,e]=gd.useState(!1),n=gd.useRef(null);return gd.useEffect(()=>(!o&&typeof window<"u"&&(n.current=setTimeout(()=>(0,Gh.unstable_runWithPriority)(Gh.unstable_IdlePriority,()=>e(!0)),t)),()=>{n.current&&clearTimeout(n.current)}),[]),o}c();var FP=b(k());function VP(){let t=FP.useRef();return Yu(()=>{t.current=window},[]),t}c();var hd=b(k());function qP(){let t=hd.useRef(new WeakMap);return hd.useCallback(o=>(t.current.has(o)||t.current.set(o,hd.createRef()),t.current.get(o)),[])}c();var GP=b(k());function Hh(t,o){let e=Yo(t);GP.default.useEffect(()=>{let n=()=>e.current(),r=window.setTimeout(n,o);return()=>window.clearTimeout(r)},[o])}c();var Sm=b(k());c();var HP=b(k());function Kh(t,o=500){let e=HP.useRef(0);return n=>e.current&&Date.now()-e.current<o?(t(n),e.current=0,!0):(e.current=Date.now(),!1)}c();var KP=b(k());function XP(t,o){let{scope:e=document,exact:n=!1}=o||{},r=Yo(t);KP.useEffect(()=>{if(!t)return;let i=a=>{(n?a.target===e:e.contains(a.target))&&a.key==="Tab"&&(a.defaultPrevented||a.preventDefault(),r.current?.(a.shiftKey))};return document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",i)}},[r,!!t,e,n])}function UP(t){let{anchor:o,children:e,wrapper:n,onClose:r,...i}=t,a=Sm.useRef(null);return bc({...i,onClose:r},a),Sm.createElement(za,{ref:a,opened:i.opened,anchor:o,wrapper:n},Sm.createElement(Hg.Provider,{value:r},e))}c();var Xa=b(k()),YP=b(q());function Xh(t,o={}){let e=Xa.createContext(null);function n(i){let{children:a,...s}=i,l=typeof t=="object"?t:t(i),[u,d]=Xa.useState(l),[p,f]=Xa.useState(!1),m=h=>{let{layout:y}=h.nativeEvent;(!u||o.width!==!1&&y.width!==u.width||o.height!==!1&&y.height!==u.height)&&(d(y),f(!0))};return Xa.createElement(e.Provider,{value:{ready:p,dimensions:u}},Xa.createElement(YP.View,{...s,onLayout:m},a))}function r(){let i=Xa.useContext(e);if(!i||!i.dimensions)throw new Error("Dimensions not available");return[i.dimensions,i.ready]}return{View:n,useDimensions:r}}c();var Dl=b(k()),jh=b(q());c();var Uh=b(k()),Yh=b(q());var L8=Z.createResponsiveComponent(Yh.TouchableOpacity);function jP(t){let[,o]=_(D8),{close:e}=ho(),n=$u()==="mobile",r=t.closeable||n,i=()=>{t.onClose&&t.onClose(),e(t.id)},a=Pl({mount:N8,unmount:A8});return Uh.createElement(Yh.View,{ref:a},Uh.createElement(L8,{mobileStyle:o.toastMobile,desktopStyle:o.toastDesktop,onPress:()=>{t.onOpen&&t.onOpen(),r&&i()}},Uh.createElement(Oi,{...t,onClose:r?i:void 0,style:o.alert,mainBackground:!0})))}var N8={duration:Fa.TRANSITION_DURATION_SHORT,frames:{0:{opacity:0,transform:[{translateY:100}]},1:{opacity:1,transform:[{translateY:0}]}}},A8={duration:Fa.TRANSITION_DURATION_SHORT,frames:{0:{opacity:1,transform:[{translateY:0}]},1:{opacity:0,transform:[{translateY:100}]}}},D8=G.create({toastDesktop:{width:"auto",minWidth:420,maxWidth:720,marginBottom:g.small},toastMobile:{width:"100%",minWidth:0},alert:t=>({...t.shadows.pop,borderColor:t.colors.border.main})});function $P(t){let o=tr(A1),e=tr(N1),n=Dl.useRef(null),r=z8[o];return Dl.createElement(Tn,{ref:n},Dl.createElement(Z.View,{style:[W8.toaster],mobileStyle:r.mobile,desktopStyle:r.desktop},Dl.createElement(E1,null,e.map(i=>Dl.createElement(jP,{...i,key:i.id})))))}var W8=jh.StyleSheet.create({toaster:{position:"fixed",zIndex:200}}),z8={"bottom-right":jh.StyleSheet.create({desktop:{bottom:g.medium,right:g.medium},mobile:{bottom:g.medium,right:g.medium,left:g.medium}}),"bottom-right-with-bar":jh.StyleSheet.create({desktop:{bottom:g.xxlarge,right:g.medium},mobile:{bottom:g.xxlarge+g.xlarge+g.medium,right:g.medium,left:g.medium}})};c();var ti=b(k()),zs=b(q());var F8=H.createInteractiveComponent(Zr);function Ua(t){let{icon:o,title:e,subtitle:n,details:r,style:i,buttons:a=[],...s}=t,[,l]=_(W);return ti.createElement(Is,{style:[w.alignCenter,g.Padding.medium,i],...s},o?ti.createElement(V8,{icon:o}):null,ti.createElement(zs.View,{style:[w.flex1]},ti.createElement(zs.View,{style:[w.directionRow,w.alignCenter]},ti.createElement(F8.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary,descendantOf:Is.interactiveHandle},e),n?ti.createElement(Zr,{style:[l.Label,l.textMuted,g.Margin.mediumLeft]},n):null),r?ti.createElement(zs.View,null,ti.createElement(zs.Text,{style:[l.Label,l.textMid]},r)):null),a.length>0?ti.createElement(zs.View,{style:[w.directionRow,w.alignCenter,g.Margin.mediumLeft]},a.map((u,d)=>u?ti.createElement(zs.View,{style:[g.Margin.smallLeft],key:d},u):null)):null)}function V8(t){let{icon:o}=t,[,e]=_(W),n=H.useInteractiveComponent(o);return ti.createElement(zs.View,{style:[g.Margin.mediumRight]},ti.createElement(n.Child,{size:A.S,style:[e.textMuted],hoverStyle:e.primary}))}c();async function ZP(t){let o=()=>{let n=t;for(;n&&(n=n.parentElement,!(n===document.querySelector("body")||n?.hasAttribute("data-virtualparent"))););return n},e;return new Promise(n=>{let r=o();if(!r||!r.firstChild)return;let i=()=>{e.disconnect(),n()},a=!1;e=new IntersectionObserver(l=>{let[u]=l;u.isIntersecting&&requestAnimationFrame(()=>{i(),a=!0})},{rootMargin:"-50% 0% -50% 0%"});let s=()=>{Qg(r,{scrollMode:"if-needed",block:"center",inline:"center",behavior:"smooth"}),setTimeout(()=>{a||s()},500)};s(),e.observe(r)})}c();var rS=b(k());c();var Xt=b(k()),rI=b(q());c();var ot=b(k()),Nn=b(q());c();var Pe=b(k()),Zt=b(q());var JP=Pe.forwardRef(function(o,e){let{command:n,query:r,active:i,executeCommand:a,onHoverIn:s}=o,[l,u]=_(W),[,d]=_(q8),[p,f]=En(!1),m=u.text,h=u.textMid,y=u.primary,S=l.colors.background.main;i&&(m=u.textStandout,h=u.textMid,S=l.colors.background.muted);let C=[u.Bold],x=Pe.useCallback(()=>{let P=a(n);P instanceof Promise&&f(()=>P)},[n,a]),O=Pe.useCallback(()=>s(n),[n,s]),E=H.useInteractiveState({onHoverIn:O});return Pe.createElement(Pr,{ref:e,component:Zt.TouchableOpacity,...E.events,onMouseDown:P=>{P.preventDefault()},onPress:x,backgroundColor:S,style:[w.directionRow,w.alignCenter,d.commandItem,g.Margin.smallHorizontal,g.Padding.xsmallVertical,g.Padding.smallHorizontal,{height:eS(n)}],testID:n.testID},p?Pe.createElement(Zt.View,{style:[g.Padding.mediumRight]},Pe.createElement(xe,{size:"medium"})):n.icon?Pe.createElement(Zt.View,{style:[g.Padding.mediumRight]},Pe.createElement(Pe.Suspense,{fallback:Pe.createElement(Zt.View,{style:{width:A.ICON_M,height:A.ICON_M}})},Pe.createElement(n.icon,{size:A.ICON_M,style:y}))):null,Pe.createElement(Zt.View,{style:w.flex1},Pe.createElement(Zt.View,{style:w.directionRow},Pe.createElement(Zt.View,{style:w.flex1},n.title?Pe.createElement(Zt.View,null,Pe.createElement(Zt.Text,{style:[u.Label,m,n.subtitle?u.Bold:u.Medium],numberOfLines:1},Pe.createElement(rh,{query:r,text:n.title,highlight:C}))):null,n.subtitle?Pe.createElement(Zt.View,null,Pe.createElement(Zt.Text,{style:[u.Caption,h],numberOfLines:1},Pe.createElement(rh,{query:r,text:n.subtitle,highlight:C}))):null)),n.body?Pe.createElement(Zt.View,{style:[d.commandBody,g.Padding.smallLeft,g.Margin.smallTop]},n.body.map((P,L)=>Pe.createElement(Zt.View,{key:L},Pe.createElement(Zt.Text,{style:[u.Caption,u.textMid],numberOfLines:1},Pe.createElement(rh,{query:r,text:P,highlight:C}))))):null),n.label?Pe.createElement(Zt.View,null,Pe.createElement(B1,{size:"medium",kind:n.label.kind,icon:n.label.icon},n.label.title)):Pe.createElement(Pe.Fragment,null,n.descendant?Pe.createElement(Zt.View,{style:[g.Padding.mediumLeft]},Pe.createElement(v.ChevronRight,{size:A.ICON_S,style:[u.textMuted]})):null,n.type===1?Pe.createElement(Zt.View,{style:[g.Padding.mediumLeft]},Pe.createElement(kc,{value:n.selected,onValueChange:x,size:A.ICON_S})):null,n.type===0?Pe.createElement(Zt.View,{style:[g.Padding.mediumLeft]},Pe.createElement(nh,{value:n.selected,onValueChange:x,size:A.ICON_S})):null,n.type===2?Pe.createElement(Zt.View,{style:[g.Padding.mediumLeft]},Pe.createElement(oh,{value:n.enabled,onValueChange:()=>{}})):null))});function eS(t){let o=0;return o+=2*g.small,o+=Math.max(t.title&&Ue.Label.lineHeight||0,t.icon?A.ICON_M:0,typeof t.selected=="boolean"||typeof t.enabled=="boolean"?A.ICON_S:0),t.subtitle&&(o+=Ue.Caption.lineHeight||0),t.body&&(o+=g.small,o+=t.body.length*(Ue.Caption.lineHeight||0)),o}var q8=G.create({commandItem:t=>({borderRadius:t.radiuses.medium}),commandBody:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.mid})});c();function $h({getItemHeight:t,getItemSeparatorHeight:o=()=>0,getSectionSeparatorHeight:e=()=>0,getSectionHeaderHeight:n=()=>0,getSectionFooterHeight:r=()=>0,listHeaderHeight:i=0,stickySectionHeadersEnabled:a}){return(s,l)=>{let u=0,d=typeof i=="function"?i():i,p=0,f=s.length;for(let m=0;m<f&&(p<l||m===0);m++){let h=s[m],y=s[m].data,S=y.length,C=s[m-1],x=s[m+1],O={section:h,index:m},E=e({section:h,index:m,leadingItem:void 0,trailingItem:y[0],leadingSection:C,trailingSection:x});d+=u+E+(a&&m===1?n({section:s[0],index:0}):0),u=a&&m===0?0:n(O),m!==0&&p++;for(let P=0;P<S&&(p<l||m===0&&P===0);P++){d+=u;let L=y[P],R=P>0&&P<S-1?o({item:L,section:h,index:P,leadingItem:y[P-1],trailingItem:y[P+1],leadingSection:C,trailingSection:x}):0;u=t({item:L,section:h,index:P})+R,p++}if(p<l&&(d+=e({section:h,index:m,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:C,trailingSection:x})),p<l){let P=e({section:h,index:m,leadingItem:y[y.length-1],trailingItem:void 0,leadingSection:C,trailingSection:x});d+=u+P,u=r(O),p++}}return{index:l,length:u,offset:d}}}function QP(t){let{computed:{listId:o,items:e,sections:n,areMoreLoading:r},withKeyboardInteractions:i,palette:a,setPalette:s,setTopPalette:l}=t,u=$u(),d=ot.useRef(null),p=qP(),f=ot.useCallback(async M=>{let I=await o_(a,M);I?s(I):l(null)},[s,l]),m=ot.useCallback(M=>{s(I=>{if(!I)return null;let N=p(M),z=n_(I,M,N);return z||(I.descendant?{...I,descendant:void 0}:I)})},[s,p]),h=ot.useCallback(()=>{s(M=>M?.parent?null:M)},[s]),y=ot.useCallback(M=>{let I=-1;return{sectionIndex:n.findIndex(z=>(I=z.data.findIndex(Y=>Y.key===M),I>=0)),itemIndex:I,viewPosition:.5}},[n]),S=ot.useCallback(M=>d.current?.scrollToLocation(y(M.key)),[y]),C=i_({active:i,items:e,onSelect:f,onOpen:m,onClose:h,scrollTo:S}),x=n.length>1,O=ot.useCallback(M=>{C.hoverItem(M),m(M)},[C.hoverItem,m]),E=ot.useMemo(()=>$h({getItemHeight:({item:M})=>eS(M),getSectionSeparatorHeight:({section:M,leadingItem:I,leadingSection:N,trailingItem:z,trailingSection:Y})=>N&&!I&&!M.group.title?2*(g.small-1)+1:Y&&!z?A.S/4:0,getSectionHeaderHeight:({section:M})=>x&&M.group.title?A.S:0}),[x]),P=ot.useMemo(()=>x?({section:M})=>M.group.title?ot.createElement(H8,{group:M.group}):null:void 0,[x]),L=ot.useCallback(M=>ot.createElement(K8,{...M}),[]),R=ot.useCallback(({item:M})=>ot.createElement(JP,{ref:p(M),active:u==="desktop"&&M.key===C.cursor.current?.key,command:M,query:a.query.text,executeCommand:f,onHoverIn:O}),[f,p,C.cursor.current?.key,O,u,a.query.text]),T=r;if(!T&&e.length===0){let M=a.placeholder||(cm(a)?null:"No items found");return M?ot.createElement(G8,{placeholder:M}):null}return ot.createElement(Nn.View,{style:[w.flex1]},ot.createElement(Nn.SectionList,{key:o,ref:d,sections:n,extraData:C.cursor,getItemLayout:E,renderItem:R,SectionSeparatorComponent:L,renderSectionHeader:P,contentContainerStyle:[g.Padding.smallVertical],ListFooterComponent:T?ot.createElement(Nn.View,{style:[w.directionRow,w.justifyContentCenter,g.Padding.medium]},ot.createElement(xe,{size:"large"})):null}))}function G8(t){let{placeholder:o}=t,[,e]=_(W);return ot.createElement(Nn.View,{style:[g.Padding.smallHorizontal,g.Padding.mediumVertical]},ot.createElement(Nn.View,{style:[g.Padding.mediumHorizontal]},ot.createElement(Nn.Text,{style:[e.Caption,e.textMuted]},o)))}function H8(t){let{group:o}=t,[,e]=_(W);return ot.createElement(Nn.View,{style:[X8.paletteGroupHeader,w.directionRow,w.alignCenter,g.Padding.smallHorizontal]},ot.createElement(Nn.View,{style:[g.Padding.smallHorizontal]},ot.createElement(Nn.Text,{style:[e.GroupTitle,e.textMuted]},o.title)))}function K8(t){let{leadingSection:o,section:e,leadingItem:n,trailingSection:r,trailingItem:i}=t,[,a]=_(U8);return o&&!n&&!e.group.title?ot.createElement(Nn.View,{style:a.paletteDividerUntitled}):(r&&!i&&(Nn.View,a.paletteDividerFooter),null)}var X8=Nn.StyleSheet.create({paletteGroupHeader:{height:A.S}}),U8=G.create({paletteDividerUntitled:(t,o)=>({marginTop:g.small-1,marginBottom:g.small-1,borderTopColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderTopWidth:1}),paletteDividerFooter:{height:A.S/4}});c();var yd=b(k()),vd=b(q());function eI(t){let{error:o}=t,[,e]=_(W);return console.error(o),yd.createElement(vd.View,{style:[w.directionRow,w.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal]},yd.createElement(vd.View,{style:[g.Padding.mediumRight,g.Padding.xsmallTop]},yd.createElement(v.Warning,{size:A.ICON_S,style:e.danger})),yd.createElement(vd.View,{style:[w.flex1,w.directionRow,w.alignCenter]},yd.createElement(vd.Text,{style:[e.danger,e.Label]},Ta(o))))}c();var Tr=b(k()),Fs=b(q());var tI=Tr.forwardRef(function(o,e){let{palette:n,setPalette:r,withItems:i,placement:a}=o,[,s]=_(Y8),[l,u]=_(W),[d,p]=Uu(n.query.text,[n]),f=h=>{p(h),r(y=>!n||!y?n:ed({...y,descendant:void 0},h))},m=h=>{(h.nativeEvent.key==="Escape"||h.nativeEvent.key==="Backspace"&&n.query.text.length===0)&&r(null)};return Tr.createElement(Fs.View,{style:i&&s.paletteInputWrapperWithBottomBorder},Tr.createElement(Fs.View,{style:[w.directionRow,w.alignCenter]},n.parent&&a==="right"?Tr.createElement(Fs.View,{style:[g.Padding.smallLeft]},Tr.createElement(v.ChevronLeft,{size:A.ICON_M,style:u.textMuted})):null,Tr.createElement(Fs.View,{style:[w.flex1,w.directionRow,w.alignCenter,s.paletteInput,g.Margin.small]},Tr.createElement(Fs.View,{style:[w.flex1]},Tr.createElement(Fs.TextInput,{ref:e,value:d,placeholder:n.search,placeholderTextColor:l.colors.text.muted,onChangeText:f,onKeyPress:m,style:[u.Caption,u.text,g.Padding.mediumHorizontal,g.Padding.smallVertical]})),Tr.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[g.Margin.smallHorizontal]},Tr.createElement(V,{icon:v.X,size:"large",onPress:()=>r(null)}))),n.parent&&a==="left"?Tr.createElement(Fs.View,{style:[g.Padding.smallRight]},Tr.createElement(v.ChevronRight,{size:A.ICON_M,style:u.textMuted})):null))}),Y8=G.create({paletteInputWrapperWithBottomBorder:(t,o)=>({borderBottomColor:o.color==="light"?t.colors.border.mid:t.colors.sidebar.itemBorder,borderBottomWidth:1}),paletteInput:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});c();var bd=b(k());function oI(t){let[o,e]=bd.useState(!1),n=rm(()=>new WeakMap),r=bd.useRef(null);return bd.useMemo(()=>{let i=[],a=[],s;t.groups.forEach(d=>{let p;try{p=j8(t,d)}catch(f){s=f;return}if(p instanceof Promise){let f=n.current.get(d);f&&i.push(f),a.push(p)}else p&&(n.current.set(d,p),i.push(p))});let l=i.filter(d=>d.data.length>0).sort((d,p)=>d.priority>p.priority?-1:d.priority<p.priority?1:0),u=l.reduce((d,p)=>(d.push(...p.data),d),[]);if(a.length>0){e(!0);let d=r.current=Promise.all(a);d.then(()=>{d===r.current&&(e(!1),r.current=null)}).catch(p=>Nu(new Error(p)))}return{listId:Date.now(),items:u,sections:l,areMoreLoading:o,error:s}},[t.groups,t.query,o,n])}function j8(t,o){try{let e=typeof o.commands=="function"?o.commands(t):o.commands,n=typeof o.commands!="function"||o.commands.length===0,r=o.priority||5;if(n){let i=$8(t.query.text,e);r=i.reduce((a,s)=>typeof s.score<"u"?Math.max((1-s.score)*10,a):a,r),e=i.map(a=>a.item)}return{group:o,priority:r,data:e}}catch(e){if(e instanceof Promise)return e;throw e}}function $8(t,o){return t?new Xu(o,{threshold:.3,location:0,distance:100,shouldSort:!0,includeScore:!0,minMatchCharLength:1,isCaseSensitive:!1,keys:["title","keywords"]}).search(t):o.map(n=>({item:n,score:void 0}))}c();var nS=b(sg()),ey=b(k());var tS=204,Zh=246,oS=384,Z8=630,Jh=180,Qh=355;function nI(t,o,e){let n=ey.useMemo(()=>Q8(o,e),[o.position,!!o.parent,e]),r=ey.useCallback(l=>J8(l,o.position),[o.position]),[i,a,s]=S1(t,r,n);return[i,a,s]}function J8(t,o){let e,n=o?.width||"medium";switch(n){case"small":e={width:tS,maxWidth:tS,minWidth:tS,minHeight:0,height:Jh,maxHeight:Qh};break;case"medium":e={width:Zh,maxWidth:Zh,minWidth:Zh,minHeight:0,height:Jh,maxHeight:Qh};break;case"large":e={width:oS,maxWidth:oS,minWidth:oS,minHeight:0,height:Jh,maxHeight:Qh};break;case"anchor":let r=Math.max(Zh,t.width),i=(0,nS.default)(t.width,r,Z8);e={width:(0,nS.default)(t.width,r,i),maxWidth:i,minWidth:r,minHeight:0,height:Jh,maxHeight:Qh};break;default:Ce(n)}return e}function Q8(t,o){let e={cover:t.position?.cover,spacingWithAnchor:g.small};return t.parent?(e.offset={top:-g.small},e.spacingWithAnchor=g.medium,e.allowedPlacements=o==="left"?["left","right"]:["right","left"]):t.position?.width==="anchor"&&(e.allowedPlacements=["bottom","top"]),e}var eB=Z.createResponsiveComponent(Pr);function iI(t){let{paletteState:{palette:o},setPaletteState:e}=t,n=Xt.useRef(null),r=()=>e(null),i=P1({mount:D.animations.fadeIn,unmount:D.animations.fadeOut});bc({opened:!0,closeOnEsc:!cm(o),closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,onClose:r},n),w1();let a=Xt.useRef(null);return u1({ref:a,onInteractOutside:r}),Xt.createElement(Tn,{ref:n},Xt.createElement(U,{ref:i,style:[D.position.fixed,D.floating.backdrop]},Xt.createElement(U,{ref:a},Xt.createElement(aI,{...t,setTopPaletteState:e}))))}function aI(t){let{paletteState:{palette:o,anchorRef:e},setPaletteState:n,setTopPaletteState:r,parentPlacement:i}=t,[a,s]=nI(e,o,i),l=Pl(Fa.slideToL[s]);return Xt.createElement(Xt.Fragment,null,Xt.createElement(tB,{ref:l,palette:o,setPalette:p=>{n(f=>{if(!f)return null;let m=typeof p=="function"?p(f.palette):p;return m?{...f,palette:m}:null})},setTopPalette:p=>{r(f=>{if(!f)return null;let m=typeof p=="function"?p(f.palette):p;return m?{...f,palette:m}:null})},positionStyle:a,placement:s}),o.descendant?Xt.createElement(aI,{paletteState:o.descendant,setTopPaletteState:r,setPaletteState:p=>{n(f=>f?{...f,palette:{...f.palette,descendant:(typeof p=="function"?p(f.palette.descendant||null):p)||void 0}}:null)},parentPlacement:s}):null)}var tB=Xt.forwardRef(function(o,e){let{palette:n,setPalette:r,setTopPalette:i,positionStyle:a,placement:s}=o,l=Xt.useRef(null),[u,d]=_(oB),p=oI(n),f=!n.descendant;return Xt.useEffect(()=>{if(n.descendant)return;let m=l.current;m&&(document.activeElement===m||(m.select(),m.focus()))},[n]),Xt.createElement(rI.TouchableWithoutFeedback,{onPress:m=>m.preventDefault()},Xt.createElement(eB,{ref:e,backgroundColor:u.colors.background.main,style:[d.palette],mobileStyle:d.paletteMobile,desktopStyle:[d.paletteInline,a],onStartShouldSetResponder:()=>!0},cm(n)?Xt.createElement(tI,{ref:l,palette:n,setPalette:r,withItems:p.items.length>0,placement:s}):null,p.error?Xt.createElement(eI,{error:p.error}):Xt.createElement(QP,{computed:p,palette:n,withKeyboardInteractions:f,setPalette:r,setTopPalette:i})))}),oB=G.create({palette:t=>({borderRadius:t.radiuses.xlarge,borderColor:t.colors.border.main,borderWidth:1,overflow:"hidden",...t.shadows.pop}),paletteMobile:{position:"absolute",marginTop:0,top:g.small,left:g.small,right:g.small,maxHeight:440,width:"auto",maxWidth:"100%",minWidth:"auto"},paletteInline:{position:"absolute"}});function sI(t){let[o,e]=or(t_);return rS.createElement(R1,null,o?rS.createElement(iI,{paletteState:o,setPaletteState:e}):null)}c();var cI=b(k());var nB=[Ol["1f44d"],Ol["1f389"],Ol["1f604"],Ol["1f602"],Ol["1f44f"],Ol["1f44e"]];function wd(t,o={}){let{withSearch:e=!0,max:n=5}=o;return ie({search:e?"Select an emoji\u2026":void 0,groups:[{key:"emojis",commands:r=>(r.query.text?Eh(r.query.text):nB).slice(0,n).map(a=>({key:a.code,title:a.shortname,icon:s=>cI.createElement(No,{...s,code:a.code}),trigger:()=>t(a.code)}))}]})}c();var Dc=b(k()),Vs=b(q());var qs=Dc.forwardRef(function(o,e){let{displayMode:n="inline",value:r,style:i,placeholder:a,readOnly:s,onChangeText:l,...u}=o,[d]=_(),p=!s&&l,f=Dc.useMemo(()=>p&&n==="inline"?th(r||a||"",Vs.StyleSheet.flatten([i])):0,[n,r,a,i,p]);if(!p){let m=Dc.createElement(Vs.Text,{style:[i],selectable:!0},r);return n==="inline"?m:Dc.createElement(Vs.View,{style:lI.inputModeBlock},m)}return Dc.createElement(Vs.TextInput,{ref:e,placeholderTextColor:d.colors.text.muted,...u,value:r,onChangeText:l,placeholder:a,style:[i,n==="inline"?{width:f}:lI.inputModeBlock]})}),lI=Vs.StyleSheet.create({inputModeBlock:{width:"100%"}});c();var ty=[{key:"blue",color:$.primary.base,title:"Blue"},{key:"purple",color:$.violet.base,title:"Purple"},{key:"orange",color:$.orange.base,title:"Orange"},{key:"red",color:$.scarlet.base,title:"Red"},{key:"yellow",color:$.YELLOW,title:"Yellow"},{key:"green",color:$.green.base,title:"Green"}],oy=[{key:"blue",color:$.primary.xlight,title:"Blue"},{key:"purple",color:$.violet.xlight,title:"Purple"},{key:"orange",color:$.orange.xlight,title:"Orange"},{key:"red",color:$.scarlet.xlight,title:"Red"},{key:"yellow",color:$.YELLOW_XXLIGHT,title:"Yellow"},{key:"green",color:$.green.xlight,title:"Green"}],sle=[$.primary.light,$.violet.light,$.fuchsia.light,$.scarlet.light,$.orange.light,$.green.light];c();var He=b(k()),Ri=b(q());c();var fI=9,aS=Mg.reduce((t,o)=>{let e=t.find(r=>r.key===o.category);if(!e)return console.warn("Unknown emoji category","emoji"),t;(!e.data.length||e.data[e.data.length-1].emojis.length===fI)&&e.data.push({key:"",emojis:[]});let n=e.data[e.data.length-1];return n.key+=o.code,n.emojis.push(o),t},[{key:"people",title:"People",Icon:v.EmojiReaction,data:[]},{key:"nature",title:"Nature",Icon:v.RoleEditor,data:[]},{key:"food",title:"Food",Icon:v.Food,data:[]},{key:"activity",title:"Activity",Icon:v.Music,data:[]},{key:"travel",title:"Travel",Icon:v.EmojiBike,data:[]},{key:"objects",title:"Objects",Icon:v.EmojiWatch,data:[]},{key:"symbols",title:"Symbols",Icon:v.HeartOutlined,data:[]},{key:"flags",title:"Flags",Icon:v.EmojiFlag,data:[]}]);function gI(t){let o=Eh(t);return{key:"search",title:"Results",data:mB(o,fI),Icon:v.Search}}function mB(t,o){let e=t.length;if(e===0)return[];let n=Math.ceil(e/o);return Array.from({length:n},(r,i)=>{let a=i*o,s=t.slice(a,a+o);return{key:s.map(l=>l.code).join("-"),emojis:s}})}function ry(t){let{onPick:o,onRemove:e}=t,[n,r]=He.useState(""),[i,a]=He.useState(""),s=He.useRef(null);He.useEffect(()=>{let u=requestAnimationFrame(()=>{s.current&&s.current.focus()});return()=>{cancelAnimationFrame(u)}},[s]);let l=u=>{r(u),a(u)};return He.createElement(Ri.View,{style:Cm.emojiPicker},He.createElement(Ri.View,{style:[Cm.emojiPickerSearch,w.directionRow]},He.createElement(no,{kind:"search",size:"medium",ref:s,icon:v.Search,placeholder:"Search",value:n,onChangeText:l,cleareable:!0,style:w.flex1}),e?He.createElement(V,{icon:v.Trashcan,onPress:e,title:"Remove Emoji",size:"medium",kind:"secondary",style:g.Margin.smallLeft}):null),He.createElement(hB,{query:i,onPick:o}))}var fB=$h({getItemHeight:()=>ny,getSectionHeaderHeight:()=>hI,stickySectionHeadersEnabled:!0}),gB=({section:t})=>He.createElement(yB,{category:t}),hB=He.memo(function(o){let{query:e,onPick:n}=o,r=He.useRef(null),i=e?[gI(e)]:aS,a=l=>{r.current&&r.current.scrollToLocation({sectionIndex:l,itemIndex:0})},s=He.useCallback(({item:l})=>He.createElement(vB,{row:l,onPick:n}),[n]);return He.createElement(He.Fragment,null,!e&&He.createElement(Ri.View,{style:Cm.emojiPickerCategories},aS.map((l,u)=>He.createElement(V,{key:l.key,icon:l.Icon,onPress:()=>{a(u)}}))),He.createElement(Ri.SectionList,{ref:r,sections:i,stickySectionHeadersEnabled:!0,renderItem:s,renderSectionHeader:gB,getItemLayout:fB}))}),yB=He.memo(function(o){let{category:e}=o,[,n]=_(yI),[,r]=_(W);return He.createElement(Ri.View,{style:[n.emojiCategoryHeader]},He.createElement(Ri.Text,{style:[r.GroupTitle,r.text]},e.title))},(t,o)=>t.category.title===o.category.title),vB=He.memo(function(o){let{row:e,onPick:n}=o;return He.createElement(Ri.View,{style:Cm.emojiRow},e.emojis.map(r=>He.createElement(bB,{key:r.code,code:r.code,onPick:n})))},(t,o)=>t.row.key===o.row.key&&t.onPick===o.onPick),bB=He.memo(function(o){let{code:e,onPick:n}=o,[,r]=_(yI);return He.createElement(H.TouchableOpacity,{onPress:()=>n(e),style:[Cm.emojiItem],activeStyle:r.emojiItemHovered},He.createElement(No,{code:e,size:24}))}),ny=40,hI=26,yI=G.create({emojiCategoryHeader:t=>({height:hI,backgroundColor:t.colors.background.main,paddingLeft:g.medium,paddingRight:g.medium,paddingTop:g.small,paddingBottom:g.small}),emojiItemHovered:t=>({backgroundColor:t.colors.itemHover})}),Cm=Ri.StyleSheet.create({emojiPicker:{display:"flex",width:376,height:314},emojiPickerSearch:{padding:g.small},emojiPickerCategories:{display:"flex",flexDirection:"row",justifyContent:"space-between",padding:g.small,paddingBottom:0,paddingTop:0},emojiRow:{display:"flex",flexDirection:"row",paddingLeft:g.small,paddingRight:g.small},emojiItem:{width:ny,height:ny,borderRadius:ny,display:"flex",alignItems:"center",justifyContent:"center",outlineStyle:"none"}});c();var km=b(k());c();var Gs=JSON.parse('{"container":"container_UPXwU","darkestParentBackground":"darkestParentBackground_8TVPV","darkParentBackground":"darkParentBackground_ziFwB","semiDarkParentBackground":"semiDarkParentBackground_wgu6B","mediumParentBackground":"mediumParentBackground_BIBSL","semiLightParentBackground":"semiLightParentBackground_Yx9Vw","lightParentBackground":"lightParentBackground_INb4a","lightestParentBackground":"lightestParentBackground_FL4je","toggle":"toggle_siihR","toggleLightMode":"toggleLightMode_-FLG4","toggleDarkMode":"toggleDarkMode_uS4t3","toggleSwitch":"toggleSwitch_NtUzX","toggleButton":"toggleButton_ePBfn","toggleIcon":"toggleIcon_-vIfn"}');function vI(t){let{onValueChange:o,value:e=!1,backgroundColor:n,mode:r="switch",accesibilityLabel:i="Switch to dark mode"}=t,a=()=>{o()},s=r==="switch"?e?v.ThemeDark.CSS:v.ThemeLight.CSS:e?v.ThemeLight.CSS:v.ThemeDark.CSS,l=qh(n);return r==="switch"?km.default.createElement(U,{as:"button",type:"button",role:"switch","aria-label":i,"aria-checked":e,onClick:a,style:[Gs.container,Gs[`${l}ParentBackground`]]},km.default.createElement(U,{style:[Gs.toggle,Gs.toggleSwitch,D.backgroundColor.main,D.margin.xsmall,e?Gs.toggleDarkMode:Gs.toggleLightMode]},km.default.createElement(s,{style:[Gs.toggleIcon,D.padding.xsmall]}))):km.default.createElement(bt,{label:i,role:"switch",iconOnly:!0,leadingIcon:s,rounded:!0,style:Gs.toggleButton,kind:"muted",onClick:a,"aria-checked":e,"aria-label":i,preventFocusOnPress:!0})}c();c();c();function xm(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var kt=b(k(),1);function wB(t){if(l1()==="virtual"){let o=document.activeElement;c1(()=>{document.activeElement===o&&document.contains(t)&&Ow(t)})}else Ow(t)}function SB(t){if(!(t instanceof HTMLElement)&&!(t instanceof SVGElement))return!1;let{display:o,visibility:e}=t.style,n=o!=="none"&&e!=="hidden"&&e!=="collapse";if(n){let{getComputedStyle:r}=t.ownerDocument.defaultView,{display:i,visibility:a}=r(t);n=i!=="none"&&a!=="hidden"&&a!=="collapse"}return n}function CB(t,o){return!t.hasAttribute("hidden")&&(t.nodeName==="DETAILS"&&o&&o.nodeName!=="SUMMARY"?t.hasAttribute("open"):!0)}function bI(t,o){return t.nodeName!=="#comment"&&SB(t)&&CB(t,o)&&(!t.parentElement||bI(t.parentElement,t))}var sS=kt.default.createContext(null),Bt=null;function wI(t){let{children:o,contain:e,restoreFocus:n,autoFocus:r}=t,i=(0,kt.useRef)(),a=(0,kt.useRef)(),s=(0,kt.useRef)([]),{parentNode:l}=(0,kt.useContext)(sS)||{},u=(0,kt.useMemo)(()=>new _m({scopeRef:s}),[s]);vc(()=>{let f=l||ro.root;if(ro.getTreeNode(f.scopeRef)&&Bt&&!ay(Bt,f.scopeRef)){let m=ro.getTreeNode(Bt);m&&(f=m)}f.addChild(u),ro.addNode(u)},[u,l]),vc(()=>{let f=ro.getTreeNode(s);f.contain=e},[e]),vc(()=>{let f=i.current.nextSibling,m=[];for(;f&&f!==a.current;)m.push(f),f=f.nextSibling;s.current=m},[o]),PB(s,n,e),_B(s,e),EB(s,n,e),RB(s,r),(0,kt.useEffect)(()=>{if(s){let f=document.activeElement,m=null;if(An(f,s.current)){for(let h of ro.traverse())An(f,h.scopeRef.current)&&(m=h);m===ro.getTreeNode(s)&&(Bt=m.scopeRef)}return()=>{let h=ro.getTreeNode(s).parent.scopeRef;(s===Bt||ay(s,Bt))&&(!h||ro.getTreeNode(h))&&(Bt=h),ro.removeTreeNode(s)}}},[s]);let d=(0,kt.useMemo)(()=>kB(s),[]),p=(0,kt.useMemo)(()=>({focusManager:d,parentNode:u}),[u,d]);return kt.default.createElement(sS.Provider,{value:p},kt.default.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:i}),o,kt.default.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:a}))}function SI(){var t;return(t=(0,kt.useContext)(sS))===null||t===void 0?void 0:t.focusManager}function kB(t){return{focusNext(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,s=n||document.activeElement,l=e[0].previousElementSibling,u=Bc(Bl(e),{tabbable:r,accept:a},e);u.currentNode=An(s,e)?s:l;let d=u.nextNode();return!d&&i&&(u.currentNode=l,d=u.nextNode()),d&&Hs(d,!0),d},focusPrevious(o={}){let e=t.current,{from:n,tabbable:r,wrap:i,accept:a}=o,s=n||document.activeElement,l=e[e.length-1].nextElementSibling,u=Bc(Bl(e),{tabbable:r,accept:a},e);u.currentNode=An(s,e)?s:l;let d=u.previousNode();return!d&&i&&(u.currentNode=l,d=u.previousNode()),d&&Hs(d,!0),d},focusFirst(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Bc(Bl(e),{tabbable:n,accept:r},e);i.currentNode=e[0].previousElementSibling;let a=i.nextNode();return a&&Hs(a,!0),a},focusLast(o={}){let e=t.current,{tabbable:n,accept:r}=o,i=Bc(Bl(e),{tabbable:n,accept:r},e);i.currentNode=e[e.length-1].nextElementSibling;let a=i.previousNode();return a&&Hs(a,!0),a}}}var lS=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],xB=lS.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";lS.push('[tabindex]:not([tabindex="-1"]):not([disabled])');var OB=lS.join(':not([hidden]):not([tabindex="-1"]),');function Bl(t){return t[0].parentElement}function iy(t){let o=ro.getTreeNode(Bt);for(;o&&o.scopeRef!==t;){if(o.contain)return!1;o=o.parent}return!0}function _B(t,o){let e=(0,kt.useRef)(),n=(0,kt.useRef)(null);vc(()=>{let r=t.current;if(!o){n.current&&(cancelAnimationFrame(n.current),n.current=null);return}let i=l=>{if(l.key!=="Tab"||l.altKey||l.ctrlKey||l.metaKey||!iy(t))return;let u=document.activeElement,d=t.current;if(!An(u,d))return;let p=Bc(Bl(d),{tabbable:!0},d);p.currentNode=u;let f=l.shiftKey?p.previousNode():p.nextNode();f||(p.currentNode=l.shiftKey?d[d.length-1].nextElementSibling:d[0].previousElementSibling,f=l.shiftKey?p.previousNode():p.nextNode()),l.preventDefault(),f&&Hs(f,!0)},a=l=>{(!Bt||ay(Bt,t))&&An(l.target,t.current)?(Bt=t,e.current=l.target):iy(t)&&!cS(l.target,t)?e.current?e.current.focus():Bt&&sy(Bt.current):iy(t)&&(e.current=l.target)},s=l=>{n.current&&cancelAnimationFrame(n.current),n.current=requestAnimationFrame(()=>{iy(t)&&!cS(document.activeElement,t)&&(Bt=t,document.body.contains(l.target)?(e.current=l.target,e.current.focus()):Bt&&sy(Bt.current))})};return document.addEventListener("keydown",i,!1),document.addEventListener("focusin",a,!1),r.forEach(l=>l.addEventListener("focusin",a,!1)),r.forEach(l=>l.addEventListener("focusout",s,!1)),()=>{document.removeEventListener("keydown",i,!1),document.removeEventListener("focusin",a,!1),r.forEach(l=>l.removeEventListener("focusin",a,!1)),r.forEach(l=>l.removeEventListener("focusout",s,!1))}},[t,o]),(0,kt.useEffect)(()=>()=>{n.current&&cancelAnimationFrame(n.current)},[n])}function CI(t){return cS(t)}function An(t,o){return o.some(e=>e.contains(t))}function cS(t,o=null){if(t instanceof Element&&t.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:e}of ro.traverse(ro.getTreeNode(o)))if(An(t,e.current))return!0;return!1}function ay(t,o){var e;let n=(e=ro.getTreeNode(o))===null||e===void 0?void 0:e.parent;for(;n;){if(n.scopeRef===t)return!0;n=n.parent}return!1}function Hs(t,o=!1){if(t!=null&&!o)try{wB(t)}catch{}else if(t!=null)try{t.focus()}catch{}}function sy(t,o=!0){let e=t[0].previousElementSibling,n=Bc(Bl(t),{tabbable:o},t);n.currentNode=e;let r=n.nextNode();o&&!r&&(n=Bc(Bl(t),{tabbable:!1},t),n.currentNode=e,r=n.nextNode()),Hs(r)}function RB(t,o){let e=kt.default.useRef(o);(0,kt.useEffect)(()=>{e.current&&(Bt=t,An(document.activeElement,Bt.current)||sy(t.current)),e.current=!1},[t])}function PB(t,o,e){vc(()=>{if(o||e)return;let n=t.current,r=i=>{let a=i.target;An(a,t.current)?Bt=t:CI(a)||(Bt=null)};return document.addEventListener("focusin",r,!1),n.forEach(i=>i.addEventListener("focusin",r,!1)),()=>{document.removeEventListener("focusin",r,!1),n.forEach(i=>i.removeEventListener("focusin",r,!1))}},[t,o,e])}function IB(t){let o=ro.getTreeNode(Bt);for(;o&&o.scopeRef!==t;){if(o.nodeToRestore)return!1;o=o.parent}return o?.scopeRef===t}function EB(t,o,e){let n=(0,kt.useRef)(typeof document<"u"?document.activeElement:null);vc(()=>{let r=t.current;if(!o||e)return;let i=()=>{(!Bt||ay(Bt,t))&&An(document.activeElement,t.current)&&(Bt=t)};return document.addEventListener("focusin",i,!1),r.forEach(a=>a.addEventListener("focusin",i,!1)),()=>{document.removeEventListener("focusin",i,!1),r.forEach(a=>a.removeEventListener("focusin",i,!1))}},[t,e]),vc(()=>{if(!o)return;ro.getTreeNode(t).nodeToRestore=n.current;let r=i=>{if(i.key!=="Tab"||i.altKey||i.ctrlKey||i.metaKey)return;let a=document.activeElement;if(!An(a,t.current))return;let s=ro.getTreeNode(t).nodeToRestore,l=Bc(document.body,{tabbable:!0});l.currentNode=a;let u=i.shiftKey?l.previousNode():l.nextNode();if((!document.body.contains(s)||s===document.body)&&(s=null,ro.getTreeNode(t).nodeToRestore=null),(!u||!An(u,t.current))&&s){l.currentNode=s;do u=i.shiftKey?l.previousNode():l.nextNode();while(An(u,t.current));i.preventDefault(),i.stopPropagation(),u?Hs(u,!0):CI(s)?Hs(s,!0):a.blur()}};return e||document.addEventListener("keydown",r,!0),()=>{e||document.removeEventListener("keydown",r,!0);let i=ro.getTreeNode(t).nodeToRestore;if(o&&i&&(An(document.activeElement,t.current)||document.activeElement===document.body&&IB(t))){let a=ro.clone();requestAnimationFrame(()=>{if(document.activeElement===document.body){let s=a.getTreeNode(t);for(;s;){if(s.nodeToRestore&&document.body.contains(s.nodeToRestore)){Hs(s.nodeToRestore);return}s=s.parent}for(s=a.getTreeNode(t);s;){if(s.scopeRef&&ro.getTreeNode(s.scopeRef)){sy(s.scopeRef.current,!0);return}s=s.parent}}})}}},[t,o,e])}function Bc(t,o,e){let n=o?.tabbable?OB:xB,r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode(i){var a;return!(o==null||(a=o.from)===null||a===void 0)&&a.contains(i)?NodeFilter.FILTER_REJECT:i.matches(n)&&bI(i)&&(!e||An(i,e))&&(!o?.accept||o.accept(i))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return o?.from&&(r.currentNode=o.from),r}var Om=class{get size(){return this.fastMap.size}getTreeNode(o){return this.fastMap.get(o)}addTreeNode(o,e,n){let r=this.fastMap.get(e??null),i=new _m({scopeRef:o});r.addChild(i),i.parent=r,this.fastMap.set(o,i),n&&(i.nodeToRestore=n)}addNode(o){this.fastMap.set(o.scopeRef,o)}removeTreeNode(o){if(o===null)return;let e=this.fastMap.get(o),n=e.parent;for(let i of this.traverse())i!==e&&e.nodeToRestore&&i.nodeToRestore&&e.scopeRef.current&&An(i.nodeToRestore,e.scopeRef.current)&&(i.nodeToRestore=e.nodeToRestore);let r=e.children;n.removeChild(e),r.size>0&&r.forEach(i=>n.addChild(i)),this.fastMap.delete(e.scopeRef)}*traverse(o=this.root){if(o.scopeRef!=null&&(yield o),o.children.size>0)for(let e of o.children)yield*this.traverse(e)}clone(){let o=new Om;for(let e of this.traverse())o.addTreeNode(e.scopeRef,e.parent.scopeRef,e.nodeToRestore);return o}constructor(){xm(this,"fastMap",new Map),this.root=new _m({scopeRef:null}),this.fastMap.set(null,this.root)}},_m=class{addChild(o){this.children.add(o),o.parent=this}removeChild(o){this.children.delete(o),o.parent=void 0}constructor(o){xm(this,"children",new Set),xm(this,"contain",!1),this.scopeRef=o.scopeRef}},ro=new Om;var Pi=b(k());c();var uS=JSON.parse('{"toolbar":"toolbar_hJES6","toolbarGroup":"toolbarGroup_mD69e"}');var kI=Pi.default.forwardRef(function(o,e){let{disabled:n=!1,orientation:r="horizontal",children:i,onTabToExit:a}=o;return Pi.default.createElement(U,{role:"toolbar",style:uS.toolbar,ref:e,"aria-orientation":r},Pi.default.createElement(wI,{restoreFocus:!0},Pi.default.createElement(TB,{disabled:n,orientation:r,onTabToExit:a},i)))});function TB(t){let{children:o,disabled:e,orientation:n,onTabToExit:r}=t,i=SI();return Pi.default.createElement(Pi.default.Fragment,null,Pi.default.Children.map(o,a=>a?typeof a=="object"?Pi.default.cloneElement(a,{onKeyDown(s){({ArrowLeft:()=>{n==="horizontal"&&(i.focusPrevious(),s.preventDefault())},ArrowRight:()=>{n==="horizontal"&&(i.focusNext(),s.preventDefault())},ArrowUp:()=>{n==="vertical"&&(i.focusPrevious(),s.preventDefault())},ArrowDown:()=>{n==="vertical"&&(i.focusNext(),s.preventDefault())},Home:()=>{i.focusFirst(),s.preventDefault()},End:()=>{i.focusLast(),s.preventDefault()},Tab:()=>{r?.(s.shiftKey),s.preventDefault()}})[s.key]?.()},kind:a.props?.kind??"menuitem",disabled:a.props?.disabled||e}):a:null))}function Rm(t){let{onKeyDown:o,label:e,disabled:n=!1,children:r}=t;return Pi.default.createElement(U,{role:"group",as:"span",style:uS.toolbarGroup,"aria-label":e},Pi.default.Children.map(r,i=>i?Pi.default.cloneElement(i,{onKeyDown:o,kind:i.props.kind??"menuitem",disabled:i.props.disabled||n}):null))}c();var Sd=b(k());function xI(t){let{children:o,...e}=t;return Sd.createElement(y1,null,Sd.createElement(M1,null,Sd.createElement(x1,null,Sd.createElement(sI,{...e}),Sd.createElement($P,null),o)))}c();var Pm=b(k());c();var dS=JSON.parse('{"grabber":"grabber_p72PX","grabberIcon":"grabberIcon_ebrbU"}');var OI=Pm.forwardRef(function(o,e){let{style:n,size:r="small"}=o;return Pm.createElement(U,{ref:e,style:[n,dS.grabber]},Pm.createElement(v.GrabberVertical.CSS,{style:[dS.grabberIcon,D.icons[r]]}))});c();var cy=b(k());var _I=Ze("auth"),pS=Bx(t=>{let{customToken:o,waitUserReady:e=!0}=t;if(typeof window>"u")throw new Error("initializeAuth should not be called during SSR");return!o&&!e?{customToken:o}:new Yi("auth.initialize").wrap(async()=>{if(o)try{_I.info("authenticating with custom token before subscribing to auth"),await eg.auth().signInWithCustomToken(o),await eg.auth().currentUser?.getIdToken(!0)}catch(r){_I.critical("Error during auth with custom token",r)}return e!==!1&&await new Promise((r,i)=>{let a=eg.auth().onAuthStateChanged(()=>{a(),r()},i)}),{customToken:o}})});function RI(t){return pS.readAsync(t)}function ly(t){let{children:o}=t;if(typeof window<"u"){if(pS.state==="unstarted")throw new Error("initializeAuth should have been called before useWaitFirebaseAuth");pS.read({})}return cy.createElement(cy.Fragment,null,o)}c();c();c();function Ks(){return Ks=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},Ks.apply(this,arguments)}var Cd;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cd||(Cd={}));var PI=function(t){return t};var II="beforeunload";var MB="popstate";function MI(t){t===void 0&&(t={});var o=t,e=o.window,n=e===void 0?document.defaultView:e,r=n.history;function i(){var R=n.location,T=R.pathname,M=R.search,I=R.hash,N=r.state||{};return[N.idx,PI({pathname:T,search:M,hash:I,state:N.usr||null,key:N.key||"default"})]}var a=null;function s(){if(a)m.call(a),a=null;else{var R=Cd.Pop,T=i(),M=T[0],I=T[1];if(m.length){if(M!=null){var N=d-M;N&&(a={action:R,location:I,retry:function(){P(N*-1)}},P(N))}}else x(R)}}n.addEventListener(MB,s);var l=Cd.Pop,u=i(),d=u[0],p=u[1],f=TI(),m=TI();d==null&&(d=0,r.replaceState(Ks({},r.state,{idx:d}),""));function h(R){return typeof R=="string"?R:mS(R)}function y(R,T){return T===void 0&&(T=null),PI(Ks({pathname:p.pathname,hash:"",search:""},typeof R=="string"?fS(R):R,{state:T,key:LB()}))}function S(R,T){return[{usr:R.state,key:R.key,idx:T},h(R)]}function C(R,T,M){return!m.length||(m.call({action:R,location:T,retry:M}),!1)}function x(R){l=R;var T=i();d=T[0],p=T[1],f.call({action:l,location:p})}function O(R,T){var M=Cd.Push,I=y(R,T);function N(){O(R,T)}if(C(M,I,N)){var z=S(I,d+1),Y=z[0],Q=z[1];try{r.pushState(Y,"",Q)}catch{n.location.assign(Q)}x(M)}}function E(R,T){var M=Cd.Replace,I=y(R,T);function N(){E(R,T)}if(C(M,I,N)){var z=S(I,d),Y=z[0],Q=z[1];r.replaceState(Y,"",Q),x(M)}}function P(R){r.go(R)}var L={get action(){return l},get location(){return p},createHref:h,push:O,replace:E,go:P,back:function(){P(-1)},forward:function(){P(1)},listen:function(T){return f.push(T)},block:function(T){var M=m.push(T);return m.length===1&&n.addEventListener(II,EI),function(){M(),m.length||n.removeEventListener(II,EI)}}};return L}function EI(t){t.preventDefault(),t.returnValue=""}function TI(){var t=[];return{get length(){return t.length},push:function(e){return t.push(e),function(){t=t.filter(function(n){return n!==e})}},call:function(e){t.forEach(function(n){return n&&n(e)})}}}function LB(){return Math.random().toString(36).substr(2,8)}function mS(t){var o=t.pathname,e=o===void 0?"/":o,n=t.search,r=n===void 0?"":n,i=t.hash,a=i===void 0?"":i;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function fS(t){var o={};if(t){var e=t.indexOf("#");e>=0&&(o.hash=t.substr(e),t=t.substr(0,e));var n=t.indexOf("?");n>=0&&(o.search=t.substr(n),t=t.substr(0,n)),t&&(o.pathname=t)}return o}var gS=Ze("history");function LI(){let t=MI(),o=[],e=!1,n=()=>{let i=o.shift();return i?(i(),!1):!0},r=i=>{e?o.push(i):i()};return{get location(){return t.location},listen:i=>t.listen(a=>{i({location:a.location,action:a.action})}),push:i=>{let{state:a,...s}=i;r(()=>{gS.info("push",s,a),t.push(s,a)})},replace:i=>{let{state:a,...s}=i;r(()=>{gS.info("replace",s,a),t.replace(s,a)})},go:i=>{r(()=>{gS.info("go",i),t.go(i)})},transaction:i=>{if(e)i();else{let a=t.listen(()=>{n()&&a()});e=!0,i(),e=!1,n()&&a()}}}}c();function AI(t){let{basename:o="",location:e="/",context:n}=t,r=(a,s)=>{n.action=s,n.location=NB(o,NI(a)),n.url=mS(n.location)};return{staticContext:n,location:AB(o,NI(fS(e))),push:a=>{r(a,"PUSH")},replace:a=>{r(a,"REPLACE")},go:()=>{},listen:()=>()=>{},transaction:a=>{a()}}}function DI(t){return t.charAt(0)==="/"?t:`/${t}`}function NB(t,o){return t?{...o,pathname:DI(t)+o.pathname}:o}function AB(t,o){if(!t||!o.pathname)return o;let e=DI(t);return o.pathname.indexOf(e)!==0?o:{...o,pathname:o.pathname.substr(e.length)}}function NI(t){let o={hash:"",search:"",pathname:"",...t,key:"",state:void 0};return o.search&&o.search.charAt(0)!=="?"&&(o.search=`?${o.search}`),o.hash&&o.hash.charAt(0)!=="#"&&(o.hash=`#${o.hash}`),o}c();var Wl=b(k()),BI=b(T1());function hS(t){let{history:o,children:e}=t,n=Wl.useMemo(()=>o||LI(),[o]),r=Wl.useMemo(()=>({getCurrentValue:()=>n.location,subscribe:a=>n.listen(a)}),[n]),i=(0,BI.useSubscription)(r);return Wl.createElement(h_.Provider,{value:n},Wl.createElement(y_.Provider,{value:i},e))}function WI(t){let{children:o,...e}=t,n=AI(e);return Wl.createElement(hS,{history:n},o)}c();var yS=b(k());function zI(t,o){let{navigate:e}=ye(),n=Ga(),r=FO(t),i=(0,yS.useCallback)(l=>e({screen:{sideSheet:{type:t,tab:l}}},{replace:!0}),[e,t]),a=(0,yS.useCallback)(()=>e({screen:{sideSheet:void 0}}),[e]),s=("sideSheet"in n.screen&&n.screen.sideSheet&&"tab"in n.screen.sideSheet&&n.screen.sideSheet.tab?n.screen.sideSheet.tab:o)??r[0];return{opened:"sideSheet"in n.screen&&n.screen.sideSheet?.type===t,selectedTab:s,changeSelectedTab:i,close:a}}c();var DB=Lt({key:"firestoreReacheable",default:!0,effects:[t=>{typeof window>"u"||fetch("https://firestore.googleapis.com/$discovery/rest").catch(()=>{t.setSelf(!1)})}]});function FI(){return tr(DB)}c();var BB=(t,o)=>{Ms.write(t,o,"cached")};function VI(t){return Nx(o=>(o.listenToDocument(BB),t(o)))}c();var qI=b(k());var vS=Lt({key:"hoveredCommentNodeAtom",default:null}),kde=kx({key:"newCommentValueAtom",default:()=>Vu("","comment")});function GI(){let t=Xr(vS);return qI.useMemo(()=>({highlight:(o,e={highlighting:!0,postButton:!0})=>{let n=o?Zi.getOriginalKey(o):null;t(r=>n?(r&&r.node===n&&r.postButton&&(e.postButton=r.postButton),{node:n,...e}):null)}}),[t])}c();var KI=b(k());var HI=Lt({key:"filesManagerAtom",default:null});function Wt(){let t=Xr(HI),o=Ox();return KI.useMemo(()=>({prompt:e=>new Promise(n=>{t({options:e,onComplete:n})}),isOpen:()=>{let{isModified:e}=o(HI);return e}}),[t])}c();var XI=b(k());var bS=Lt({key:"mediaGalleryState",default:{medias:[],currentIndex:0}});function kd(){let t=Xr(bS);return XI.useMemo(()=>({open:(o,e=0)=>{t({medias:o,currentIndex:e})}}),[t])}c();var Im=Lt({key:"mobileToCOpenedAtom",default:!1});c();function WB(t){return t.themePreset?$.PRIMARY:t.primaryColor??$.PRIMARY}function zB(t,o,e){let n=$.WHITE,r=$.darkModeGreyScale.dark;switch(t){case"default":return o==="dark"?r:n;case"bold":return e;case"contrast":return o==="dark"?n:r;case"custom":return $.fuchsia.light;default:Ce(t)}}function FB(t,o,e){switch(t){case"default":case"contrast":return o;case"bold":case"custom":return Ka(e)==="light"?$.lightModeText.base:$.darkModeText.base;default:Ce(t)}}function UI(t){return Yx(t.headerTheme,t.themeMode)==="none"}function VB(t,o){let{primaryColor:e,headerBackgroundColor:n,headerLinksColor:r}=t.themeCustomizations?.[o]||{},a=UI(t)?"default":ji(t),s=WB(t),l=e??s,u=zB(a,o,l),d=n??u,p=FB(a,l,d);return{primaryColor:l,headerBackgroundColor:d,headerLinksColor:r??p}}function qB(t,o){let e=o??t.themeMode??qp,{headerLogoURL:n,footerLogoURL:r}=t.themeCustomizations?.[e]||{};return{headerLogoURL:n??t.logoURL,footerLogoURL:r??t.footer?.logoURL}}function uy(t,o){let e=o??t.themeMode??qp;return{...VB(t,e),...qB(t,e),headerDisabled:UI(t)}}c();var YI=b(k());var GB=Ze("app:events"),HB=t=>(t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function KB(){let t=document.cookie?document.cookie.split("; "):[],o={};for(let e=0;e<t.length;e++){let n=t[e].split("="),r=n.slice(1).join("=");try{let i=decodeURIComponent(n[0]);o[i]=HB(r)}catch(i){GB.warning(`Couldn't parse cookie ${t[e]}. Error: `,i)}}return o}function jI(t,o){return YI.useEffect(()=>{XB(t,o)},[t.key,o]),null}async function XB(t,o){if(!t.integrations||!o)return;let e=await a1(),n=KB(),r=window.location.href,i=document.referrer,a=window.navigator.userAgent;(await _c()).analytics.trackViewInSpaceById(t.key,{pageId:o,visitor:{anonymousId:e,cookies:n,userAgent:a},url:r,referrer:i})}c();function $I(t,o){let e=o.type==="space"&&typeof o.changeRequest=="string"?o.changeRequest:void 0;return P_(t,e)}c();var dy=b(k());function ZI(t){let o=dy.useContext($o),e=o.preview||o.mode!=="public-content"||!t?.intercom?.enabled?void 0:t?.intercom?.appID,n=zP();return ta(r=>{n&&e&&r.writeAsync({type:"script",src:`https://widget.intercom.io/widget/${e}`,onLoad:async()=>{window.Intercom&&window.Intercom("boot",{app_id:e})}})}),dy.useEffect(()=>()=>{window.Intercom&&(window.Intercom("shutdown"),window.Intercom=void 0)},[]),null}c();var Em=b(k());var wS=Em.default.createContext(()=>({getCurrentValue:()=>[],subscribe:()=>()=>{}})),zl=new Map;function JI(t){let{withComments:o,spaceKey:e,pageKey:n,changeRequestKey:r,children:i}=t,a={space:e,page:n,changeRequest:r||null},[s]=Rc([o?Tx(zO(a),Mx("resolved","==",null),Lx("postedAt","asc")):null]);Em.default.useEffect(()=>{let u=(s||[]).reduce((d,p)=>p.node?{...d,[p.node]:[...d[p.node]??[],p]}:d,{});zl.forEach((d,p)=>{let f=u[p]??[],[m,h]=d||[[],[]];UB(f,m)||(zl.set(p,[f,h]),h.forEach(y=>y()))})},[s]);let l=Em.default.useCallback(u=>({getCurrentValue:()=>{let d=zl.get(u);return d?d[0]:[]},subscribe:d=>{let p=zl.get(u),[f,m]=p||[[],[]];return zl.set(u,[f,[...m,d]]),()=>{let h=zl.get(u),[y,S]=h||[[],[]],C=S.filter(x=>x!==d);zl.set(u,[y,C])}}}),[]);return Em.default.createElement(wS.Provider,{value:l},i)}function UB(t,o){return t.length!==o.length?!1:t.every(e=>{let n=o.find(r=>e.key===r.key);return n?YB(e,n):!1})}function YB(t,o){return!(t.key!==o.key||t.resolved!==o.resolved||sw(t.replies)!==sw(o.replies))}c();var SS=1024,QI=SS*1024;function Tm(t){return t>QI?`${(t/QI).toFixed(0)}MB`:t>SS?`${(t/SS).toFixed(0)}KB`:`${t}B`}function eE(t){return hc(t)?"Image":Ku(t)?"Code":t.contentType==="application/pdf"?"PDF":t.contentType.startsWith("text/")?"Text":"Binary"}c();var py=b(k());function oE(t){let o=(0,py.useContext)($o);jB(o,t),rm(()=>nE(o,t));let e=rm(()=>tE(o,t));(0,py.useEffect)(()=>(e.current=tE(o,t),()=>{e.current&&window.gtag("config",e.current,{update:!0,groups:"not_tracking_views"})}),[t?.googleAnalytics?.enabled,t?.googleAnalytics?.trackingPrivateViews,t?.googleAnalytics?.trackingID,o])}function CS(t){return!!(t.googleAnalytics?.enabled&&typeof t.googleAnalytics.trackingID=="string")}function jB(t,o){ta(e=>{kS(t,o)||e.writeSafe({type:"script",src:`https://www.googletagmanager.com/gtag/js?l=dataLayer&id=${o?.googleAnalytics?.trackingID}`})})}function nE(t,o){kS(t,o)||typeof window>"u"||window?.gtag||(window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",o.googleAnalytics.trackingID))}function tE(t,o){if(kS(t,o)||typeof window>"u")return;window?.gtag||nE(t,o),window.gtag("config",o.googleAnalytics.trackingID,{send_page_view:!1,anonymize_ip:!0,groups:"tracking_views"});let e=Bg()==="rejected";return window.gtag("consent","default",{ad_storage:e?"denied":"granted",analytics_storage:e?"denied":"granted"}),o?.googleAnalytics?.trackingID}function kS(t,o){return!o||!o.googleAnalytics||!CS(o)||t.preview||t.mode!=="public-content"&&!o?.googleAnalytics?.trackingPrivateViews}c();c();var rt=b(k()),va=b(q());c();var pr=b(k());c();var xd=JSON.parse('{"popover":"popover_41P2r","toolbar":"toolbar_EEKEO","annotatedText":"annotatedText_DZvL5","active":"active_mnp9Q"}');c();var Od=b(k());function rE(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=()=>{e.change(i=>{i.unwrapInlineByKey(o.key)})};return Od.createElement(Mn,{preferredAlignment:"start",kind:"large"},Od.createElement(U,{style:[xd.popover,D.flex.column,D.padding.mediumHorizontal,D.padding.mediumVertical]},Od.createElement(ur,{fragment:Na}),n?null:Od.createElement(U,{style:[xd.toolbar]},Od.createElement(bt,{size:"small",kind:"secondary",leadingIcon:v.Trashcan.CSS,label:"Remove annotation",iconOnly:!0,title:"Remove annotation",onPress:r,preventFocusOnPress:!0}))))}function iE(t){let{editor:o,node:e,children:n,attributes:r,isFocused:i}=t,{readOnly:a}=o,s=e.getFragmentByKey(Na),{selection:l}=o.value,u=qt(l)&&!!l.hasAnchorIn(s),d=i&&u,[p,f]=pr.useState(!1),m=qt(l)&&(p||d),h=pr.useCallback(()=>{a||o.change(O=>{let E=e.getFragmentByKey(Na);E&&(qt(O.value.selection)?(u&&O.blur(),O.collapseToEndOf(E).focus()):O.selectText(he.fromBlockRange(O.value.selection,O.value.document)).collapseToEndOf(E).focus())})},[u,a,o,e.key]),y=pr.useCallback(()=>{a||o.change(O=>{let E=O.value.document.getDescendant(e.key);if(E&&E.isInline()){let P=E.getFragmentByKey(Na);P&&qt(O.value.selection)&&O.value.selection.hasEdgeIn(P)&&O.collapseToEndOf(E)}})},[a,o,e.key]);pr.useEffect(()=>{a||(m?h():y())},[m,a,h,y]),pr.useEffect(()=>{a||!u&&p&&f(!1)},[u,p,a]);let S=pr.useCallback(()=>{f(!0)},[]),C=pr.useCallback(()=>{f(!1)},[]),{pressProps:x}=Wg({onPress:S});return pr.createElement(Hg.Provider,{value:C},pr.createElement(za,{closeOnClick:!1,closeOnEsc:!0,closeOnScroll:!1,closeOnClickInNestedPortals:!1,closeOnOutsideClick:!0,opened:m,anchor:({ref:O})=>pr.createElement(At,{ref:O,style:[xd.annotatedText,{[xd.active]:m}],...r,...x},n)},pr.createElement(rE,{node:e,editor:o})))}c();var xS=b(wi());var aE={onKeyDown:(t,o,e)=>{if(!Eo(o.value.selection)&&((0,xS.default)("mod+enter",t)||(0,xS.default)("esc",t))){let{value:n}=o,{startBlock:r,document:i}=n;if(!r)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment"||a.type!==Na)return;let s=i.getParent(a.key);return s?(o.collapseToEndOf(s),o):void 0}}};c();var Ro=b(k()),lv=b(q());c();var Wo=b(k());c();var OS=JSON.parse('{"hitArea":"hitArea_oHT6S","buttonWrapper":"buttonWrapper_3J38G","hideTransition":"hideTransition_k0Mlc"}');c();function nt(t,o,e=[]){return ie({groups:[...e,{key:"block",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{t.change(n=>{if(Eo(n.value.selection))return n.deleteBlockRangeForward();n.removeNodeByKey(o).focus()})}}]}]})}c();var Fn=b(k());c();var xE=[{key:"youtube",title:"Youtube",icon:sE()},{key:"soundcloud",title:"Soundcloud",icon:cE()},{key:"loom",title:"Loom",icon:lE()},{key:"github",title:"GitHub Gist",icon:uE(),iconDark:dE()},{key:"framer",title:"Framer",icon:pE(),iconDark:mE()},{key:"codepen",title:"Codepen",icon:fE(),iconDark:gE()},{key:"dribbble",title:"Dribbble",icon:hE()},{key:"trello",title:"Trello",icon:yE()},{key:"typeform",title:"Typeform",icon:vE(),iconDark:bE()},{key:"google-docs",title:"Google Docs",icon:wE()},{key:"google-sheets",title:"Google Sheets",icon:SE()},{key:"google-slides",title:"Google Slides",icon:CE()},{key:"google-form",title:"Google Forms",icon:kE()}];c();var Ya=b(k()),OE=b(q());c();var Xs=b(k());var Us=Xh(t=>t.isPDF?{width:793.92,height:1123.2}:{width:750,height:500},{height:!1}),_S={uploadFiles:()=>{throw new Error("uploadFiles is not implemented, it should be passed as a prop to the ContentEditor component")},updateFile:()=>{throw new Error("updateFile is not implemented, it should be passed as a prop to the ContentEditor component")},logAnalyticsEvent:()=>{},blockLayoutComponent:({children:t})=>Xs.createElement(Xs.Fragment,null,t),integrationBlocksContext:null,integrationBlocksRemote:I_(()=>{throw new Error("not implemented")}),integrationsBlocksSubscription:{getCurrentValue:()=>({}),subscribe:()=>()=>{}}},Ve=Xs.createContext(_S),Ii=Xs.createContext({sections:Fu(),active:null,selected:null,setActive:()=>{}}),Wc=Xs.createContext("left"),Mr=Xs.createContext("root");function _E(t){let{onInsert:o,onClose:e}=t,{logAnalyticsEvent:n}=Ya.useContext(Ve),[r,i]=Ya.useState(""),a=vi(r),s=()=>{if(!a)return;let l=rg(r);o(yg.createEmbedBlock(l)),n({type:"edit_page_document_insert_block",from:"embed",blockType:_n,embedHostname:new URL(l).hostname})};return Ya.createElement(vo,{title:"Embed a URL",subtitle:"Insert a URL to embed a live preview. Works with YouTube, Google Drive, Vimeo, and more.",onClose:e,footer:Ya.createElement(OE.View,{style:[w.directionRow,w.justifyContentEnd]},Ya.createElement(V,{kind:"secondary",onPress:e,style:g.Margin.smallRight},"Cancel"),Ya.createElement(V,{kind:"primary",disabled:!a,onPress:s},"Insert"))},Ya.createElement(no,{autoFocus:!0,label:"URL",value:r,onChangeText:i,onSubmit:s,placeholder:"Paste a URL or type it",feedback:a||!r?{type:"none"}:{type:"danger"}}))}c();var yt=b(k()),Ys=b(q());c();var Mm=b(k()),RE=Mm.default.createContext(null);function PE(t){let{value:o,children:e}=t,n=Mm.default.useMemo(()=>({space:o.space,page:o.page,..."changeRequest"in o&&o.changeRequest?{changeRequest:o.changeRequest}:{},..."revision"in o&&o.revision?{revision:o.revision}:{}}),[o.space,o.page,"changeRequest"in o?o.changeRequest:void 0,"revision"in o?o.revision:void 0]);return Mm.default.createElement(RE.Provider,{value:n},e)}function ut(){let t=Mm.default.useContext(RE);if(t===null)throw new Error("useContentReferenceContext expects a ContentReferenceContextProvider above it");return t}c();var PS=b(k());c();var ca=nr({getKey:t=>{let[,...o]=t;return uw(o)},getValue:async([t,o,e,n])=>{let r=[];return!o||!KO(o,e)?[null,r,!1]:await om(async()=>[await HO(o,e,{hiveClient:t,firestoreReader:{getDocument:a=>(r.some(s=>ys(s)===ys(a))||r.push(a),Ms.readAsync(a)),getCollection:a=>(r.some(s=>ys(a)===ys(s))||r.push(a),Ms.readAsync(a))}}),r,!1],[null,r,!0])},toJS(t){return[t[0],t[1].map(cw),t[2]]},fromJS(t){return[t[0],t[1].map(lw),t[2]]}}),my=nr({getKey:t=>{let[,...o]=t;return uw(o)},getValue:async([t,o,e])=>{let n=[];return await om(async()=>[await Eg(o,e,{hiveClient:t,firestoreReader:{getDocument:i=>(n.some(a=>ys(a)===ys(i))||n.push(i),Ms.readAsync(i)),getCollection:i=>(n.some(a=>ys(i)===ys(a))||n.push(i),Ms.readAsync(i))}}),n,!1],[null,n,!0])},toJS(t){return[t[0],t[1].map(cw),t[2]]},fromJS(t){return[t[0],t[1].map(lw),t[2]]}});c();var ja=b(k());c();var IE=Zg("0dc87861cc2f97f4b8aa90517de6c6f7d7add292c36eff9ffb4a127ad3126faa",()=>import("https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent-3PN4OZQ7.min.js"));function EE(t){let{content:o}=t,{selectedTab:e,changeSelectedTab:n,opened:r,close:i}=zI("share");return ja.createElement(Ct,null,r?ja.createElement(vo,{size:"xlarge",onClose:i},ja.createElement(ja.Suspense,{fallback:ja.createElement(a_,{sidebar:ja.createElement(Lo,{size:"large"})},ja.createElement(Lo,{size:"large"}))},ja.createElement(IE,{tab:e||W_(o),onChangeTab:n,...t}))):null)}c();var fy=b(k());function zc(){let{navigate:t,getNavigationURL:o,getNavigationLinkProps:e}=ye();return fy.useMemo(()=>{let r=(l,u)=>{let d=oo(l,u);if(d!==null)return o({current:RS(d)})},i=(l,u)=>{let d=oo(l,u);if(d!==null)return e({current:RS(d)})},a=(l,u={})=>{let{replace:d=!1}=u;t({current:RS(l,u)},{replace:d})};return{getNavigationHref:r,getNavigationProps:i,navigateToPagePath:a,navigateToPage:(l,u,d)=>{let p=oo(l,u);p!==null&&a(p,d)}}},[t])}function RS(t,o={}){let{preserveSideSheet:e=!1,preserveComments:n=!0,sideSheet:r}=o;return i=>({page:t,...!e&&!r?{sideSheet:void 0}:{},...r?{sideSheet:r}:{},comments:n&&i.type==="space"&&i.sideSheet?.type==="comments"?{...i.sideSheet,node:void 0}:void 0})}function TE(t){let{to:o}=t;return fy.createElement(uh,{to:{screen:{page:o,sideSheet:void 0}}})}function Bn(t,o,e,n={}){let{document:r,...i}=o,{space:a}=o,{withSearch:s=!0,accept:l=["url","user","anchor","page","space","collection","file"],position:u}=n,d=[];return l.includes("url")&&d.push({key:"url",commands:p=>{let{text:f}=p.query;if(!f||!Du(f))return[];let m=Ig(f);if(m){let[h]=my.read([e,m,i]),[y]=ca.read([e,h,i]);if(h&&y)return[{key:f,title:y.text,icon:v.ArrowUpRight,trigger:()=>{t(h)}}]}return[{key:f,title:`Link to "${f}"`,icon:v.Link,trigger:()=>{t({kind:"url",url:f})}}]}}),l.includes("anchor")&&r&&d.push({key:"anchors",commands:()=>LE(r,{},t)}),l.includes("page")&&o.space&&d.push(ME({spaceId:o.space,changeRequestId:"changeRequest"in o?o.changeRequest:void 0},e,t,{accept:l,withSearch:s,targetCurrentSpace:!0})),l.includes("space")&&d.push({key:"spaces",commands:p=>El.read({query:p.query.text,types:["spaces"]}).map(m=>m.index!=="spaces"?null:{key:m.object.objectID,icon:({size:h})=>PS.createElement(vh,{space:m.object,size:h}),title:m.object.title,trigger:()=>{t({kind:"space",space:m.object.objectID})},descendant:l.includes("page")?()=>ie({search:s?"Select page\u2026":void 0,groups:[ME({spaceId:m.object.objectID,changeRequestId:void 0},e,t,{accept:l,withSearch:s,targetCurrentSpace:m.object.objectID===a})]}):void 0}).filter(ue)}),l.includes("collection")&&d.push({key:"collections",commands:p=>El.read({query:p.query.text,types:["collections"]}).map(m=>m.index!=="collections"?null:{key:m.object.objectID,title:m.object.title,trigger:()=>{t({kind:"collection",collection:m.object.objectID})}}).filter(ue)}),l.includes("user")&&d.push({key:"users",commands:p=>El.read({query:p.query.text,hitsPerPage:8,types:["users"]}).map(m=>m.index!=="users"?null:{key:m.object.objectID,icon:({size:h})=>PS.createElement(Tl,{user:m.object,size:h}),title:m.object.displayName,subtitle:m.object.email,trigger:()=>{t({kind:"user",user:m.object.objectID})}}).filter(ue)}),ie({search:s?"Type url or reference\u2026":void 0,groups:d,position:u})}function m3(t,o,e,n,r){return ie({search:"Select page or heading\u2026",groups:[{key:"page",commands:[{key:"pick",title:`Link to "${o.title}"`,icon:v.Page,trigger:()=>{n({kind:"page",page:o.id,space:r.targetCurrentSpace?void 0:t})}}]},{key:"anchors",commands:()=>f3(t,o,e,{page:o.id,space:r.targetCurrentSpace?void 0:t},n)}]})}function ME(t,o,e,n){let{accept:r,withSearch:i,targetCurrentSpace:a}=n;return{key:"space",commands:()=>{let s=Ur(o.store.getBranchRevision(t.spaceId,t.changeRequestId?Rg(t.changeRequestId):kg));return s?Object.values(s.pages).filter(l=>l.type!=="link").map(l=>({key:l.id,title:l.title,subtitle:oo(s,l.id),icon:l.type==="group"?v.AddPageGroup:v.Page,trigger:()=>{e({kind:"page",page:l.id,space:a?void 0:t.spaceId})},descendant:r&&r.includes("anchor")&&l.type==="document"?()=>({...m3(t.spaceId,l,o,e,{targetCurrentSpace:a}),...i?{}:{search:void 0}}):void 0})):[]}}}function f3(t,o,e,n,r){if(!o.document)return[];let i=Ur(e.store.getDocument(t,o.document));return i?LE(i,n,r):[]}function LE(t,o,e){return Sg(t).filter(r=>!!r.anchor).map(r=>{let i=(()=>{switch(r.type){case Fe:return v.Heading1;case qe:return v.Heading2;case tt:return v.Heading3;case To:return v.Swagger;case Yr:return v.BlockExpandable;case Or:case ir:return v.Tabs;case null:return v.Hash;default:Ce(r.type)}})();return{key:r.key,icon:i,title:r.title,trigger:()=>{e({kind:"anchor",anchor:r.anchor,...o})}}})}c();var Rd=b(k());c();var Fl=b(k()),NE=b(q());function _d(t){let{file:o,size:e=A.ICON_M}=t,[,n]=_(h3);return Fl.createElement(NE.View,{style:[n.fileTileIcon,{width:e,height:e}]},o&&hc(o)?Fl.createElement(jo,{style:n.fileTilePreview,source:{uri:na(o.downloadURL,{width:e})},accessibilityLabel:o.name}):Fl.createElement(g3,{file:o,size:e*.65}))}function g3(t){let{file:o,...e}=t;return o?Ku(o)?Fl.createElement(v.Swagger,{...e}):Fl.createElement(v.Paperclip,{...e}):Fl.createElement(v.Trashcan,{...e})}var h3=G.create({fileTileIcon:t=>({backgroundColor:t.colors.background.muted,color:t.colors.text.muted,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:A.RADIUS_M}),fileTilePreview:{width:"100%",height:"100%",resizeMode:"cover",borderRadius:A.RADIUS_M,objectFit:"contain"}});function IS(t){let{navigate:o,getNavigationURL:e}=ye(),n=be(),r=ut(),[i,a]=Rd.useState(""),s=t.map(h=>[n,h,r,i]),l=ca.readMultiple(s),u=ca.readCacheUpdatesKey(s),d=C_(l.map(h=>h[1]).flat()),p=$t(),f=DP(p?.dataSync),m=typeof f<"u"?`${f}`:"";return Rd.useEffect(()=>{a(`${d}${m}`)},[d,m]),Rd.useMemo(()=>l.map(([h,y,S],C)=>{let x=t[C];return h?{title:h.text,icon:y3(x,h),secondaryIcon:v3(x),secondaryIconDescription:b3(x,h),href:typeof h.target=="string"?h.target:e({screen:h.target}),open:()=>{typeof h.target=="string"?ch(h.target):o({screen:h.target})},resolution:h}:{title:S?"Access denied":"Broken link",icon:void 0,href:"",open:()=>{}}}),[u,e,o])}function Qe(t){return IS(t?[t]:[])[0]||{title:"Broken link",icon:null,href:"",open:()=>{}}}function y3(t,o){if(t.kind==="url")return v.ExternalLink;if(o.extra?.user)return mt(Tl,{user:o.extra.user});if(o.extra?.file)return mt(_d,{file:o.extra.file});if(o.extra?.space)return mt(vh,{space:o.extra.space});if(o.extra?.page&&o.extra.page.emoji)return mt(No,{code:o.extra.page.emoji})}function v3(t){switch(t.kind){case"user":return v.AtSign;case"anchor":return v.Hash;case"page":return v.Page;case"space":return v.Space;case"collection":return v.Collection;case"url":return v.ExternalLink}}function b3(t,o){switch(t.kind){case"user":return"User mention";case"anchor":return"Link to a page's anchor";case"page":return"Link to a page";case"space":return"Link to a space";case"collection":return"Link to a acollection";case"url":return"External URL"}}function hy(t){let{label:o,labelDescription:e,value:n,onChangeValue:r,placeholder:i,accept:a,size:s="large",disabled:l=!1}=t,[u,d]=yt.useState(!1),[p,f]=yt.useState(!1),[m,h]=yt.useState(""),y=yt.useRef(null),S=yt.useRef(null),[,C]=_(S3),x=ce(y),O=be(),E=ut();yt.useEffect(()=>{if(!m||!u||u&&!p){x.close();return}x.opened?x.typeQuery(m):x.open(ed(Bn(R=>{r(R),f(!1),S.current&&S.current.blur()},E,O,{withSearch:!1,position:{width:"anchor"},accept:a}),m))},[m,u]),yt.useEffect(()=>{u&&S.current&&S.current.focus()},[u]);let P=R=>{h(R),f(!0)},L=()=>{m||(f(!1),r()),Du(m)&&(r({kind:"url",url:m}),f(!1)),d(!1)};return yt.createElement(Ys.View,null,o?yt.createElement(Ys.View,{style:g.Margin.smallBottom},yt.createElement(Qu,null,o),e?yt.createElement(Ys.View,{style:g.Margin.xsmallTop},yt.createElement(eh,null,e)):null):null,u||!n?yt.createElement(no,{testID:"contentRef.input",ref:S,wrapperRef:y,size:s,value:m,onChangeText:P,onBlur:L,onFocus:()=>d(!0),placeholder:i,disabled:l}):yt.createElement(Ys.TouchableOpacity,{testID:"contentRef.fakeInput",onPress:()=>d(!0),style:[C.input,Q1[s],w.directionRow,w.alignCenter]},yt.createElement(yt.Suspense,{fallback:yt.createElement(xe,{size:"small"})},yt.createElement(w3,{value:n,size:s}))))}function w3(t){let{value:o,size:e}=t,[,n]=_(W),r=Qe(o);return yt.createElement(Ys.View,{style:[w.flex1,w.directionRow,w.alignCenter]},r.icon?yt.createElement(Ys.View,{style:[g.Margin.smallRight]},yt.createElement(r.icon,{size:A.ICON_S,style:n.textMuted})):null,yt.createElement(Ys.View,{style:[w.flex1]},yt.createElement(Zr,{style:[J1[e],n.text],testID:"contentRef.resolvedTitle"},r.title)))}var S3=G.create({input:t=>({backgroundColor:t.colors.background.main,borderWidth:1,borderColor:t.colors.border.main})});c();async function AE(t,o,e){let[n]=await ca.readAsync([t,o,e]);return{uri:n?.target}}function yy(t,o){let n=(Rs().color==="light"?null:o)||t,r=Qe(n);if(!r.href)return null;let i=r.resolution?.extra?.file;return{uri:r.href,width:i?.dimensions?.width,height:i?.dimensions?.height}}c();function Fc(t,o){return{href:t.href,onPress:e=>{if(o&&o(e),e){if(e.isDefaultPrevented()||e.nativeEvent.metaKey||e.nativeEvent.ctrlKey)return;e.preventDefault()}t.open()}}}c();var ES=b(k());function DE(t){let{block:o,style:e,size:n=A.ICON_M}=t;return o.icon?ES.createElement(jo,{source:{uri:na(o.icon,{width:n})},style:[{width:n,height:n,borderRadius:n/8}]}):ES.createElement(v.Integrations,{size:n,style:e})}c();c();var Nr=b(k());c();var Dd=b(k());c();var So=b(k()),ql=b(q());c();var vy=b(k()),BE=b(q());function WE(t){let{description:o,readOnly:e,blockProps:n}=t,{node:r}=n;return!o||e&&"fragment"in o&&xs(r.fragments.get(o.fragment))?null:vy.createElement(BE.View,{style:g.Margin.mediumTop},"text"in o?vy.createElement(td,{markdown:o.text}):vy.createElement(ur,{fragment:o.fragment}))}c();var Lm=b(k()),zE=b(q());c();var Vl={get:$.primary.base,post:$.green.base,put:$.orange.base,options:$.violet.base,head:$.orange.base,delete:$.scarlet.base,patch:$.orange.base,connect:$.orange.base,trace:$.orange.base};var C3=Z.createResponsiveComponent(Pr);function by(t){let{readOnly:o,method:e,setMethod:n}=t,[,r]=_(W),[,i]=_(k3),a=Lm.default.useRef(null),s=ce(a),l=ie({groups:[{key:"methods",commands:ad.map(p=>({key:p,title:p.toUpperCase(),trigger:()=>{n&&n(p)}}))}]}),u=()=>{s.open(l)},d=Lm.default.createElement(C3,{style:i.badge,backgroundColor:Vl[e]||$.orange.base,mobileStyle:[i.mobileMethodBadge],desktopStyle:[i.httpMethodBadge]},Lm.default.createElement(Z.Text,{desktopStyle:[r.GroupTitle,r.Bold],mobileStyle:[r.MobileCaption,r.Bold],style:[r.textInsideColor,r.Bold,r.Uppercase]},e));return o?d:Lm.default.createElement(zE.TouchableOpacity,{ref:a,onPress:u},d)}var k3=G.create({badge:{width:"fit-content"},httpMethodBadge:{borderRadius:A.XS,height:A.XS,paddingHorizontal:g.small,justifyContent:"center"},mobileMethodBadge:{borderRadius:A.XXS,height:A.XXS,paddingHorizontal:g.small,justifyContent:"center"}});var FE=Z.createResponsiveComponent(H.View),x3=Z.createResponsiveComponent(H.View.Child);function VE(t){let{readOnly:o,blockProps:e,baseUrl:n,summary:r,path:i,method:a,description:s,opened:l,setOpened:u}=t,{node:d,editor:p}=e,[,f]=_(W),m=So.default.useRef(),h=So.default.useRef(),y=So.default.useRef();function S(){u(!l)}let C=H.useInteractiveComponent(l?v.ChevronDown:v.ChevronRight);return So.default.createElement(ql.View,{style:[w.directionColumn,w.flex1,g.Padding.smallBottom]},So.default.createElement(Z.View,{style:[w.alignCenter,g.Padding.medium,w.wrap],mobileStyle:w.flex1,desktopStyle:w.directionRow},So.default.createElement(H.TouchableOpacity,{style:g.Padding.mediumRight,onPress:S},So.default.createElement(C.Child,{size:A.ICON_M,style:f.textMuted,activeStyle:f.primary})),So.default.createElement(ql.View,{style:[g.Margin.mediumRight]},So.default.createElement(by,{readOnly:o,method:a,setMethod:x=>{p.change(O=>{Re.setMethod(O,d.key,x)})}})),So.default.createElement(FE,{style:[w.wrap],mobileStyle:[w.flex1]},So.default.createElement(Jr,{ref:m,component:qs,value:n,placeholder:"https://api.gitbook.com/v1",onChangeText:x=>{p.change(O=>{Re.setBaseUrl(O,d.key,x)})},style:[f.Label,f.textMuted,wy.breakWord],selectTextOnFocus:!0,readOnly:o,onSubmitEditing:()=>{h.current&&h.current.focus()}})),So.default.createElement(FE,{style:[w.directionRow],mobileStyle:[wy.mobileEndpoint,g.Padding.xsmallTop]},So.default.createElement(Jr,{ref:h,component:qs,value:i,placeholder:"/users",onChangeText:x=>{p.change(O=>{Re.setPath(O,d.key,x)})},style:[f.Label,f.text,f.Bold,wy.breakWord],selectTextOnFocus:!0,readOnly:t.readOnly,onSubmitEditing:()=>{y.current&&y.current.focus()}}),So.default.createElement(x3,{style:[g.Margin.xsmallLeft,je.hidden],hoverStyle:[je.visible],mobileStyle:{display:"none"}},So.default.createElement(Xg,{size:"xsmall",content:`${n}${i}`})))),So.default.createElement(ql.View,{style:wy.headerBody},So.default.createElement(ql.View,null,So.default.createElement(Jr,{ref:y,component:qs,value:r,placeholder:"Operation summary",onChangeText:x=>{p.change(O=>{Re.setSummary(O,d.key,x)})},style:[f.Heading3,f.text],readOnly:o,displayMode:"block",onSubmitEditing:()=>{p.change(x=>{if(l&&s&&"fragment"in s){let O=d.fragments.get(s.fragment);O&&x.collapseToStartOf(O)}else St(x,d);x.focus()})}})),l?So.default.createElement(WE,{readOnly:o,description:s,blockProps:e}):null))}var wy=ql.StyleSheet.create({breakWord:{wordWrap:"anywhere"},mobileEndpoint:{paddingLeft:g.medium+A.ICON_M,flexBasis:"100%",flexGrow:1},headerBody:{paddingLeft:g.medium+A.ICON_M+g.medium}});c();var Zm=b(k()),DT=b(q());c();var Nm=b(k()),qE=b(q());function GE(t){let{blockProps:o}=t,{editor:e,node:n}=o,r=Nm.useRef(null),i=ce(r),a=ie({groups:[{key:"parameters",commands:TS.map(({location:l,title:u,description:d})=>({key:l,title:u,subtitle:d,trigger:()=>{e.change(p=>{Re.addParameter(p,n.key,l)})}}))}]}),s=()=>{i.open(a)};return Nm.createElement(qE.View,null,Nm.createElement(V,{ref:r,title:"Add Parameter",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}var TS=[{location:"path",title:"Path",description:"Params in the URL path"},{location:"query",title:"Query",description:"Params in the query string"},{location:"header",title:"Header",description:"Params sent in headers"},{location:"cookie",title:"Cookie",description:"Params set via cookie"},{location:"body",title:"Body",description:"Params passed in body"}];c();var jm=b(k()),$m=b(q());c();var ko=b(k()),Ad=b(q());c();c();var X=b(k()),qc=b(DD());c();var Co=b(k());var Am=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gl(t){let o=Object.prototype.toString.call(t);return o==="[object Window]"||o==="[object global]"}function Sy(t){return"nodeType"in t}function Wn(t){var o,e;return t?Gl(t)?t:Sy(t)&&(o=(e=t.ownerDocument)==null?void 0:e.defaultView)!=null?o:window:window}function Cy(t){let{Document:o}=Wn(t);return t instanceof o}function Id(t){return Gl(t)?!1:t instanceof Wn(t).HTMLElement}function KE(t){return t instanceof Wn(t).SVGElement}function Hl(t){return t?Gl(t)?t.document:Sy(t)?Cy(t)?t:Id(t)?t.ownerDocument:document:document:document}var la=Am?Co.useLayoutEffect:Co.useEffect;function Dm(t){let o=(0,Co.useRef)(t);return la(()=>{o.current=t}),(0,Co.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return o.current==null?void 0:o.current(...n)},[])}function XE(){let t=(0,Co.useRef)(null),o=(0,Co.useCallback)((n,r)=>{t.current=setInterval(n,r)},[]),e=(0,Co.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[o,e]}function Ed(t,o){o===void 0&&(o=[t]);let e=(0,Co.useRef)(t);return la(()=>{e.current!==t&&(e.current=t)},o),e}function Td(t,o){let e=(0,Co.useRef)();return(0,Co.useMemo)(()=>{let n=t(e.current);return e.current=n,n},[...o])}function Bm(t){let o=Dm(t),e=(0,Co.useRef)(null),n=(0,Co.useCallback)(r=>{r!==e.current&&o?.(r,e.current),e.current=r},[]);return[e,n]}function Wm(t){let o=(0,Co.useRef)();return(0,Co.useEffect)(()=>{o.current=t},[t]),o.current}var MS={};function zm(t,o){return(0,Co.useMemo)(()=>{if(o)return o;let e=MS[t]==null?0:MS[t]+1;return MS[t]=e,t+"-"+e},[t,o])}function UE(t){return function(o){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((i,a)=>{let s=Object.entries(a);for(let[l,u]of s){let d=i[l];d!=null&&(i[l]=d+t*u)}return i},{...o})}}var Kl=UE(1),Fm=UE(-1);function O3(t){return"clientX"in t&&"clientY"in t}function ky(t){if(!t)return!1;let{KeyboardEvent:o}=Wn(t.target);return o&&t instanceof o}function _3(t){if(!t)return!1;let{TouchEvent:o}=Wn(t.target);return o&&t instanceof o}function Xl(t){if(_3(t)){if(t.touches&&t.touches.length){let{clientX:o,clientY:e}=t.touches[0];return{x:o,y:e}}else if(t.changedTouches&&t.changedTouches.length){let{clientX:o,clientY:e}=t.changedTouches[0];return{x:o,y:e}}}return O3(t)?{x:t.clientX,y:t.clientY}:null}var Pd=Object.freeze({Translate:{toString(t){if(!t)return;let{x:o,y:e}=t;return"translate3d("+(o?Math.round(o):0)+"px, "+(e?Math.round(e):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;let{scaleX:o,scaleY:e}=t;return"scaleX("+o+") scaleY("+e+")"}},Transform:{toString(t){if(t)return[Pd.Translate.toString(t),Pd.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:o,duration:e,easing:n}=t;return o+" "+e+"ms "+n}}}),HE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function YE(t){return t.matches(HE)?t:t.querySelector(HE)}c();var Ul=b(k()),R3={display:"none"};function jE(t){let{id:o,value:e}=t;return Ul.default.createElement("div",{id:o,style:R3},e)}var P3={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function $E(t){let{id:o,announcement:e}=t;return Ul.default.createElement("div",{id:o,style:P3,role:"status","aria-live":"assertive","aria-atomic":!0},e)}function ZE(){let[t,o]=(0,Ul.useState)("");return{announce:(0,Ul.useCallback)(n=>{n!=null&&o(n)},[]),announcement:t}}var cT=(0,X.createContext)(null);function VS(t){let o=(0,X.useContext)(cT);(0,X.useEffect)(()=>{if(!o)throw new Error("useDndMonitor must be used within a children of <DndContext>");return o(t)},[t,o])}function I3(){let[t]=(0,X.useState)(()=>new Set),o=(0,X.useCallback)(n=>(t.add(n),()=>t.delete(n)),[t]);return[(0,X.useCallback)(n=>{let{type:r,event:i}=n;t.forEach(a=>{var s;return(s=a[r])==null?void 0:s.call(a,i)})},[t]),o]}var E3={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},T3={onDragStart(t){let{active:o}=t;return"Picked up draggable item "+o.id+"."},onDragOver(t){let{active:o,over:e}=t;return e?"Draggable item "+o.id+" was moved over droppable area "+e.id+".":"Draggable item "+o.id+" is no longer over a droppable area."},onDragEnd(t){let{active:o,over:e}=t;return e?"Draggable item "+o.id+" was dropped over droppable area "+e.id:"Draggable item "+o.id+" was dropped."},onDragCancel(t){let{active:o}=t;return"Dragging was cancelled. Draggable item "+o.id+" was dropped."}};function M3(t){let{announcements:o=T3,container:e,hiddenTextDescribedById:n,screenReaderInstructions:r=E3}=t,{announce:i,announcement:a}=ZE(),s=zm("DndLiveRegion"),[l,u]=(0,X.useState)(!1);if((0,X.useEffect)(()=>{u(!0)},[]),VS((0,X.useMemo)(()=>({onDragStart(p){let{active:f}=p;i(o.onDragStart({active:f}))},onDragMove(p){let{active:f,over:m}=p;o.onDragMove&&i(o.onDragMove({active:f,over:m}))},onDragOver(p){let{active:f,over:m}=p;i(o.onDragOver({active:f,over:m}))},onDragEnd(p){let{active:f,over:m}=p;i(o.onDragEnd({active:f,over:m}))},onDragCancel(p){let{active:f,over:m}=p;i(o.onDragCancel({active:f,over:m}))}}),[i,o])),!l)return null;let d=X.default.createElement(X.default.Fragment,null,X.default.createElement(jE,{id:n,value:r.draggable}),X.default.createElement($E,{id:s,announcement:a}));return e?(0,qc.createPortal)(d,e):d}var Ao;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(Ao||(Ao={}));function Oy(){}function qS(t,o){return(0,X.useMemo)(()=>({sensor:t,options:o??{}}),[t,o])}var ua=Object.freeze({x:0,y:0});function L3(t,o){return Math.sqrt(Math.pow(t.x-o.x,2)+Math.pow(t.y-o.y,2))}function N3(t,o){let e=Xl(t);if(!e)return"0 0";let n={x:(e.x-o.left)/o.width*100,y:(e.y-o.top)/o.height*100};return n.x+"% "+n.y+"%"}function A3(t,o){let{data:{value:e}}=t,{data:{value:n}}=o;return e-n}function D3(t,o){let{data:{value:e}}=t,{data:{value:n}}=o;return n-e}function B3(t){let{left:o,top:e,height:n,width:r}=t;return[{x:o,y:e},{x:o+r,y:e},{x:o,y:e+n},{x:o+r,y:e+n}]}function W3(t,o){if(!t||t.length===0)return null;let[e]=t;return o?e[o]:e}function z3(t,o){let e=Math.max(o.top,t.top),n=Math.max(o.left,t.left),r=Math.min(o.left+o.width,t.left+t.width),i=Math.min(o.top+o.height,t.top+t.height),a=r-n,s=i-e;if(n<r&&e<i){let l=o.width*o.height,u=t.width*t.height,d=a*s,p=d/(l+u-d);return Number(p.toFixed(4))}return 0}var F3=t=>{let{collisionRect:o,droppableRects:e,droppableContainers:n}=t,r=[];for(let i of n){let{id:a}=i,s=e.get(a);if(s){let l=z3(s,o);l>0&&r.push({id:a,data:{droppableContainer:i,value:l}})}}return r.sort(D3)};function V3(t,o){let{top:e,left:n,bottom:r,right:i}=o;return e<=t.y&&t.y<=r&&n<=t.x&&t.x<=i}var lT=t=>{let{droppableContainers:o,droppableRects:e,pointerCoordinates:n}=t;if(!n)return[];let r=[];for(let i of o){let{id:a}=i,s=e.get(a);if(s&&V3(n,s)){let u=B3(s).reduce((p,f)=>p+L3(n,f),0),d=Number((u/4).toFixed(4));r.push({id:a,data:{droppableContainer:i,value:d}})}}return r.sort(A3)};function q3(t,o,e){return{...t,scaleX:o&&e?o.width/e.width:1,scaleY:o&&e?o.height/e.height:1}}function uT(t,o){return t&&o?{x:t.left-o.left,y:t.top-o.top}:ua}function G3(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((a,s)=>({...a,top:a.top+t*s.y,bottom:a.bottom+t*s.y,left:a.left+t*s.x,right:a.right+t*s.x}),{...e})}}var H3=G3(1);function dT(t){if(t.startsWith("matrix3d(")){let o=t.slice(9,-1).split(/, /);return{x:+o[12],y:+o[13],scaleX:+o[0],scaleY:+o[5]}}else if(t.startsWith("matrix(")){let o=t.slice(7,-1).split(/, /);return{x:+o[4],y:+o[5],scaleX:+o[0],scaleY:+o[3]}}return null}function K3(t,o,e){let n=dT(o);if(!n)return t;let{scaleX:r,scaleY:i,x:a,y:s}=n,l=t.left-a-(1-r)*parseFloat(e),u=t.top-s-(1-i)*parseFloat(e.slice(e.indexOf(" ")+1)),d=r?t.width/r:t.width,p=i?t.height/i:t.height;return{width:d,height:p,top:u,right:l+d,bottom:u+p,left:l}}var X3={ignoreTransform:!1};function Xm(t,o){o===void 0&&(o=X3);let e=t.getBoundingClientRect();if(o.ignoreTransform){let{transform:u,transformOrigin:d}=Wn(t).getComputedStyle(t);u&&(e=K3(e,u,d))}let{top:n,left:r,width:i,height:a,bottom:s,right:l}=e;return{top:n,left:r,width:i,height:a,bottom:s,right:l}}function JE(t){return Xm(t,{ignoreTransform:!0})}function U3(t){let o=t.innerWidth,e=t.innerHeight;return{top:0,left:0,right:o,bottom:e,width:o,height:e}}function Y3(t,o){return o===void 0&&(o=Wn(t).getComputedStyle(t)),o.position==="fixed"}function j3(t,o){o===void 0&&(o=Wn(t).getComputedStyle(t));let e=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{let i=o[r];return typeof i=="string"?e.test(i):!1})}function GS(t,o){let e=[];function n(r){if(o!=null&&e.length>=o||!r)return e;if(Cy(r)&&r.scrollingElement!=null&&!e.includes(r.scrollingElement))return e.push(r.scrollingElement),e;if(!Id(r)||KE(r)||e.includes(r))return e;let i=Wn(t).getComputedStyle(r);return r!==t&&j3(r,i)&&e.push(r),Y3(r,i)?e:n(r.parentNode)}return t?n(t):e}function pT(t){let[o]=GS(t,1);return o??null}function LS(t){return!Am||!t?null:Gl(t)?t:Sy(t)?Cy(t)||t===Hl(t).scrollingElement?window:Id(t)?t:null:null}function mT(t){return Gl(t)?t.scrollX:t.scrollLeft}function fT(t){return Gl(t)?t.scrollY:t.scrollTop}function BS(t){return{x:mT(t),y:fT(t)}}var Zo;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Zo||(Zo={}));function gT(t){return!Am||!t?!1:t===document.scrollingElement}function hT(t){let o={x:0,y:0},e=gT(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},n={x:t.scrollWidth-e.width,y:t.scrollHeight-e.height},r=t.scrollTop<=o.y,i=t.scrollLeft<=o.x,a=t.scrollTop>=n.y,s=t.scrollLeft>=n.x;return{isTop:r,isLeft:i,isBottom:a,isRight:s,maxScroll:n,minScroll:o}}var $3={x:.2,y:.2};function Z3(t,o,e,n,r){let{top:i,left:a,right:s,bottom:l}=e;n===void 0&&(n=10),r===void 0&&(r=$3);let{isTop:u,isBottom:d,isLeft:p,isRight:f}=hT(t),m={x:0,y:0},h={x:0,y:0},y={height:o.height*r.y,width:o.width*r.x};return!u&&i<=o.top+y.height?(m.y=Zo.Backward,h.y=n*Math.abs((o.top+y.height-i)/y.height)):!d&&l>=o.bottom-y.height&&(m.y=Zo.Forward,h.y=n*Math.abs((o.bottom-y.height-l)/y.height)),!f&&s>=o.right-y.width?(m.x=Zo.Forward,h.x=n*Math.abs((o.right-y.width-s)/y.width)):!p&&a<=o.left+y.width&&(m.x=Zo.Backward,h.x=n*Math.abs((o.left+y.width-a)/y.width)),{direction:m,speed:h}}function J3(t){if(t===document.scrollingElement){let{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}let{top:o,left:e,right:n,bottom:r}=t.getBoundingClientRect();return{top:o,left:e,right:n,bottom:r,width:t.clientWidth,height:t.clientHeight}}function yT(t){return t.reduce((o,e)=>Kl(o,BS(e)),ua)}function Q3(t){return t.reduce((o,e)=>o+mT(e),0)}function e5(t){return t.reduce((o,e)=>o+fT(e),0)}function vT(t,o){if(o===void 0&&(o=Xm),!t)return;let{top:e,left:n,bottom:r,right:i}=o(t);pT(t)&&(r<=0||i<=0||e>=window.innerHeight||n>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}var t5=[["x",["left","right"],Q3],["y",["top","bottom"],e5]],qm=class{constructor(o,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=GS(e),r=yT(n);this.rect={...o},this.width=o.width,this.height=o.height;for(let[i,a,s]of t5)for(let l of a)Object.defineProperty(this,l,{get:()=>{let u=s(n),d=r[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},Yl=class{constructor(o){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...e)})},this.target=o}add(o,e,n){var r;(r=this.target)==null||r.addEventListener(o,e,n),this.listeners.push([o,e,n])}};function o5(t){let{EventTarget:o}=Wn(t);return t instanceof o?t:Hl(t)}function NS(t,o){let e=Math.abs(t.x),n=Math.abs(t.y);return typeof o=="number"?Math.sqrt(e**2+n**2)>o:"x"in o&&"y"in o?e>o.x&&n>o.y:"x"in o?e>o.x:"y"in o?n>o.y:!1}var Ei;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(Ei||(Ei={}));function QE(t){t.preventDefault()}function n5(t){t.stopPropagation()}var xt;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(xt||(xt={}));var bT={start:[xt.Space,xt.Enter],cancel:[xt.Esc],end:[xt.Space,xt.Enter]},r5=(t,o)=>{let{currentCoordinates:e}=o;switch(t.code){case xt.Right:return{...e,x:e.x+25};case xt.Left:return{...e,x:e.x-25};case xt.Down:return{...e,y:e.y+25};case xt.Up:return{...e,y:e.y-25}}},_y=class{constructor(o){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=o;let{event:{target:e}}=o;this.props=o,this.listeners=new Yl(Hl(e)),this.windowListeners=new Yl(Wn(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ei.Resize,this.handleCancel),this.windowListeners.add(Ei.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ei.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:o,onStart:e}=this.props,n=o.node.current;n&&vT(n),e(ua)}handleKeyDown(o){if(ky(o)){let{active:e,context:n,options:r}=this.props,{keyboardCodes:i=bT,coordinateGetter:a=r5,scrollBehavior:s="smooth"}=r,{code:l}=o;if(i.end.includes(l)){this.handleEnd(o);return}if(i.cancel.includes(l)){this.handleCancel(o);return}let{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:ua;this.referenceCoordinates||(this.referenceCoordinates=d);let p=a(o,{active:e,context:n.current,currentCoordinates:d});if(p){let f=Fm(p,d),m={x:0,y:0},{scrollableAncestors:h}=n.current;for(let y of h){let S=o.code,{isTop:C,isRight:x,isLeft:O,isBottom:E,maxScroll:P,minScroll:L}=hT(y),R=J3(y),T={x:Math.min(S===xt.Right?R.right-R.width/2:R.right,Math.max(S===xt.Right?R.left:R.left+R.width/2,p.x)),y:Math.min(S===xt.Down?R.bottom-R.height/2:R.bottom,Math.max(S===xt.Down?R.top:R.top+R.height/2,p.y))},M=S===xt.Right&&!x||S===xt.Left&&!O,I=S===xt.Down&&!E||S===xt.Up&&!C;if(M&&T.x!==p.x){let N=y.scrollLeft+f.x,z=S===xt.Right&&N<=P.x||S===xt.Left&&N>=L.x;if(z&&!f.y){y.scrollTo({left:N,behavior:s});return}z?m.x=y.scrollLeft-N:m.x=S===xt.Right?y.scrollLeft-P.x:y.scrollLeft-L.x,m.x&&y.scrollBy({left:-m.x,behavior:s});break}else if(I&&T.y!==p.y){let N=y.scrollTop+f.y,z=S===xt.Down&&N<=P.y||S===xt.Up&&N>=L.y;if(z&&!f.x){y.scrollTo({top:N,behavior:s});return}z?m.y=y.scrollTop-N:m.y=S===xt.Down?y.scrollTop-P.y:y.scrollTop-L.y,m.y&&y.scrollBy({top:-m.y,behavior:s});break}}this.handleMove(o,Kl(Fm(p,this.referenceCoordinates),m))}}}handleMove(o,e){let{onMove:n}=this.props;o.preventDefault(),n(e)}handleEnd(o){let{onEnd:e}=this.props;o.preventDefault(),this.detach(),e()}handleCancel(o){let{onCancel:e}=this.props;o.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};_y.activators=[{eventName:"onKeyDown",handler:(t,o,e)=>{let{keyboardCodes:n=bT,onActivation:r}=o,{active:i}=e,{code:a}=t.nativeEvent;if(n.start.includes(a)){let s=i.activatorNode.current;return s&&t.target!==s?!1:(t.preventDefault(),r?.({event:t.nativeEvent}),!0)}return!1}}];function eT(t){return!!(t&&"distance"in t)}function tT(t){return!!(t&&"delay"in t)}var Gm=class{constructor(o,e,n){var r;n===void 0&&(n=o5(o.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=o,this.events=e;let{event:i}=o,{target:a}=i;this.props=o,this.events=e,this.document=Hl(a),this.documentListeners=new Yl(this.document),this.listeners=new Yl(n),this.windowListeners=new Yl(Wn(a)),this.initialCoordinates=(r=Xl(i))!=null?r:ua,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:o,props:{options:{activationConstraint:e}}}=this;if(this.listeners.add(o.move.name,this.handleMove,{passive:!1}),this.listeners.add(o.end.name,this.handleEnd),this.windowListeners.add(Ei.Resize,this.handleCancel),this.windowListeners.add(Ei.DragStart,QE),this.windowListeners.add(Ei.VisibilityChange,this.handleCancel),this.windowListeners.add(Ei.ContextMenu,QE),this.documentListeners.add(Ei.Keydown,this.handleKeydown),e){if(eT(e))return;if(tT(e)){this.timeoutId=setTimeout(this.handleStart,e.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){let{initialCoordinates:o}=this,{onStart:e}=this.props;o&&(this.activated=!0,this.documentListeners.add(Ei.Click,n5,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ei.SelectionChange,this.removeTextSelection),e(o))}handleMove(o){var e;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:a,options:{activationConstraint:s}}=i;if(!r)return;let l=(e=Xl(o))!=null?e:ua,u=Fm(r,l);if(!n&&s){if(tT(s))return NS(u,s.tolerance)?this.handleCancel():void 0;if(eT(s))return s.tolerance!=null&&NS(u,s.tolerance)?this.handleCancel():NS(u,s.distance)?this.handleStart():void 0}o.cancelable&&o.preventDefault(),a(l)}handleEnd(){let{onEnd:o}=this.props;this.detach(),o()}handleCancel(){let{onCancel:o}=this.props;this.detach(),o()}handleKeydown(o){o.code===xt.Esc&&this.handleCancel()}removeTextSelection(){var o;(o=this.document.getSelection())==null||o.removeAllRanges()}},i5={move:{name:"pointermove"},end:{name:"pointerup"}},Md=class extends Gm{constructor(o){let{event:e}=o,n=Hl(e.target);super(o,i5,n)}};Md.activators=[{eventName:"onPointerDown",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o;return!e.isPrimary||e.button!==0?!1:(n?.({event:e}),!0)}}];var a5={move:{name:"mousemove"},end:{name:"mouseup"}},WS;(function(t){t[t.RightClick=2]="RightClick"})(WS||(WS={}));var Hm=class extends Gm{constructor(o){super(o,a5,Hl(o.event.target))}};Hm.activators=[{eventName:"onMouseDown",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o;return e.button===WS.RightClick?!1:(n?.({event:e}),!0)}}];var AS={move:{name:"touchmove"},end:{name:"touchend"}},zS=class extends Gm{constructor(o){super(o,AS)}static setup(){return window.addEventListener(AS.move.name,o,{capture:!1,passive:!1}),function(){window.removeEventListener(AS.move.name,o)};function o(){}}};zS.activators=[{eventName:"onTouchStart",handler:(t,o)=>{let{nativeEvent:e}=t,{onActivation:n}=o,{touches:r}=e;return r.length>1?!1:(n?.({event:e}),!0)}}];var Vm;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(Vm||(Vm={}));var Ry;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ry||(Ry={}));function s5(t){let{acceleration:o,activator:e=Vm.Pointer,canScroll:n,draggingRect:r,enabled:i,interval:a=5,order:s=Ry.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:p,threshold:f}=t,m=l5({delta:p,disabled:!i}),[h,y]=XE(),S=(0,X.useRef)({x:0,y:0}),C=(0,X.useRef)({x:0,y:0}),x=(0,X.useMemo)(()=>{switch(e){case Vm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Vm.DraggableRect:return r}},[e,r,l]),O=(0,X.useRef)(null),E=(0,X.useCallback)(()=>{let L=O.current;if(!L)return;let R=S.current.x*C.current.x,T=S.current.y*C.current.y;L.scrollBy(R,T)},[]),P=(0,X.useMemo)(()=>s===Ry.TreeOrder?[...u].reverse():u,[s,u]);(0,X.useEffect)(()=>{if(!i||!u.length||!x){y();return}for(let L of P){if(n?.(L)===!1)continue;let R=u.indexOf(L),T=d[R];if(!T)continue;let{direction:M,speed:I}=Z3(L,T,x,o,f);for(let N of["x","y"])m[N][M[N]]||(I[N]=0,M[N]=0);if(I.x>0||I.y>0){y(),O.current=L,h(E,a),S.current=I,C.current=M;return}}S.current={x:0,y:0},C.current={x:0,y:0},y()},[o,E,n,y,i,a,JSON.stringify(x),JSON.stringify(m),h,u,P,d,JSON.stringify(f)])}var c5={x:{[Zo.Backward]:!1,[Zo.Forward]:!1},y:{[Zo.Backward]:!1,[Zo.Forward]:!1}};function l5(t){let{delta:o,disabled:e}=t,n=Wm(o);return Td(r=>{if(e||!n||!r)return c5;let i={x:Math.sign(o.x-n.x),y:Math.sign(o.y-n.y)};return{x:{[Zo.Backward]:r.x[Zo.Backward]||i.x===-1,[Zo.Forward]:r.x[Zo.Forward]||i.x===1},y:{[Zo.Backward]:r.y[Zo.Backward]||i.y===-1,[Zo.Forward]:r.y[Zo.Forward]||i.y===1}}},[e,o,n])}function u5(t,o){let e=o!==null?t.get(o):void 0,n=e?e.node.current:null;return Td(r=>{var i;return o===null?null:(i=n??r)!=null?i:null},[n,o])}function d5(t,o){return(0,X.useMemo)(()=>t.reduce((e,n)=>{let{sensor:r}=n,i=r.activators.map(a=>({eventName:a.eventName,handler:o(a.handler,n)}));return[...e,...i]},[]),[t,o])}var Km;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Km||(Km={}));var FS;(function(t){t.Optimized="optimized"})(FS||(FS={}));var oT=new Map;function p5(t,o){let{dragging:e,dependencies:n,config:r}=o,[i,a]=(0,X.useState)(null),{frequency:s,measure:l,strategy:u}=r,d=(0,X.useRef)(t),p=S(),f=Ed(p),m=(0,X.useCallback)(function(C){C===void 0&&(C=[]),!f.current&&a(x=>x===null?C:x.concat(C.filter(O=>!x.includes(O))))},[f]),h=(0,X.useRef)(null),y=Td(C=>{if(p&&!e)return oT;if(!C||C===oT||d.current!==t||i!=null){let x=new Map;for(let O of t){if(!O)continue;if(i&&i.length>0&&!i.includes(O.id)&&O.rect.current){x.set(O.id,O.rect.current);continue}let E=O.node.current,P=E?new qm(l(E),E):null;O.rect.current=P,P&&x.set(O.id,P)}return x}return C},[t,i,e,p,l]);return(0,X.useEffect)(()=>{d.current=t},[t]),(0,X.useEffect)(()=>{p||m()},[e,p]),(0,X.useEffect)(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),(0,X.useEffect)(()=>{p||typeof s!="number"||h.current!==null||(h.current=setTimeout(()=>{m(),h.current=null},s))},[s,p,m,...n]),{droppableRects:y,measureDroppableContainers:m,measuringScheduled:i!=null};function S(){switch(u){case Km.Always:return!1;case Km.BeforeDragging:return e;default:return!e}}}function HS(t,o){return Td(e=>t?e||(typeof o=="function"?o(t):t):null,[o,t])}function m5(t,o){return HS(t,o)}function f5(t){let{callback:o,disabled:e}=t,n=Dm(o),r=(0,X.useMemo)(()=>{if(e||typeof window>"u"||typeof window.MutationObserver>"u")return;let{MutationObserver:i}=window;return new i(n)},[n,e]);return(0,X.useEffect)(()=>()=>r?.disconnect(),[r]),r}function Py(t){let{callback:o,disabled:e}=t,n=Dm(o),r=(0,X.useMemo)(()=>{if(e||typeof window>"u"||typeof window.ResizeObserver>"u")return;let{ResizeObserver:i}=window;return new i(n)},[e]);return(0,X.useEffect)(()=>()=>r?.disconnect(),[r]),r}function g5(t){return new qm(Xm(t),t)}function nT(t,o,e){o===void 0&&(o=g5);let[n,r]=(0,X.useReducer)(s,null),i=f5({callback(l){if(t)for(let u of l){let{type:d,target:p}=u;if(d==="childList"&&p instanceof HTMLElement&&p.contains(t)){r();break}}}}),a=Py({callback:r});return la(()=>{r(),t?(a?.observe(t),i?.observe(document.body,{childList:!0,subtree:!0})):(a?.disconnect(),i?.disconnect())},[t]),n;function s(l){if(!t)return null;if(t.isConnected===!1){var u;return(u=l??e)!=null?u:null}let d=o(t);return JSON.stringify(l)===JSON.stringify(d)?l:d}}function h5(t){let o=HS(t);return uT(t,o)}var rT=[];function y5(t){let o=(0,X.useRef)(t),e=Td(n=>t?n&&n!==rT&&t&&o.current&&t.parentNode===o.current.parentNode?n:GS(t):rT,[t]);return(0,X.useEffect)(()=>{o.current=t},[t]),e}function v5(t){let[o,e]=(0,X.useState)(null),n=(0,X.useRef)(t),r=(0,X.useCallback)(i=>{let a=LS(i.target);a&&e(s=>s?(s.set(a,BS(a)),new Map(s)):null)},[]);return(0,X.useEffect)(()=>{let i=n.current;if(t!==i){a(i);let s=t.map(l=>{let u=LS(l);return u?(u.addEventListener("scroll",r,{passive:!0}),[u,BS(u)]):null}).filter(l=>l!=null);e(s.length?new Map(s):null),n.current=t}return()=>{a(t),a(i)};function a(s){s.forEach(l=>{let u=LS(l);u?.removeEventListener("scroll",r)})}},[r,t]),(0,X.useMemo)(()=>t.length?o?Array.from(o.values()).reduce((i,a)=>Kl(i,a),ua):yT(t):ua,[t,o])}function iT(t,o){o===void 0&&(o=[]);let e=(0,X.useRef)(null);return(0,X.useEffect)(()=>{e.current=null},o),(0,X.useEffect)(()=>{let n=t!==ua;n&&!e.current&&(e.current=t),!n&&e.current&&(e.current=null)},[t]),e.current?Fm(t,e.current):ua}function b5(t){(0,X.useEffect)(()=>{if(!Am)return;let o=t.map(e=>{let{sensor:n}=e;return n.setup==null?void 0:n.setup()});return()=>{for(let e of o)e?.()}},t.map(o=>{let{sensor:e}=o;return e}))}function w5(t,o){return(0,X.useMemo)(()=>t.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=a=>{i(a,o)},e},{}),[t,o])}function wT(t){return(0,X.useMemo)(()=>t?U3(t):null,[t])}var DS=[];function S5(t,o){o===void 0&&(o=Xm);let[e]=t,n=wT(e?Wn(e):null),[r,i]=(0,X.useReducer)(s,DS),a=Py({callback:i});return t.length>0&&r===DS&&i(),la(()=>{t.length?t.forEach(l=>a?.observe(l)):(a?.disconnect(),i())},[t]),r;function s(){return t.length?t.map(l=>gT(l)?n:new qm(o(l),l)):DS}}function ST(t){if(!t)return null;if(t.children.length>1)return t;let o=t.children[0];return Id(o)?o:t}function C5(t){let{measure:o}=t,[e,n]=(0,X.useState)(null),r=(0,X.useCallback)(u=>{for(let{target:d}of u)if(Id(d)){n(p=>{let f=o(d);return p?{...p,width:f.width,height:f.height}:f});break}},[o]),i=Py({callback:r}),a=(0,X.useCallback)(u=>{let d=ST(u);i?.disconnect(),d&&i?.observe(d),n(d?o(d):null)},[o,i]),[s,l]=Bm(a);return(0,X.useMemo)(()=>({nodeRef:s,rect:e,setRef:l}),[e,s,l])}var k5=[{sensor:Md,options:{}},{sensor:_y,options:{}}],x5={current:{}},xy={draggable:{measure:JE},droppable:{measure:JE,strategy:Km.WhileDragging,frequency:FS.Optimized},dragOverlay:{measure:Xm}},jl=class extends Map{get(o){var e;return o!=null&&(e=super.get(o))!=null?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(o=>{let{disabled:e}=o;return!e})}getNodeFor(o){var e,n;return(e=(n=this.get(o))==null?void 0:n.node.current)!=null?e:void 0}},O5={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new jl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Oy},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:xy,measureDroppableContainers:Oy,windowRect:null,measuringScheduled:!1},CT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Oy,draggableNodes:new Map,over:null,measureDroppableContainers:Oy},Um=(0,X.createContext)(CT),kT=(0,X.createContext)(O5);function _5(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new jl}}}function R5(t,o){switch(o.type){case Ao.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:o.initialCoordinates,active:o.active}};case Ao.DragMove:return t.draggable.active?{...t,draggable:{...t.draggable,translate:{x:o.coordinates.x-t.draggable.initialCoordinates.x,y:o.coordinates.y-t.draggable.initialCoordinates.y}}}:t;case Ao.DragEnd:case Ao.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ao.RegisterDroppable:{let{element:e}=o,{id:n}=e,r=new jl(t.droppable.containers);return r.set(n,e),{...t,droppable:{...t.droppable,containers:r}}}case Ao.SetDroppableDisabled:{let{id:e,key:n,disabled:r}=o,i=t.droppable.containers.get(e);if(!i||n!==i.key)return t;let a=new jl(t.droppable.containers);return a.set(e,{...i,disabled:r}),{...t,droppable:{...t.droppable,containers:a}}}case Ao.UnregisterDroppable:{let{id:e,key:n}=o,r=t.droppable.containers.get(e);if(!r||n!==r.key)return t;let i=new jl(t.droppable.containers);return i.delete(e),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function P5(t){let{disabled:o}=t,{active:e,activatorEvent:n,draggableNodes:r}=(0,X.useContext)(Um),i=Wm(n),a=Wm(e?.id);return(0,X.useEffect)(()=>{if(!o&&!n&&i&&a!=null){if(!ky(i)||document.activeElement===i.target)return;let s=r.get(a);if(!s)return;let{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(let d of[l.current,u.current]){if(!d)continue;let p=YE(d);if(p){p.focus();break}}})}},[n,o,r,a,i]),null}function xT(t,o){let{transform:e,...n}=o;return t!=null&&t.length?t.reduce((r,i)=>i({transform:r,...n}),e):e}function I5(t){return(0,X.useMemo)(()=>({draggable:{...xy.draggable,...t?.draggable},droppable:{...xy.droppable,...t?.droppable},dragOverlay:{...xy.dragOverlay,...t?.dragOverlay}}),[t?.draggable,t?.droppable,t?.dragOverlay])}function E5(t){let{activeNode:o,measure:e,initialRect:n,config:r=!0}=t,i=(0,X.useRef)(!1),{x:a,y:s}=typeof r=="boolean"?{x:r,y:r}:r;la(()=>{if(!a&&!s||!o){i.current=!1;return}if(i.current||!n)return;let u=o?.node.current;if(!u||u.isConnected===!1)return;let d=e(u),p=uT(d,n);if(a||(p.x=0),s||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){let f=pT(u);f&&f.scrollBy({top:p.y,left:p.x})}},[o,a,s,n,e])}var Iy=(0,X.createContext)({...ua,scaleX:1,scaleY:1}),Vc;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Vc||(Vc={}));var OT=(0,X.memo)(function(o){var e,n,r,i;let{id:a,accessibility:s,autoScroll:l=!0,children:u,sensors:d=k5,collisionDetection:p=F3,measuring:f,modifiers:m,...h}=o,y=(0,X.useReducer)(R5,void 0,_5),[S,C]=y,[x,O]=I3(),[E,P]=(0,X.useState)(Vc.Uninitialized),L=E===Vc.Initialized,{draggable:{active:R,nodes:T,translate:M},droppable:{containers:I}}=S,N=R?T.get(R):null,z=(0,X.useRef)({initial:null,translated:null}),Y=(0,X.useMemo)(()=>{var sn;return R!=null?{id:R,data:(sn=N?.data)!=null?sn:x5,rect:z}:null},[R,N]),Q=(0,X.useRef)(null),[te,_e]=(0,X.useState)(null),[Ae,Be]=(0,X.useState)(null),dt=Ed(h,Object.values(h)),eo=zm("DndDescribedBy",a),Vr=(0,X.useMemo)(()=>I.getEnabled(),[I]),On=I5(f),{droppableRects:xr,measureDroppableContainers:qr,measuringScheduled:Gr}=p5(Vr,{dragging:L,dependencies:[M.x,M.y],config:On.droppable}),wt=u5(T,R),dc=(0,X.useMemo)(()=>Ae?Xl(Ae):null,[Ae]),rn=ND(),gi=m5(wt,On.draggable.measure);E5({activeNode:R?T.get(R):null,config:rn.layoutShiftCompensation,initialRect:gi,measure:On.draggable.measure});let K=nT(wt,On.draggable.measure,gi),ne=nT(wt?wt.parentElement:null),j=(0,X.useRef)({activatorEvent:null,active:null,activeNode:wt,collisionRect:null,collisions:null,droppableRects:xr,draggableNodes:T,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=I.getNodeFor((e=j.current.over)==null?void 0:e.id),me=C5({measure:On.dragOverlay.measure}),Ee=(n=me.nodeRef.current)!=null?n:wt,at=L?(r=me.rect)!=null?r:K:null,Ye=!!(me.nodeRef.current&&me.rect),st=h5(Ye?null:K),ct=wT(Ee?Wn(Ee):null),et=y5(L?oe??wt:null),lo=S5(et),Io=xT(m,{transform:{x:M.x-st.x,y:M.y-st.y,scaleX:1,scaleY:1},activatorEvent:Ae,active:Y,activeNodeRect:K,containerNodeRect:ne,draggingNodeRect:at,over:j.current.over,overlayNodeRect:me.rect,scrollableAncestors:et,scrollableAncestorRects:lo,windowRect:ct}),an=dc?Kl(dc,M):null,Ra=v5(et),Mu=iT(Ra),Dp=iT(Ra,[K]),Pa=Kl(Io,Mu),pc=at?H3(at,Io):null,lt=Y&&pc?p({active:Y,collisionRect:pc,droppableRects:xr,droppableContainers:Vr,pointerCoordinates:an}):null,hi=W3(lt,"id"),[er,vx]=(0,X.useState)(null),ID=Ye?Io:Kl(Io,Dp),ED=q3(ID,(i=er?.rect)!=null?i:null,K),bx=(0,X.useCallback)((sn,Hr)=>{let{sensor:Kr,options:mc}=Hr;if(Q.current==null)return;let yi=T.get(Q.current);if(!yi)return;let Ki=sn.nativeEvent,Ia=new Kr({active:Q.current,activeNode:yi,event:Ki,options:mc,context:j,onStart(Xi){let Bp=Q.current;if(Bp==null)return;let Wp=T.get(Bp);if(!Wp)return;let{onDragStart:Jf}=dt.current,Qf={active:{id:Bp,data:Wp.data,rect:z}};(0,qc.unstable_batchedUpdates)(()=>{Jf?.(Qf),P(Vc.Initializing),C({type:Ao.DragStart,initialCoordinates:Xi,active:Bp}),x({type:"onDragStart",event:Qf})})},onMove(Xi){C({type:Ao.DragMove,coordinates:Xi})},onEnd:Lu(Ao.DragEnd),onCancel:Lu(Ao.DragCancel)});(0,qc.unstable_batchedUpdates)(()=>{_e(Ia),Be(sn.nativeEvent)});function Lu(Xi){return async function(){let{active:Wp,collisions:Jf,over:Qf,scrollAdjustedTranslate:Sx}=j.current,zp=null;if(Wp&&Sx){let{cancelDrop:Fp}=dt.current;zp={activatorEvent:Ki,active:Wp,collisions:Jf,delta:Sx,over:Qf},Xi===Ao.DragEnd&&typeof Fp=="function"&&await Promise.resolve(Fp(zp))&&(Xi=Ao.DragCancel)}Q.current=null,(0,qc.unstable_batchedUpdates)(()=>{C({type:Xi}),P(Vc.Uninitialized),vx(null),_e(null),Be(null);let Fp=Xi===Ao.DragEnd?"onDragEnd":"onDragCancel";if(zp){let rw=dt.current[Fp];rw?.(zp),x({type:Fp,event:zp})}})}}},[T]),TD=(0,X.useCallback)((sn,Hr)=>(Kr,mc)=>{let yi=Kr.nativeEvent,Ki=T.get(mc);if(Q.current!==null||!Ki||yi.dndKit||yi.defaultPrevented)return;let Ia={active:Ki};sn(Kr,Hr.options,Ia)===!0&&(yi.dndKit={capturedBy:Hr.sensor},Q.current=mc,bx(Kr,Hr))},[T,bx]),wx=d5(d,TD);b5(d),la(()=>{K&&E===Vc.Initializing&&P(Vc.Initialized)},[K,E]),(0,X.useEffect)(()=>{let{onDragMove:sn}=dt.current,{active:Hr,activatorEvent:Kr,collisions:mc,over:yi}=j.current;if(!Hr||!Kr)return;let Ki={active:Hr,activatorEvent:Kr,collisions:mc,delta:{x:Pa.x,y:Pa.y},over:yi};(0,qc.unstable_batchedUpdates)(()=>{sn?.(Ki),x({type:"onDragMove",event:Ki})})},[Pa.x,Pa.y]),(0,X.useEffect)(()=>{let{active:sn,activatorEvent:Hr,collisions:Kr,droppableContainers:mc,scrollAdjustedTranslate:yi}=j.current;if(!sn||Q.current==null||!Hr||!yi)return;let{onDragOver:Ki}=dt.current,Ia=mc.get(hi),Lu=Ia&&Ia.rect.current?{id:Ia.id,rect:Ia.rect.current,data:Ia.data,disabled:Ia.disabled}:null,Xi={active:sn,activatorEvent:Hr,collisions:Kr,delta:{x:yi.x,y:yi.y},over:Lu};(0,qc.unstable_batchedUpdates)(()=>{vx(Lu),Ki?.(Xi),x({type:"onDragOver",event:Xi})})},[hi]),la(()=>{j.current={activatorEvent:Ae,active:Y,activeNode:wt,collisionRect:pc,collisions:lt,droppableRects:xr,draggableNodes:T,draggingNode:Ee,draggingNodeRect:at,droppableContainers:I,over:er,scrollableAncestors:et,scrollAdjustedTranslate:Pa},z.current={initial:at,translated:pc}},[Y,wt,lt,pc,T,Ee,at,xr,I,er,et,Pa]),s5({...rn,delta:M,draggingRect:pc,pointerCoordinates:an,scrollableAncestors:et,scrollableAncestorRects:lo});let MD=(0,X.useMemo)(()=>({active:Y,activeNode:wt,activeNodeRect:K,activatorEvent:Ae,collisions:lt,containerNodeRect:ne,dragOverlay:me,draggableNodes:T,droppableContainers:I,droppableRects:xr,over:er,measureDroppableContainers:qr,scrollableAncestors:et,scrollableAncestorRects:lo,measuringConfiguration:On,measuringScheduled:Gr,windowRect:ct}),[Y,wt,K,Ae,lt,ne,me,T,I,xr,er,qr,et,lo,On,Gr,ct]),LD=(0,X.useMemo)(()=>({activatorEvent:Ae,activators:wx,active:Y,activeNodeRect:K,ariaDescribedById:{draggable:eo},dispatch:C,draggableNodes:T,over:er,measureDroppableContainers:qr}),[Ae,wx,Y,K,C,eo,T,er,qr]);return X.default.createElement(cT.Provider,{value:O},X.default.createElement(Um.Provider,{value:LD},X.default.createElement(kT.Provider,{value:MD},X.default.createElement(Iy.Provider,{value:ED},u)),X.default.createElement(P5,{disabled:s?.restoreFocus===!1})),X.default.createElement(M3,{...s,hiddenTextDescribedById:eo}));function ND(){let sn=te?.autoScrollEnabled===!1,Hr=typeof l=="object"?l.enabled===!1:l===!1,Kr=L&&!sn&&!Hr;return typeof l=="object"?{...l,enabled:Kr}:{enabled:Kr}}}),T5=(0,X.createContext)(null),aT="button",M5="Droppable";function mn(t){let{id:o,data:e,disabled:n=!1,attributes:r}=t,i=zm(M5),{activators:a,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:p,over:f}=(0,X.useContext)(Um),{role:m=aT,roleDescription:h="draggable",tabIndex:y=0}=r??{},S=l?.id===o,C=(0,X.useContext)(S?Iy:T5),[x,O]=Bm(),[E,P]=Bm(),L=w5(a,o),R=Ed(e);la(()=>(p.set(o,{id:o,key:i,node:x,activatorNode:E,data:R}),()=>{let M=p.get(o);M&&M.key===i&&p.delete(o)}),[p,o]);let T=(0,X.useMemo)(()=>({role:m,tabIndex:y,"aria-disabled":n,"aria-pressed":S&&m===aT?!0:void 0,"aria-roledescription":h,"aria-describedby":d.draggable}),[n,m,y,S,h,d.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:T,isDragging:S,listeners:n?void 0:L,node:x,over:f,setNodeRef:O,setActivatorNodeRef:P,transform:C}}function L5(){return(0,X.useContext)(kT)}var N5="Droppable",A5={timeout:25};function _T(t){let{data:o,disabled:e=!1,id:n,resizeObserverConfig:r}=t,i=zm(N5),{active:a,dispatch:s,over:l,measureDroppableContainers:u}=(0,X.useContext)(Um),d=(0,X.useRef)({disabled:e}),p=(0,X.useRef)(!1),f=(0,X.useRef)(null),m=(0,X.useRef)(null),{disabled:h,updateMeasurementsFor:y,timeout:S}={...A5,...r},C=Ed(y??n),x=(0,X.useCallback)(()=>{if(!p.current){p.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(C.current)?C.current:[C.current]),m.current=null},S)},[S]),O=Py({callback:x,disabled:h||!a}),E=(0,X.useCallback)((T,M)=>{O&&(M&&(O.unobserve(M),p.current=!1),T&&O.observe(T))},[O]),[P,L]=Bm(E),R=Ed(o);return(0,X.useEffect)(()=>{!O||!P.current||(O.disconnect(),p.current=!1,O.observe(P.current))},[P,O]),la(()=>(s({type:Ao.RegisterDroppable,element:{id:n,key:i,disabled:e,node:P,rect:f,data:R}}),()=>s({type:Ao.UnregisterDroppable,key:i,id:n})),[n]),(0,X.useEffect)(()=>{e!==d.current.disabled&&(s({type:Ao.SetDroppableDisabled,id:n,key:i,disabled:e}),d.current.disabled=e)},[n,i,e,s]),{active:a,rect:f,isOver:l?.id===n,node:P,over:l,setNodeRef:L}}function D5(t){let{animation:o,children:e}=t,[n,r]=(0,X.useState)(null),[i,a]=(0,X.useState)(null),s=Wm(e);return!e&&!n&&s&&r(s),la(()=>{if(!i)return;let l=n?.key,u=n?.props.id;if(l==null||u==null){r(null);return}Promise.resolve(o(u,i)).then(()=>{r(null)})},[o,n,i]),X.default.createElement(X.default.Fragment,null,e,n?(0,X.cloneElement)(n,{ref:a}):null)}var B5={x:0,y:0,scaleX:1,scaleY:1};function W5(t){let{children:o}=t;return X.default.createElement(Um.Provider,{value:CT},X.default.createElement(Iy.Provider,{value:B5},o))}var z5={position:"fixed",touchAction:"none"},F5=t=>ky(t)?"transform 250ms ease":void 0,V5=(0,X.forwardRef)((t,o)=>{let{as:e,activatorEvent:n,adjustScale:r,children:i,className:a,rect:s,style:l,transform:u,transition:d=F5}=t;if(!s)return null;let p=r?u:{...u,scaleX:1,scaleY:1},f={...z5,width:s.width,height:s.height,top:s.top,left:s.left,transform:Pd.Transform.toString(p),transformOrigin:r&&n?N3(n,s):void 0,transition:typeof d=="function"?d(n):d,...l};return X.default.createElement(e,{className:a,style:f,ref:o},i)}),q5=t=>o=>{let{active:e,dragOverlay:n}=o,r={},{styles:i,className:a}=t;if(i!=null&&i.active)for(let[s,l]of Object.entries(i.active))l!==void 0&&(r[s]=e.node.style.getPropertyValue(s),e.node.style.setProperty(s,l));if(i!=null&&i.dragOverlay)for(let[s,l]of Object.entries(i.dragOverlay))l!==void 0&&n.node.style.setProperty(s,l);return a!=null&&a.active&&e.node.classList.add(a.active),a!=null&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(let[l,u]of Object.entries(r))e.node.style.setProperty(l,u);a!=null&&a.active&&e.node.classList.remove(a.active)}},G5=t=>{let{transform:{initial:o,final:e}}=t;return[{transform:Pd.Transform.toString(o)},{transform:Pd.Transform.toString(e)}]},H5={duration:250,easing:"ease",keyframes:G5,sideEffects:q5({styles:{active:{opacity:"0"}}})};function K5(t){let{config:o,draggableNodes:e,droppableContainers:n,measuringConfiguration:r}=t;return Dm((i,a)=>{if(o===null)return;let s=e.get(i);if(!s)return;let l=s.node.current;if(!l)return;let u=ST(a);if(!u)return;let{transform:d}=Wn(a).getComputedStyle(a),p=dT(d);if(!p)return;let f=typeof o=="function"?o:X5(o);return vT(l,r.draggable.measure),f({active:{id:i,data:s.data,node:l,rect:r.draggable.measure(l)},draggableNodes:e,dragOverlay:{node:a,rect:r.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:r,transform:p})})}function X5(t){let{duration:o,easing:e,sideEffects:n,keyframes:r}={...H5,...t};return i=>{let{active:a,dragOverlay:s,transform:l,...u}=i;if(!o)return;let d={x:s.rect.left-a.rect.left,y:s.rect.top-a.rect.top},p={scaleX:l.scaleX!==1?a.rect.width*l.scaleX/s.rect.width:1,scaleY:l.scaleY!==1?a.rect.height*l.scaleY/s.rect.height:1},f={x:l.x-d.x,y:l.y-d.y,...p},m=r({...u,active:a,dragOverlay:s,transform:{initial:l,final:f}}),[h]=m,y=m[m.length-1];if(JSON.stringify(h)===JSON.stringify(y))return;let S=n?.({active:a,dragOverlay:s,...u}),C=s.node.animate(m,{duration:o,easing:e,fill:"forwards"});return new Promise(x=>{C.onfinish=()=>{S?.(),x()}})}}var sT=0;function U5(t){return(0,X.useMemo)(()=>{if(t!=null)return sT++,sT},[t])}var RT=X.default.memo(t=>{let{adjustScale:o=!1,children:e,dropAnimation:n,style:r,transition:i,modifiers:a,wrapperElement:s="div",className:l,zIndex:u=999}=t,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:m,draggableNodes:h,droppableContainers:y,dragOverlay:S,over:C,measuringConfiguration:x,scrollableAncestors:O,scrollableAncestorRects:E,windowRect:P}=L5(),L=(0,X.useContext)(Iy),R=U5(p?.id),T=xT(a,{activatorEvent:d,active:p,activeNodeRect:f,containerNodeRect:m,draggingNodeRect:S.rect,over:C,overlayNodeRect:S.rect,scrollableAncestors:O,scrollableAncestorRects:E,transform:L,windowRect:P}),M=HS(f),I=K5({config:n,draggableNodes:h,droppableContainers:y,measuringConfiguration:x}),N=M?S.setRef:void 0;return X.default.createElement(W5,null,X.default.createElement(D5,{animation:I},p&&R?X.default.createElement(V5,{key:R,id:p.id,ref:N,as:s,activatorEvent:d,adjustScale:o,className:l,transition:i,rect:M,style:{zIndex:u,...r},transform:T},e):null))});var fn=b(k()),Ld=b(q());c();c();var PT=t=>{let{activatorEvent:o,draggingNodeRect:e,transform:n}=t;if(e&&o){let r=Xl(o);if(!r)return n;let i=r.x-e.left,a=r.y-e.top;return{...n,x:n.x+i-e.width/2,y:n.y+a-e.height/2}}return n};var Za=b(k());c();var Ym=b(k());c();var IT=JSON.parse('{"cardWrapper":"cardWrapper_6Hr4m"}');function ET(t){let{item:o}=t;return Ym.createElement(U,{style:[D.padding.mediumHorizontal,D.padding.smallVertical,D.backgroundColor.primaryMain,D.borderRadius.medium,IT.cardWrapper]},o.previewIcon?Ym.createElement(U,{style:[D.margin.mediumRight]},Ym.createElement(v[o.previewIcon].CSS,{style:[D.textColor.primaryTextInside,D.icons.small]})):null,Ym.createElement(At,{style:[D.text.label,D.textColor.primaryTextInside]},o.previewLabel||"Drop to insert"))}function TT(t){let[o,e]=Za.useState(null),n=qS(Md,{activationConstraint:{distance:10}}),r=qS(Hm,{activationConstraint:{distance:10}}),i=Za.useCallback(({active:s})=>{window.document.body.classList.add("dragging"),e(s.data.current)},[]),a=Za.useCallback(()=>{window.document.body.classList.remove("dragging"),e(null)},[]);return Za.createElement(OT,{sensors:[n,r],onDragStart:i,onDragEnd:a,onDragCancel:a,collisionDetection:lT},t.children,Za.createElement(Tn,null,Za.createElement(RT,{modifiers:[PT],dropAnimation:null},o?Za.createElement(ET,{item:o}):null)))}c();function MT(t){switch(t.type){case"space":return{kind:"space",space:t.id};case"collection":return{kind:"collection",collection:t.id};case"page":return{kind:"page",space:t.space,page:t.id};case"block":case"block-range":case"tab":case"swagger-response":case"swagger-parameter":case"table-record":case"table-definition":throw new Error(`Invalid DND item "${t.type}"`);default:Ce(t)}}c();function zn(t){return{id:`${t.type}/${t.id}`,data:t}}c();var KS=b(k()),LT=0;function mr(t){let{disabled:o,shouldAccept:e,onDrop:n,onHoverMove:r}=t,i=KS.useMemo(()=>(LT+=1,`${LT}`),[]),a=_T({id:i,disabled:o}),s=KS.useMemo(()=>!a.over||!a.isOver||!a.active?!1:e(a.active.data.current),[a.over,a.isOver,e]);return VS({onDragEnd:l=>{s&&a.active&&n(l.active.data.current)},onDragMove:r?({active:l,over:u})=>{if(!u||u.id!==i||u.disabled||!l.rect.current||l.rect.current.translated===null)return;let d=l.rect.current.translated,p=u.rect,f={x:d.left,y:d.top},m=f.x>p.left+p.width/2?"right":"left",h=f.y>p.top+p.height/2?"bottom":"top";r({item:l.data.current,draggable:d,over:p,xPosition:m,yPosition:h})}:void 0}),{isOver:a.isOver&&s,setNodeRef:a.setNodeRef}}var NT=H.createInteractiveHandle("swagger-row");function Ey(t){let{dragItem:o,columns:e,isLast:n,children:r,palette:i,onDropBefore:a,onDropAfter:s,onInsertBefore:l,onInsertAfter:u,readOnly:d,opened:p,setOpened:f,node:m,ancestors:h}=t,[,y]=_(Y5),S=Nd({node:m,ancestors:h}),C=mn({disabled:t.readOnly,...zn(o)}),x=mr({shouldAccept:R=>o.type!==R.type?!1:o.id!==R.id&&o.blockKey===R.blockKey,onDrop:R=>{a(R)}}),O=mr({shouldAccept:R=>o.type!==R.type?!1:o.id!==R.id&&o.blockKey===R.blockKey,onDrop:R=>{s(R)}}),E=fn.useRef(null),P=ki(E,C.setNodeRef),L=ce(E);return fn.createElement(Ld.View,null,fn.createElement(Ld.View,null,fn.createElement(H.View,{handle:NT,style:[w.directionRow,w.alignCenter,g.Padding.largeRight,C.isDragging?je.translucent:je.visible]},d?null:fn.createElement(Z.View,{style:[w.justifyContentCenter,S.controlButtons?.position],mobileStyle:"hidden"},fn.createElement(H.View.Child,{descendantOf:NT,activeStyle:je.visible,inactiveStyle:L.opened?{}:je.hidden},fn.createElement(V,{ref:P,icon:v.GrabberVertical,size:S.controlButtons?.size,rounded:!0,kind:"secondary",title:`Click for options.
Drag to move.`,onPress:()=>{L.open(i())},...C.listeners}))),fn.createElement(Z.View,{style:[w.flex1,w.directionRow],mobileStyle:[w.wrap,w.alignStart,g.Padding.smallVertical],desktopStyle:[w.alignStart,g.Padding.mediumVertical]},e.map((R,T)=>fn.createElement(Z.View,{key:T,style:[g.Padding.smallRight],desktopStyle:[R.desktopSize],mobileStyle:[y.columnResetWidth,R.mobileSize]},R.content))),r&&f?fn.createElement(Ld.View,{style:[g.Margin.mediumLeft]},fn.createElement(V,{icon:p?v.ChevronDown:v.ChevronRight,onPress:()=>f(!p)})):null),p?fn.createElement(Ld.View,null,r):null,n?null:fn.createElement(Ld.View,{style:y.borderLine})),d?null:fn.createElement(sm,{ref:x.setNodeRef,position:"top",dropHovered:x.isOver,button:{kind:"secondary",icon:v.Plus,onPress:l}}),n&&!d?fn.createElement(sm,{ref:O.setNodeRef,position:"bottom",dropHovered:O.isOver,button:{kind:"secondary",icon:v.Plus,onPress:u}}):null)}var Y5=G.create({borderLine:t=>({height:1,backgroundColor:t.colors.border.muted}),controlButtonWrapper:{position:"absolute",top:0,bottom:0,left:-A.BUTTON_S/2,width:A.BUTTON_S},columnResetWidth:{width:"auto"}});c();var $l=b(k()),Gc=b(q());function Ty(t){let{title:o,button:e,children:n}=t,[,r]=_(W);return $l.createElement(Gc.View,{style:g.Margin.largeTop},$l.createElement(Gc.View,{style:[w.directionRow,w.alignCenter,g.Padding.mediumBottom]},$l.createElement(Gc.View,{style:w.flex1},$l.createElement(Gc.Text,{style:[r.Heading3,r.text]},o)),e?$l.createElement(Gc.View,{style:g.Padding.smallHorizontal},e):null),$l.createElement(Gc.View,null,n))}function My(t){let{readOnly:o,blockProps:e,parameter:n,isLast:r,beforeOrderIndex:i,afterOrderIndex:a}=t,{node:s,editor:l}=e,[,u]=_(W),d=ko.useRef(),p={id:n.key,type:"swagger-parameter",blockKey:s.key,previewLabel:"Move parameter"},{name:f="",type:m="",required:h,description:y,properties:S={},items:C}=n.value,[,x]=_(Z5),[O,E]=ko.useState(!1),P=Object.keys(S).length,L=P>0||!!C,R=s.fragments.get(n.key),T=Y=>{l.change(Q=>{Re.setParameterName(Q,s.key,n.key,Y)})},M=Y=>{l.change(Q=>{Re.setParameterType(Q,s.key,n.key,Y)})},I=Y=>{l.change(Q=>{Re.setParameterRequired(Q,s.key,n.key,Y)})},N=()=>{l.change(Y=>{Re.removeParameter(Y,s.key,n.key)})},z=m==="object"&&P>0?Object.entries(S).map(([Y,Q],te)=>ko.createElement(My,{key:Y,...t,isLast:te===P-1,parameter:{key:Y,value:Q}})):m==="array"&&C?ko.createElement(My,{...t,isLast:!0,parameter:{key:"items",value:C}}):null;return ko.createElement(Ey,{...L?{opened:O,setOpened:E}:{},...e,readOnly:t.readOnly,dragItem:p,isLast:r,palette:()=>ie({groups:[{key:"edit-parameter",commands:[{key:"delete-parameter",title:"Delete",icon:v.Trashcan,trigger:N}]}]}),columns:[{content:o?ko.createElement(Ad.Text,{selectable:!0,style:[u.Code,u.textMid]},f,h?ko.createElement(Ad.Text,{style:[u.danger]},"*"):null):ko.createElement(qs,{placeholder:"id",onChangeText:T,value:f,style:[u.Code,u.textMid],selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{d.current&&d.current.focus()}}),desktopSize:x.parameterColumnNameDesktop,mobileSize:x.parameterColumnNameMobile},{content:ko.createElement(qs,{ref:d,placeholder:"String",onChangeText:M,value:m,style:[u.Label,u.textMid],readOnly:o,selectTextOnFocus:!0,displayMode:"block",onSubmitEditing:()=>{l.change(Y=>{R&&Y.collapseToStartOf(R).focus()})}}),desktopSize:x.parameterColumnTypeDesktop,mobileSize:x.parameterColumnTypeMobile},{content:ko.createElement(ko.Fragment,null,y?ko.createElement(Ad.Text,{style:[u.Label,u.textMid]},y):R?ko.createElement(Mr.Provider,{value:"swaggerParameter"},ko.createElement(ur,{fragment:n.key})):null),desktopSize:w.flex1,mobileSize:!y&&(!R||R.isEmpty)?x.parameterDescriptionEmptyColumnMobile:null},o?null:{content:ko.createElement(c_,{value:h?"required":"optional",items:[{label:"Required",value:"required"},{label:"Optional",value:"optional"}],onValueChange:Y=>I(Y==="required")})}].filter(ue),onInsertBefore:()=>{l.change(Y=>{Re.addParameter(Y,s.key,n.value.in,{before:i,after:n.value.orderIndex})})},onDropBefore:Y=>{l.change(Q=>{Re.moveParameter(Q,s.key,Y.id,n.value.in,{before:i,after:n.value.orderIndex})})},onInsertAfter:()=>{l.change(Y=>{Re.addParameter(Y,s.key,n.value.in,{before:n.value.orderIndex,after:a})})},onDropAfter:Y=>{l.change(Q=>{Re.moveParameter(Q,s.key,Y.id,n.value.in,{after:a,before:n.value.orderIndex})})}},z&&ko.createElement(Ad.View,{style:[x.borderTop]},z))}var Z5=G.create({parameterColumnNameDesktop:{width:200},parameterColumnNameMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%",marginBottom:g.small},parameterColumnTypeDesktop:{width:90},parameterColumnTypeMobile:{flexGrow:1,flexShrink:1,flexBasis:"50%"},parameterDescriptionEmptyColumnMobile:{display:"none"},borderTop:t=>({borderTopWidth:1,borderTopColor:t.colors.border.muted})});function AT(t){let{parametersGroup:o,location:e,isLast:n,...r}=t,[,i]=_(W),a=TS.find(({location:s})=>s===e);return jm.createElement($m.View,{style:g.Margin.smallTop},jm.createElement($m.View,null,jm.createElement($m.Text,{style:[i.Label,i.Bold,i.text]},a.title)),o.map((s,l)=>{let u=o[l-1],d=o[l+1],p=l===o.length-1;return jm.createElement(My,{key:s.key,...r,parameter:s,isLast:p,beforeOrderIndex:u?.value.orderIndex,afterOrderIndex:d?.value.orderIndex})}))}function BT(t){let{parameters:o,readOnly:e,blockProps:n}=t,r=J5(o),i=Object.keys(r).length,a=Re.SORTED_PARAMETERS_LOCATIONS.filter(s=>!!r[s]);return Zm.createElement(Ty,{title:"Parameters",button:t.readOnly?null:Zm.createElement(GE,{blockProps:n})},a.length>0?a.map((s,l)=>{let u=r[s];return Zm.createElement(AT,{key:s,readOnly:e,blockProps:n,location:s,parametersGroup:u,isLast:l===i-1})}):Zm.createElement(DT.Text,null,"No parameters"))}function J5(t){return t.reduce((o,e)=>{let n=o[e.value.in]||[];return o[e.value.in]=[...n,e],o},{})}c();var Jm=b(k()),HT=b(q());c();var Ly=b(VT());var nW={2:$.green.base,3:$.primary.base,4:$.orange.base,5:$.scarlet.base},rW=Object.entries(Ly.message).map(([t,o])=>({code:t,message:o})),iW=new Xu(rW,{shouldSort:!0,threshold:.4,distance:100,keys:[{name:"code",weight:.6},{name:"message",weight:.4}]});function US(t){return nW[Math.floor(t/100)]||$.lightModeGreyScale.dark}function aW(t){return iW.search(t).map(o=>o.item)}function YS({code:t,message:o}){let e=o||Ly.message[t];return e?`${t}: ${e}`:`${t}`}function GT(t){let[o,e]=t.split(": ");return{code:Number(o),message:e}}var qT=[200,201,204,400,401,403,404,500].map(t=>{let o=String(t),e=Ly.message[o];return{code:o,message:e}});function Ny(t,o){let e={key:"responses",commands:r=>(r.query.text?aW(r.query.text):qT).slice(0,qT.length).map(a=>{let s=YS(a);return{key:a.code,title:s,icon:mt(v.Dot,{style:{color:US(parseInt(a.code,10))}}),trigger:()=>{t(s)}}})},n=o?[{key:"edit-response",commands:[{key:"delete-response",title:"Delete response",icon:v.Trashcan,trigger:()=>{o()}}]},e]:[e];return ie({search:"Type status code\u2026",groups:n})}function KT(t){let{blockProps:o}=t,{node:e,editor:n}=o,r=Jm.useRef(null),i=ce(r),a=Ny(l=>{n.change(u=>{Re.addResponse(u,e.key,l)})}),s=()=>{i.open(a)};return Jm.createElement(HT.View,null,Jm.createElement(V,{ref:r,title:"Add Response",icon:i.opened?v.X:v.Plus,kind:i.opened?"primary":"secondary",size:"small",rounded:!0,onPress:()=>s()}))}c();var gn=b(k()),$s=b(q());c();var js=b(k()),JT=b(q());c();var Zl=b(k());function XT(t){let{examples:o}=t,e=Object.keys(o),n=Zl.useRef(null),r=ce(n),[i,a]=Zl.useState(e[0]);return i?Zl.createElement(U1,{code:o[i],syntax:sW(i),showToolbar:r.opened,toolbar:e.length>1?Zl.createElement(V,{kind:"secondary",size:"small",ref:n,rightIcon:v.ChevronDown,onPress:()=>{r.open(ie({groups:[{key:"media-types",commands:e.map(s=>({key:s,title:s,trigger:()=>{a(s)}}))}]}))}},i):null}):null}function sW(t){return t.includes("json")?"js":t.includes("xml")?"xml":"js"}c();var Ie=b(k()),xo=b(q());function UT(t){let[,o]=_(ZT);return Ie.createElement(xo.ScrollView,{style:[o.container],horizontal:!0},Ie.createElement(jS,{...t,isRoot:!0}))}function jS(t){let{schema:o}=t;if(o.type){let e=o.description||o.title;switch(o.type){case"object":return Ie.createElement(YT,{name:"",properties:o.properties,requiredProperties:o.required,description:e,...t});case"array":return Ie.createElement(jT,{name:"",items:o.items,description:e,...t});default:return Ie.createElement($T,{name:"",type:o.type,description:e,...t})}}else return o.anyOf?Ie.createElement(Ay,{type:"anyOf",options:o.anyOf}):o.oneOf?Ie.createElement(Ay,{type:"oneOf",options:o.oneOf}):o.allOf?Ie.createElement(Ay,{type:"allOf",options:o.allOf}):null}function YT(t){let{name:o,isRequired:e=!1,isRoot:n=!1,properties:r={},requiredProperties:i=[],description:a=""}=t,[s,l]=Ie.useState(!1);return Ie.createElement(By,{name:o,type:"object",expandable:{expanded:s,setExpanded:l},required:e,isRoot:n,description:a},s?Object.entries(r).map(([u,d])=>{switch(d.type){case"object":let p=d.anyOf||d.oneOf||d.allOf;return p?Ie.createElement(Ay,{key:u,name:u,description:d.description||d.title,type:d.anyOf?"anyOf":d.oneOff?"oneOf":"allOf",options:p}):Ie.createElement(YT,{key:u,name:u,properties:d.properties,requiredProperties:d.required,isRequired:i.includes(u),description:d.description});case"array":return Ie.createElement(jT,{key:u,name:u,items:d.items,isRequired:i.includes(u),description:d.description});default:return Ie.createElement($T,{key:u,name:u,type:d.type,isRequired:i.includes(u),description:d.description})}}):null)}function jT(t){let{name:o,isRequired:e=!1,isRoot:n=!1,items:r={},description:i=""}=t,[a,s]=Ie.useState(!1);return Ie.createElement(By,{name:o,type:`array[${r.type||""}]`,expandable:{expanded:a,setExpanded:s},description:i,required:e,isRoot:n},a?Ie.createElement(jS,{schema:r}):null)}var Dy=A.ICON_S;function Ay(t){let{name:o,type:e,options:n=[],isRoot:r=!1,description:i="",isRequired:a=!1}=t,[s,l]=Ie.useState(!1);return Ie.createElement(By,{type:o?e:"",name:o||e,expandable:{expanded:s,setExpanded:l},description:i,isRoot:r,required:a,specialKeyword:!0},s?n.map((u,d)=>Ie.createElement(jS,{key:d,schema:u})):null)}function $T(t){let{name:o,type:e,isRequired:n=!1,isRoot:r=!1,description:i=""}=t;return Ie.createElement(By,{name:o,type:e,isRoot:r,required:n,description:i})}function By(t){let{name:o,type:e,description:n,required:r,isRoot:i,expandable:a,specialKeyword:s,children:l}=t,[,u]=_(W),[,d]=_(ZT),p=[u.Body,u.Bold,u.text],f=[g.Margin.xsmallLeft];return Ie.createElement(xo.View,{style:[w.directionColumn,i?null:g.Margin.mediumTop]},Ie.createElement(xo.View,{style:[w.directionRow,w.alignCenter]},Ie.createElement(xo.TouchableOpacity,{onPress:a?()=>a.setExpanded(m=>!m):void 0},a?a.expanded?Ie.createElement(v.ChevronDown,{size:Dy,style:[u.textMuted]}):Ie.createElement(v.ChevronRight,{size:Dy,style:[u.textMuted]}):Ie.createElement(xo.View,{style:[d.placeholderIconWidth,d.placeHolderIconHeight]})),Ie.createElement(xo.View,{style:[w.directionRow,f]},o?Ie.createElement(xo.View,{style:[g.Margin.mediumRight]},s?Ie.createElement(xo.Text,{style:p},o):Ie.createElement(xo.Text,{selectable:!0,style:p},o,r?Ie.createElement(xo.Text,{style:[u.danger,d.textFontCode]},"*"):null)):null,e?Ie.createElement(xo.Text,{style:[u.Body,u.primary,d.textFontCode]},e):null)),Ie.createElement(xo.View,{style:[w.directionRow]},Ie.createElement(xo.View,{style:d.placeholderIconWidth},a?.expanded?Ie.createElement(xo.View,{style:d.verticalLine}):null),Ie.createElement(xo.View,{style:[w.directionColumn,f,g.Padding.mediumRight,d.descriptionWidth]},n?Ie.createElement(xo.View,{style:[g.Margin.xsmallTop]},Ie.createElement(td,{markdown:n,kind:"secondary"})):null,l)))}var ZT=G.create({container:t=>({backgroundColor:t.colors.background.muted,padding:g.medium,borderRadius:t.radiuses.medium}),textFontCode:{fontFamily:zg},placeholderIconWidth:{width:Dy},placeHolderIconHeight:{height:Dy},verticalLine:t=>({width:1,height:"100%",backgroundColor:t.colors.border.main,marginHorizontal:"auto"}),descriptionWidth:{maxWidth:600}});function Wy(t){let{examples:o,schema:e}=t,[n,r]=js.useState("example");return js.createElement(JT.View,null,js.createElement(xc,null,js.createElement(xc.Tab,{active:n==="example",onPress:()=>r("example")},"Example"),e?js.createElement(xc.Tab,{active:n==="schema",onPress:()=>r("schema")},"Schema"):null),n==="example"?js.createElement(XT,{examples:o||{}}):null,n==="schema"&&e?js.createElement(UT,{schema:e}):null)}function eM(t){let{response:o,isLast:e,beforeOrderIndex:n,afterOrderIndex:r,blockProps:i}=t,{node:a,editor:s}=i,[,l]=_(W),[u,d]=gn.useState(!1),p={id:o.key,type:"swagger-response",blockKey:a.key,previewLabel:"Move response"},{status:f,description:m}=o.value,h="Response description",{code:y}=GT(f),S=a.fragments.get(o.key),C=S?xs(S):!1,x=o.value.examples||{},O=o.value.schema,E=!t.readOnly||S&&!C||Object.keys(x).length>0||typeof O<"u",P=L=>{s.change(R=>{Re.setResponseDescription(R,a.key,o.key,L)})};return gn.createElement(Ey,{...i,readOnly:t.readOnly,dragItem:p,isLast:e,opened:u,setOpened:d,palette:()=>Ny(L=>{s.change(R=>{Re.setResponseStatus(R,a.key,o.key,L)})},()=>{s.change(L=>{Re.removeResponse(L,a.key,o.key)})}),columns:[{content:gn.createElement($s.View,{style:[w.directionRow,w.alignCenter]},gn.createElement($s.View,{style:[g.Margin.smallRight]},gn.createElement(v.Dot,{style:{color:US(y)},size:A.ICON_M})),gn.createElement($s.View,{style:w.flex1},gn.createElement($s.Text,{style:[l.Label,l.Bold,l.text]},f))),desktopSize:QT.responseColumnStatusDesktop,mobileSize:QT.responseColumnStatusMobile},{content:gn.createElement(Jr,{component:qs,placeholder:t.readOnly?void 0:h,onChangeText:P,value:m,style:[l.Label,l.textMid],readOnly:t.readOnly,displayMode:"block",onSubmitEditing:()=>{s.change(L=>{u&&S?L.collapseToStartOf(S):St(L,a),L.focus()})}}),desktopSize:w.flex1}],onDropAfter:L=>{s.change(R=>{Re.moveResponse(R,a.key,L.id,{before:o.value.orderIndex,after:r})})},onDropBefore:L=>{s.change(R=>{Re.moveResponse(R,a.key,L.id,{before:n,after:o.value.orderIndex})})},onInsertBefore:()=>{s.change(L=>{Re.addResponse(L,a.key,parseInt(o.value.status,10)-1,{before:n,after:o.value.orderIndex})})},onInsertAfter:()=>{s.change(L=>{Re.addResponse(L,a.key,parseInt(o.value.status,10)+1,{before:o.value.orderIndex,after:r})})}},E?gn.createElement($s.View,{style:[w.flex1,g.Margin.mediumVertical]},S?gn.createElement(gn.Fragment,null,gn.createElement(Mr.Provider,{value:"swaggerResponse"},gn.createElement(ur,{fragment:o.key}))):gn.createElement(Wy,{examples:x,schema:O})):null)}var QT=$s.StyleSheet.create({responseColumnStatusDesktop:{width:290},responseColumnStatusMobile:{flexBasis:"100%",flexGrow:1,flexShrink:0}});c();var Qm=b(k()),tM=b(q());function oM(t){let{readOnly:o,responses:e,blockProps:n}=t;return Qm.createElement(Ty,{title:"Responses",button:o?null:Qm.createElement(KT,{blockProps:n})},Qm.createElement(tM.View,{style:e.length>0&&g.Padding.mediumBottom},e.map((r,i)=>{let a=e[i-1],s=e[i+1];return Qm.createElement(eM,{key:r.key,...t,response:r,isLast:i===e.length-1,beforeOrderIndex:a?.value.orderIndex,afterOrderIndex:s?.value.orderIndex})})))}c();var Do=b(k()),Lr=b(q());c();c();c();var nM=$g("429837f8b383ed2c4f85d02026ce73e42335b6233c1dc303af2b0f50fedfe256",()=>import("https://app.gitbook.com/public/app/chunks/parseSwaggerFile.lazy-HHUC72SF.min.js"));var rM=nM;var Jl=nr({getValue:async t=>{let o=(await rM.load()).default;return await o(t)},toJS:t=>lW(t),fromJS:t=>uW(t)});function ef(t,o){if(!t)return null;o||(o={path:Object.keys(t.paths)[0],method:"get"},o.method=Object.keys(t.paths[o.path])[0]);let n=t.paths[o.path]?.[o.method];if(!n)return null;let r=Object.keys(t.paths).indexOf(o.path),i=ad.indexOf(o.method);return i=i>-1?i:ad.length,{operation:n,path:o.path,httpMethod:o.method,index:r*ad.length+i}}function lW(t){return JSON.parse(JSON.stringify(t,V_()))}function uW(t){return JSON.parse(JSON.stringify(t),q_())}function tf(t){let{onClose:o,data:e,multi:n,buttonText:r,onSelect:i,onRequestChangeSource:a}=t,s=be();if(!("ref"in e))throw new Error("SwaggerConfigurationOperation used with a manual API block, only OpenAPI is supported");let l=ut(),[u]=ca.read([s,e.ref,l]);if(typeof u?.target!="string")throw new Error("SwaggerConfigurationOperation only handles refs with target as string");let{result:d}=Jl.readSafe(u.target),p=d?.paths||{},f=Object.keys(p).reduce((x,O)=>{let E=p[O];return x.concat(Object.keys(E).map(P=>({path:O,method:P})))},[]),m=ef(d,e.method&&e.path?{method:e.method,path:e.path}:void 0),[h,y]=Do.default.useState(m?{[m.index]:{path:m.path,method:m.httpMethod}}:{}),S=()=>{let x=Object.keys(h).map(Number).sort((O,E)=>O-E);i(x.map(O=>h[O])),o()},C=(x,O,E)=>{if(!n){y({[O]:x});return}if(E&&y({...h,[O]:x}),!E){let P={...h};delete P[O],y(P)}};return Do.default.createElement(vo,{onClose:o,title:"Choose API operation",footer:Do.default.createElement(Lr.View,{style:[w.directionRow,w.justifySpaceBetween]},Do.default.createElement(Lr.View,{style:[w.directionRow,w.justifyContentStart]},Do.default.createElement(V,{size:"large",kind:"secondary",onPress:()=>{a()}},"Change API source")),Do.default.createElement(Lr.View,{style:[w.directionRow,w.flex1,w.justifyContentEnd]},Do.default.createElement(V,{size:"large",kind:"primary",onPress:()=>{S()}},typeof r=="string"?r:r(Object.keys(h).length))))},Do.default.createElement(Lr.FlatList,{data:f,renderItem:({item:x})=>{let O=ef(d,x);if(!O)return null;let E=!!h[O.index];return Do.default.createElement(dW,{key:O.index,index:O.index,item:x,operation:O.operation,multi:n,selected:E,onSelect:C})}}))}function dW(t){let{item:o,selected:e,onSelect:n,operation:r,index:i,multi:a}=t,[,s]=_(W);return Do.default.createElement(Es,{style:g.Padding.smallHorizontal,onPress:()=>n(o,i,a?!e:!0),layout:"wide",title:Do.default.createElement(Lr.View,{style:[w.directionRow,w.flex1,w.alignCenter]},Do.default.createElement(Lr.View,{style:[{minWidth:A.L},g.Margin.smallRight]},Do.default.createElement(by,{readOnly:!0,method:o.method})),Do.default.createElement(Lr.View,{style:[w.flex1]},Do.default.createElement(Lr.Text,{style:[s.Code,s.text,pW.apiPath]},o.path),Do.default.createElement(Lr.Text,{style:[s.Caption,s.textMuted]},r?.summary))),buttons:[a?Do.default.createElement(kc,{value:e,onValueChange:l=>n(o,i,l)}):Do.default.createElement(nh,{value:e,onValueChange:()=>n(o,i,!0)})]})}var pW=Lr.StyleSheet.create({apiPath:{fontSize:Fg.xsmall,wordWrap:"anywhere"}});function iM(t,o){let e=Cc(),[n,r]=Dd.useState(null),i=Wt(),[a,s]=Dd.useState(o),l=Ti(e,t),u=p=>{let m=e.value.document.assertBlock(p).data.toFrozenObject();return[{key:"swagger",commands:[{key:"pickSource",title:"Choose OpenAPI source\u2026",icon:v.Paperclip,trigger:()=>{i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([h])=>{h&&(s({ref:h}),r("swagger"))})}},a&&"ref"in a?{key:"pickMethod",title:"Choose API operation",icon:v.Swagger,trigger:()=>{r("swagger")}}:null,{key:"defaultExpanded",icon:v.ChevronsVertical,type:2,enabled:!!m.expanded,title:"Expanded",trigger:()=>(e.change(h=>{m.expanded?h.setDataByKey(p,["expanded"],!1):h.setDataByKey(p,["expanded"],!0)}),nt(e,p,u(p)))}].filter(ue)},...l?[l]:[]]};return[nt(e,t,u(t)),Dd.createElement(Ct,null,n==="swagger"?Dd.createElement(tf,{data:a,buttonText:"Update Block",onRequestChangeSource:()=>{r(null),i.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([p])=>{p&&s({ref:p}),r("swagger")})},onSelect:([p])=>{e.change(f=>{f.setNodeByKey(t,{data:{...a,method:p?.method,path:p?.path}})})},onClose:()=>r(null)}):null)]}c();var Fy=b(k());c();var oi=b(k()),Hc=b(q());function zy(t){let{opened:o,setOpened:e,readOnly:n,parameters:r,header:i,requestBody:a,responses:s,blockProps:l,description:u}=t,[,d]=_(W);return oi.default.createElement(oi.default.Fragment,null,oi.default.createElement(VE,{blockProps:l,readOnly:n,opened:o,setOpened:e,description:u.description,...i}),oi.default.createElement(Hc.View,{style:mW.operationBody},o?oi.default.createElement(oi.default.Fragment,null,oi.default.createElement(BT,{blockProps:l,readOnly:n,...r}),a?oi.default.createElement(Hc.View,{style:g.Margin.largeTop},oi.default.createElement(Hc.View,null,oi.default.createElement(Hc.Text,{style:[d.Label,d.Bold,d.text]},"Body")),oi.default.createElement(Wy,{examples:a.examples,schema:a.schema})):null,oi.default.createElement(oM,{blockProps:l,readOnly:n,...s})):null))}var mW=Hc.StyleSheet.create({operationBody:{padding:g.medium,paddingLeft:g.medium+A.ICON_M+g.medium,paddingTop:0}});function aM(t){let{blockProps:o,data:e,opened:n,setOpened:r}=t,{editor:i}=o;if("ref"in e)throw new Error("trying to render a swagger block that is refering to a swagger file");let{readOnly:a}=i,{baseUrl:s,method:l,path:u,summary:d}=e,{parameters:p={},responses:f={}}=e,m=Fy.default.useMemo(()=>Re.defaultParameterSortedKeys(p).map(S=>({key:S,value:p[S]})),[p]),h=Fy.default.useMemo(()=>Re.defaultResponseSortedKeys(f).map(S=>({key:S,value:f[S]})),[f]);return Fy.default.createElement(zy,{blockProps:o,readOnly:a,opened:n,setOpened:r,header:{baseUrl:s,method:l,summary:d,path:u},parameters:{parameters:m},description:{description:{fragment:"description"}},responses:{responses:h}})}c();var Kc=b(k());function sM(t){let{blockProps:o,data:e,opened:n,setOpened:r,readOnly:i}=t;if(!("ref"in e))throw new Error("trying to render a swagger block that is not refering to a swagger file");let s=Qe(e.ref).href,{result:l,error:u}=Jl.readSafe(s),d=ef(l,e.path&&e.method?{path:e.path,method:e.method}:void 0),{operation:p,path:f,httpMethod:m}=d||{operation:{parameters:[],responses:[],summary:"",description:""},httpMethod:"",path:""},h=Kc.default.useMemo(()=>p.parameters.sort(({in:S},{in:C})=>Re.SORTED_PARAMETERS_LOCATIONS.indexOf(S)<Re.SORTED_PARAMETERS_LOCATIONS.indexOf(C)?-1:1).reduce((S,C,x)=>{let O=S[x-1],E=dw(O?{before:O.value.orderIndex}:{});return S.push({key:iw(),value:{...C,orderIndex:E}}),S},[]),[p.parameters]),y=Kc.default.useMemo(()=>p.responses.sort(({status:S},{status:C})=>S<C?-1:1).reduce((S,C,x)=>{let O=S[x-1],E=dw(O?{before:O.value.orderIndex}:{});return S.push({key:iw(),value:{...C,status:YS({code:C.status}),orderIndex:E}}),S},[]),[p.responses]);if(u)return i?Kc.default.createElement(of,null):Kc.default.createElement(Oi,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:Ta(u)});if(!d){if(i)return Kc.default.createElement(of,null);let S=e.method&&e.path?`${e.method?.toUpperCase()} "${e.path}"`:"";return Kc.default.createElement(Oi,{kind:"danger",title:"Error while parsing the OpenAPI file.",details:`Could not find the operation ${S} in the OpenAPI file.`})}return Kc.default.createElement(zy,{blockProps:o,readOnly:!0,opened:n,setOpened:r,header:{baseUrl:l?.baseUrl||"",method:m,summary:p.summary||"",path:f},parameters:{parameters:h},requestBody:p.requestBody,responses:{responses:y},description:{description:p.description?{text:p.description}:void 0}})}function cM(t){let{node:o,isFocused:e,editor:n}=t,r=o.data.toFrozenObject(),[i,a]=iM(o.key,r),[s,l]=_(fW),{sections:u}=Nr.default.useContext(Ii),{current:d}=Gg(),p=u.get(o.key),f=Je(),[m,h]=Nr.default.useState(f||e||!!r.expanded);Nr.default.useEffect(()=>{d&&r.expanded&&h(!0)},[r.expanded]);let y=Nr.default.createElement(Pr,{style:[l.blockSwagger,m&&l.blockSwaggerOpened],backgroundColor:s.colors.background.main,nativeID:p},Nr.default.createElement(Nr.default.Suspense,{fallback:Nr.default.createElement(Lo,{size:"small"})},"ref"in r?Nr.default.createElement(sM,{readOnly:n?.readOnly,blockProps:t,data:r,opened:m,setOpened:h}):Nr.default.createElement(aM,{blockProps:t,data:r,opened:m,setOpened:h})));return Nr.default.createElement(Nr.default.Fragment,null,a,Nr.default.createElement(ve,{palette:i,...t},!("ref"in r)&&m?y:Nr.default.createElement(Ut,{...t},y)))}var fW=G.create({blockSwagger:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1}),blockSwaggerOpened:t=>({...t.shadows.spread})});c();var lM=b(k());var gW=Lt({key:"lastSwaggerReference",default:{}});function uM(t){let[o,e]=or(gW),n=ut(),r=be(),i=n.space?Ur(r.store.getBranchRevision(n.space,"changeRequest"in n&&n.changeRequest?Rg(n.changeRequest):kg)):void 0,a=i?o[i.contentId]:null,s=lM.default.useCallback(d=>{i&&e({...o,[i.contentId]:d})},[i?.contentId,e]);if(a?.kind==="url")return[a,s];if(a?.kind==="file"&&i?.files[a.file])return[a,s];let l=Re.getProbableRef(t.value.document);if(l)return[l,s];let u=Object.values(i?.files||{}).filter(d=>Ku(d)).sort((d,p)=>{let f=Jp(d.edits)?.updatedAt;return(Jp(p.edits)?.updatedAt||0)-(f||0)});return[u.length?{kind:"file",file:u[0].id}:null,s]}c();var kM=b(k());c();c();var bM=b(pM()),Bo=b(k()),eu=b(q());c();var Oo=b(k());c();var nf=b(k()),gM=b(q());function hM(t){return ie({search:"Pick a color\u2026",groups:[{key:"text",title:"Color",commands:ty.map(o=>mM(t,o,!1))},{key:"background",title:"Background",commands:oy.map(o=>mM(t,o,!0))}]})}function mM(t,o,e){let n=t.value.activeMarks.find(a=>a.type===Xp),r=e?"background":"text",i=n&&n.data.get(r)===o.key;return{key:`${e?"background_":"foreground_"}${o.key}`,title:o.title,type:1,selected:!!i,icon:({size:a})=>e?nf.createElement(fM,{size:a,backgroundColor:o.color,color:$.BLACK}):nf.createElement(fM,{size:a,backgroundColor:$.WHITE,color:o.color}),trigger:()=>{t.change(a=>{n&&a.removeMark(n),i||a.addMark({type:Xp,data:{background:"default",text:"default",...n?n.data.toObject():{},[r]:o.key}})})}}}function fM(t){let{size:o=A.ICON_S,color:e,backgroundColor:n}=t;return nf.createElement(gM.View,{style:[w.directionRow,w.alignCenter,w.justifyContentCenter,{width:o+2,height:o+2,borderRadius:A.RADIUS_M,backgroundColor:n}]},nf.createElement(v.Type,{style:{color:e,fontSize:o*.9}}))}c();var Ar=({type:t,editor:o})=>()=>{o.change(e=>{e.toggleMark(t),e.focus()})},Ql=({palette:t,editor:o,contentReferenceContext:e,isInLink:n,hiveClient:r,insertAtRange:i})=>()=>{if(n){o.change(s=>{s.unwrapInline({type:Rn}).focus()});return}o.change(s=>{Gy(s)});let a=Bn(s=>{o.change(l=>{i?kl.insertContentReferenceAtRange(l,s,i):kl.insertContentReference(l,s)})},{...e,document:o.value.document},r);return t.open(a),a},qy=({editor:t})=>()=>{t.change(o=>{hg.wrapWithAnnotation(o)})};function yM(t){let{value:o,editor:e,palette:n}=t,r=be(),i=ut(),a=o.activeMarks.map(h=>h.type),{startBlock:s,document:l}=o;ze(s);let u=o.hasInline(Rn),p=!(s.type===La),f=()=>{e.change(h=>{Gy(h)}),n.open(hM(e))},m=()=>{e.change(h=>{h.removeAllMarks().focus()})};return Oo.createElement(kI,{onTabToExit:()=>{e.change(h=>{h.focus()})}},p?Oo.createElement(Rm,null,fg(s)?null:Oo.createElement(bt,{leadingIcon:v.Bold.CSS,active:a.has(ar),onPress:Ar({type:ar,editor:e}),tooltipTitle:"*Bold*",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_BOLD}),label:"Bold",iconOnly:!0,preventFocusOnPress:!0}),Oo.createElement(bt,{leadingIcon:v.Italic.CSS,active:a.has(sr),onPress:Ar({type:sr,editor:e}),tooltipTitle:"_Italic_",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_ITALIC}),label:"Italic",iconOnly:!0,preventFocusOnPress:!0}),Oo.createElement(bt,{leadingIcon:v.Strikethrough.CSS,active:a.has($r),onPress:Ar({type:$r,editor:e}),tooltipTitle:"~~Strikethrough~~",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_STRIKETHROUGH}),label:"Strikethrough",iconOnly:!0,preventFocusOnPress:!0}),Oo.createElement(bt,{leadingIcon:v.Code.CSS,active:a.has(fo),onPress:Ar({type:fo,editor:e}),tooltipTitle:"`Code`",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_CODE}),label:"Code",iconOnly:!0,preventFocusOnPress:!0})):null,Oo.createElement(Rm,null,Os({document:l,block:s},Rn)?Oo.createElement(bt,{leadingIcon:v.Link.CSS,onPress:Ql({palette:n,editor:e,contentReferenceContext:i,isInLink:u,hiveClient:r}),active:u,tooltipTitle:"Link",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_LINK}),label:"Link",iconOnly:!0,preventFocusOnPress:!0}):null,Os({document:l,block:s},ug)&&hg.isSelectionAnnotable(o)?Oo.createElement(bt,{leadingIcon:v.Annotation.CSS,onPress:qy({editor:e}),active:u,tooltipTitle:"Annotate",tooltipBadge:Oo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_ANNOTATION}),label:"Annotate",iconOnly:!0,preventFocusOnPress:!0}):null),p?Oo.createElement(Rm,null,Oo.createElement(bt,{tooltipTitle:"Color",leadingIcon:v.Highlight.CSS,onPress:f,label:"Color",iconOnly:!0,preventFocusOnPress:!0})):null,Oo.createElement(Rm,{disabled:a.isEmpty()},Oo.createElement(bt,{leadingIcon:v.PublishStatusUnpublished.CSS,onPress:m,tooltipTitle:"Clear formatting",label:"Clear formatting",iconOnly:!0,preventFocusOnPress:!0})))}function wM(t){let{value:o,selection:e}=t,n=Cc(),r=be(),i=ut(),[a,s]=Bo.useState(null),[l,u]=Bo.useState(!1),d=Bo.useRef(null),p=Yo(a),f=Bo.useRef(null),m=Bo.useRef(null),h=ce(d,{onClose:()=>{n.change(M=>{CM(M),M.focus()})}}),{width:y,height:S}=(0,eu.useWindowDimensions)(),C=H.useInteractiveState(),x=!o.isInVoid,O=o.hasInline(Rn),E=!fg(o.startBlock),P=!!x,L=P&&a,R=l&&e.isFocused&&e.isExpanded;Qr(x?{...E?{[Ge.EDITOR_BOLD]:Ar({type:ar,editor:n})}:{},[Ge.EDITOR_ITALIC]:Ar({type:sr,editor:n}),[Ge.EDITOR_CODE]:Ar({type:fo,editor:n}),[Ge.EDITOR_STRIKETHROUGH]:Ar({type:$r,editor:n}),[Ge.EDITOR_LINK]:Ql({palette:h,editor:n,contentReferenceContext:i,hiveClient:r,isInLink:O}),[Ge.EDITOR_ANNOTATION]:qy({editor:n})}:{},"editor-selection-expanded",[e,i,E,n,O,x,h]),Qr(x?{...E?{[Ge.EDITOR_BOLD]:Ar({type:ar,editor:n})}:{},[Ge.EDITOR_ITALIC]:Ar({type:sr,editor:n}),[Ge.EDITOR_CODE]:Ar({type:fo,editor:n}),[Ge.EDITOR_STRIKETHROUGH]:Ar({type:$r,editor:n})}:{},"editor-selection-collapsed",[e,E,n,x]),Bo.useEffect(()=>{!P||h.opened||(f.current=e,s(vM(n)))},[e]);let T=b1(200);return Bo.useEffect(()=>{if(!P)return;let M=()=>{h.opened||(p.current&&s(null),T(()=>{s(vM(n))}))};return window.addEventListener("scroll",M,!0),()=>{window.removeEventListener("scroll",M,!0)}},[h,P,p,T]),Bo.useLayoutEffect(()=>{m.current?.updatePosition()},[y,S]),Bo.useLayoutEffect(()=>{let M=setTimeout(()=>{u(e.isExpanded)},200);return()=>{u(!1),clearTimeout(M)}},[e.isExpanded]),L?Bo.createElement(Tn,null,Bo.createElement(eu.View,{ref:d,pointerEvents:"none",style:[hW.formattingMenuWrapper,a],dataSet:{"hide-on-drag":!0}},R?Bo.createElement(Mn,{ref:m,kind:"menu",preferredPlacement:"top",chromeless:!0},Bo.createElement(eu.View,{style:[w.directionRow,g.Padding.xsmall],...C.events},Bo.createElement(yM,{value:o,editor:n,palette:h}))):null)):null}function vM(t){let o=window.getSelection();if(!o||o.rangeCount<1)return null;let e=o.getRangeAt(0),n=bM.default.getBoundingClientRect(e);if(!n)return null;let r=o.anchorNode;if(!r||!Y1(t,r))return null;let i=r?SM(r):null,a=15,s={top:n.top+window.pageYOffset,left:n.left+window.scrollX,width:n.width,height:n.height};if(s.width<a&&(s.left-=(a-s.width)/2,s.width=a),i){let l=i.getBoundingClientRect();if(s.top<l.top||s.top+s.height>l.bottom)return null}return s}function SM(t){if(t instanceof HTMLElement){let o=getComputedStyle(t,null);if(o.getPropertyValue("overflow")==="auto"||o.getPropertyValue("overflow")==="scroll"||o.getPropertyValue("overflow-y")==="auto"||o.getPropertyValue("overflow-y")==="scroll")return t}return t.parentNode?SM(t.parentNode):null}var hW=eu.StyleSheet.create({formattingMenuWrapper:{position:"absolute",zIndex:100,animationDelay:"250ms"}});function Hy(t){let{anchorRef:o,editor:e,range:n}=t,r=be(),i=Wt(),a=ut(),s=ce(o,{onClose:()=>{s.close(),!i.isOpen()&&e.change(l=>l.focus())}});return kM.default.useMemo(()=>[{key:"inline-image",title:"Inline image",icon:v.Image,trigger:()=>{e.change(l=>l.blur()),i.prompt({title:"Select image",accept:"images",acceptURL:!0}).then(l=>{e.change(u=>{if(Eo(u.value.selection))return u;let d=n??u.value.textSelection;l.forEach(p=>{u.insertInlineAtRange(d,Uo.createImageInline(p))}),u.focus()})})}},{key:"emoji",title:"Emoji",icon:v.EmojiReaction,trigger:()=>wd(l=>{e.change(u=>{if(Eo(u.value.selection))return u;let d=n??u.value.textSelection;u.insertInlineAtRange(d,vg.createEmoji(l)).focus()})})},{key:"link",title:"Link",icon:v.Link,trigger:Ql({hiveClient:r,palette:s,editor:e,contentReferenceContext:a,isInLink:!1,insertAtRange:n})},{key:"inline-math",title:"Math & TeX",icon:v.MathTeX,trigger:()=>{e.change(l=>{if(Eo(l.value.selection))return l;let u=n??l.value.textSelection;l.insertInlineAtRange(u,xl.createMathInline()).focus()})}}],[n,e,e.value.selection,s,a,i,r])}function xM(t,o,e,n="replace",r){let[i,a]=Fn.useState(null),s=Wt(),l=od(),{integrationsBlocksSubscription:u,logAnalyticsEvent:d}=Fn.useContext(Ve),p=u.getCurrentValue,f=Si(),[m,h]=uM(t),y=ut(),S=be(),C=Hy({anchorRef:r,editor:t}),x=Fn.useCallback(()=>{a(null)},[]),O=Fn.useCallback((R,T="end")=>{x(),Bd(t,e.key,R,n,T)},[x,t,e.key,n]),E=Fn.useCallback((R,T="end")=>{x();let M;R.forEach((I,N)=>{Bd(t,M||e.key,I,N===0?n:"after",T),M=I.key})},[x,t,o.key,e.key,n]),P=Fn.useCallback(R=>{let{blockType:T,...M}=R;d({type:"edit_page_document_insert_block",from:"palette",blockType:T,...M})},[d]),L=Fn.useMemo(()=>{let R=(T,M=()=>!0)=>Object.entries(T).map(([I,N])=>M(I)?N.map(z=>({key:`${I}.${z.id}`,title:z.title,icon:mt(DE,{block:z}),trigger:()=>{z.urlUnfurl&&z.urlUnfurl.length>0?a("embed"):(O(Cg.createIntegrationBlock(I,z.id)),P({blockType:jr,integration:I,integrationBlock:z.id}))}})):[]).flat();return ie({search:"Insert block\u2026",groups:[{key:"inline-controls",commands:n==="replace"&&e.isEmpty?C:[]},{key:"texts",commands:[We(o,de)?{key:"paragraph",title:"Paragraph",icon:v.Paragraph,trigger:()=>{O(Gt.create({type:de})),P({blockType:de})}}:null].filter(ue)},{key:"headings",commands:[We(o,Fe)?{key:"heading_1",title:"Heading 1",icon:v.Heading1,keywords:["h1","Title 1","Header 1"],trigger:()=>{O(Gt.create({type:Fe})),P({blockType:Fe})}}:null,We(o,qe)?{key:"heading_2",title:"Heading 2",icon:v.Heading2,keywords:["h2","Title 2","Header 2"],trigger:()=>{O(Gt.create({type:qe})),P({blockType:qe})}}:null,We(o,tt)?{key:"heading_3",title:"Heading 3",keywords:["h3","Title 3","Header 3"],icon:v.Heading3,trigger:()=>{O(Gt.create({type:tt})),P({blockType:tt})}}:null].filter(ue)},{key:"lists",commands:[We(o,po)?{key:"list_ul",title:"Unordered list",keywords:["ul","Bullet list","Dot list"],icon:v.ListUnordered,trigger:()=>{O(pt.createList(po)),P({blockType:po})}}:null,We(o,Ht)?{key:"list_ol",title:"Ordered list",keywords:["ol","Numbered List"],icon:v.ListOrdered,trigger:()=>{O(pt.createList(Ht)),P({blockType:Ht})}}:null,We(o,mo)?{key:"list_tasks",title:"Task list",keywords:["Checkbox","Checklist","Tick","Todo list"],icon:v.ListTasks,trigger:()=>{O(pt.createList(mo)),P({blockType:mo})}}:null].filter(ue)},{key:"dividers",commands:[We(o,ws)?{key:"divider",title:"Divider",keywords:["Horizontal rule","Separator","Thematic break","hr"],icon:v.Divider,trigger:()=>{O(Gt.create({type:ws})),P({blockType:ws})}}:null].filter(ue)},{key:"panels",commands:[We(o,uo)?{key:"hint",title:"Hint",keywords:["Info","Alert","Callout"],icon:v.InfoCircle,trigger:()=>{O(hO.create()),P({blockType:uo})}}:null,We(o,Kt)?{key:"quote",title:"Quote",keywords:["Blockquote","Citation"],icon:v.Quote,trigger:()=>{O(yO.create()),P({blockType:Kt})}}:null,We(o,rr)?{key:"code",title:"Code Block",keywords:["Syntax","Snippet"],icon:v.Code,trigger:()=>{O(to.createCodeBlock("// Some code")),P({blockType:rr})}}:null].filter(ue)},{key:"others",commands:[We(o,bs)?{key:"files",title:"Insert files\u2026",keywords:["Assets","Upload"],icon:v.Files,trigger:()=>{s.prompt({title:"Select files"}).then(T=>{let M=T.map(I=>I.kind==="file"?bg.createFileBlock(I):null).filter(ue);E(M,"end"),P({blockType:bs,files:M.length})})}}:null,We(o,ln)?{key:"images",title:"Insert images\u2026",keywords:["Photo","Picture","JPEG","jpg","png","GIF"],icon:v.Image,trigger:()=>{s.prompt({title:"Select images",accept:"images",acceptURL:!0}).then(T=>{O(Gt.create({type:ln,isVoid:!0,nodes:T.map(M=>Uo.createImageBlock(M))})),P({blockType:ln,images:T.length})})}}:null,We(o,_n)?{key:"embed",title:"Embed a url\u2026",keywords:["music","video","audio","design","iframe"],icon:v.ExternalLink,trigger:()=>{a("embed")}}:null,We(o,_r)?{key:"table",title:"Table",keywords:["Spreadsheet"],icon:v.Table,trigger:()=>{O(ee.createTable()),P({blockType:_r,tableView:"grid"})}}:null,We(o,_r)?{key:"table-cards",title:"Cards",keywords:["Grid"],icon:v.Cards,trigger:()=>{O(ee.createTable({view:"cards"})),P({blockType:_r,tableView:"cards"})}}:null,We(o,ir)?{key:"tabs",title:"Tabs",icon:v.Tabs,trigger:()=>{O(Ji.createTabs(),"start"),P({blockType:ir})}}:null,We(o,Yr)?{key:"expandable",title:"Expandable",keywords:["collapsible","toggle"],icon:v.BlockExpandable,trigger:()=>{O(_s.createExpandableBlock(),(T,M)=>{T.collapseToStartOf(_s.getTitleFragment(M)).focus()}),P({blockType:Yr})}}:null,We(o,vs)?{key:"drawing",title:"Drawing",keywords:["sketch","draw","excalidraw"],icon:v.EditDrawing,trigger:()=>{O(fO.createDrawingBlock()),P({blockType:vs})}}:null,We(o,Sl)?{key:"math",title:"Math & TeX",keywords:["Formula"],icon:v.MathTeX,trigger:()=>{O(xl.createMathBlock()),P({blockType:Sl})}}:null,We(o,To)?{key:"api-method",title:"API Method",icon:v.Swagger,keywords:["api"],trigger:()=>{O(Re.createBlock()),P({blockType:To})}}:null,We(o,To)?{key:"swagger",title:"OpenAPI",icon:v.Swagger,keywords:["api","swagger"],trigger:()=>{m?a({ref:m}):s.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([T])=>{T&&(h(T),a({ref:T}))})}}:null,We(o,Cs)?{key:"content-ref",title:"Page Link",icon:v.PageLink,keywords:["references"],trigger:()=>Bn(T=>{O(kl.createContentRefBlock(T)),P({blockType:Cs,contentRefKind:T.kind})},y,S,{accept:["page","space","collection"]})}:null].filter(ue)},We(o,jr)?{key:"integrations",commands:()=>{let T=p();return R(T)}}:null,We(o,jr)?{key:"integrations",commands:()=>{let T=p(),{data:M}=Il(bo("listIntegrations"));if(!M)return[];let I=Lg(M.items);return R(I,N=>!T[N])}}:null,We(o,_n)?{key:"embeds",commands:xE.map(T=>({key:T.key,title:T.title,icon:({size:M})=>Fn.createElement(jo,{source:{uri:(f.color==="dark"?T.iconDark:null)||T.icon},style:{width:M,height:M}}),trigger:()=>{a("embed")}}))}:null].filter(ue)})},[O,l.uid,y,t,f.color,p]);return[Fn.createElement(Ct,null,i==="embed"?Fn.createElement(_E,{onInsert:O,onClose:x}):i&&"ref"in i?Fn.createElement(tf,{onClose:x,data:i,multi:!0,buttonText:R=>`Insert ${R} blocks`,onRequestChangeSource:()=>{a(null),s.prompt({title:"Choose OpenAPI source",accept:"swagger",acceptURL:!0}).then(([R])=>{R&&a({ref:R})})},onSelect:R=>{P({blockType:To,swaggerOperations:R.map.length,swaggerSource:i.ref.kind}),E(R.map(T=>Re.createBlockWithRef(i.ref,T.path,T.method))),x()}}):null),L]}function Bd(t,o,e,n,r){t.change(i=>{let a=t.value.document.getParent(o);if(!a)return;let s=a.getChildIndex(o);if(s<0)return;if(n==="replace")e.object==="block"?i.replaceNodeByKey(o,e):i.replaceWithDocumentByKey(o,e);else{let u=n==="after"?s+1:s;e.object==="block"?i.insertNodeByKey(a.key,u,e):i.insertDocumentByKey(a.key,u,e)}let l=i.value.document.getNode(e.object==="block"?e.key:e.nodes.first().key);l&&(qt(i.value.selection)?r==="start"?i.collapseToStartOf(l).focus():r==="end"?i.collapseToEndOf(l).focus():r(i,l):i.selectBlock(Gp.create({anchorBlock:l.key,focusBlock:l.key})))})}var Ky={insert:{label:"Insert block",title:`Click to add below
${_w("alt")} + click to add above`},options:{label:"Block controls",title:`Click for options. ${_w(Ge.EDITOR_MODIFIER_PALETTE)}
Drag to move.`}};function OM(t){let{optionsPalette:o,node:e,editor:n,parent:r,layout:i,drag:a,isDragging:s,isFocused:l,isHovered:u}=t,d=O1(),p=Wo.useRef(!1),[f,m]=Wo.useState("replace"),h=Wo.useRef(null),y=ce(h),[S,C]=xM(n,r,e,f,h),x=Wo.useRef(null),O=ce(x,{onClose:()=>{n.change(Q=>{Q.focus()})}}),E=()=>{p.current=!!d.current,e.isEmpty&&p.current?y.open(C):O.open((typeof o=="function"?o():o)||nt(n,e.key)),n.change(Q=>{e&&qt(Q.value.selection)&&!Q.value.selection.hasEdgeIn(e)&&Q.collapseToStartOf(e),Q.blur()})},P=ki(x,a.setNodeRef);Qr(l?{...e.isEmpty?{[Ge.EDITOR_PALETTE]:E}:{},[Ge.EDITOR_MODIFIER_PALETTE]:()=>i.withOptionsButton?O.open((typeof o=="function"?o():o)||nt(n,e.key)):!1}:{},"editor-selection-collapsed",[l,O,o,n,e.isEmpty,e.key]);let L=u||O.opened||y.opened,[R,T]=Wo.useState(!1),M=Wo.useRef(null),I=i.withInsertButton,N=I?["fade","slide"]:["fade"],z=Rw(D.animations,["distance-s","enter","right",...N],L),Y=Rw(D.animations,["distance-s","exit","right",...N],R&&!L);return Wo.useEffect(()=>{function Q(_e){T(_e.animationName.includes("Enter"))}function te(){T(!1)}return I&&(M.current?.addEventListener("animationend",Q),M.current?.addEventListener("animationcancel",te)),()=>{M.current?.removeEventListener("animationcancel",te),M.current?.removeEventListener("animationend",Q)}},[I]),Wo.createElement(U,{contentEditable:!1,style:[OS.hitArea],inlineStyle:i.hitArea.inlineStyle},S,Wo.createElement(U,{ref:M,style:[OS.buttonWrapper,z,Y,I?D.flex.justifyContentEnd:D.flex.justifyContentStart],inlineStyle:i.position},i.withInsertButton?Wo.createElement(Wo.Fragment,null,Wo.createElement(bt,{contentEditable:!1,kind:"muted",iconOnly:!0,leadingIcon:v.Plus.CSS,label:Ky.insert.label,preventFocusOnPress:!0,tooltipTitle:Ky.insert.title,onPressStart:Q=>m(Q.altKey?"before":"after"),onPress:Q=>{y.open(C)},onPressEnd:()=>m("replace"),size:i.size,style:Pw,ref:h})):Wo.createElement(U,{ref:h,id:"palette-ref--"}),i.withOptionsButton?Wo.createElement(bt,{contentEditable:!1,kind:"muted",ref:P,size:i.size,iconOnly:!0,label:Ky.options.label,leadingIcon:v.GrabberVertical.CSS,tooltipTitle:Ky.options.title,preventFocusOnPress:!0,tooltipDisabled:s,onPress:()=>E(),style:Pw,...a.listeners}):null))}c();var ft=b(k()),jM=b(q());c();var Wd=b(k()),RM=b(q());c();var _M=b(q());var tu={added:$.green.base,deleted:$.scarlet.base,modified:$.primary.base},Xy=_M.StyleSheet.create({added:{color:tu.added},deleted:{color:tu.deleted},modified:{color:tu.modified}});function Uy(t){let{diff:o,style:e,size:n,highlighted:r}=t,[,i]=_(yW),a=H.useInteractiveState(),s=o.type==="added"?v.DiffAdded:o.type==="deleted"?v.DiffRemoved:v.DiffModified;return Wd.createElement(pe,{editable:!1,style:[e,rf.avoidCalculatingBounds],...a.events,"data-hide-on-drag":!0},Wd.createElement(Va,{tooltip:`This block has been ${o.type} in this change request`,preferredPlacement:"top"},(l,u)=>Wd.createElement(H.TouchableOpacity,{ref:u,style:[rf.diffContainer,r||a.hovered?rf.diffContainerHighlighted:null],...l.events},Wd.createElement(s,{style:[rf.diffIcon,Xy[o.type]],size:n}),Wd.createElement(pe,{style:[rf.diffLine,i.bodyColor]}))))}var rf=RM.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5,userSelect:"none"},diffContainerHighlighted:{opacity:1},diffIcon:{flexShrink:0},diffLine:{width:1,flexGrow:1,flexShrink:1,marginTop:g.xsmall},avoidCalculatingBounds:{width:0,overflow:"visible"}}),yW=G.create({bodyColor:(t,o)=>({backgroundColor:o.color==="dark"?$.darkModeText.xdark:$.lightModeText.xlight})});c();var PM=b(k());c();var Yy=JSON.parse('{"halo":"halo_oiCij","ready":"ready_81z1f","show":"show_byjur"}');function $S(t){let{isSelected:o=!1,isBlockSelection:e=!1}=t;return PM.default.createElement(U,{style:[Yy.halo,{[Yy.ready]:e,[Yy.show]:o}],as:"span",contentEditable:!1})}$S.displayName="BlockSelectionHalo";c();var ZS=4,JS=g.medium,QS=4,eC=g.xlarge+g.small,tC=g.large,vW=-96,IM=vW+g.large,jy=IM+g.small,af={[Kt]:-(JS+ZS/2),[uo]:-(eC+QS/2),[Or]:-tC},oC={[Kt]:af[Kt],[uo]:af[uo],[Or]:af[Or]},nC=A.ICON_XS,ou=IM,EM=g.large+4,TM=g.large+8,MM=g.large+8,LM=28,NM=32,AM=34,nu=g.small;c();var FM=b(k()),VM=b(q());c();c();var zd=g.medium;function bW(t,o){return o.nodes.find(e=>e.type===Wu&&e.nodes.some(n=>n.key===t.key))||t}function Mi(t,o,e){let n=o.getChildIndex(e?bW(t,o).key:t.key),r=n===0,i=n===o.nodes.size-1,a=(()=>{switch(o.type){case uo:return{paddingTop:r?g.medium:g.xsmall,paddingBottom:i?g.medium:g.xsmall};case Kt:return{paddingTop:g.xsmall,paddingBottom:g.xsmall};case Xo:{if(!ks.includes(t?.type))return{paddingTop:0,paddingBottom:0};let l={paddingTop:g.small,paddingBottom:g.small};return r&&(l.paddingTop=0),i&&(l.paddingBottom=0),l}case Ss:return{paddingTop:g.medium,paddingBottom:g.medium}}return{}})();return{...(()=>{switch(t.type){case Fe:return{paddingTop:g.large,paddingBottom:g.small};case qe:return{paddingTop:g.large,paddingBottom:g.small};case tt:return{paddingTop:g.large,paddingBottom:g.small};case de:return{paddingTop:g.small,paddingBottom:g.small};case Ht:case po:case mo:return{paddingTop:g.medium,paddingBottom:g.medium};case uo:return{paddingTop:g.medium,paddingBottom:g.medium};case rr:return{paddingTop:g.medium,paddingBottom:g.medium};case Xo:return{paddingTop:r?0:g.xsmall,paddingBottom:i?0:g.xsmall};default:return{paddingTop:zd,paddingBottom:zd}}})(),...a}}c();var DM=b(sg()),sf=b(q()),Xc=100,$y=40,cf=800;function Zy(t,o,e=!1){if(!t.useNewSizing)return wW(t,o,e);let n=new Map,r=0;t.columns.forEach(d=>{r+=t.columnWidths?.[d]||0});let i=Math.max(o-r,0),a=t.columns.length-Object.keys(t.columnWidths||{}).length,s=a===0?0:Math.floor(i/a),l=a===0?0:i-s*a,u=0;return t.columns.forEach(d=>{let p=typeof t.columnWidths?.[d]>"u",f=t.columnWidths?.[d]||0,m=p?s:f;d===t.columns[t.columns.length-1]&&(m+=l),m=(0,DM.default)(m,p?Xc:$y,cf),u+=m;let h=new sf.Animated.Value(0);h.setOffset(m),n.set(d,{controller:h,animated:sf.Animated.diffClamp(h,e?0:p?Xc:$y,cf),width:m})}),{widths:n,totalWidth:u}}function wW(t,o,e=!1){let i=new Map,a=0;t.columns.forEach(l=>{let u=t.columnWidths?.[l]||200;a+=u,i.set(l,u)});let s=1;return(a<o||e)&&(s=o/a,a=o),i.forEach((l,u)=>{let d=new sf.Animated.Value(0);d.setOffset(l*s),i.set(u,{controller:d,animated:sf.Animated.diffClamp(d,e?0:150,cf),width:l*s})}),{widths:i,totalWidth:a}}function ru(t,o,e){let{blockSpacing:n={paddingTop:0,paddingBottom:0},contentSize:r=750}=e||{};if(t?.object!=="block")throw new Error(`invalid node passed to "getBlockEstimatedHeight" ${t.object}#${t.type} with parent ${t.object}#${o?o.type:"no-parent"}`);switch(t.type){case _r:return n.paddingTop+n.paddingBottom+CW(t,r);case ir:return n.paddingTop+n.paddingBottom+ru(t.nodes.first(),t);case de:case qe:case tt:case Fe:{let a=n.paddingTop+n.paddingBottom+lf(t.text,{lineHeight:gr(t),fontSize:Jy(t),contentWidth:r});return t.type===Fe&&o.object==="document"&&o.getChildIndex(t.key)!==0?a+g.medium+g.large+1:a}case La:return lf(t.text,{lineHeight:gr(t),fontSize:Jy(t),contentWidth:r});case ln:case _n:case $i:case To:case vs:case jr:return n.paddingTop+n.paddingBottom+200;case Sl:case bs:case Cs:return n.paddingTop+n.paddingBottom+100;case Yr:return n.paddingTop+n.paddingBottom+gr(t);case ws:return n.paddingTop+n.paddingBottom+1;default:let i=SW(t,r);return n.paddingTop+n.paddingBottom+t.nodes.reduce((a,s)=>{let l=Mi(s,t),u=s.object==="block"?ru(s,t,{contentSize:i}):lf(s.text,{contentWidth:i});return a+u+l.paddingTop+l.paddingBottom},0)}}function SW(t,o){switch(t.type){case Kt:return o-JS-ZS;case uo:return o-eC-QS;default:return o}}function gr(t){if(!t)return Ue.Body.lineHeight;switch(t.type){case Xo:return gr(t.nodes.first());case Fe:return Ue.Heading1.lineHeight;case qe:return Ue.Heading2.lineHeight;case tt:return Ue.Heading3.lineHeight;case rr:return Ue.Code.lineHeight+2*g.small;case La:return Ue.Code.lineHeight;case ir:return Ue.Label.lineHeight+2*g.small;case _r:return Ue.Label.lineHeight+2*g.small;case Yr:return g.medium*2+Ue.Heading3.lineHeight;case ws:return 1;case de:default:return Ue.Body.lineHeight}}function Jy(t){if(!t)return Ue.Body.fontSize;switch(t.type){case Xo:return gr(t.nodes.first());case Fe:return Ue.Heading1.fontSize;case qe:return Ue.Heading2.fontSize;case tt:return Ue.Heading3.fontSize;case La:return Ue.Code.fontSize;case de:default:return Ue.Body.fontSize}}function CW(t,o){let e=ee.getTableData(t);switch(e.view.type){case"grid":{let{widths:n}=Zy(e.view,o,!1),r=xW(e,n),i=Object.keys(e.records).reduce((a,s,l)=>{let u=rC(t,s,n);return a+u},0);return r+i}case"cards":{let n=Object.keys(e.records).length,r=e.view.cardSize==="large"?2:3,i=(750-r*g.medium)/r,a=kW(t,e,i),s=Math.ceil(n/r);return s*a+(s-1)*g.medium}default:Ce(e.view)}}function rC(t,o,e){if(!t)return 0;let n=ee.getTableData(t),r=n.records[o];return n.view.columns.reduce((i,a)=>{let s=r.values[a],l=n.definition[a],u=WM(s,l,BM(l.id,e),t);return u>i?u:i},g.medium)}function kW(t,o,e){let n=Object.values(o.records)[0];if(!n)return 0;let r=o.view.type==="cards"&&o.view.coverDefinition?135:0;return o.view.columns.reduce((i,a)=>{let s=n.values[a],l=o.definition[a],u=WM(s,l,e,t);return i+u},2*g.small+r)}function xW(t,o){return t.view.type!=="grid"||t.view.hideHeader?0:Object.keys(t.definition).reduce((e,n)=>{let r=BM(n,o),i=t.definition[n].title,a=lf(i,{contentWidth:r});return a>e?a:e},g.medium)}function BM(t,o){return(o.get(t)?.width||Xc)-g.medium*2}function WM(t,o,e,n){return(()=>{switch(o.type){case"text":let i=n.fragments.get(String(t));return i?i.nodes.reduce((u,d)=>u+ru(d,n,{contentSize:e}),0):0;case"number":return lf(String(t),{contentWidth:e});case"files":case"users":let a=Array.isArray(t)?t.length:1,s=o.type==="files"?_W:OW;return(a<=1?1:Math.max(1,Math.ceil(s*a/e)))*Ue.Body.lineHeight;case"checkbox":case"rating":case"select":default:return Ue.Body.lineHeight}})()+g.small*2+1}function lf(t,o){let{lineHeight:e=Ue.Body.lineHeight,contentWidth:n=750}=o||{},r=iC(t,o),i=Math.max(1,Math.ceil(r/n));return e*i}function iC(t="",o){let{fontSize:e=Ue.Body.fontSize}=o||{};return e*.5*t.length}var OW=iC("Steven Smithson")+g.large+g.small*2,_W=iC("this_is_a_file_of_mine.json")+g.large+g.small*2;function Nd(t){let{ancestors:o,node:e,diff:n,isBlockSelection:r=!1}=t,i=o.last(),a=i.type,s=i.getChildIndex(e.key),l=s===0,u=s===i.nodes.size-1,d=e.data.get("fullWidth"),f=typeof d=="boolean"&&d===!0;return FM.default.useMemo(()=>{let m=i.object==="document",h=o.size===1||o.size===2&&Gt.isBlock(i)&&pt.isList(i),y=i.object==="document"&&Zi.isConflictKey(e.key),S=gr(e),C=Mi(e,i,typeof n=="boolean");y&&(C.paddingTop+=g.medium);let x=!y&&TW(e,o),O=x?MW(e,o):0,E=g.small;return{blockStyle:AW(C.paddingTop,C.paddingBottom),diffLine:n?{style:{position:"absolute",left:NW(e,o),top:(typeof n!="boolean"?C.paddingTop:0)+(S-nC)/2,bottom:C.paddingBottom+g.small},size:nC}:void 0,diffBefore:typeof n!="boolean"&&n?.deletedBlocksBefore?{style:zM.diffDeletedBeforeLine,size:A.ICON_XS}:void 0,diffAfter:typeof n!="boolean"&&n?.deletedBlocksAfter?{style:zM.diffDeletedAfterLine,size:A.ICON_XS}:void 0,controlButtons:RW({node:e,ancestors:o,lineHeight:S,blockSpacing:C,isTopLevelBlock:h,isBlockSelection:r}),rightGutterComponent:x?{size:x.buttonSize,style:{top:(S-x.height)/2,marginLeft:O+E},hitArea:{right:0,width:O+E,marginRight:-O-E,top:0,position:"absolute",height:"100%",paddingTop:C.paddingTop,paddingBottom:C.paddingBottom}}:void 0,renderMode:m?f?"full-width":"centered":"unstyled"}},[e.type,i.object,a,l,u,n,r,f])}var qM={shouldNodeComponentUpdate(t,o){if(t.node.object==="inline"||o.node.object==="inline")return null;let e=Mi(t.node,t.parent),n=Mi(o.node,o.parent);return e.paddingTop!==n.paddingTop||e.paddingBottom!==n.paddingBottom?!0:null}};function RW({node:t,ancestors:o,lineHeight:e,blockSpacing:n,isTopLevelBlock:r,isBlockSelection:i}){let a=EW({isTopLevelBlock:r}),s=o.last(),l=PW({node:t,isTopLevelBlock:r,isBlockSelection:i}),u=IW({node:t,parent:s,isBlockSelection:i}),d=[l,u].reduce((y,S)=>S?y+a.width:y,0),p=LW(t,o),f=p-d/2,m=d===0?0:r?p:f,h=e/2-a.height/2;return{size:a.size,position:{top:h},withInsertButton:l,withOptionsButton:u,hitArea:{inlineStyle:{width:Math.abs(m),paddingTop:n.paddingTop,paddingBottom:n.paddingBottom,paddingLeft:r?g.xsmall:0,paddingRight:r?g.xsmall:0,left:m}}}}function PW({node:t,isBlockSelection:o,isTopLevelBlock:e}){return o||Or===t.type?!1:e}function IW({node:t,parent:o,isBlockSelection:e}){return!(t.type===de&&t.isEmpty||Or===t.type||!e&&ks.includes(t.type)||Gt.isBlock(o)&&o.type===Xo&&t.type!==ln)}function EW({isTopLevelBlock:t}){return t?{size:"small",width:A.BUTTON_S,height:A.BUTTON_S}:{size:"xsmall",width:A.BUTTON_XS,height:A.BUTTON_XS}}function TW(t,o){return Or===t.type||ks.includes(t.type)||[uo,Yr,Kt].includes(t.type)?null:{buttonSize:"small",width:A.BUTTON_S,height:A.BUTTON_S}}function MW(t,o){let e=o.last();return Gt.isBlock(e)&&[uo].includes(e.type)?24:Gt.isBlock(e)&&e.type===Yr?g.medium+1:0}function LW(t,o){let e=o.last(),n=o.get(o.size-2);if(t.type===Xo){if(!n||n?.object==="document")return jy;if(Gt.isBlock(n)&&n.type===Xo)switch(e?.type){case po:return-(g.small+6);case Ht:return-(g.small+8);case mo:return-(g.small+A.ICON_M/2);default:return jy}e=n,n=o.get(o.size-3)}return n&&Gt.isBlock(n)&&oC[n.type]?oC[n.type]:(Gt.isBlock(e)?af[e.type]:0)||jy}function NW(t,o){let e=o.last(),n=o.get(o.size-2),r=o.some(l=>l.type===ir)?-g.large:0,i=o.some(l=>l.type===uo)?ou+10:0,a=o.some(l=>l.type===Kt)?-20:0,s=o.filter(l=>ks.includes(l?.type||"")).size;if(s>0){let l=(r?r-2:0)+i+a+ou,u=s-1,d;switch(ks.includes(n?.type||"")?d=n?.type:(d=e.type,u--),d){case po:return l-EM-LM*u;case Ht:return l-TM-NM*u;case mo:return l-MM-AM*u;default:return ou}}return a+i+r+ou}var zM=VM.StyleSheet.create({block:{paddingVertical:zd},defaultTopPadding:{paddingTop:zd},defaultBottomPadding:{paddingBottom:zd},insertionLine:{height:nu,left:0,right:0},diffDeletedBeforeLine:{top:-nu,left:ou},diffDeletedAfterLine:{bottom:-nu,left:ou}});function AW(t,o){let e={0:"none",[g.xsmall]:"xsmall",[g.small]:"small",[g.medium]:"medium",[g.large]:"large",[g.xlarge]:"xlarge",[g.xxlarge]:"xxlarge"},n=[D.padding.mediumVertical],r={},i=e[t],a=e[o];return i&&n.push(D.padding[`${i}Top`]),a&&n.push(D.padding[`${a}Bottom`]),!i&&t!==0&&(r.paddingTop=t),!a&&o!==0&&(r.paddingBottom=o),{inlineStyle:r,style:n}}c();var Fd=b(k());var GM=Fd.default.createContext({current:new Map});function HM(t){let{original:o,modified:e,children:n}=t,r=Fd.default.useRef(new Map),i=Fd.default.useMemo(()=>o?mO(o||fc.create(),e):new Map,[o,e]);return r.current=i,Fd.default.createElement(GM.Provider,{value:r},n)}function KM(t){let o=Fd.default.useContext(GM);return o.current instanceof Map?o.current.get(t.key):o.current}c();var _o=b(k());c();var Li=JSON.parse('{"conflicts":"conflicts_NH0YT","toolbarConnector":"toolbarConnector_rKw9X","conflictBase":"conflictBase_F-gkn","conflictHead":"conflictHead_qDgkT","verticalConnector":"verticalConnector_6gQQw","conflictBadge":"conflictBadge_rJISv","highlightContainer":"highlightContainer_T2jbl","highlight":"highlight_r-5El","main":"main_K0HuP","current":"current_-GeKS"}');function UM(t){let{node:o,editor:e,children:n}=t,{blockLayoutComponent:r}=_o.useContext(Ve),i=Zi.hasBlockConflictFrom(o,"base"),a=Zi.hasBlockConflictFrom(o,"head");return!a&&!i?_o.createElement(_o.Fragment,null,n):_o.createElement(U,{style:[Li.conflicts,D.flex.column]},i?_o.createElement(r,{renderMode:"centered"},_o.createElement(XM,{node:o,editor:e,style:[Li.conflictBase,D.margin.smallBottom,D.margin.mediumTop]})):null,_o.createElement(U,{style:Li.highlightContainer},_o.createElement(U,{style:[Li.highlight,{[Li.main]:i,[Li.current]:a}]}),i?_o.createElement(U,{style:[Li.verticalConnector]}):null,n,a?_o.createElement(U,{style:[Li.verticalConnector]},_o.createElement(U,{style:[Li.conflictBadge]},_o.createElement(yo,{kind:"secondary",icon:v.Conflict}))):null),a?_o.createElement(r,{renderMode:"centered"},_o.createElement(XM,{node:o,editor:e,style:[Li.conflictHead,D.margin.smallTop,D.margin.mediumBottom]})):null)}function XM(t){let{node:o,editor:e,style:n}=t,[,r]=_(W),i=()=>{e.change(a=>{Zi.pickConflict(a,o.key)})};return _o.createElement(U,{contentEditable:!1,style:[Li.toolbarConnector,D.flex.row,n]},Zi.isConflictKeyFrom(o.key,"base")?_o.createElement(V,{icon:mt(v.Check,{style:[r.merge]}),rounded:!0,size:"small",kind:"secondary",style:[g.Margin.mediumRight],title:"Pick recent edits made on the main content",tooltipPreferredPlacement:"top",onPress:i},"Keep primary"):_o.createElement(V,{icon:mt(v.Check,{style:[r.primary]}),rounded:!0,size:"small",kind:"secondary",title:"Pick edits made on this change request",tooltipPreferredPlacement:"bottom",onPress:i},"Keep changed"))}var $M=Lt({key:"hoveredBlocks",default:[]}),DW=xx({key:"isSelectedHoveredBlock",get:t=>({get:o})=>{let e=o($M),n=e.length?e[e.length-1]:void 0;return!!n&&n===t}});function ve(t){let{tag:o,contentProps:e={},commandIcon:n,commandIconAnimatedAngle:r,palette:i,...a}=t,{node:s,parent:l,ancestors:u,editor:d,attributes:p,isFocused:f,children:m,isSelectedBlock:h,isBlockSelection:y}=a,{readOnly:S}=d,C=KM(s),x=Je(),O=Xr($M),E=tr(DW(s.key)),{blockLayoutComponent:P,rightGutterComponent:L,logAnalyticsEvent:R,onBlockHover:T}=ft.useContext(Ve),M=Nd({node:s,ancestors:u,diff:C,isBlockSelection:y}),I=H.useInteractiveState({onHoverIn:()=>{ks.includes(s.type)||O(Y=>[...Y,s.key]),T?.(s.key)},onHoverOut:()=>{O(Y=>Y.filter(Q=>Q!==s.key)),T?.(null)}}),N=I.hovered&&E,z=ft.createElement(pe,{"data-block-content":s.key,...e,style:[w.flex1,e.style]},S?null:ft.createElement($S,{isBlockSelection:y,isSelected:h}),m);return S?ft.createElement(P,{node:s?.key,renderMode:M.renderMode,interactive:I},ft.createElement(Us.View,{isPDF:x},ft.createElement(U,{as:o,...p,...I.domEvents,style:[D.position.relative,D.flex.column,(l.object!=="block"||l.type!==Wu)&&M.blockStyle.style],inlineStyle:M.blockStyle.inlineStyle},z,L&&M.rightGutterComponent?ft.createElement(pe,{style:[M.rightGutterComponent.hitArea,Uc.hitArea]},ft.createElement(L,{nodeKey:s.key,visible:N,shortcutsActive:f,buttonSize:M.rightGutterComponent.size,style:M.rightGutterComponent.style,readOnly:S})):null))):ft.createElement(BW,{key:s.key,interactive:I,layout:M,isPDF:x,isHovered:N,BlockLayoutComponent:P,RightGutterComponent:L,logAnalyticsEvent:R,diff:C,...t},z)}function BW(t){let{tag:o,commandIcon:e,commandIconAnimatedAngle:n,palette:r,interactive:i,layout:a,isPDF:s,isHovered:l,BlockLayoutComponent:u,RightGutterComponent:d,logAnalyticsEvent:p,diff:f,...m}=t,{node:h,parent:y,editor:S,attributes:C,isFocused:x,children:O,isSelectedBlock:E,isBlockSelection:P}=m,{readOnly:L}=S,R=P&&S.value.selection.isExpanded,T=mn({disabled:L,...zn(R?{type:"block-range",id:h.key,previewLabel:"Move blocks"}:{type:"block",id:h.key,blockType:h.type,previewLabel:"Move block"})}),[M,I]=ft.useState(),N=mr({shouldAccept:te=>!(!["block","block-range","page","space","collection"].includes(te.type)||!We(y,te.type==="block"?te.blockType:Cs)||te.type==="block"&&te.id===h.key||te.type==="block-range"&&S.value.blocks.find(_e=>_e.key===h.key)),onDrop:te=>{S.change(_e=>{if(te.type==="block-range")_e.moveBlockRangeSelectionTo(h.key,M==="after"?1:0),p({type:"edit_page_document_move_block_range",method:"dnd",rangeSize:_e.value.blocks.size});else if(te.type==="block"){M==="before"?_e.moveBeforeNodeByKey(te.id,h.key):_e.moveAfterNodeByKey(te.id,h.key);let Ae=S.value.document.getParent(te.id);p({type:"edit_page_document_move_block",blockType:te.blockType,method:"dnd",toParent:y.object==="block"?y.type:y.object,fromParent:Ae?.object==="block"?Ae?.type:Ae?.object})}else{let Ae=kl.createContentRefBlock(MT(te));M==="before"?_e.insertNodeBeforeByKey(h.key,Ae):_e.insertNodeAfterByKey(h.key,Ae)}})},onHoverMove:({yPosition:te})=>{let _e=te==="bottom"?"after":"before";M!==_e&&I(_e)}}),{rightGutter:z,controls:Y,diff:Q}=WW({isBlockSelection:P,isDragging:T.isDragging,isSelectedBlock:E,readOnly:L,value:S.value});return ft.createElement(UM,{node:h,editor:S},ft.createElement(u,{node:h?.key,renderMode:a.renderMode,interactive:i},ft.createElement(Us.View,{isPDF:s},ft.createElement(U,{as:o,...C,style:[D.position.relative,D.flex.row,T.isDragging&&D.opacity.translucent,a.blockStyle.style,jg,N.isOver&&{[Yg]:M==="before",[Zu]:M==="after"}],inlineStyle:a.blockStyle.inlineStyle,ref:N.setNodeRef},Q&&f&&a.diffLine&&f.type!=="unmodified"?ft.createElement(Uy,{diff:f,highlighted:l,...a.diffLine,style:[a.diffLine?.style,Uc.noSelect]}):null,Y&&a.controlButtons?ft.createElement(OM,{isDragging:T.isDragging,drag:T,isFocused:x,isHovered:l,optionsPalette:R?void 0:r,layout:a.controlButtons,node:h,editor:S,parent:y}):null,O,z&&d&&a.rightGutterComponent?ft.createElement(pe,{style:[a.rightGutterComponent.hitArea,Uc.hitArea]},ft.createElement(d,{nodeKey:h.key,visible:l,shortcutsActive:x,buttonSize:a.rightGutterComponent.size,style:[a.rightGutterComponent.style,Uc.hideTransition],readOnly:L})):null,a.diffBefore?ft.createElement(YM,{style:a.diffBefore.style,size:a.diffBefore.size}):null,a.diffAfter?ft.createElement(YM,{style:a.diffAfter.style,size:a.diffAfter.size}):null))))}function YM(t){let{style:o,size:e}=t;return ft.createElement(pe,{editable:!1,style:[o,Uc.avoidCalculatingBounds,Uc.diffRemoved,Uc.noSelect],"data-hide-on-drag":!0},ft.createElement(Va,{tooltip:"A block has been removed in this change request",preferredPlacement:"top"},(n,r)=>ft.createElement(H.TouchableOpacity,{ref:r,style:Uc.diffContainer,...n.events},ft.createElement(v.DiffRemoved,{size:e,style:[Xy.deleted]}))))}function WW(t){let{isDragging:o,isBlockSelection:e,isSelectedBlock:n,readOnly:r,value:i}=t,{selection:a}=i;return ft.useMemo(()=>r?{controls:!1,diff:!1,rightGutter:!0}:e?{controls:n,diff:!0,rightGutter:!1}:{controls:!a.isExpanded,diff:!0,rightGutter:!a.isExpanded},[a.isExpanded,o,e,n,r])}var Uc=jM.StyleSheet.create({diffContainer:{display:"flex",flexDirection:"column",alignItems:"center",height:"100%",opacity:.5},diffRemoved:{paddingTop:(nu*2-A.ICON_XS)/2,height:nu*2,position:"absolute"},hideTransition:{transition:"opacity 0.2s ease-in-out"},hitArea:{position:"absolute",backgroundColor:"transparent"},avoidCalculatingBounds:{width:0,overflow:"visible"},noSelect:{userSelect:"none"}});c();var gt=b(k());c();var Qy=JSON.parse('{"placeholder":"placeholder_HCCie","instructions":"instructions_YvYKU","shortcuts":"shortcuts_v-WHU"}');var iu={instructions:{message:gt.createElement(gt.Fragment,null,"Type"," ",gt.createElement(In,{size:"medium",style:[D.flex.inline],shortcut:Ge.EDITOR_PALETTE})," ","for commands"),embed:" or paste a link to embed content"},imagePrompt:{title:"Select images"},image:{label:"Insert image"},code:{label:"Insert code block",placeholder:"// Some code"},list:{label:"Insert unordered list"}};function ZM(t){let{node:o,parent:e,editor:n,children:r,placeholder:i}=t,{selection:a}=n.value,s=he.isTextRange(a)&&a.hasOnlyNodeFocused(o),l=Wt(),{logAnalyticsEvent:u}=gt.useContext(Ve),d=We(e,_n),p=gt.useMemo(()=>[{key:"image",label:iu.image.label,icon:v.BlockImage.CSS,trigger(){l.prompt({title:iu.imagePrompt.title,accept:"images",acceptURL:!0}).then(f=>{f.length!==0&&(Bd(n,o.key,Gt.create({type:ln,isVoid:!0,nodes:f.map(m=>Uo.createImageBlock(m))}),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:ln,images:f.length}))})}},{key:"code",label:iu.code.label,icon:v.Code.CSS,trigger(){Bd(n,o.key,to.createCodeBlock(iu.code.placeholder),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:rr})}},{key:"list-unordered",label:iu.list.label,icon:v.ListUnordered.CSS,trigger(){Bd(n,o.key,pt.createList(po),"replace","end"),u({type:"edit_page_document_insert_block",from:"quick-insert",blockType:po})}}],[n,o.key]);return gt.createElement(gt.Fragment,null,gt.createElement(ve,{...t},gt.createElement(U,{as:"p",contentEditable:!1,style:[Qy.placeholder,D.text.base,D.text.body,D.textColor.muted,D.flex.row,D.flex.alignCenter,D.flex.justifySpaceBetween,s||i?D.opacity.visible:D.opacity.hidden]},s?gt.createElement(gt.Fragment,null,gt.createElement(At,{style:[Qy.instructions]},iu.instructions.message,d?iu.instructions.embed:""),p?.length>0?gt.createElement(zW,{blocks:p,editor:n,node:o}):null):gt.createElement(gt.Fragment,null,gg(e)?i:null)),r))}function zW(t){let{blocks:o,editor:e,node:n}=t,[r,i]=gt.useState(0),a=gt.useRef(r),s=gt.useRef(null);return XP(l=>{!s.current||l||s.current?.focus()},{scope:e.elementRef?.current,exact:!0}),gt.useEffect(()=>{a?.current!==r&&(s.current?.focus(),a.current=r)},[r]),gt.useEffect(()=>()=>{s?.current?.blur()},[]),gt.createElement(U,{as:"span",role:"toolbar","aria-orientation":"horizontal",style:[Qy.shortcuts,D.flex.row,D.flex.alignEnd]},o.map(({trigger:l,label:u,icon:d},p)=>gt.createElement(bt,{ref:p===r?s:void 0,label:u,tooltipTitle:u,iconOnly:!0,leadingIcon:d,kind:"muted",size:"small",onPress:()=>l?.(),preventFocusOnPress:!0,tabIndex:p===r?0:-1,key:`${n.key}_${p}`,onKeyDown:f=>{(f.key==="Tab"||f.key==="Escape")&&(e.elementRef?.current?.focus(),f.preventDefault()),f.key==="ArrowLeft"&&(i(m=>Math.max(0,m-1)),f.preventDefault()),f.key==="ArrowRight"&&(i(m=>Math.min(o.length-1,m+1)),f.preventDefault())}})))}c();var JM=b(k());var FW=[rr,_n,jr,ln,To,_r];function Ti(t,o){let{logAnalyticsEvent:e}=JM.useContext(Ve),n=t.value.document.assertBlock(o);if(!FW.includes(n.type))return null;let r=n.data.get("fullWidth");return{key:"layout-width",commands:[typeof r=="boolean"&&r===!0?{key:"default",title:"Default width",icon:v.DefaultWidth,trigger:()=>{t.change(s=>{s.setDataByKey(o,["fullWidth"],!1)}),e({type:"edit_page_document_edit_block_property",blockType:n.type,blockProperty:"layout",fromValue:"full",toValue:"default"})}}:{key:"full",title:"Full width",icon:v.FullWidth,trigger:()=>{t.change(s=>{s.setDataByKey(o,["fullWidth"],!0)}),e({type:"edit_page_document_edit_block_property",blockType:n.type,blockProperty:"layout",fromValue:"default",toValue:"full"})}}]}}c();var QM=b(k());function tv(t,o){return QM.useMemo(()=>VW(t.value.document,o),[t,o])}function VW(t,o){let e=t.getPath(o);return e?e[0]<qW(t):!1}var ev=new WeakMap;function qW(t){if(ev.has(t))return ev.get(t);let o=800,e=0;for(let n=0;n<t.nodes.size;n++){let r=t.nodes.get(n);if(!r)break;if(e+=ru(r,t,{blockSpacing:{paddingTop:g.medium,paddingBottom:g.medium}}),e>o)return ev.set(t,n),n}return ev.set(t,t.nodes.size),t.nodes.size}c();var Vd=b(k()),uf=b(q());var qd=Vd.forwardRef(function(o,e){let{node:n,children:r,editor:i,isFocused:a,isSelected:s,attributes:l,onPress:u,style:d}=o,{readOnly:p}=i,f=H.useInteractiveState(),[,m]=_(GW);return p?u?Vd.createElement(uf.TouchableOpacity,{style:[m.frameInlineVoid],onPress:u},r):Vd.createElement(uf.View,{style:[m.frameInlineVoid]},r):Vd.createElement(uf.TouchableOpacity,{ref:e,...l,...f.events,style:[m.frameInlineVoid,f.hovered&&m.frameEditableHovered,s&&m.frameSelected,a&&m.frameFocused,d],onPress:h=>{i.change(y=>{qt(y.value.selection)?y.collapseToStartOf(n).focus():y.selectText(he.fromBlockRange(y.value.selection,y.value.document)).collapseToStartOf(n).focus()}),u&&u(h)}},r)}),GW=G.create({frameInlineVoid:t=>({borderWidth:2,borderColor:"transparent",borderRadius:t.radiuses.medium,textAlignVertical:"middle"}),frameEditableHovered:t=>({borderColor:t.colors.primary.muted}),frameSelected:t=>({borderColor:t.colors.primary.muted}),frameFocused:t=>({borderColor:t.colors.primary.main})});c();var Ot=b(k()),hn=b(q());c();var n0=b(sg()),r0=b(k());c();var aC={BLUE:{light:"#0074D9",dark:"#0074D9"},AQUA:{light:"#7FDBFF",dark:"#7FDBFF"},TEAL:{light:"#39CCCC",dark:"#39CCCC"},OLIVE:{light:"#3D9970",dark:"#3D9970"},GREEN:{light:"#2ECC40",dark:"#2ECC40"},LIME:{light:"#01FF70",dark:"#01FF70"},YELLOW:{light:"#FFDC00",dark:"#FFDC00"},ORANGE:{light:"#FF851B",dark:"#FF851B"},RED:{light:"#FF4136",dark:"#FF4136"},MAROON:{light:"#85144b",dark:"#85144b"},FUCHSIA:{light:"#F012BE",dark:"#F012BE"},PURPLE:{light:"#B10DC9",dark:"#B10DC9"}},e0=Object.keys(aC).sort((t,o)=>Math.random()-.5),ov=new Map;function t0(t){if(ov.has(t))return ov.get(t);let o=e0[ov.size%e0.length];return ov.set(t,o),o}function Ja(t){let o=Si(),[e]=_();return r0.useMemo(()=>{if(!t)return{base:e.colors.primary.main,faded:o0(e.colors.primary.main,.2)};let n=t0(t),r=aC[n][o.color];return{base:r,faded:o0(r,.2)}},[o.color,t,e.colors.primary.main])}function o0(t,o){let e=Math.round((0,n0.default)(o||1,0,1)*255);return t+e.toString(16).toUpperCase()}var Ut=Ot.forwardRef(function(o,e){let{onPress:n,onSelect:r=()=>{s.change(y=>{qt(y.value.selection)&&y.collapseToStartOf(i).focus()})},node:i,children:a,editor:s,selections:l,isFocused:u,selectable:d=!0}=o,{readOnly:p}=s,f=i.getFirstText(),m=Ot.useMemo(()=>{if(u)return;let y=l.get(0);if(y)return y.data.get("clientId")},[l,u,f?.key]),h=Ja(m);return Ot.createElement(sC,{ref:e,onPress:n,readOnly:p,selectable:d,selected:u||!!m,selectionColor:h.base,onSelect:r},a)}),sC=Ot.forwardRef(function(o,e){let{onPress:n,selected:r,readOnly:i=!1,selectable:a=!0,selectionColor:s,style:l,children:u,onSelect:d}=o,p=H.useInteractiveState({hoverDelayIn:50}),[f,m]=_(HW);if(i)return Ot.createElement(Ot.Fragment,null,u);let h=C=>{C.stopPropagation(),d()},y=s||f.colors.primary.main,S=Ot.createElement(hn.View,{ref:e,style:l},u,Ot.createElement(hn.View,{style:[m.frameBorder,m.frameBorderRight,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderRightSelected,{borderRightColor:y}]],pointerEvents:"none"}),Ot.createElement(hn.View,{style:[m.frameBorder,m.frameBorderLeft,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderLeftSelected,{borderLeftColor:y}]],pointerEvents:"none"}),Ot.createElement(hn.View,{style:[m.frameBorder,m.frameBorderTop,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderTopSelected,{borderTopColor:y}]],pointerEvents:"none"}),Ot.createElement(hn.View,{style:[m.frameBorder,m.frameBorderBottom,p.hovered&&m.frameBorderHovered,r&&[m.frameBorderBottomSelected,{borderBottomColor:y}]],pointerEvents:"none"}),a?Ot.createElement(Ot.Fragment,null,Ot.createElement(hn.TouchableWithoutFeedback,{onPress:h},Ot.createElement(hn.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderRight]})),Ot.createElement(hn.TouchableWithoutFeedback,{onPress:h},Ot.createElement(hn.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderLeft]})),Ot.createElement(hn.TouchableWithoutFeedback,{onPress:h},Ot.createElement(hn.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderTop]})),Ot.createElement(hn.TouchableWithoutFeedback,{onPress:h},Ot.createElement(hn.View,{...p.events,style:[m.hoverableFrameBorder,m.hoverableFrameBorderBottom]}))):null);return n?Ot.createElement(hn.TouchableOpacity,{onPress:n},S):S}),nv=18,vt=8,Yc=4,rv=2,HW=G.create({frameBorder:{position:"absolute"},hoverableFrameBorder:{position:"absolute",cursor:"pointer"},frameBorderHovered:t=>({backgroundColor:t.colors.primary.muted}),hoverableFrameBorderTop:{top:-vt/2,left:-vt/2,right:-vt/2,height:nv},frameBorderTop:{top:-vt/2,left:-vt/2,right:-vt/2,height:vt,borderTopLeftRadius:Yc,borderTopRightRadius:Yc},frameBorderTopSelected:t=>({backgroundColor:"transparent",borderTopColor:t.colors.primary.main,borderTopWidth:rv}),hoverableFrameBorderBottom:{bottom:-vt/2,left:-vt/2,right:-vt/2,height:nv},frameBorderBottom:{bottom:-vt/2,left:-vt/2,right:-vt/2,height:vt,borderBottomLeftRadius:Yc,borderBottomRightRadius:Yc},frameBorderBottomSelected:t=>({backgroundColor:"transparent",borderBottomColor:t.colors.primary.main,borderBottomWidth:rv}),hoverableFrameBorderLeft:{top:-vt/2,bottom:-vt/2,left:-vt/2,width:nv},frameBorderLeft:{top:-vt/2,bottom:-vt/2,left:-vt/2,width:vt,borderBottomLeftRadius:Yc,borderTopLeftRadius:Yc},frameBorderLeftSelected:t=>({backgroundColor:"transparent",borderLeftColor:t.colors.primary.main,borderLeftWidth:rv}),hoverableFrameBorderRight:{top:-vt/2,bottom:-vt/2,right:-vt/2,width:nv},frameBorderRight:{top:-vt/2,bottom:-vt/2,right:-vt/2,width:vt,borderTopRightRadius:Yc,borderBottomRightRadius:Yc},frameBorderRightSelected:t=>({backgroundColor:"transparent",borderRightColor:t.colors.primary.main,borderRightWidth:rv})});c();var iv=b(k());function av(t,o){let[,e]=_(W),[,n]=_(KW),{navigateToHash:r}=ye(),{sections:i,active:a,setActive:s}=iv.default.useContext(Ii),l=H.useInteractiveState(),u=i.get(t.key),d=()=>{u&&s(a!==u?u:null)},p=()=>{u&&(r(u,{scroll:!0}),d())},f={accessibilityRole:"presentation"};return{anchorElement:iv.default.createElement(H.Text,{href:`#${u}`,onPress:p,style:[n.anchorLink,g.Margin.smallLeft,a===u||l.focused||l.hovered?je.visible:je.hidden],inactiveStyle:e.textMuted,activeStyle:e.primary,accessibilityLabel:o.accessibilityLabel},iv.default.createElement(v.Hash,{size:o.anchorIconSize||A.ICON_S,...f})),anchoredBlockId:u,anchoredBlockInteractiveState:l,onAnchoredBlockPress:()=>{o.onBlockPress&&o.onBlockPress(),d()}}}var KW=G.create({anchorLink:{display:"inline-flex",alignItems:"center"}});c();var a0=b(k());function s0(t){let{notify:o,notifyProgress:e,notifyOrUpdate:n,close:r}=ho(),{logAnalyticsEvent:i}=t;return a0.useMemo(()=>{function a(u){Nu(u),o({kind:"danger",title:"Error while pasting content",icon:v.Alert.CSS,details:Ta(u,"Please try again or contact support if the problem persists.")})}function s(u){n({id:"upload-files",title:`Uploading ${u} file${u!==1?"s":""}\u2026`,details:"This might take a moment.",kind:"default",timeout:0,closeable:!1,icon:xe})}function l(u,d,p){let f=Ju(u),m=0,h=async(y,S)=>{if(Du(y))return{kind:"url",url:y};if(Xx(y)){let C=await(await fetch(y)).blob(),x=y.split(";")[0]?.split("/")[1],O=S?.fileName||`unknown.${x}`,E=new File([C],O);return m+=1,s(m),(await t.uploadFiles([E]))[0]}return null};if(f.type==="html"&&f.html!==null)return l_(f.html,{...Iw,resolveFile:h}).then(({document:y})=>dO(y)&&f.text?Ew(f.text).then(({document:S})=>({document:S,type:"text"})):{document:y,type:"html"}).then(({document:y,type:S})=>{p.change(x=>{x.insertDocument(y)}),r("upload-files");let C=i0(S==="html"?f.html:f.text,S);i(df(u,S,{document:y,sourceIncludes:C}))}).catch(y=>{throw a(y),y}),!0;if(f.type==="text"&&f.text!==null)return Ew(f.text,{...Iw,resolveFile:h}).then(({document:y})=>{p.change(C=>{C.insertDocument(y)}),r("upload-files");let S=i0(f.text,"text");i(df(u,"text",{document:y,sourceIncludes:S}))}).catch(y=>{throw a(y),y}),!0;if(f.type==="files"&&typeof f.files<"u"){if(!f.files||f.files.length===0)return;e(t.uploadFiles(f.files),{title:`Uploading ${f.files.length} files\u2026`,details:"This might take a moment.",kind:"default"}).then(y=>{if(!f.files)return;if(y.length===0){o({kind:"danger",title:"Some files failed to upload, please try again",icon:v.Alert.CSS});return}let S=f.files.every(C=>hc(C));p.change(C=>{if(S){if(hw(C.value,ln,{allowSplitBlock:!1})){C.insertOrReplaceBlock(Uo.createImagesBlock(y)).focus();return}if(!uO(C.value,gc)){o({kind:"info",title:"Cannot insert an image here",icon:v.InfoCircle.CSS});return}y.reduce((E,P)=>E.insertInline(Uo.createImageInline(P)),C);return}y.forEach(x=>{if(x.kind!=="file")return;let O=bg.createFileBlock(x);if(hw(C.value,O.type)){C.insertOrReplaceBlock(O).focus();return}o({kind:"info",title:"Cannot insert a file here",icon:v.InfoCircle.CSS})})}),i(df(u,"files",{uploadedFiles:y?.length,sourceIncludes:["file"]}))}).catch(y=>{throw a(y),y})}}return{onPaste:l,onDrop:l}},[o,e])}function i0(t,o){let e=[];switch(o){case"text":t.includes("![")&&e.push("image"),t.match(/\|\s*\:?---/)&&e.push("table");break;case"html":t.includes("<img")&&e.push("image"),t.includes("<table")&&e.push("table");break}return e}function df(t,o,{document:e=void 0,uploadedFiles:n=0,sourceIncludes:r=[]}={}){let i=t.clipboardData,a=new Set,s=0;return e&&e.forEachDescendant(l=>{s+=1,l.type&&a.add(l.type)}),{type:"edit_paste_content",paste:t.type,sourceTypes:[...i?.types||[]],sourceIncludes:[...new Set(r)],transformType:o,transformSize:s,uploadedFiles:n,transformNodes:[...a]}}c();var cC=b(wi());var c0={onKeyDown:XW};function XW(t,o){if((0,cC.default)("enter",t)||(0,cC.default)("shift+enter",t)){let{value:e}=o,{startBlock:n,startInline:r,startText:i}=e;if(r&&r.isVoid&&i){let a=e.document.getNextText(i.key);return a?(o.collapseToStartOf(a),o):void 0}if(n&&n.isVoid)return St(o),o}}c();var lC=b(k()),sv="selectionHighlighting",l0={renderMark:UW};function UW(t){let{mark:o}=t;switch(o.type){case sv:return lC.createElement(YW,{...t})}}function YW(t){let{attributes:o,children:e}=t;return lC.createElement("span",{...o,style:{backgroundColor:"Highlight",color:"HighlightText"}},e)}c();function CM(t){t.value.decorations.forEach(o=>{o.marks?.some(e=>e.type===sv)&&t.removeValueDecoration(o)})}function Gy(t,o=t.value.selection){he.isTextRange(o)&&t.setValueDecoration(he.create({anchorKey:o.anchorKey,anchorOffset:o.anchorOffset,focusKey:o.focusKey,focusOffset:o.focusOffset,marks:[{type:sv,data:{}}],isAtomic:!0}))}c();var u0={shouldNodeComponentUpdate:jW};function jW(t,o){let e=t.parent.nodes.size-1,n=t.parent.getChildIndex(t.node.key),r=o.parent.getChildIndex(t.node.key);return(n===e||r===e)&&r!==n?!0:null}c();var Gd=b(k()),Hd=b(q());function ni(t){let[,o]=_($W),[,e]=_(W);return Gd.createElement(Hd.View,{style:[o.blockLoading,g.Padding.largeHorizontal,g.Padding.mediumVertical,w.directionRow,w.alignCenter]},Gd.createElement(Hd.View,null,Gd.createElement(xe,{size:"medium"})),Gd.createElement(Hd.View,{style:[g.Margin.mediumLeft]},Gd.createElement(Hd.Text,{style:[e.Caption,e.textMid]},"Loading...")))}var $W=G.create({blockLoading:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.large})});c();var p0=b(k());c();var Ni=b(k());var d0={en:{something_wrong:"Something went wrong.",reload:"Reload",let_us_know:"Let us know what happened",we_have_been_notified:"Our team has been notified. If you'd like to help, you can describe what happened below.",search:"Search",search_ask:"Ask",search_placeholder:"Search content\u2026",search_placeholder_ask:"Ask or search\u2026",search_blankslate:"Type something to search",search_blankslate_ai:"We'll answer the question with an AI model trained on the content.",search_blankslate_recent_searches:"Recent searches",search_blankslate_recent_questions:"Recently asked",search_blankslate_recommended_questions:"You might be interested in",search_blankslate_query:'No results for "${1}"',search_answer_sources:"Answer based on ${1} sources",search_answer_copy:"Copy answer",search_answer_feedback_upvote:"Mark as useful",search_answer_feedback_downvote:"Mark as not relevant",search_answer_feedback_title:"Thanks for your feedback!",search_answer_feedback_details:"This will help us improve the answering engine.",search_answer_loading:"Analysing the content to answer your question\u2026",search_answer_loading_wait:"It might take a few more seconds.",search_answer_none_title:"We need more knowledge to answer this.",search_answer_none_details_beta:"Connect more integrations or use an existing integration to capture your own answer",search_answer_none_details:"It can indicate that no content is relevant to your question or answer cannot be evaluated with enough confidence.",search_answer_error_title:"Unexpected error",search_answer_error_details:"Something went wrong. Please try again later.",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"Page not found",back_to_home:"Back to front page",page_not_found_long:"Sorry, but the page you were looking for could not be found.",outline:"On this page",last_modified:"Last modified ${1}",was_it_helpful:"Was this page helpful?",poor_content:"Poor content",ok_content:"OK content",excellent_content:"Excellent content",powered_by:"Powered By ${1}",previous:"Previous",next:"Next",export_pdf:"Export as PDF",copy_link:"Copy link",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Edit on ${1}",page_articles_section:"Here are the articles in this section:",main:"Main",cookie_policy:"cookie policy",cookie_prompt:"This site uses cookies to deliver its service and to analyse traffic. By browsing this site, you accept the ${1}.",cookies:"Cookies",reject_all:"Reject all",theme_change_appearance:"Change appearance",new_page:"New page",untitled_page:"Untitled page",page_description:"Page description (optional)",connection_lost:"Connection lost",network_troubleshooting:"Network troubleshooting",device_offline:"Your device might be offline, or GitBook might be experiencing issues.",missing_content_title:"Oops, something is missing.",missing_content_description:"We could not find the original source to display this content.",table_of_contents:"Table of contents",page_outline:"Page outline"},fr:{something_wrong:"Il y a eu un probl\xE8me.",reload:"Actualiser",let_us_know:"Dites-nous ce qui s'est pass\xE9",we_have_been_notified:"Notre \xE9quipe a \xE9t\xE9 inform\xE9e. Si vous souhaitez nous aider, vous pouvez d\xE9crire ce qui s'est pass\xE9 ci-dessous.",search:"Rechercher",search_ask:"Poser une question",search_placeholder:"Rechercher dans le contenu\u2026",search_placeholder_ask:"Poser une question\u2026",search_blankslate:"Tapez quelque chose pour rechercher",search_blankslate_ai:"Nous r\xE9pondrons \xE0 la question avec un mod\xE8le d'IA entra\xEEn\xE9 sur le contenu.",search_blankslate_recent_searches:"Recherches r\xE9centes",search_blankslate_recent_questions:"Questions r\xE9centes",search_blankslate_recommended_questions:"Vous pourriez \xEAtre int\xE9ress\xE9 par",search_blankslate_query:'Aucun r\xE9sultat pour "${1}"',search_answer_sources:"R\xE9ponse bas\xE9e sur ${1} sources",search_answer_copy:"Copier la r\xE9ponse",search_answer_feedback_upvote:"Marquer comme utile",search_answer_feedback_downvote:"Marquer comme non pertinent",search_answer_feedback_title:"Merci pour votre retour !",search_answer_feedback_details:"Cela nous aidera \xE0 am\xE9liorer le moteur de r\xE9ponse.",search_answer_loading:"Analyse du contenu pour r\xE9pondre \xE0 votre question\u2026",search_answer_loading_wait:"Cela peut prendre quelques secondes suppl\xE9mentaires.",search_answer_none_title:"Aucune r\xE9ponse trouv\xE9e pour votre question.",search_answer_none_details:"Cela peut indiquer qu'aucun contenu n'est pertinent pour votre question ou que la r\xE9ponse ne peut pas \xEAtre \xE9valu\xE9e avec suffisamment de confiance.",search_answer_error_title:"Erreur inattendue",search_answer_error_details:"Une erreur s'est produite. Veuillez r\xE9essayer plus tard.",search_goto_section:"Aller \xE0 la section",search_goto_page:"Aller \xE0 la page",page_not_found:"Page non trouv\xE9e",back_to_home:"Retour \xE0 la page d'accueil",page_not_found_long:"D\xE9sol\xE9, mais la page que vous cherchiez n'a pas pu \xEAtre trouv\xE9e.",outline:"Sommaire",last_modified:"Derni\xE8re mise \xE0 jour ${1}",was_it_helpful:"Cette page vous a t-elle aid\xE9e ?",poor_content:"Contenu m\xE9diocre",ok_content:"Contenu OK",excellent_content:"Contenu excellent",powered_by:"Propuls\xE9 par ${1}",previous:"Pr\xE9c\xE9dent",next:"Suivant",export_pdf:"Exporter en PDF",copy_link:"Copier le lien",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\xC9diter sur ${1}",page_articles_section:"Voici les articles de cette section :",main:"Principale",cookie_policy:"politique en mati\xE8re de cookies",cookie_prompt:"Ce site utilise des cookies pour fournir son service et analyser le trafic. En naviguant sur ce site, vous acceptez le ${1}.",cookies:"Cookies",reject_all:"Rejeter tout",theme_change_appearance:"Changer l\u2019apparence",connection_lost:"Hors connexion",network_troubleshooting:"D\xE9pannage r\xE9seau",device_offline:"Votre appareil est hors-ligne, ou GitBook rencontre des probl\xE8mes.",missing_content_title:"Oups, il manque quelque chose.",missing_content_description:"Nous n'avons pas pu trouver la source d'origine pour afficher ce contenu.",table_of_contents:"Table des mati\xE8res",page_outline:"Sommaire de la page"},es:{something_wrong:"Algo sali\xF3 mal.",reload:"Recarga",let_us_know:"Cu\xE9ntanos lo que ha sucedido",we_have_been_notified:"Nuestro equipo ha sido notificado. Si quieres ayudar, puedes describir lo sucedido a continuaci\xF3n.",search:"Buscar",search_ask:"Hacer una pregunta",search_placeholder:"Buscar en el contenido\u2026",search_placeholder_ask:"Hacer una pregunta\u2026",search_blankslate:"Escribe algo para buscar",search_blankslate_ai:"Responderemos a la pregunta con un modelo de IA entrenado en el contenido.",search_blankslate_recent_searches:"B\xFAsquedas recientes",search_blankslate_recent_questions:"Preguntas recientes",search_blankslate_recommended_questions:"Quiz\xE1s te interese",search_blankslate_query:'No se encontraron resultados para "${1}"',search_answer_sources:"Respuesta basada en ${1} fuentes",search_answer_copy:"Copiar respuesta",search_answer_feedback_upvote:"Marcar como \xFAtil",search_answer_feedback_downvote:"Marcar como no relevante",search_answer_feedback_title:"\xA1Gracias por tu retroalimentaci\xF3n!",search_answer_feedback_details:"Esto nos ayudar\xE1 a mejorar el motor de respuesta.",search_answer_loading:"Analizando el contenido para responder tu pregunta\u2026",search_answer_loading_wait:"Esto puede tomar unos segundos m\xE1s.",search_answer_none_title:"No se encontr\xF3 respuesta para tu pregunta.",search_answer_none_details:"Esto puede indicar que no hay contenido relevante para tu pregunta o que la respuesta no se puede evaluar con suficiente confianza.",search_answer_error_title:"Error inesperado",search_answer_error_details:"Ha ocurrido un error. Por favor, int\xE9ntalo de nuevo m\xE1s tarde.",search_goto_section:"Ir a la secci\xF3n",search_goto_page:"Ir a la p\xE1gina",page_not_found:"P\xE1gina no encontrada",back_to_home:"Volver a la primera p\xE1gina",page_not_found_long:"Lo sentimos, pero no se ha podido encontrar la p\xE1gina que buscaba.",outline:"Esquema",last_modified:"\xDAltima actualizaci\xF3n ${1}",was_it_helpful:"\xBFTe ha sido \xFAtil esta p\xE1gina?",poor_content:"Contenido mediocre",ok_content:"Contenido OK",excellent_content:"Contenido excelente",powered_by:"Accionado por ${1}",previous:"Anterior",next:"Pr\xF3ximo",export_pdf:"Exportar como PDF",copy_link:"Copiar enlace",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"Editar en ${1}",page_articles_section:"Aqu\xED est\xE1n los art\xEDculos de esta secci\xF3n:",main:"Principal",cookie_policy:"pol\xEDtica de cookies",cookie_prompt:"Este sitio utiliza cookies para prestar su servicio y analizar el tr\xE1fico. Al navegar por este sitio, usted acepta la ${1}.",cookies:"Cookies",reject_all:"Rechazar todo",theme_change_appearance:"Cambiar apariencia",connection_lost:"Desconectado",network_troubleshooting:"Resoluci\xF3n de problemas de red",device_offline:"Su dispositivo puede estar desconectado, o GitBook esta experimentando problemas.",missing_content_title:"Ups, algo falta.",missing_content_description:"No pudimos encontrar la fuente original para mostrar este contenido.",table_of_contents:"Tabla de contenido",page_outline:"\xCDndice de p\xE1gina"},zh:{something_wrong:"\u51FA\u4E86\u70B9\u95EE\u9898\u3002",reload:"\u91CD\u88C5",let_us_know:"\u8BA9\u6211\u4EEC\u77E5\u9053\u53D1\u751F\u4E86\u4EC0\u4E48\u4E8B",we_have_been_notified:"\u6211\u4EEC\u7684\u56E2\u961F\u5DF2\u7ECF\u63A5\u5230\u901A\u77E5\u3002\u5982\u679C\u4F60\u60F3\u5E2E\u5FD9\uFF0C\u4F60\u53EF\u4EE5\u5728\u4E0B\u9762\u63CF\u8FF0\u53D1\u751F\u4E86\u4EC0\u4E48\u3002",search:"\u641C\u7D22",search_ask:"\u63D0\u95EE",search_placeholder:"\u641C\u7D22\u5185\u5BB9\u2026",search_placeholder_ask:"\u63D0\u95EE\u2026",search_blankslate:"\u8F93\u5165\u5173\u952E\u8BCD\u641C\u7D22",search_blankslate_ai:"\u6211\u4EEC\u5C06\u7528\u8BAD\u7EC3\u8FC7\u7684 AI \u6A21\u578B\u6765\u56DE\u7B54\u4F60\u7684\u95EE\u9898\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u641C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u63D0\u95EE",search_blankslate_recommended_questions:"\u4F60\u53EF\u80FD\u611F\u5174\u8DA3\u7684\u95EE\u9898",search_blankslate_query:'\u6CA1\u6709\u627E\u5230\u4E0E "${1}" \u76F8\u5173\u7684\u5185\u5BB9',search_answer_sources:"\u56DE\u7B54\u57FA\u4E8E ${1} \u6765\u6E90",search_answer_copy:"\u590D\u5236\u56DE\u7B54",search_answer_feedback_upvote:"\u6807\u8BB0\u4E3A\u6709\u7528",search_answer_feedback_downvote:"\u6807\u8BB0\u4E3A\u65E0\u7528",search_answer_feedback_title:"\u611F\u8C22\u60A8\u7684\u53CD\u9988\uFF01",search_answer_feedback_details:"\u8FD9\u5C06\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB\u56DE\u7B54\u5F15\u64CE\u3002",search_answer_loading:"\u6B63\u5728\u5206\u6790\u5185\u5BB9\u4EE5\u56DE\u7B54\u60A8\u7684\u95EE\u9898\u2026",search_answer_loading_wait:"\u8FD9\u53EF\u80FD\u9700\u8981\u51E0\u79D2\u949F\u3002",search_answer_none_title:"\u6CA1\u6709\u627E\u5230\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u56DE\u7B54\u3002",search_answer_none_details:"\u8FD9\u53EF\u80FD\u662F\u7531\u4E8E\u6CA1\u6709\u4E0E\u60A8\u7684\u95EE\u9898\u76F8\u5173\u7684\u5185\u5BB9\uFF0C\u6216\u8005\u56DE\u7B54\u4E0D\u80FD\u88AB\u5145\u5206\u4FE1\u4EFB\u3002",search_answer_error_title:"\u610F\u5916\u9519\u8BEF",search_answer_error_details:"\u53D1\u751F\u4E86\u4E00\u4E2A\u9519\u8BEF\u3002\u8BF7\u7A0D\u540E\u518D\u8BD5\u3002",search_goto_section:"\u8DF3\u8F6C\u5230\u7AE0\u8282",search_goto_page:"\u8DF3\u8F6C\u5230\u9875\u9762",page_not_found:"\u672A\u627E\u5230\u7F51\u9875",back_to_home:"\u8FD4\u56DE\u9996\u9875",page_not_found_long:"\u62B1\u6B49\uFF0C\u60A8\u8981\u627E\u7684\u9875\u9762\u65E0\u6CD5\u627E\u5230\u3002",outline:"\u5927\u7EB2",last_modified:"\u6700\u8FD1\u66F4\u65B0 ${1}",was_it_helpful:"\u6B64\u9875\u9762\u662F\u5426\u6709\u5E2E\u52A9\uFF1F",poor_content:"\u5185\u5BB9\u5DEE",ok_content:"\u597D\u7684\u5185\u5BB9",excellent_content:"\u4F18\u79C0\u7684\u5185\u5BB9",powered_by:"\u7531 ${1} \u63D0\u4F9B\u652F\u6301",previous:"\u4EE5\u524D",next:"\u4E0B\u4E00\u4E2A",export_pdf:"\u5BFC\u51FA\u4E3APDF",copy_link:"\u590D\u5236\u94FE\u63A5",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"\u5728 ${1} \u4E0A\u7F16\u8F91",page_articles_section:"\u4EE5\u4E0B\u662F\u672C\u8282\u4E2D\u7684\u6587\u7AE0\uFF1A",main:"\u4E3B\u8981",cookie_policy:"cookie\u653F\u7B56",cookie_prompt:"\u672C\u7F51\u7AD9\u4F7F\u7528cookies\u6765\u63D0\u4F9B\u670D\u52A1\u548C\u5206\u6790\u6D41\u91CF\u3002\u901A\u8FC7\u6D4F\u89C8\u672C\u7F51\u7AD9\uFF0C\u60A8\u63A5\u53D7\u6211\u4EEC\u7684${1}\u3002",cookies:"Cookies",reject_all:"\u62D2\u7EDD\u6240\u6709",theme_change_appearance:"\u6539\u53D8\u5916\u89C2",connection_lost:"\u8FDE\u63A5\u4E22\u5931",network_troubleshooting:"\u7F51\u7EDC\u6545\u969C\u6392\u9664",device_offline:"\u60A8\u7684\u8BBE\u5907\u53EF\u80FD\u5904\u4E8E\u79BB\u7EBF\u72B6\u6001\uFF0C\u6216\u8005 GitBook \u53EF\u80FD\u9047\u5230\u95EE\u9898\u3002",missing_content_title:"\u54CE\u5440\uFF0C\u6709\u4E9B\u4E1C\u897F\u4E22\u5931\u4E86\u3002",missing_content_description:"\u6211\u4EEC\u65E0\u6CD5\u627E\u5230\u539F\u59CB\u6765\u6E90\u4EE5\u663E\u793A\u6B64\u5185\u5BB9\u3002",table_of_contents:"\u76EE\u5F55",page_outline:"\u9875\u9762\u5927\u7EB2"},ja:{something_wrong:"\u4F55\u304B\u554F\u984C\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002",reload:"\u30EA\u30ED\u30FC\u30C9",let_us_know:"\u4F55\u304C\u8D77\u3053\u3063\u305F\u306E\u304B\u3092\u6559\u3048\u3066\u304F\u3060\u3055\u3044",we_have_been_notified:"\u79C1\u305F\u3061\u306E\u30C1\u30FC\u30E0\u306F\u901A\u77E5\u3092\u53D7\u3051\u307E\u3057\u305F\u3002\u3054\u5354\u529B\u3044\u305F\u3060\u3051\u308B\u5834\u5408\u306F\u3001\u4F55\u304C\u8D77\u3053\u3063\u305F\u304B\u3092\u4EE5\u4E0B\u306B\u3054\u8A18\u5165\u304F\u3060\u3055\u3044\u3002",search:"\u691C\u7D22",search_ask:"\u8CEA\u554F\u3059\u308B",search_placeholder:"\u691C\u7D22\u2026",search_placeholder_ask:"\u8CEA\u554F\u2026",search_blankslate:"\u30AD\u30FC\u30EF\u30FC\u30C9\u3092\u5165\u529B\u3057\u3066\u691C\u7D22",search_blankslate_ai:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u306F\u3001AI\u30E2\u30C7\u30EB\u306B\u3088\u3063\u3066\u884C\u308F\u308C\u307E\u3059\u3002",search_blankslate_recent_searches:"\u6700\u8FD1\u306E\u691C\u7D22",search_blankslate_recent_questions:"\u6700\u8FD1\u306E\u8CEA\u554F",search_blankslate_recommended_questions:"\u304A\u3059\u3059\u3081\u306E\u8CEA\u554F",search_blankslate_query:'"${1}" \u306B\u95A2\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F',search_answer_sources:"\u56DE\u7B54\u306F ${1} \u304B\u3089\u306E\u60C5\u5831\u3092\u5143\u306B\u3057\u3066\u3044\u307E\u3059",search_answer_copy:"\u56DE\u7B54\u3092\u30B3\u30D4\u30FC",search_answer_feedback_upvote:"\u5F79\u306B\u7ACB\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_downvote:"\u5F79\u306B\u7ACB\u305F\u306A\u304B\u3063\u305F\u3068\u30DE\u30FC\u30AF",search_answer_feedback_title:"\u30D5\u30A3\u30FC\u30C9\u30D0\u30C3\u30AF\u3042\u308A\u304C\u3068\u3046\u3054\u3056\u3044\u307E\u3059\uFF01",search_answer_feedback_details:"\u3053\u308C\u306B\u3088\u308A\u3001\u56DE\u7B54\u30A8\u30F3\u30B8\u30F3\u3092\u6539\u5584\u3067\u304D\u307E\u3059\u3002",search_answer_loading:"\u8CEA\u554F\u306B\u56DE\u7B54\u3059\u308B\u305F\u3081\u306B\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u5206\u6790\u3057\u3066\u3044\u307E\u3059\u2026",search_answer_loading_wait:"\u3053\u308C\u306B\u306F\u6570\u79D2\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\u3002",search_answer_none_title:"\u8CEA\u554F\u306B\u5BFE\u3059\u308B\u56DE\u7B54\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",search_answer_none_details:"\u3053\u308C\u306F\u3001\u8CEA\u554F\u306B\u95A2\u9023\u3059\u308B\u30B3\u30F3\u30C6\u30F3\u30C4\u304C\u306A\u3044\u304B\u3001\u56DE\u7B54\u304C\u4FE1\u983C\u3067\u304D\u306A\u3044\u305F\u3081\u304B\u3082\u3057\u308C\u307E\u305B\u3093\u3002",search_answer_error_title:"\u30A8\u30E9\u30FC",search_answer_error_details:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F\u3002\u5F8C\u3067\u3082\u3046\u4E00\u5EA6\u304A\u8A66\u3057\u304F\u3060\u3055\u3044\u3002",search_goto_section:"Go to section",search_goto_page:"Go to page",page_not_found:"\u30DA\u30FC\u30B8\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",back_to_home:"\u30D5\u30ED\u30F3\u30C8\u30DA\u30FC\u30B8\u306B\u623B\u308B",page_not_found_long:"\u7533\u3057\u8A33\u3042\u308A\u307E\u305B\u3093\u304C\u3001\u304A\u63A2\u3057\u306E\u30DA\u30FC\u30B8\u306F\u898B\u3064\u304B\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002",outline:"\u6982\u8981",last_modified:"\u6700\u7D42\u66F4\u65B0 ${1}",was_it_helpful:"\u3053\u306E\u30DA\u30FC\u30B8\u306F\u5F79\u306B\u7ACB\u3061\u307E\u3057\u305F\u304B\uFF1F",poor_content:"\u60AA\u3044\u5185\u5BB9",ok_content:"OK\u30B3\u30F3\u30C6\u30F3\u30C4",excellent_content:"\u512A\u308C\u305F\u5185\u5BB9",powered_by:"${1} \u4E0A\u3067\u52D5\u4F5C\u3057\u3066\u3044\u307E\u3059",previous:"\u524D",next:"\u6B21",export_pdf:"PDF\u306B\u51FA\u529B",copy_link:"\u30EA\u30F3\u30AF\u306E\u30B3\u30D4\u30FC",switch_to_dark_theme:"Switch to dark theme",switch_to_light_theme:"Switch to light theme",edit_on_github:"${1}\u3067\u7DE8\u96C6",page_articles_section:"\u3053\u306E\u30BB\u30AF\u30B7\u30E7\u30F3\u306E\u8A18\u4E8B\u306F\u6B21\u306E\u3068\u304A\u308A\u3067\u3059:",main:"\u4E00\u6B21",cookie_policy:"\u30AF\u30C3\u30AD\u30FC\u30DD\u30EA\u30B7\u30FC",cookie_prompt:"\u3053\u306E\u30B5\u30A4\u30C8\u3067\u306F\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u63D0\u4F9B\u3084\u30C8\u30E9\u30D5\u30A3\u30C3\u30AF\u306E\u5206\u6790\u306E\u305F\u3081\u306B\u30AF\u30C3\u30AD\u30FC\u3092\u4F7F\u7528\u3057\u3066\u3044\u307E\u3059\u3002\u3053\u306E\u30B5\u30A4\u30C8\u3092\u95B2\u89A7\u3059\u308B\u3053\u3068\u3067\u3001\u304A\u5BA2\u69D8\u306F\u5F53\u793E\u306E${1}\u306B\u540C\u610F\u3057\u305F\u3053\u3068\u306B\u306A\u308A\u307E\u3059\u3002",cookies:"\u30AF\u30C3\u30AD\u30FC",reject_all:"\u5168\u3066\u3092\u62D2\u5426\u3059\u308B",theme_change_appearance:"\u5916\u89B3\u3092\u5909\u66F4\u3059\u308B",connection_lost:"\u63A5\u7D9A\u5207\u65AD",network_troubleshooting:"\u30CD\u30C3\u30C8\u30EF\u30FC\u30AF\u306E\u30C8\u30E9\u30D6\u30EB\u30B7\u30E5\u30FC\u30C6\u30A3\u30F3\u30B0",device_offline:"\u30C7\u30D0\u30A4\u30B9\u304C\u30AA\u30D5\u30E9\u30A4\u30F3\u3067\u3042\u308B\u304B\u3001GitBook\u3067\u554F\u984C\u304C\u767A\u751F\u3057\u3066\u3044\u308B\u53EF\u80FD\u6027\u304C\u3042\u308A\u307E\u3059\u3002",missing_content_title:"\u304A\u3063\u3068\u3001\u4F55\u304B\u304C\u5931\u308F\u308C\u3066\u3044\u307E\u3059\u3002",missing_content_description:"\u3053\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3059\u308B\u305F\u3081\u306E\u5143\u306E\u30BD\u30FC\u30B9\u3092\u898B\u3064\u3051\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u305B\u3093\u3067\u3057\u305F\u3002",table_of_contents:"\u76EE\u6B21",page_outline:"\u30DA\u30FC\u30B8\u6982\u8981"}};function se(){let{locale:t}=Ni.useContext($o),o=d0[t];return Ni.useCallback((e,...n)=>{let r=o[e]||d0.en[e],i=[],a=r;return n.forEach((s,l)=>{if(typeof s=="string")a=a.replace(`\${${l+1}}`,s);else{let[u,d]=a.split(`\${${l+1}}`);i.push(Ni.createElement(Ni.Fragment,{key:`string-${l}`},u)),i.push(Ni.createElement(Ni.Fragment,{key:`arg-${l}`},s)),a=d}}),i.length?Ni.createElement(Ni.Fragment,null,i,a):a},[t])}function of(){let t=se();return p0.createElement(Oi,{kind:"default",title:t("missing_content_title"),details:t("missing_content_description")})}c();var Kd=b(k());function cv(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a,getPalette:s}=t,l=o.data.toObject(),{value:u}=l,d=Kd.useRef(null),p=Yo(u),f=ce(d);return Hh(()=>{if(!f.opened&&a.value.isFocused){let m=()=>he.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+p.current.length+1});f.open(ed(s(l,m),u))}},150),Kd.useEffect(()=>{f.opened&&f.typeQuery(u)},[f,u]),Kd.createElement(Dt,{ref:d,...r},i)}function m0(t){let{editor:o,node:e,children:n}=t,{readOnly:r}=o,i=e.data.toFrozenObject(),a=Je(),s=Jg(i.syntax||"text"),l=typeof i.title=="string",u=Ro.useRef(null),d=ce(u),p=Ro.useRef(null),f=ce(p),m=(S,C)=>{o.change(x=>{x.insertDataByKey(e.key,["title"],S)})},h=()=>to.getCodeText(e),y=JW(e.key);return Ro.createElement(ve,{...t,palette:y},Ro.createElement(G1,{overflow:i.overflow||sO,lineNumbers:!!i.lineNumbers,header:l?Ro.createElement(ZW,{title:i.title,isEditable:!r,onTitleChange:m}):null,showToolbar:d.opened||f.opened,translate:!1,toolbar:a?null:Ro.createElement(Ro.Fragment,null,r?null:Ro.createElement(V,{ref:u,active:d.opened,kind:"secondary",size:"small",style:g.Margin.xsmallRight,rightIcon:v.ChevronDown,onPress:()=>{d.open(f0(o,e.key))}},s.title),Ro.createElement(Xg,{kind:"secondary",size:"small",content:h}),r?null:Ro.createElement(V,{ref:p,icon:v.MoreVertical,kind:"secondary",size:"small",style:g.Margin.xsmallLeft,title:"More options",onPress:()=>{f.open(y)}}))},n))}function ZW(t){let{title:o,isEditable:e,onTitleChange:n}=t,[r,i]=Ro.useState(o),[a,s]=_(W);Ro.useEffect(()=>{i(o)},[o]);let l=d=>{n(r||"",d)},u=[s.Body,s.textMuted];return Ro.createElement(Ug,{style:[w.directionRow,w.alignCenter,g.Padding.mediumLeft]},e?Ro.createElement(lv.TextInput,{value:r,placeholder:"Enter a filename",placeholderTextColor:a.colors.text.muted,onChangeText:d=>i(d),style:u,onBlur:l}):Ro.createElement(lv.Text,{style:u},o))}function JW(t){let o=Cc(),e=Ti(o,t),n=r=>{let i=o.value.document.assertBlock(r),a=i.data.toFrozenObject(),s=typeof a.title=="string";return[{key:"code",commands:[{key:"syntax",title:"Set syntax\u2026",icon:v.Code,descendant:()=>f0(o,i.key)}]},{key:"code-options",commands:[{key:"with-line-numbers",icon:v.CodeLineNumbers,type:2,enabled:!!a.lineNumbers,title:"With line numbers",trigger:()=>(o.change(l=>{a.lineNumbers?l.removeDataPathByKey(i.key,["lineNumbers"]):l.setDataByKey(i.key,["lineNumbers"],!0)}),nt(o,i.key,n(i.key)))},{key:"with-title",icon:v.CodeCaption,type:2,enabled:s,title:"With caption",trigger:()=>(o.change(l=>{s?l.removeDataPathByKey(i.key,["title"]):l.insertDataByKey(i.key,["title"],"")}),nt(o,i.key,n(i.key)))},{key:"with-wrap",icon:v.CodeWrap,type:2,enabled:a.overflow==="wrap",title:"Wrap code",trigger:()=>(o.change(l=>{a.overflow==="wrap"?l.removeDataPathByKey(i.key,["overflow"]):l.setDataByKey(i.key,["overflow"],"wrap")}),nt(o,i.key,n(i.key)))}]},...e?[e]:[]]};return nt(o,t,n(t))}function f0(t,o){let e=t.value.document.assertBlock(o),n=e.data.get("syntax");return ie({search:"Select a syntax\u2026",groups:[{key:"syntaxes",commands:K1().map(r=>({type:1,key:r.key,selected:n===r.key,title:r.title,trigger:()=>{t.change(i=>{i.setDataByKey(e.key,["syntax"],r.key)})}}))}]})}c();var g0=b(k());function h0(t){let{node:o,parent:e,children:n,editor:r}=t,{diff:i,highlighted:a}=o.data.toFrozenObject(),s=()=>{r.change(l=>{l.setDataByKey(o.key,["highlighted"],!a)})};return g0.createElement(V1,{number:e.getChildIndex(o.key)+1,highlighting:i==="added"||i==="deleted"||i==="modified"?i:a?"highlighted":void 0,onPressGutter:r.readOnly?void 0:s},n)}c();var au=b(wi());var QW=(0,au.isKeyHotkey)("mod+a"),ez=(0,au.isKeyHotkey)("shift+tab"),tz=(0,au.isKeyHotkey)("tab"),oz=(0,au.isKeyHotkey)("mod+enter"),nz=(0,au.isKeyHotkey)("enter"),rz=(0,au.isKeyHotkey)("backspace"),y0={onKeyDown:iz,onPaste:az};function iz(t,o,e){let{value:n}=o;if(Eo(n.selection))return;let r=to.getCurrentCode(n);if(r){if(QW(t))return sz(r,t,o,e);if(ez(t))return lz(r,t,o,e);if(tz(t))return cz(r,t,o,e);if(oz(t))return dz(r,t,o,e);if(nz(t))return uz(r,t,o,e);if(rz(t))return pz(r,t,o,e)}}function az(t,o,e){let{value:n}=o;if(Eo(n.selection))return;let r=to.getCurrentCode(o.value),{endBlock:i}=n;if(!r||!i||!r.hasDescendant(i.key))return;let a=Ju(t),s;a.type==="fragment"&&a.fragment?s=a.fragment.getTexts().map(d=>d.text).join(`
`):s=a.text||"";let l=to.createCodeBlock(s).blockNodes,u=fc.create({nodes:l});return o.insertDocument(u)}function sz(t,o,e,n){o.preventDefault();let r=t.getFirstText(),i=t.getLastText();if(!(!r||!i))return e.collapseToStartOf(r).extendToEndOf(i)}function cz(t,o,e,n){let{value:r}=e;o.preventDefault(),o.stopPropagation();let{isCollapsed:i}=r,a=to.getIndent(to.getCodeText(t));return i?e.insertText(a).focus():to.indentLines(e,a)}function lz(t,o,e,n){o.preventDefault(),o.stopPropagation();let r=to.getIndent(to.getCodeText(t));return to.dedentLines(e,r)}function uz(t,o,e,n){let{value:r}=e;if(!r.isCollapsed)return;o.preventDefault();let{startBlock:i}=r;if(!i)return;let a=i.text,s=to.getIndent(a,"");return e.splitBlock().insertText(s).focus()}function dz(t,o,e,n){let{value:r}=e;if(r.isCollapsed)return o.preventDefault(),St(e,t),e}function pz(t,o,e,n){let{value:r}=e;if(r.isExpanded)return;let{startOffset:i,startText:a}=r,s=r.startBlock;if(!s)return;let l=to.getIndent(to.getCodeText(t));if(s.text.slice(0,i).endsWith(l))return o.preventDefault(),e.deleteBackward(l.length).focus();let d=i===0&&t.getFirstText()===a,p=t.nodes.size===1&&s.text.length===0;if(d&&p)return o.preventDefault(),e.setBlocks(de,{normalize:!1}).unwrapNodeByKey(s.key)}c();var Qa=b(k()),pf=b(q());c();var v0=b(k());function b0(t){let o=t?new URL(t).hostname:null,[{data:e}]=_i([o?bo("listIntegrations",{},{query:{blockDomain:o}}):null],{suspend:!1});return v0.useMemo(()=>{if(!e||!t)return;let n=Ng(Lg(e.items),t);if(!n)return;let r=e.items.find(i=>i.name===n.integrationKey);if(r)return{integration:r,block:n.block}},[e?.items,t])}function uv(t){let{url:o,readOnly:e}=t,[{data:n}]=_i([bo("getEmbedByUrl",{},{query:{url:o}})],{throwOnError:!1}),r=b0(e?null:o),i=r?Qa.createElement(mz,{...r}):null;if(!n)return Qa.createElement(ni,null);if(n.type==="rich"&&n.html){let a=Qa.createElement("div",{dangerouslySetInnerHTML:{__html:n.html}});return i?Qa.createElement(pf.View,null,a,Qa.createElement(pf.View,{style:fz.overlayInstallButton},i)):a}return Qa.createElement(Ua,{href:o,title:n.title,details:n.site,icon:n.icon?mt(Wa,{source:{uri:n.icon}}):void 0,onPress:a=>{a.preventDefault(),Ts(o)},buttons:i?[i]:[]})}function mz(t){let{integration:o}=t,{navigate:e}=ye(),{logAnalyticsEvent:n}=Qa.useContext(Ve),r=i=>{i.stopPropagation(),i.preventDefault(),n({type:"edit_open_integration",integration:o.name,reason:"embed"}),e({overlay:{type:"integrations",integration:o.name}})};return Qa.createElement(V,{kind:"secondary",size:"medium",icon:mt(id,{integration:o}),title:`Install the ${o.title} integration to supercharge this block`,tooltipPreferredPlacement:"left",onPress:r},"Install ",o.title)}var fz=pf.StyleSheet.create({overlayInstallButton:{position:"absolute",bottom:g.medium,right:g.medium}});c();var zo=b(k());c();var jc=b(k()),Zs=b(q());function $c(t){let{node:o,editor:e,isSelected:n}=t,{readOnly:r}=e,[,i]=_(W),a=H.useInteractiveState(),s=o.fragments.get(cO),l=s?.isEmpty;return s?(n||a.hovered)&&!r||!l?jc.createElement(Zs.View,{style:[w0.editableCaption,g.Padding.smallTop],...a.events},l?jc.createElement(Zs.View,{style:[Zs.StyleSheet.absoluteFill,w.alignCenter,w.justifyContentCenter,g.Padding.smallTop]},jc.createElement(Zs.Text,{style:[i.Italic,i.Body,i.textMuted]},"Write a caption")):null,jc.createElement(Mr.Provider,{value:"caption"},jc.createElement(Wc.Provider,{value:"center"},jc.createElement(ur,{fragment:"caption"})))):r?null:jc.createElement(Zs.View,{style:[g.Padding.smallTop,w0.blankPlaceHolder],...a.events}):null}var w0=Zs.StyleSheet.create({editableCaption:{position:"relative",textAlign:"center"},blankPlaceHolder:{height:g.small+Vg.xsmall}});c();var Jo=b(k());c();var Zc=b(k());function dv(t){let{children:o}=t,[e,n]=Zc.useState(!1);return Zc.useEffect(()=>{n(!0)},[]),e?Zc.createElement(Zc.Fragment,null,o):null}c();var pv=b(k());function S0(t){let{children:o,statusCode:e}=t,n=v_();return n.staticContext&&(n.staticContext.statusCode=e),pv.createElement(pv.Fragment,null,o)}var mv=Jo.forwardRef(function(o,e){let{data:n,readOnly:r,onDataChange:i}=o,{integrationBlocksRemote:a,integrationBlocksContext:s}=Jo.useContext(Ve),l=Jo.useRef(null);if(!s)throw new Error("Expected integration blocks context to be defined");let u={integrationId:n.integration,componentId:n.block,props:n.props,action:n.action,context:s},[d,p]=E_(async f=>l.current?.dispatchAction(f));return Jo.useImperativeHandle(e,()=>({getPaletteGroups:()=>{let{result:f}=a.readCacheState(u);return f&&f.element.type==="block"?d(f.element):[]}})),Jo.createElement(Jo.Fragment,null,p,Jo.createElement(Jo.Suspense,{fallback:Jo.createElement(ni,null)},Jo.createElement(dv,null,Jo.createElement(T_,{ref:l,mode:"block",remote:a,input:u,security:{firstPartyDomains:[Ea.integrations.domain]},onPropsChange:f=>{r||i({...n,action:void 0,props:f})}}))))});function C0(t){let{node:o,editor:e}=t,n=Ti(e,o.key);return zo.createElement(ve,{palette:()=>nt(e,o.key,n?[n]:[]),...t},zo.createElement(Ut,{...t},zo.createElement(zo.Suspense,{fallback:zo.createElement(ni,null)},zo.createElement(gz,{...t}))),zo.createElement($c,{...t}))}function gz(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=o.data.toFrozenObject(),{integrationsBlocksSubscription:i}=zo.useContext(Ve),a=zo.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),s=zo.useMemo(()=>{let l=Ng(a,r.url);return l?Cg.createIntegrationBlockDataForLinkUnfurl(l.integrationKey,l.block.id,r.url):null},[a,r.url]);return zo.useEffect(()=>{!s||n||e.change(l=>{l.setNodeByKey(o.key,{type:jr,data:s})})},[e,n,s,o.key]),s?zo.createElement(mv,{data:s,readOnly:n,onDataChange:l=>{e.change(u=>{u.setNodeByKey(o.key,{type:jr,data:l})})}}):zo.createElement(uv,{url:r.url,readOnly:n})}c();var zt=b(k());c();var Xd=b(k());function k0(t){let{integrationName:o}=t,[{data:e}]=_i([bo("getIntegrationByName",{integrationName:o})],{throwOnError:!1});return e?Xd.createElement(hz,{integration:e}):Xd.createElement(Oi,{kind:"default",title:`Integration ${o} no longer exist or has been unpublished.`})}function hz(t){let{integration:o}=t,e=ju(Mo(id,{integration:o},[o])),{navigate:n}=ye(),{logAnalyticsEvent:r}=Xd.useContext(Ve);return Xd.createElement(Oi,{kind:"default",icon:e,title:`Integration ${o.title} is not configured. Install it to get started.`,actions:[{label:"Install",onPress:()=>{r({type:"edit_open_integration",integration:o.name,reason:"empty"}),n({overlay:{type:"integrations",integration:o.name}})}}]})}function x0(t){let{node:o,editor:e}=t,{readOnly:n}=e,r=zt.useRef(null),{integrationsBlocksSubscription:i}=zt.useContext(Ve),{navigate:a}=ye(),s=zt.useSyncExternalStore(i.subscribe,i.getCurrentValue,()=>i.getCurrentValue()),l=o.data.toFrozenObject(),u=Ti(e,o.key),d=()=>nt(e,o.key,[...r?.current?.getPaletteGroups()||[],{key:"integration",commands:()=>{let{data:f}=Il(bo("getIntegrationByName",{integrationName:l.integration}));return f?[{key:"integration.settings",icon:mt(id,{integration:f}),title:`Configure ${f.title}`,trigger:()=>{a({overlay:{type:"integrations",integration:f.name}})}}]:[]}},...u?[u]:[]]);return zt.useMemo(()=>e1(s,l.integration,l.block),[s,l.integration,l.block])?zt.createElement(ve,{...t,palette:d},zt.createElement(Ut,{...t},zt.createElement(zt.Suspense,{fallback:zt.createElement(ni,null)},zt.createElement(mv,{ref:r,data:l,readOnly:n,onDataChange:f=>{e.change(m=>{m.setNodeByKey(o.key,{data:f})})}})))):zt.createElement(ve,{...t,palette:d},zt.createElement(Ut,{...t},zt.createElement(zt.Suspense,{fallback:zt.createElement(ni,null)},l.url?zt.createElement(uv,{url:l.url,readOnly:n}):n?zt.createElement(of,null):zt.createElement(k0,{integrationName:l.integration}))))}c();var fv=b(wi());var O0={onKeyDown:(t,o,e)=>{let{value:n}=o;if(!n.isCollapsed||!(0,fv.default)("enter",t))return;let{startBlock:r,selection:i}=n;if(!he.isTextRange(i)||!r||r.type!==de||!i.isAtEndOf(r))return;let{text:a}=r;if(!vi(a))return;let s=n.document.getParent(r.key);if(!s||!We(s,_n))return;let l=rg(a,{sortQueryParameters:!1}),u=yg.createEmbedBlock(l);o.replaceNodeByKey(r.key,u).collapseToStartOf(u)}},_0={onKeyDown:(t,o,e)=>{if((0,fv.default)("enter",t)||(0,fv.default)("shift+enter",t)){let{value:n}=o,{startBlock:r,document:i}=n;if(!r||r.type!==de)return;let a=i.getFragmentParent(r.key);if(a?.object!=="fragment")return;let s=i.getParent(a.key);if(!s||!s.isBlock()||![_n,$i,bs,vs].includes(s.type))return;let l=s.type===$i?i.getParent(s.key):s;return St(o,l),o}}};c();var uC=b(k());c();var gv=b(k());function R0(t){let{editor:o}=t,e=gv.useCallback((n,r)=>wd(a=>{o.change(s=>{s.insertInlineAtRange(r(),vg.createEmoji(a)).focus()})},{withSearch:!1}),[o]);return gv.createElement(cv,{...t,getPalette:e})}c();var mf=b(k());function P0(t){let{editor:o,node:e,parent:n}=t,r=mf.useRef(null),i=ce(r),a=Jy(n.object==="block"?n:null),s=Kh(()=>{i.open(wd(l=>{o.change(u=>{u.setNodeByKey(e.key,{data:{code:l}})})}))});return mf.createElement(qd,{ref:r,...t,onPress:o.readOnly?void 0:s},mf.createElement(No,{code:e.data.get("code"),size:a}))}var I0="emojiContext",yz=/(^|\s):(\w*)$/,E0={renderMark:bz,renderNode:wz,decorateValue:vz};function vz(t){let{selection:o}=t,e=Sz(t),n=[];return e!==null&&he.isTextRange(o)&&n.push(he.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:I0,data:{value:e}}],isAtomic:!0})),n}function bz(t){let{mark:o}=t;switch(o.type){case I0:return uC.createElement(R0,{...t})}}function wz(t){let{node:o}=t;switch(o.type){case Up:return uC.createElement(P0,{...t})}}function Sz(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!he.isTextRange(r)||!e||!n||!Os({document:o,block:n},Up))return null;let{startOffset:i}=r,a=e.text.slice(0,i),s=yz.exec(a);return s==null?null:s[2]}c();var Pt=b(k()),Ud=b(q());function Cz(t,o,e){for(let[n,r]of t.entries())if(r===e){let i=o.getNode(n);return i?{key:n,id:r,node:i}:null}}function T0(t){let o=H.useInteractiveState(),{node:e,isFocused:n,editor:r}=t,[,i]=_(kz),[,a]=_(W),{sections:s,selected:l}=Pt.useContext(Ii),u=Je(),d=Pt.useRef(""),[p,f]=Pt.useState("unset");Pt.useEffect(()=>{d.current="",f("unset")},[l]);let m=l&&s.get(e.key)===l,h=Pt.useMemo(()=>!m&&!!Cz(s,e,l),[m,s,e,l]);m&&(d.current=l);let{selection:y}=r.value,S=he.isTextRange(y)&&y.hasEdgeIn(_s.getBodyFragment(e)),C=n&&he.isTextRange(y)&&!y.hasFocusInFragmentOf(e),x=u||(p==="unset"?m||h||l===d.current:p==="expanded"),O=x?v.ChevronDown:v.ChevronRight,E=()=>{x&&S&&r.change(_e=>{_e.collapseToStartOf(_s.getTitleFragment(e))}),f(x?"collapsed":"expanded")},{anchoredBlockId:P,onAnchoredBlockPress:L,anchorElement:R,anchoredBlockInteractiveState:T}=av(e,{accessibilityLabel:"Direct link to expandable block",onBlockPress:E}),M=Pt.useId(),I={id:M,controls:{accessibilityRole:"button",accessibilityExpanded:x,accessibilityControls:`expandable-body-${M}`,accessibilityLabelledBy:`expandable-title-${M}`},chevron:{accessibilityRole:"presentation"},body:{accessibilityRole:"region",accessibilityLabelledBy:`expandable-title-${M}`}},N=e.fragments.get(Ss),z=N?.nodes.first(),Y=Mi(z,N||e),Q=A.ICON_M,te=Y.paddingTop+(gr(z)-Q)/2;return Pt.createElement(ve,{...t},Pt.createElement(Ut,{...t,isFocused:C},Pt.createElement(Ud.View,{...o.events,style:[i.expandable,o.active&&i.expandableActive],nativeID:P},Pt.createElement(Ud.View,{style:[w.directionRow,g.Padding.mediumRight],...T.events},Pt.createElement(H.TouchableOpacity,{onPress:L,style:[g.Padding.mediumHorizontal,w.directionRow,w.justifyContentCenter,{paddingTop:te}],...I.controls},Pt.createElement(O,{size:Q,style:[o.active?a.primary:a.textMuted],...I.chevron})),Pt.createElement(Ud.View,{style:[w.flex1,{paddingTop:Y.paddingTop,paddingBottom:x?g.small:Y.paddingBottom}],nativeID:`expandable-title-${M}`},Pt.createElement(Mr.Provider,{value:"expandableTitle"},Pt.createElement(ur,{fragment:Ss}))),Pt.createElement(Ud.View,{style:{paddingTop:te}},R)),Pt.createElement(Ud.View,{style:[i.expandableBody,!x&&i.hidden],nativeID:`expandable-body-${M}`,...I.body},Pt.createElement(ur,{fragment:Cl})))))}var kz=G.create({hidden:{visibility:"hidden",height:0,padding:0,overflow:"hidden"},expandable:t=>({breakInside:"avoid",borderWidth:1,borderColor:t.colors.border.main,borderRadius:t.radiuses.large}),expandableActive:t=>({borderColor:t.colors.primary.main}),expandableBody:{padding:g.medium,paddingLeft:g.medium+A.ICON_M+g.medium,paddingTop:0}});c();var dC=b(wi());var M0={onKeyDown:xz};function xz(t,o){if(!Eo(o.value.selection)){if((0,dC.default)("mod+enter",t))return _z(t,o);if((0,dC.default)("enter",t))return Oz(t,o)}}function Oz(t,o){let e=_s.getCurrentExpandable(o.value);if(e&&e.fragment?.type===Ss)return o.collapseToStartOf(e.expandable.getFragmentByKey(Cl)).focus()}function _z(t,o){let{value:e}=o,n=_s.getCurrentExpandable(o.value);if(!(!n||!e.isCollapsed))return t.preventDefault(),St(o,n.expandable),o}c();var N0=b(wi()),A0=b(k());c();var hv=b(k());function L0(t){let{mark:o,node:e,offset:n,attributes:r,children:i,editor:a}=t,{value:s}=o.data.toObject(),l=hv.useRef(null),u=Wt(),d=he.create({anchorKey:e.key,anchorOffset:n,focusKey:e.key,focusOffset:n+1}),p=Hy({anchorRef:l,range:d,editor:a}),f=ce(l,{onClose:()=>{f.close(),!u.isOpen()&&a.change(m=>m.focus())}});return Hh(()=>{!f.opened&&a.value.isFocused&&f.open(ie({groups:[{key:"inline-controls",commands:p.filter(m=>s.includes(m.key))}]}))},150),hv.createElement(Dt,{ref:l,...r},i)}var Rz=[gc,Up,Rn,lg],D0="inlineControlsContext",Pz=/(^|\s)\/$/,B0={renderMark:Ez,decorateValue:Iz,onKeyDown:(t,o,e)=>{if(W0(e.value)&&(0,N0.default)("esc",t))return o}};function Iz(t){let{selection:o}=t,e=W0(t),n=[];return qt(o)&&e!==null&&n.push(he.create({anchorKey:o.startKey,anchorOffset:o.startOffset-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:D0,data:{value:e}}],isAtomic:!0})),n}function Ez(t){let{mark:o}=t;switch(o.type){case D0:return A0.createElement(L0,{...t})}}function W0(t){if(!t.isCollapsed)return null;let{startText:o,startBlock:e,selection:n}=t;if(!qt(n)||!o||!e)return null;let{startOffset:r}=n,i=o.text.slice(0,r);if(Pz.exec(i)==null)return null;let s=Rz.filter(l=>Os({document:t.document,block:e},l));return s.length===0?null:s}c();var es=b(k()),q0=b(q());c();var yn=b(k()),Jc=b(q());function z0(t){let{resolved:o,node:e,editor:n,children:r}=t,i=ut(),a=yn.useRef(null),s=yn.useRef(null),[l,u]=yn.useState(!1),[d,p]=yn.useState(!1),[,f]=_(F0),m=be(),h=l||d,y=H.useInteractiveState({hoverDelay:500,onHoverIn:()=>{u(!0)},onHoverOut:()=>{u(!1)}}),S=H.useInteractiveState({onHoverIn:()=>{p(!0)},onHoverOut:()=>{p(!1)}});bc({opened:h,closeOnClick:!1,closeOnScroll:!0,onClose:()=>{u(!1),p(!1)}},s);let C=ce(a),x=()=>{n.change(E=>{E.unwrapInlineByKey(e.key)})},O=()=>{C.open(Bn(E=>{n.change(P=>{P.setDataByKey(e.key,["ref"],E)})},{...i,document:n.value.document},m))};return yn.createElement(za,{ref:s,anchorRef:a,wrapper:xi,opened:h,updateOnScroll:!1,anchor:({ref:E})=>r(E,{...y.events,style:C.opened?f.linkBeingEdited:null})},yn.createElement(Jc.View,{style:[Jc.StyleSheet.absoluteFill],...S.events},yn.createElement(_1,{kind:"tooltip",preferredAlignment:"start"},yn.createElement(Jc.View,null,yn.createElement(Tz,{resolved:o,onPressEdit:O,onPressRemove:x})))))}function Tz(t){let{resolved:o,onPressEdit:e,onPressRemove:n}=t,r=o.icon||o.secondaryIcon,[,i]=_(F0);return yn.createElement(Jc.View,{style:[w.directionRow,w.alignCenter,g.Padding.xsmall]},yn.createElement(Jc.View,{style:[i.buttonWrapper,w.directionRow]},yn.createElement(V,{title:"Edit link",icon:r,size:"small",kind:"default_inverted",onPress:e,style:w.flex1},o.title)),yn.createElement(Jc.View,null,yn.createElement(V,{title:"Remove link",kind:"default_inverted",icon:v.Trashcan,size:"small",onPress:n})))}var F0=G.create({buttonWrapper:{maxWidth:200},linkBeingEdited:t=>({backgroundColor:t.colors.background.standout})});var Mz=H.createInteractiveComponent(Dt);function G0(t){return es.createElement(es.Suspense,{fallback:es.createElement(H0,{...t,resolved:null})},es.createElement(Lz,{...t}))}function Lz(t){let{node:o}=t,{ref:e}=o.data.toFrozenObject(),n=Qe(e);return es.createElement(H0,{...t,resolved:n})}var V0=H.createInteractiveHandle("link");function H0(t){let{node:o,attributes:e,children:n,resolved:r,editor:i}=t,{readOnly:a}=i,[,s]=_(W),l=(u,d={})=>es.createElement(H.TouchableOpacity,{ref:u,handle:V0,...r?Fc(r):{},...d,style:[Nz.wrapper,d.style]},es.createElement(Mz.Child,{...e,descendantOf:V0,hoverStyle:[s.primaryStandout,s.Underline],inactiveStyle:s.primary},n));return a||!r?l():es.createElement(z0,{resolved:r,editor:i,node:o},l)}var Nz=q0.StyleSheet.create({wrapper:{display:"inline"}});c();var K0=b(k());function X0(t){let o=ut(),e=be(),{logAnalyticsEvent:n}=t;return K0.useMemo(()=>({onPaste:(r,i,a)=>{let s=Ju(r);if(!((s.type==="text"||s.type==="html")&&typeof s.text=="string"&&(vi(s.text)||Kx(s.text))))return;let l=s.text,{value:u}=i;if(u.isCollapsed){if(u.isInVoidBlock)return;i.insertText(l).extend(-l.length)}let d={kind:"url",url:l};i.wrapInline({type:Rn,data:{ref:d}});let p=i.value.inlines.filter(m=>m.type===Rn&&m.data.has("ref")&&Tg(m.data.get("ref"),d)===!1);i.collapseToEnd();let f=Ig(l);return f&&om(()=>Eg(f,o,{hiveClient:e}),null).then(m=>{m&&a.change(h=>{p.forEach(y=>{let S=h.value.document.getByKey(y.key);S&&h.setDataByKey(S.key,["ref"],m)})})}),n(df(r,"link")),i}}),[o,e])}c();var vv=b(k());c();var U0=b(k());var yv=U0.createContext(Ht);function Y0(t){let{node:o,children:e,attributes:n}=t;return vv.createElement(ve,{...t},vv.createElement(pe,{tag:o.type===Ht?"ol":"ul",...n},vv.createElement(yv.Provider,{value:o.type},e)))}c();var Ai=b(k()),bv=b(q());function j0(t){let{node:o,parent:e,children:n,editor:r}=t,{readOnly:i}=r,[,a]=_(W),s=Ai.useContext(yv),l=o.data.toFrozenObject(),u=s===po,d=s===Ht,p=s===mo,f=Ai.useMemo(()=>nt(r,o.key,[{key:"list",commands:[{key:"ul",type:1,title:"Unordered List",icon:v.ListUnordered,selected:e.type===po,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:po})})}},{key:"ol",type:1,title:"Ordered List",icon:v.ListOrdered,selected:e.type===Ht,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:Ht})})}},{key:"tasks",type:1,title:"Tasks List",icon:v.ListTasks,selected:e.type===mo,trigger:()=>{r.change(S=>{S.setNodeByKey(e.key,{type:mo})})}}]}]),[r,o.key,e.type]),m=S=>{r.change(C=>{pt.checkTaskItem(C,o.key,S)})},h=gr(o.nodes.first()),y=S=>S<10?g.medium:S<100?g.large:"auto";return Ai.createElement(ve,{tag:"li",palette:f,contentProps:{style:ff.blockListItem},...t},p&&Ai.createElement(pe,{editable:!1,style:[ff.blockListItemPrefix,{height:h}]},Ai.createElement(kc,{value:!!l.checked,onValueChange:m,readOnly:i,size:A.ICON_M})),u&&Ai.createElement(pe,{editable:!1,style:[ff.blockListItemPrefix,{height:h}]},Ai.createElement(v.Dot,{size:12,style:a.text})),d&&Ai.createElement(Dt,{editable:!1,style:[ff.blockListItemPrefix,{height:h,width:y(e.getChildIndex(o.key)+1)},a.Body,a.text]},Az(e,o)),Ai.createElement(bv.View,{style:ff.blockListItemContent},n))}function Az(t,o){let e=t.data.toFrozenObject(),n=t.getChildIndex(o.key);return`${(e.start||1)+n}.`}var ff=bv.StyleSheet.create({blockListItem:{position:"relative",display:"flex",flexDirection:"row"},blockListItemPrefix:{display:"flex",flexDirection:"row",alignItems:"center",marginLeft:g.small,marginRight:g.small},blockListItemContent:{flex:1}});c();var gf=b(wi());var Dz=(0,gf.isKeyHotkey)("tab"),Bz=(0,gf.isKeyHotkey)("shift+tab"),Wz=(0,gf.isKeyHotkey)("enter"),zz=(0,gf.isKeyHotkey)("backspace"),$0={onKeyDown:Vz,shouldNodeComponentUpdate:Fz};function Fz(t,o){if(t.node.type===Xo){let{parent:e,node:n}=t,{parent:r,node:i}=o;if(e.object!=="block"||r.object!=="block")throw new Error("Parent of list-item must be a block");if(e.type===Ht&&e.getChildIndex(n.key)!==r.getChildIndex(i.key))return!0}return null}function Vz(t,o,e){if(Wz(t))return qz(t,o,e);if(Dz(t)||Bz(t))return Hz(t,o,e);if(zz(t))return Gz(t,o,e)}function qz(t,o,e){if(t.shiftKey)return;let{value:n}=o,r=pt.getCurrentItem(n);if(!r)return;if(t.preventDefault(),n.isExpanded&&o.delete(),r.isEmpty)return pt.getItemDepth(n)>1?pt.decreaseItemsDepth(o):pt.unwrapList(o);pt.splitListItem(o);let i=pt.getListForItem(o.value,r);if(i&&i.type===mo){let a=o.value.document.getNextSibling(r.key);return a?pt.checkTaskItem(o,a.key,!1):o}return o}function Gz(t,o,e){let{value:n}=o,{startOffset:r,selection:i}=n;if(!he.isTextRange(i)||i.isExpanded||r>0)return;let a=pt.getCurrentItem(n);if(a&&i.isAtStartOf(a))return t.preventDefault(),pt.unwrapList(o)}function Hz(t,o,e){return t.shiftKey?(t.preventDefault(),pt.decreaseItemsDepth(o)):(t.preventDefault(),pt.increaseItemsDepth(o))}c();c();var J0=b(wi());function Kz(t){let{transform:o}=t,e=t.onHotkey?(0,J0.isKeyHotkey)(t.onHotkey):()=>!1,n=t.onInput?Xz(t.onInput):()=>!1,r=t.ignoreIn?Z0(t.ignoreIn):null,i=t.onlyIn?Z0(t.onlyIn):null;function a(p,f,m){if(!e(p))return;let h=u(f.value);if(h)return l(h,p,f,m),!0}function s(p,f,m){if(p.inputType!=="insertText"||!n(p))return;let h=u(f.value);if(h)return l(h,p,f,m),!0}function l(p,f,m,h){let{value:y}=m,{startOffset:S}=y,C=0;return d(p,S).forEach(O=>{m.moveOffsetsTo(O.start,O.end).delete(),C+=O.total}),S-=C,m.moveOffsetsTo(S,S),m.call(o,f,p,h),f.preventDefault(),!0}function u(p){if(p.isExpanded)return null;let{startBlock:f}=p;if(!f)return null;let{type:m}=f;if(i&&!i(m)||r&&r(m))return null;let{startText:h,startOffset:y}=p;ze(h);let{text:S}=h,C=null,x=null;return t.after&&(C=S.slice(y).match(t.after)),t.before&&(x=S.slice(0,y).match(t.before)),t.before&&t.after&&!x&&(C=null),t.before&&t.after&&!C&&(x=null),!x&&!C?null:(C&&(C[0]=C[0].replace(/\s+$/,"")),x&&(x[0]=x[0].replace(/^\s+/,"")),{before:x,after:C})}function d(p,f){let{before:m,after:h}=p,y=[],S=0;if(m){let C=m[0],x=0,O=0;m.slice(1,m.length).forEach(E=>{E!==void 0&&(O=C.indexOf(E,O),x=f-S+O-C.length,y.push({start:x,end:x+E.length,total:E.length}),S+=E.length,O+=E.length)})}if(h){let C=h[0],x=0,O=0;h.slice(1,h.length).forEach(E=>{E!==void 0&&(O=C.indexOf(E,O),x=f-S+O,y.push({start:x,end:x+E.length,total:0}),S+=E.length,O+=E.length)})}return y}return{onKeyDown:a,onBeforeInput:s}}function Xz(t){if(typeof t=="string")return o=>!!(o.data&&o.data===t);if(typeof t=="function")return t;if(t instanceof RegExp)return o=>!!(o.data&&o.data.match(t));throw new Error("Invalid onInput option")}function Z0(t){if(Array.isArray(t))return o=>t.includes(o);if(typeof t=="string")return o=>o===t;if(typeof t=="function")return t;throw new Error("Invalid matcher type")}var ri=Kz;var Uz=ri({onlyIn:[de],onInput:"*",before:/\*\*[^*]+?\*$/,transform:(t,o,e)=>{if(Yd(t.value,[ar,fo])||wv(t.value))return t.insertText("*");let n=e.before[0].slice(2).slice(0,-1);return hf(t.value,n,[fo,sr])?t.insertText("*"):t.deleteBackward(n.length+3).addMark(ar).insertText(n).removeMark(ar)}}),Yz=ri({onlyIn:[de],onInput:"_",before:/\b_[^_]+?$/,transform:(t,o,e)=>{if(Yd(t.value,[sr,fo])||wv(t.value))return t.insertText("_");let n=e.before[0].slice(1);return hf(t.value,n,[ar,fo])?t.insertText("_"):t.deleteBackward(n.length+1).addMark(sr).insertText(n).removeMark(sr)}}),jz=ri({onlyIn:[de],onInput:"~",before:/\~\~[^*]+?\~$/,transform:(t,o,e)=>{if(Yd(t.value,[$r,fo])||wv(t.value))return t.insertText("~");let n=e.before[0].slice(2).slice(0,-1);return hf(t.value,n,[$r,fo])?t.insertText("~"):t.deleteBackward(n.length+3).addMark($r).insertText(n).removeMark($r)}}),$z=ri({onlyIn:[de],onInput:/`/,before:/`[^`]+?$/,transform:(t,o,e)=>{if(Yd(t.value,fo))return t.insertText("`");let n=e.before[0].slice(1);return hf(t.value,n,[ar,sr])?t.insertText("`"):t.deleteBackward(n.length+1).addMark(fo).insertText(n).removeMark(fo)}}),Zz=ri({onlyIn:[de],onInput:"$",before:/\$\$[^*]+?\$$/,transform:(t,o,e)=>{if(Yd(t.value,fo)||wv(t.value))return t.insertText("$");let n=e.before[0].slice(2).slice(0,-1);if(hf(t.value,n,[ar,fo,sr]))return t.insertText("$");t.deleteBackward(n.length+3);let r=xl.createMathInline(n);return t.insertInline(r),t}}),Jz=ri({onlyIn:[de],onHotkey:"enter",before:/^\$\$$/,transform:(t,o,e)=>{let n=xl.createMathBlock();return eL(t,n)}}),Qz=ri({onlyIn:[de],onInput:" ",before:/^(-|\*)$/,transform:t=>Q0(t.value)?t:pt.wrapInList(t,po)}),e4=ri({onlyIn:de,onInput:" ",before:/^(([1-9]{1}\d*)\.)$/,transform:(t,o,e)=>{if(Q0(t.value))return t;let n=parseInt(e.before[1],10);return pt.wrapInList(t,Ht,n&&n!==1?{start:n}:{})}}),t4=ri({onlyIn:de,onInput:"]",before:/^(\[[ xX])$/,transform:(t,o,e)=>{let n=pt.getCurrentList(t.value);if(n)t.setNodeByKey(n.key,{type:mo});else{if(!t.value.isEmpty)return t.insertText(`${e.before[0]}]`);t=pt.wrapInList(t,mo)}let r=pt.getCurrentItem(t.value),i=e.before[0][1]!==" ";return r?pt.checkTaskItem(t,r.key,i):t}}),o4=ri({onlyIn:de,onHotkey:"enter",before:/^(```\S*\s*)$/,transform:(t,o,e)=>{let[n]=e.before,r=n.replace(/^```/,"").trim(),i=Jg(r),a=to.createCodeBlock("",{syntax:i.key});return eL(t,a)}}),n4=ri({onlyIn:de,onInput:" ",before:/^(>)$/,transform:(t,o,e)=>t.wrapBlock(Kt)});function Q0(t){let{startBlock:o,document:e}=t;return o?e.getParent(o.key)?.type===Xo:!1}var r4=[Fe,qe,tt],i4=ri({onlyIn:de,onInput:" ",before:/^(#{1,3})$/,transform:(t,o,e)=>{let[n]=e.before,r=n.length,i=r4[r-1];return t.setBlocks({type:i})}});function Yd(t,o){let e=typeof o=="string"?[o]:o;return t.marks.some(n=>e.includes(n.type))}function hf(t,o,e){let{startText:n,startOffset:r}=t;if(!n)return!1;let i=r-o.length,{leaf:a}=n.searchLeafAtOffset(i);return a?Yd(a,e):!1}function wv(t){let{startText:o,startOffset:e}=t;if(!o)return!1;let n=o.text.slice(0,e);return!(!n||n.match(/^[^`]+$/))}function eL(t,o){let{startBlock:e}=t.value;if(e)return t.insertBlock(o).collapseToStartOf(o).removeNodeByKey(e.key)}var tL=[Uz,Yz,jz,$z,Qz,e4,t4,i4,Zz,Jz,o4,n4];c();var pC=b(k());c();var Di=b(k()),jd=b(q());var Sv={[de]:A.ICON_S,[Fe]:A.ICON_XL,[qe]:A.ICON_L,[tt]:A.ICON_S};function oL(t){let{node:o,attributes:e,isSelected:n,parent:r}=t,i=o.data.toFrozenObject();return Di.createElement(Di.Suspense,{fallback:Di.createElement(a4,{selected:n,attributes:e,parentType:r.type})},Di.createElement(s4,{reference:i.ref,selected:n,attributes:e,parentType:r.type}))}function a4(t){let{selected:o,attributes:e,parentType:n}=t,[,r]=_(nL),i=o?D.textColor.primaryStandout:D.text.base,a=Sv[n||de]||Sv[de];return Di.createElement(jd.View,{style:[r.mention,o&&r.mentionSelected],...e},Di.createElement(xe,{size:a,style:i}))}function s4(t){let{reference:o,selected:e,attributes:n,parentType:r}=t,[,i]=_(nL),[,a]=_(W),s=H.useInteractiveState(),l=Qe(o),u=Sv[r||de]||Sv[de],d=e?a.primaryStandout:a.text;return Di.createElement(jd.TouchableOpacity,{...s.events,...Fc(l)},Di.createElement(pe,{tag:"span",style:[i.mention,s.hovered&&i.mentionHovered,e&&i.mentionSelected,w.directionRow,w.alignCenter],...n},l.secondaryIcon?Di.createElement(l.secondaryIcon,{size:u,style:[d,i.mentionIcon]}):null,Di.createElement(jd.Text,{style:[d,a.Bold]},l.title)))}var nL=G.create({mention:t=>({borderRadius:t.radiuses.medium,paddingHorizontal:g.xsmall/2}),mentionHovered:t=>({backgroundColor:t.colors.background.muted}),mentionSelected:t=>({backgroundColor:t.colors.primary.muted}),mentionIcon:{marginRight:g.xsmall/2}});c();var $d=b(k());function rL(t){let{editor:o}=t,{logAnalyticsEvent:e}=$d.useContext(Ve),n=ut(),r=be(),i=$d.useCallback((a,s)=>Bn(u=>{o.change(d=>{d.insertInlineAtRange(s(),{type:Yp,data:{ref:u},isVoid:!0}).focus()}),e({type:"edit_page_document_insert_mention",kind:u.kind})},{...n,document:o.value.document},r,{withSearch:!1,accept:a.symbol==="@"?["user"]:["url","anchor","page","space","collection","file"]}),[o,r]);return $d.createElement(cv,{...t,getPalette:i})}var iL="mentionContext",c4=/(^|\s)(@|#)(\w*)$/,aL={renderMark:d4,renderNode:u4,decorateValue:l4};function l4(t){let{selection:o}=t,e=p4(t),n=[];return he.isTextRange(o)&&e!==null&&n.push(he.create({anchorKey:o.startKey,anchorOffset:o.startOffset-e.value.length-1,focusKey:o.startKey,focusOffset:o.startOffset,marks:[{type:iL,data:{value:e.value,symbol:e.symbol}}],isAtomic:!0})),n}function u4(t){let{node:o}=t;switch(o.type){case Yp:return pC.createElement(oL,{...t})}}function d4(t){let{mark:o}=t;switch(o.type){case iL:return pC.createElement(rL,{...t})}}function p4(t){if(!t.isCollapsed)return null;let{document:o,startText:e,startBlock:n,selection:r}=t;if(!he.isTextRange(r)||!e||!n||!Os({document:o,block:n},Yp))return null;let{startOffset:i}=r,a=e.text.slice(0,i),s=c4.exec(a);return s?{symbol:s[2],value:s[3]}:null}c();var Bi=b(k()),yf=b(q());c();function Cv(t,o,e=[]){return nt(t,o,[{key:"types",commands:()=>{let n=t.value.document.assertBlock(o),r=t.value.document.getParent(o);if(!r)return[];let i=a=>{t.change(s=>{s.setNodeByKey(n.key,{type:a}).focus()})};return[{key:de,title:"Paragraph",type:1,selected:n.type===de,icon:v.Paragraph,trigger:()=>{i(de)}},We(r,Fe)?{key:Fe,title:"Heading 1",type:1,selected:n.type===Fe,icon:v.Heading1,trigger:()=>{i(Fe)}}:null,We(r,qe)?{key:qe,title:"Heading 2",type:1,selected:n.type===qe,icon:v.Heading2,trigger:()=>{i(qe)}}:null,We(r,tt)?{key:tt,title:"Heading 3",type:1,selected:n.type===tt,icon:v.Heading3,trigger:()=>{i(tt)}}:null].filter(ue)}},...e])}function sL(t){let{editor:o,node:e,parent:n,children:r,attributes:i}=t,[,a]=_(W),[,s]=_(g4),l=Bi.useContext(Wc),u=Bi.useContext(Mr),d=f4(n),p=[a.Body,a.text,s[l],s[u]],f=Bi.createElement(yf.Text,{selectable:!0,style:p},r),m=Bi.useMemo(()=>Cv(o,e.key),[o,e.key]),h=jp(e);return m4(n)?!o.readOnly&&h?Bi.createElement(ZM,{...t,placeholder:d},f):Bi.createElement(ve,{...t,palette:m},f):Bi.createElement(pe,{...i},!o.readOnly&&d&&h&&gg(n)?Bi.createElement(pe,{editable:!1,pointerEvents:"none",style:[yf.StyleSheet.absoluteFill]},Bi.createElement(yf.Text,{selectable:!0,style:[p,a.textMuted]},d)):null,f)}function m4(t){return t.type===gw||t.type===fw||t.type===Cl?!0:!(t.object==="fragment"||t.type===Xo)}function f4(t){return t.type===lO?"Parameter description (optional)":t.type===gw?"Response description (optional)":t.type===fw?"Operation description (optional)":t.type===Ss?"Title":t.type===Cl?"Expandable content":t.type===Na?"Annotate this text":t.type===Or?"Tab content":""}var g4=G.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},quote:t=>({color:t.colors.text.mid}),swaggerParameter:t=>({color:t.colors.text.mid,...Ue.Label}),swaggerResponse:t=>({color:t.colors.text.mid}),caption:t=>({...Ue.Caption,color:t.colors.text.muted}),expandableTitle:t=>({...Ue.Heading3,color:t.colors.text.main})});c();var vf=b(wi());var cL={onKeyDown:h4};function h4(t,o){if((0,vf.default)("enter",t)||(0,vf.default)("shift+enter",t))return y4(t,o);if((0,vf.default)("backspace",t))return lL(t,o)}function y4(t,o){let{value:e}=o;if(e.isExpanded)return;let{startBlock:n,startOffset:r,endOffset:i}=e;if(n&&!n.isVoid)if(n.type===de){if((0,vf.default)("shift+enter",t))return o.insertText(`
`)}else{let a=n.text.length;if(r===0&&a===0)return lL(t,o);if(i===a)return t.preventDefault(),o.splitBlock().setBlocks({type:de,data:{}})}}function lL(t,o){let{value:e}=o;if(e.isExpanded||e.startOffset>0)return;let{startBlock:n,startText:r}=e;if(!(!n||!(n.getFirstText()===r))){if(n.type===de){let a=e.document.getParent(n.key);return a&&Re.isSwaggerFragment(a)&&a.getChildIndex(n.key)===0?o:void 0}if(!(n.type===_r||n.type===La))return t.preventDefault(),n.isVoid?o.removeNodeByKey(n.key):o.setNodeByKey(n.key,{type:de,isVoid:!1})}}c();var kv=b(k()),uL=b(q());c();var Qc=JSON.parse('{"quote":"quote_5I59h","hint":"hint_rnF2j","iconWrapper":"iconWrapper_NJPs7","icon":"icon_abDxV","info":"info_-xeCE","warning":"warning_5BM-F","danger":"danger_UUfHb","success":"success_3o6RV"}');function dL(t){let{children:o}=t;return kv.default.createElement(ve,{tag:"blockquote",...t,contentProps:{style:v4.blockQuote}},kv.default.createElement(U,{style:[D.flex.column,Qc.quote]},kv.default.createElement(Mr.Provider,{value:"quote"},o)))}var v4=uL.StyleSheet.create({blockQuote:{position:"relative",width:"100%"}});c();var ts=b(k()),xv=b(q());c();var bf={info:{title:"Info",cssIcon:v.InfoCircle.CSS,icon:v.InfoCircle},warning:{title:"Warning",cssIcon:v.Warning.CSS,icon:v.Warning},success:{title:"Success",cssIcon:v.CheckCircle.CSS,icon:v.CheckCircle},danger:{title:"Danger",cssIcon:v.Alert.CSS,icon:v.Alert}};c();function pL(t,o){let e=["info","warning","danger","success"];return nt(t,o,[{key:"levels",commands:()=>{let n=t.value.document.assertBlock(o),r=n.data.get("style");return e.map(i=>({key:i,type:1,selected:r===i,title:bf[i].title,icon:bf[i].icon,trigger:()=>{t.change(a=>{a.setNodeByKey(n.key,{data:{style:i}})})}}))}}])}function mL(t){let{node:o,children:e,editor:n}=t,{readOnly:r}=n,i=o.data.toFrozenObject(),a=bf[i.style],s=()=>{let h=["info","warning","danger","success"],y=i.style===h[h.length-1]?h[0]:h[h.indexOf(i.style)+1];n.change(S=>S.setNodeByKey(o.key,{data:{style:y}}))},l=ts.useMemo(()=>pL(n,o.key),[n,o.key]),u=o.nodes.first(),d=Mi(u,o),p=A.ICON_L,f=d.paddingTop+(gr(u)-p)/2,m=a.cssIcon;return ts.createElement(ve,{...t,palette:l,contentProps:{style:[b4.blockHint]}},ts.createElement(U,{style:[Qc.hint,D.flex.row,Qc[i.style]]},ts.createElement(U,{style:[Qc.iconWrapper,D.flex.row,D.flex.justifyContentCenter],inlineStyle:{paddingTop:f,"--icon-size":`${p}px`}},r?ts.createElement(m,{style:Qc.icon}):ts.createElement(xv.TouchableOpacity,{onPress:s},ts.createElement(m,{style:Qc.icon}))),ts.createElement(U,{style:[D.flex.column,D.flex.flex1]},e)))}var b4=xv.StyleSheet.create({blockHint:{position:"relative",width:"100%"}});c();var Ov=b(wi());var gL={onKeyDown:k4},w4=(0,Ov.isKeyHotkey)("backspace"),S4=(0,Ov.isKeyHotkey)("enter"),C4=(0,Ov.isKeyHotkey)("mod+enter");function k4(t,o,e){let{value:n}=o;if(!Eo(n.selection)){if(w4(t)&&n.isCollapsed)return x4(t,o);if(S4(t))return O4(t,o);if(C4(t))return _4(t,o);if(t.key===">")return R4(t,o)}}function x4(t,o){let{value:e}=o,{startOffset:n,selection:r}=e;if(!he.isTextRange(r)||n>0)return;let i=mC(e);if(!i)return;let a=r.anchorKey?i.getClosestBlock(r.anchorKey):null;if(!(!a||!r.isAtStartOf(a))&&i.nodes.size===1)return t.preventDefault(),o.unwrapBlock(i.type)}function O4(t,o){let{value:e}=o,{startBlock:n,selection:r}=e;if(!he.isTextRange(r))return;let i=mC(e);if(i&&!(n&&n.text.length!==0))return t.preventDefault(),o.unwrapBlock(i.type)}function _4(t,o){let{value:e}=o,n=mC(e);if(n)return t.preventDefault(),St(o,n),o}function R4(t,o){let{value:e}=o,{selection:n}=e;if(he.isTextRange(n)&&!(n.startOffset!==0||n.isCollapsed))return t.preventDefault(),o.wrapBlock(Kt),o}function mC(t,o=null){let{document:e,selection:n}=t;if(!he.isTextRange(n)||(o??=t.startBlock,!o))return null;let r=e.getAncestors(o.key);if(!r)return null;let i=r.reverse().find(fL);return i&&fL(i)?i:null}function fL(t){return"type"in t&&(t.type===Kt||t.type===uo)}c();var fC=b(k());c();var ii=b(k()),Js=b(q());var Zd=2,P4=250;function hL(t){let{selection:o}=t,[e,n]=ii.useState(!1),r={"data-cursor":!0},i=o.data.toFrozenObject(),a=Ja(i.clientId),s={backgroundColor:a.base};return ii.createElement(pe,{tag:"span",editable:!1,...r,style:[Jd.cursor]},ii.createElement(wc,{wrapper:xi,onOpen:()=>n(!0),onClose:()=>n(!1),anchor:({ref:l,open:u,close:d})=>ii.createElement(H.WithInteractiveState,{onHoverIn:u,onHoverOut:d},({events:p})=>ii.createElement(Js.View,{ref:l,...p,style:[Jd.carret,s]},ii.createElement(Js.View,{style:[Jd.carretTop,s]})))},ii.createElement(Js.View,{style:[Jd.bubble,e&&Jd.bubbleVisible]},ii.createElement(Js.View,{style:[Jd.bubbleContent,s,g.Padding.smallHorizontal]},ii.createElement(Ci,{theme:{color:Ka(a.base)}},ii.createElement(I4,{userName:i.userDisplayName}))))))}function I4({userName:t}){let[,o]=_(W);return ii.createElement(Js.Text,{numberOfLines:1,style:[o.Caption,o.text]},t)}var Jd=Js.StyleSheet.create({cursor:{position:"absolute"},carret:{userSelect:"none",width:Zd,top:3,height:"1.2em"},carretTop:{position:"absolute",top:-Zd*3,left:-Zd,borderRadius:100,width:Zd*3,height:Zd*3},bubble:{position:"absolute",left:-Zd,top:"-1.2em",width:P4,opacity:0,transition:`opacity ${Fa.TRANSITION_DURATION_LONG}ms ease`},bubbleVisible:{opacity:1},bubbleContent:{position:"absolute",borderRadius:A.RADIUS_M}});c();var yL=b(k());function vL(t){let{children:o,selection:e}=t,n=e.data.toFrozenObject(),r=Ja(n.clientId);return yL.createElement(Dt,{style:[{backgroundColor:r.faded}]},o)}c();var bL="focus",wL="range";var SL={renderSelection:E4};function E4(t){let{type:o}=t;switch(o){case bL:return fC.createElement(hL,{...t});case wL:return fC.createElement(vL,{...t})}}c();var Xe=b(k());c();var pa=b(k());function CL(t){let{editor:o,node:e}=t,n=be(),r=ut(),i=pa.useMemo(()=>nt(o,e.key,[{key:"edit",commands:[{key:"edit_ref",title:"Edit link target",icon:v.PageLink,trigger:()=>Bn(a=>{o.change(s=>{s.setDataByKey(e.key,["ref"],a)})},r,n,{accept:["page","space","collection"]})}]}]),[o,e.key,r]);return pa.createElement(ve,{...t,palette:i},pa.createElement(Ut,{...t},pa.createElement(pa.Suspense,{fallback:pa.createElement(Ua,{icon:xe,title:""})},pa.createElement(T4,{contentRef:e.data.get("ref")}))))}function T4(t){let{contentRef:o}=t,e=Qe(o);return pa.createElement(Ua,{title:e.title,icon:e.icon||e.secondaryIcon,...Fc(e)})}c();var el=b(k()),kL=b(q());function xL(t){let{ancestors:o,node:e,children:n,attributes:r}=t,i=e.data.toFrozenObject(),{blockLayoutComponent:a}=el.useContext(Ve),s=Je(),l=Nd({ancestors:o,node:e.blockNodes.first(),diff:!0});return el.createElement(a,{renderMode:l.renderMode},el.createElement(Us.View,{isPDF:s},el.createElement(U,{style:[D.position.relative,D.flex.column,l.blockStyle.style],inlineStyle:l.blockStyle.inlineStyle},el.createElement(kL.View,{...r},l.diffLine?el.createElement(Uy,{diff:i,...l.diffLine}):null,n))))}c();var OL=b(k()),_L=b(q());function RL(t){let{mark:o,attributes:e,children:n}=t;return OL.createElement(Dt,{style:M4[o.type],...e},n)}var M4=_L.StyleSheet.create({[dg]:{color:tu.added},[pg]:{color:tu.deleted,textDecorationLine:"line-through"},[mg]:{color:tu.modified}});c();var _v=b(k());c();var PL=JSON.parse('{"divider":"divider_osV0o"}');function IL(t){let{attributes:o}=t;return _v.createElement(ve,{...t},_v.createElement(Ut,{...t},_v.createElement(U,{as:"hr",style:PL.divider,...o})))}c();var Ke=b(k());c();var vn=b(k()),wf=b(q());c();var Fo=b(k());function EL(t){let{onClose:o}=t,[e,n]=En(),r=Fo.useRef(null),[i,a]=Fo.useState(!1),s=Yo(i),l=Yo(o),u=Yo(e),d=Fo.useCallback(()=>{u.current||n(()=>l.current())},[l,u]);return Fo.useEffect(()=>yh("editor-block-modal"),[]),Qr({[Ge.EDITOR_SAVE]:p=>{d()}},"editor-block-modal",[]),Fo.useEffect(()=>{let p=null,f=m=>{m.key==="Escape"&&(s.current?(p&&clearTimeout(p),d()):(a(!0),p=setTimeout(()=>{a(!1)},2e3)))};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f),p&&clearTimeout(p)}},[s,d]),Fo.useEffect(()=>{i?r.current?.open():r.current?.close()},[i,r]),Fo.createElement(V,{tooltipRef:r,icon:v.X,disabled:e,onPress:d,title:i?Fo.createElement(Fo.Fragment,null,"Press ",Fo.createElement(In,{inverted:!0,shortcut:"ESC"})," again to save & close"):Fo.createElement(Fo.Fragment,null,"Save & Close ",Fo.createElement(In,{inverted:!0,shortcut:Ge.EDITOR_SAVE})),tooltipPreferredPlacement:"left"})}c();c();c();var TL=$g("05ab87fa95f4c5a09220a4e1067733011498ba1a47c8b145f5ec78dcb9ffe75d",()=>import("https://app.gitbook.com/public/app/chunks/excalidraw.lazy-JO7UA7CR.min.js"));var su=TL;async function ML(t){let{default:{exportToSvg:o}}=await su.load(),e=await o({appState:{exportEmbedScene:!0},elements:t.elements,files:t.files});return new XMLSerializer().serializeToString(e)}c();var gC=nr({getValue:async t=>{if(!t)return{elements:[],files:{}};let{default:{loadFromBlob:o}}=await su.load(),n=await(await fetch(t)).blob(),r=await o(n,null,null);return{elements:r.elements,files:r.files}}}),LL=nr({getValue:async({downloadURL:t,theme:o})=>{let{default:{exportToSvg:e}}=await su.load(),n=await gC.readAsync(t),r=await e({appState:{viewBackgroundColor:"transparent",exportWithDarkMode:o==="dark"},elements:n.elements,files:n.files});return r.style.maxWidth="100%",r.removeAttribute("width"),r.removeAttribute("height"),r}});function NL(t){let{blockData:o,onClose:e}=t,[,n]=_(A4),r=vn.useRef(),i=Pl(Fa.fade),a=Pl(Fa.pop,{onEnd:()=>{r.current?.refresh()}});return vn.createElement(Tn,null,vn.createElement(wf.View,{ref:i,style:[G.absoluteFill,n.modalBackdrop]},vn.createElement(wf.View,{ref:a,style:n.modalBody},vn.createElement(vn.Suspense,{fallback:vn.createElement(Lo,{size:"large"})},vn.createElement(L4,{blockData:o,onClose:e,excalidrawRef:r})))))}function L4(t){let{excalidrawRef:o,blockData:e,onClose:n}=t,r=Rs(),i=ho(),{Excalidraw:a,useExcalidrawStyle:s}=su.loadSuspense().default;s();let u=Qe(e.ref).resolution?.extra?.file,{result:d,error:p}=gC.readSafe(u?.downloadURL||null),f=async()=>{let m=o.current;if(!m){n(void 0);return}let h=m.getSceneElements(),y=m.getFiles();if(d&&d.elements&&!N4(d.elements,h)){n(void 0);return}let S=await ML({elements:h,files:y});n(new File([new Blob([S])],u?.name||"file.excalidraw.svg",{type:"image/svg+xml"}))};return vn.useEffect(()=>{p&&i.notify({kind:"danger",icon:v.Warning.CSS,title:"Error loading drawing",details:p.expose?p.message:"An unexpected error occurred while loading the drawing"})},[p]),vn.createElement(wf.View,{style:[G.absoluteFill]},vn.createElement(a,{ref:o,initialData:{...d,scrollToContent:!0},theme:r.color,UIOptions:{canvasActions:{export:!1,loadScene:!1,saveToActiveFile:!1,toggleTheme:!1,saveAsImage:!1,changeViewBackgroundColor:!1,clearCanvas:!1}},renderTopRightUI:(m,h)=>vn.createElement(wf.View,null,vn.createElement(EL,{onClose:f}))}))}function N4(t,o){return t.length!==o.length?!0:t.some((e,n)=>{let r=o[n];return e.version!==r.version})}var A4=G.create({modalBackdrop:t=>({backgroundColor:t.colors.backdrop.background}),modalBody:t=>({position:"absolute",top:g.large,bottom:g.large,right:g.xlarge,left:g.xlarge,borderRadius:A.RADIUS_L,backgroundColor:t.colors.background.main,overflow:"hidden"})});c();var io=b(k()),cu=b(q());var DL=io.forwardRef(function(o,e){let{readOnly:n,contentRef:r}=o,i=io.useRef(null),a=Rs(),s=kd(),[,l]=_(BL),[u,d]=io.useState(null),f=Qe(r).href,m=u;return r&&!f&&(m=new Ui.NotFound("Drawing file not found, the file may have been deleted")),io.useImperativeHandle(e,()=>({openInGallery:()=>{s.open([{url:f}])}})),io.useEffect(()=>{let h=!0;return LL.readAsync({downloadURL:f,theme:a.color}).then(y=>{let S=i.current;S&&y&&h&&(S.innerHTML="",S.appendChild(y.cloneNode(!0)))},y=>{h&&d(y)}),()=>{h=!1}},[f,a.color]),m?io.createElement(AL,{kind:"danger",icon:v.Warning,message:m.expose?m.message:"An error occurred while rendering this drawing file."}):io.createElement(cu.View,{style:l.wrapper},f?io.createElement("div",{ref:i},io.createElement("img",{src:f,style:{width:"100%"}})):io.createElement(AL,{icon:v.EditDrawing,message:n?"Drawing file not found":"Double click to start sketching out your thoughts."}))});function AL(t){let{icon:o,message:e,kind:n="default"}=t,[,r]=_(BL),[,i]=_(W);return io.createElement(cu.View,{style:[r.fallback,g.Padding.large,w.alignCenter,w.justifyContentCenter]},io.createElement(cu.View,null,io.createElement(o,{size:A.ICON_XL,style:n==="danger"?i.danger:i.textMuted})),io.createElement(cu.View,{style:g.Margin.mediumTop},io.createElement(cu.Text,{style:[n==="danger"?i.danger:i.textMuted,i.Body]},e)))}var BL=G.create({wrapper:{},fallback:t=>({height:200,borderWidth:1,backgroundColor:t.colors.background.main,borderColor:t.colors.border.mid,borderRadius:A.RADIUS_M,borderStyle:"dashed"})});var WL=H.createInteractiveHandle("drawing-block");function zL(t){let{node:o,editor:e,isSelected:n}=t,{readOnly:r}=e,i=Wt(),{uploadFiles:a,updateFile:s}=Ke.useContext(Ve),[l,u]=Ke.useState(null),[d,p]=En(),f=Ke.useRef(),m=Ke.useRef(null),h=o.data.toFrozenObject(),y=()=>{S.current?.close(),u("edit")},S=Ke.useRef(null),C=Ke.useRef(null);Ke.useEffect(()=>()=>{C.current&&clearTimeout(C.current)},[]);let x=Kh(y),O=R=>{r?m.current?.openInGallery():(C.current&&clearTimeout(C.current),x(R)?S.current?.close():(S.current?.open(),C.current=setTimeout(()=>{S.current?.close()},1e3)))},E=R=>{f.current=R?URL.createObjectURL(R):void 0,R&&p(async()=>{let T=h.ref;h.ref&&T?await s(T,R):T=(await a([R]))[0],Tg(T,h.ref)&&e.change(M=>{M.setDataByKey(o.key,["ref"],T)})}),u(null)},P=async()=>{let[R]=await i.prompt({title:"Replace drawing file",acceptURL:!1,accept:"drawings"});R?.kind==="file"&&e.change(T=>{T.insertDataByKey(o.key,["ref"],R)})},L=nt(e,o.key,[{key:"types",commands:[{key:"edit",title:"Edit drawing",icon:v.EditDrawing,trigger:()=>{y()}},{key:"files",title:"Replace file\u2026",icon:v.Replace,trigger:()=>{P()}}]}]);return Ke.createElement(Ke.Fragment,null,Ke.createElement(ve,{...t,palette:L},Ke.createElement(Ut,{...t},Ke.createElement(H.TouchableOpacity,{onPress:O},Ke.createElement(H.View,{handle:WL},Ke.createElement(Ke.Suspense,{fallback:Ke.createElement(ni,null)},Ke.createElement(DL,{ref:m,readOnly:r,contentRef:f.current&&d?{kind:"url",url:f.current}:h.ref})),r?null:Ke.createElement(Ci,{theme:{color:"dark"}},Ke.createElement(Va,{ref:S,preferredPlacement:"left",tooltip:"Double click to edit!"},(R,T)=>Ke.createElement(D4,{ref:T,saving:d,isSelected:n,palette:L})))))),Ke.createElement($c,{...t})),Ke.createElement(Ct,null,l==="edit"?Ke.createElement(NL,{blockData:h,onClose:E}):null))}var D4=Ke.forwardRef(function(o,e){let{isSelected:n,saving:r,palette:i}=o,[,a]=_(B4);return Ke.createElement(H.View.Child,{ref:e,descendantOf:WL,style:[a.blockToolbar,w.directionRow],inactiveStyle:n||r?je.visible:je.hidden,activeStyle:je.visible},r?Ke.createElement(V,{size:"small",icon:xe},"Saving"):i.groups.map(s=>Array.isArray(s.commands)?s.commands:[]).flat().map((s,l,u)=>Ke.createElement(V,{key:s.key,title:s.title,size:"small",icon:s.icon,style:[l<u.length-1?g.Margin.smallRight:null],onPress:()=>{s.trigger?.(i)}})))}),B4=G.create({blockToolbar:t=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:A.RADIUS_M,backgroundColor:t.colors.background.mid,...t.shadows.base})});c();var os=b(k());function FL(t){let{node:o,editor:e}=t,n=Wt(),r=async()=>{let[a]=await n.prompt({title:"Replace file"});a?.kind==="file"&&e.change(s=>{s.insertDataByKey(o.key,["ref"],a)})},i=nt(e,o.key,[{key:"types",commands:()=>[{key:"files",title:"Replace file\u2026",icon:v.Paperclip,trigger:()=>{r()}}]}]);return os.createElement(ve,{...t,palette:i},os.createElement(Ut,{...t},os.createElement(os.Suspense,{fallback:os.createElement(Ua,{icon:xe,title:""})},os.createElement(W4,{...t,onReplace:r}))),os.createElement($c,{...t}))}function W4(t){let{node:o,editor:e,onReplace:n}=t,{ref:r}=o.data.toFrozenObject(),a=Qe(r).resolution?.extra?.file,s=()=>{a?Ts(yc(a.downloadURL)):e.readOnly||n()},l=Mo(_d,{file:a},[a]);return os.createElement(Ua,{onPress:s,icon:l,title:a?a.name:"File has been deleted",subtitle:a?Tm(a.size):void 0,details:a?eE(a):void 0})}c();var Vn=b(k());c();var tl=b(k()),VL=b(q());function qL(t){let{node:o,editor:e,onClose:n}=t,r=wg(o.text),[i,a]=tl.useState(()=>o.data.get("id")||""),s=u=>{let d=wg(u);d.length===u.length?a(d):a(u)},l=()=>{e.change(u=>{i?u.setDataByKey(o.key,["id"],wg(i)):u.removeDataByKey(o.key,["id"])}),n()};return tl.createElement(vo,{size:"small",title:"Edit heading anchor",footer:tl.createElement(VL.View,{style:[w.directionRow,w.justifyContentEnd]},tl.createElement(V,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Close"),tl.createElement(V,{kind:"primary",onPress:l},"Save")),onClose:n},tl.createElement(no,{autoFocus:!0,size:"large",icon:v.Hash,label:"Anchor",labelDescription:"Edit this anchor to customize a nice looking url for this heading.",value:i,onChangeText:s,onSubmit:l,placeholder:r}))}var z4=Z.createResponsiveComponent(pe);function GL(t){let{editor:o,node:e,parent:n,children:r}=t,[,i]=_(W),[,a]=_(V4),[s,l]=Vn.useState(null),u=Vn.useContext(Wc),d=Vn.useContext(Mr),p=Vn.useMemo(()=>Cv(o,e.key,[{key:"edit",commands:[{key:"edit",title:"Edit anchor",icon:v.Link,trigger:()=>{l("edit")}}]}]),[o,e.key]),{anchorElement:f,anchoredBlockId:m,anchoredBlockInteractiveState:h,onAnchoredBlockPress:y}=av(e,{accessibilityLabel:"Direct link to heading",anchorIconSize:H4[e.type]}),S=n.type===Kt;return Vn.createElement(Vn.Fragment,null,Vn.createElement(ve,{...t,palette:p},Vn.createElement(z4,{tag:F4(e.type),nativeID:m,onClick:S?()=>{}:()=>y(),...h.events,style:[w.directionRow,w.alignEnd]},Vn.createElement(Z.Text,{selectable:!0,mobileStyle:[G4[e.type]],desktopStyle:[q4[e.type]],nativeID:`text-${m}`,style:[i.text,a[u],a[d]]},r,S?null:f))),Vn.createElement(Ct,null,s==="edit"?Vn.createElement(qL,{node:e,editor:o,onClose:()=>l(null)}):null))}function F4(t){switch(t){case Fe:return"h2";case qe:return"h3";case tt:return"h4";default:throw new Error(`invalid node type (${t}) for heading`)}}var V4=G.create({left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"},root:{},caption:{},quote:{},swaggerParameter:{}}),q4={[Fe]:go.Heading1,[qe]:go.Heading2,[tt]:go.Heading3},G4={[Fe]:go.Heading2,[qe]:go.Heading3,[tt]:go.Body},H4={[Fe]:A.ICON_L,[qe]:A.ICON_S,[tt]:A.ICON_XXS};c();var Rv=b(k());function HL(t){let{node:o,children:e,style:n,attributes:r}=t,{sections:i}=Rv.useContext(Ii),a=i.get(o.key);return Rv.createElement("div",{id:a,...r,style:n},e)}c();var hC=b(k()),KL=b(q());function XL(t){let{node:o,editor:e,children:n}=t,{align:r="center"}=o.data.toFrozenObject(),i=Wt(),a=Ti(e,o.key),s=u=>{e.change(d=>{d.insertDataByKey(o.key,["align"],u)})},l=nt(e,o.key,[{key:"types",commands:()=>[{key:"files",title:"Add images\u2026",icon:v.Image,trigger:()=>{i.prompt({accept:"images",title:"Select image",acceptURL:!0}).then(u=>{e.change(d=>{u.forEach(p=>{d.appendNodeByKey(o.key,Uo.createImageBlock(p))})})})}}]},{key:"align",commands:[{key:"left",type:1,title:"Left align",selected:r==="left",icon:v.AlignTextLeft,trigger:()=>s("left")},{key:"center",type:1,title:"Center",selected:r==="center",icon:v.AlignTextCenter,trigger:()=>s("center")},{key:"right",type:1,title:"Right align",selected:r==="right",icon:v.AlignTextRight,trigger:()=>s("right")}]},...a?[a]:[]]);return hC.createElement(ve,{palette:l,...t},hC.createElement(Z.View,{style:[w.directionRow,r==="center"&&w.justifyContentCenter,r==="left"&&w.justifyContentStart,r==="right"&&w.justifyContentEnd,K4.imagesWrapper],mobileStyle:[w.wrap,w.justifyContentCenter]},n))}var K4=KL.StyleSheet.create({imagesWrapper:{columnGap:g.medium,rowGap:g.medium}});c();var fe=b(k()),as=b(q());c();var ma=b(k()),Pv=b(q());function Iv(t){let{node:o,editor:e,onClose:n}=t,[r,i]=ma.useState(()=>Uo.getImageAltText(o)||""),a=()=>{e.change(s=>{s.insertDataByKey(o.key,["alt"],r)}),n()};return ma.createElement(vo,{title:"Set image alt text",onClose:n,footer:ma.createElement(Pv.View,{style:[w.directionRow,w.justifyContentEnd]},ma.createElement(V,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Cancel"),ma.createElement(V,{kind:"primary",onPress:a},"Save"))},ma.createElement(Pv.View,{style:[g.Margin.largeBottom]},ma.createElement(Pv.View,{style:[g.Margin.mediumBottom]},ma.createElement(eh,null,"This will be read out by screen readers when the image is encountered. Describe the image in detail \u2013 it's how visually impaired readers know what's in front of them.")),ma.createElement(no,{autoFocus:!0,size:"large",value:r,placeholder:"Edit alt text",onChangeText:i,onSubmit:a})))}c();var Ev=b(k());function Tv(t){let{editor:o,node:e,style:n}=t,r=Ev.useRef(null),i=ce(r),a=Wt(),s=async(u,d,p=!1)=>{let[f]=await a.prompt({title:d,accept:"images",acceptURL:!0});f&&o.change(m=>{m.insertDataByKey(e.key,[u],f),p&&m.removeDataByKey(e.key,["refDark"]),e.object==="block"&&(m.removeDataPathByKey(e.key,["height"]),m.removeDataPathByKey(e.key,["width"]))})},l=()=>{o.change(d=>d.focus());let u=e.data.toFrozenObject();i.open(ie({groups:[{key:"replace",commands:[{key:"all",icon:v.Replace,title:"Replace image",subtitle:"For both light and dark modes",trigger:()=>{s("ref","Replace image",!0)}}]},{key:"byTheme",commands:u.refDark?[{key:"light",icon:v.ThemeLight,title:"For Light mode",trigger:()=>{s("ref","Replace image for light mode")}},{key:"dark",icon:v.ThemeDark,title:"For Dark mode",trigger:()=>{s("refDark","Replace image for dark mode")}}]:[{key:"dark",icon:v.ThemeDark,title:"Add image for Dark mode",trigger:()=>{s("refDark","Add image for dark mode")}}]}]}))};return Ev.createElement(bt,{ref:r,active:i.opened,size:"small",label:"Replace image",tooltipTitle:"Replace image",leadingIcon:v.Replace.CSS,trailingIcon:i.opened?v.ChevronUp.CSS:v.ChevronDown.CSS,onPress:l,style:n,iconOnly:!0})}c();c();c();var Dr=b(k());var X4=H.createInteractiveComponent(v.EmojiReaction);function UL(t){let{analyticsContext:o,page:e,size:n,readOnly:r=!0}=t,i=Dr.useRef(null),[,a]=_(W),[s,l]=En(),u=$t(),d=async p=>{ze(u),i.current?.close(),p!==e.emoji&&(await l(()=>u.change(f=>{f.updatePage(e.id,{emoji:p})})),re({...o,...p?{type:"edit_pick_page_emoji",pageKind:e.type,emoji:p}:{type:"edit_remove_page_emoji",pageKind:e.type}}))};return r?e.emoji?Dr.createElement(No,{code:e.emoji,size:n}):null:Dr.createElement(wc,{ref:i,wrapper:xi,anchor:({ref:p,opened:f,toggle:m})=>Dr.createElement(H.TouchableOpacity,{ref:p,onPress:m},s?Dr.createElement(xe,{size:n}):Dr.createElement(Dr.Fragment,null,e.emoji?Dr.createElement(No,{code:e.emoji,size:n}):Dr.createElement(X4.Child,{size:n,style:f?a.textMid:a.textMuted,activeStyle:a.textMid})))},Dr.createElement(Mn,{kind:"wide",preferredAlignment:"middle"},Dr.createElement(ry,{onPick:d,onRemove:e.emoji?()=>d(void 0):void 0})))}c();var ae=b(k()),ip=b(q());c();var YL=JSON.parse('{"pageCoverBleedFull":"pageCoverBleedFull_eqtqd"}');c();var $L=b(k());var jL=new Set;function ZL(t){let{hivePage:o,analyticsContext:e}=t;return $L.useCallback(()=>{let n=`${o.contentId}/${o.branchId}/${o.pageId}`;jL.has(n)||(jL.add(n),re({...e,page:o.pageId,type:"edit_page_document_start",collaborators:o.dataSync.presences.length}))},[o,e])}var en={};AD(en,{COMMENTS_COLUMN_EXPANDED_WIDTH:()=>Lv,MAX_PAGE_OUTLINE_WIDTH:()=>ol,PAGE_BODY_DESKTOP_H_PADDING:()=>Ft,PAGE_BODY_DESKTOP_WIDTH:()=>Mv,PAGE_BODY_MAX_WIDTH:()=>Br,PAGE_BODY_MOBILE_H_PADDING:()=>Qo,PAGE_OUTLINE_WIDTH:()=>bC,PUBLIC_DESKTOP_HEADER_HEIGHT:()=>wC,PUBLIC_MOBILE_HEADER_HEIGHT:()=>U4,SPACE_HEADER_HEIGHT:()=>yC,TOC_DESKTOP_WIDTH:()=>vC,columnsWidthThreadhold:()=>Sf,getPageOutlineWrapperWidth:()=>SC,getToCWrapperDesktopWidth:()=>JL,pageSwitchThreadhold:()=>nl});c();var yC=A.L,Br=750,Ft=110,Qo=g.medium,Mv=Br+2*Ft,vC=300,Lv=300,bC=220,ol=300,wC=A.XL,U4=A.L;function Sf(t,o=0){let e=o+vC+Mv+bC;return t===2||(e+=Lv-Qo),e}function nl(t=0){return t+Mv}function JL(t){let o=`(100vw - ${Mv}px) / 2 - ${t||0}px`;return`max(${vC}px, calc(${o}))`}function SC(t,o){let e=`100vw - ${JL(t)} - ${Br}px - ${Ft}px - ${typeof o>"u"?Ft:o||0}px - ${t||0}px`;return`max(${bC}px, calc(${e}))`}c();var Nv=b(k());var Av=Nv.createContext({baseRevision:void 0,pages:[],diffs:new Map,diffMode:null});c();var lu=b(k());var QL=lu.createContext({pages:[],setContentDiffPage:t=>{}});c();var uu=b(k());var e6="hive-rtc-beta-notification-dismissed",t6=!1;function o6(t){let o=LP(t),e=g_(),n=ho(),r="rtc-toaster",i=o.filter(a=>a.data.userId&&a.data.userId!==e?.uid);uu.useEffect(()=>{t6||i.length===0||(t6=!0,!Ir.get(e6)&&n.notify({id:r,kind:"info",icon:v.Users.CSS,title:"Realtime Collaboration (Beta)",details:uu.createElement(uu.Fragment,null,uu.createElement(At,null,"Explore live editing with your team. Keep in mind, it's still in Beta so you may encounter some bugs. We appreciate your patience and feedback.")),timeout:1e4,actions:[{label:"Got it, dismiss",onPress:()=>{Ir.set(e6,!0),n.close(r)}}]}))},[i.length])}c();var qn=b(k()),ep=b(q());c();var r6=b(k());c();var n6=JSON.parse('{"commentHalo":"commentHalo_0AauK"}');function CC(t){let{node:o}=t,{screen:e}=Ga(),n=tr(vS);if(!o)return null;let r=e.type==="space"&&e.sideSheet?.type==="comments"?e.sideSheet.node:null;return(n&&n.highlighting&&n.node!==r?n.node:null)===o||r===o?r6.default.createElement(U,{style:[n6.commentHalo],as:"span",contentEditable:!1}):null}CC.displayName="BlockCommentHalo";c();var ns=b(k()),i6=b(T1());var a6=t=>{let{nodeKey:o,visible:e,buttonSize:n,style:r,shortcutsActive:i}=t,a=ns.useContext(wS),{navigate:s}=ye(),l=ns.useMemo(()=>a(o),[o]),u=(0,i6.useSubscription)(l),d=ns.useMemo(()=>(u??[]).reduce((S,C)=>{let x=Object.values(C.replies).reduce((O,E)=>O+E.count,0);return 1+S+x},0),[u]),p=d>0,f=u?.[0],m=()=>{f&&s({screen:{type:"space",space:f.space,sideSheet:{type:"comments",node:f.node??void 0,comment:f.key}}})},h=()=>{s({screen:{sideSheet:{type:"comments",node:o,context:"post",comment:void 0}}})},y=()=>p&&f?m():h();return Qr(i?{[Ge.EDITOR_COMMENT]:y}:{},["editor-selection-collapsed","editor-selection-expanded"],[i,f]),ns.createElement(pe,{editable:!1,style:[e||p?je.visible:je.hidden,r],"data-hide-on-drag":!0},ns.createElement(D1,{kind:"secondary",size:"small"},ns.createElement(bt,{leadingIcon:v.Comment.CSS,tooltipTitle:p?`${d} Comment${d>1?"s":""}`:"Comment",onPress:y,size:n,iconOnly:!p,label:p?`${d}`:"Comment"}),p?ns.createElement(bt,{leadingIcon:v.Plus.CSS,size:n,tooltipTitle:"Leave another comment",label:"Leave another comment",iconOnly:!0,onPress:h}):null))};c();var xC=b(k());c();var kC=JSON.parse('{"blockWrapper":"blockWrapper_y0Ubs","pageWrapper":"pageWrapper_ca2kA"}');function s6(t){let{children:o,style:e}=t;return xC.createElement(U,{style:[kC.pageWrapper,D.margin.noneVertical,D.margin.autoHorizontal,e]},o)}function Qd(t){let{children:o,style:e}=t;return xC.createElement(U,{style:[kC.blockWrapper,D.margin.noneVertical,D.margin.autoHorizontal,e]},o)}function Y4(t){let{children:o,renderMode:e,isDiffViewEnabled:n,isFullPage:r,isPDF:i,node:a,interactive:s}=t,{desktopSidebarWidth:l}=qn.useContext(ra),{customBreakpointsPageBodyStyles:u}=qn.useMemo(()=>({customBreakpointsPageBodyStyles:{[Sf(2,l)]:w.justifyContentCenter}}),[l]);if(e==="unstyled")return qn.createElement(ep.View,{...s?.events},o);let d=e==="full-width"?qn.Fragment:Qd;return qn.createElement(ep.View,{style:[w.flex1,i?c6.pdfContainer:null]},qn.createElement(d,null,qn.createElement(Z.View,{style:[w.flex1,w.directionRow,r?w.justifyContentCenter:w.justifyContentEnd],mobileStyle:[w.justifyContentCenter],customBreakpointsStyles:u,...s?.events},qn.createElement(ep.View,{style:[w.flex1]},qn.createElement(CC,{node:a}),qn.createElement(Z.View,{mobileStyle:[n?c6.pageBodyMobileWithDiff:null]},o)))))}function l6(t){let{isCommentMarginVisible:o,isDiffViewEnabled:e,isFullPage:n}=t,r=Je();return qn.useMemo(()=>[i=>qn.createElement(Y4,{...i,isPDF:r,isDiffViewEnabled:e,isCommentMarginVisible:o,isFullPage:n}),r||!o?void 0:a6],[e,n,o,r])}var c6=ep.StyleSheet.create({pdfContainer:{breakInside:"avoid",breakBefore:"auto"},pageBody:{maxWidth:Br+2*Ft},pageBodyWithComments:{maxWidth:Br+Ft,paddingRight:0},pageBodyMobileWithDiff:{marginLeft:Qo*2},pageBodyDesktopLeftMargin:{marginLeft:Ft},pageBodyDesktopRightPadding:{paddingRight:Ft},pageBodyMobileLeftMargin:{marginLeft:Qo},pageBodyMobileRightPadding:{paddingRight:Qo},pageBodyPDFLeftMargin:{marginLeft:Qo},pageBodyPDFRightPadding:{paddingRight:Qo}});c();var ge=b(k()),tn=b(q());c();var OC=b(WD()),ht=b(k()),Wi=b(q());function u6(t){let{analyticsContext:o,parentPages:e,childPages:n,onClose:r,revision:i,page:a}=t,[,s]=_(Z4),[l,u]=En(),d=$t(),p=async(f=!0)=>{ze(d),await u(async()=>{await d.change(m=>{[a,...f?e:[],...f?n:[]].forEach(h=>{m.resolveConflict(h.id)})}),await re({...o,type:"edit_conflicts_keep_page",pageKind:a.type})}),r()};return ht.createElement(vo,{title:"Keep page",onClose:r,footer:ht.createElement(Wi.View,{style:[w.directionRow,w.justifyContentEnd]},ht.createElement(V,{kind:"secondary",onPress:()=>{},style:g.Margin.smallRight,disabled:l},"Cancel"),ht.createElement(im,{kind:"secondary",onPress:()=>p(!1),style:g.Margin.smallRight},"Keep only this page"),ht.createElement(im,{kind:"merge",onPress:()=>p()},"Keep"))},(0,OC.default)(e)?null:ht.createElement(Wi.View,{style:[(0,OC.default)(n)?null:s.parentPages]},ht.createElement(j4,{revision:i,pages:e,onClose:r})),ht.createElement($4,{revision:i,pages:n,onClose:r}))}function j4(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=_(W),i=o.length;return o.length?ht.createElement(Wi.View,{style:[g.Margin.mediumTop]},ht.createElement(Wi.View,{style:[w.directionRow,g.Margin.smallBottom]},ht.createElement(yo,{kind:"warning",icon:v.Warning}),ht.createElement(Wi.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",i>1?"are":"is"," ",o.length," conflicted parent"," ",ht.createElement(oa,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(oa,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(Wi.View,null,o.map(a=>{let s=n?.pages[a.id];return ht.createElement(Es,{key:a.id,layout:"wide",icon:()=>s==="deleted-in-base-subtree-modified-in-head"||s==="deleted-in-head-subtree-modified-in-base"?ht.createElement(yo,{kind:"warning",icon:v.Conflict}):ht.createElement(yo,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}function $4(t){let{pages:o,revision:e}=t,{conflicts:n}=e,[,r]=_(W),i=o.length;return o.length?ht.createElement(Wi.View,{style:[g.Margin.mediumTop]},ht.createElement(Wi.View,{style:[w.directionRow,g.Margin.smallBottom]},ht.createElement(yo,{kind:"warning",icon:v.Warning}),ht.createElement(Wi.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",o.length>1?"are":"is"," ",o.length," nested"," ",ht.createElement(oa,{count:i,singular:"page",plural:"pages"}),". Keeping the current page, you would keep"," ",ht.createElement(oa,{count:i,singular:"it",plural:"all of them"}))),ht.createElement(Wi.View,null,o.map(a=>{let s=n?.pages[a.id];return ht.createElement(Es,{key:a.id,layout:"wide",icon:()=>s==="deleted-in-base-subtree-modified-in-head"||s==="deleted-in-head-subtree-modified-in-base"?ht.createElement(yo,{kind:"warning",icon:v.Conflict}):ht.createElement(yo,{kind:"danger",icon:v.Trashcan}),title:a.title})}))):null}var Z4=G.create({parentPages:t=>({borderBottomColor:t.colors.border.mid,borderBottomWidth:1,marginBottom:g.large,paddingBottom:g.large})});c();var It=b(k()),ai=b(q());c();var Wr=b(k()),Dv=b(q());var d6=4;function p6(t){let{space:o,page:e,readOnly:n,...r}=t,[i,a]=Wr.useState(!1),s=RC(o,e),l=_C();if(s.length===0)return null;let u=i?s:s.slice(0,d6),d=s.length-d6,p=!i&&d>0;return Wr.createElement(Dv.View,{...r,style:[w.directionRow,w.wrap]},u.map(f=>Wr.createElement(Dv.View,{key:f.key,style:[g.Margin.mediumRight,g.Margin.mediumTop]},Wr.createElement(V,{kind:"default",size:"small",icon:v.ArrowDownLeft,onPress:()=>l(f)},f.page.title))),p?Wr.createElement(Dv.View,{style:[g.Margin.mediumTop]},Wr.createElement(V,{kind:"grey",size:"small",onPress:()=>a(!0),title:Wr.createElement(Wr.Fragment,null,"Show ",d," more"," ",Wr.createElement(oa,{count:d,singular:"backlink",plural:"backlinks"}))},`+${d} more`)):null)}function _C(){let{navigate:t}=ye();return Wr.useCallback(o=>{let{page:e,revision:n}=o;if(e.type==="link")return;let r=oo(n,e.id);t({screen:i=>i.type==="space"&&n.contentId===i.space?{page:r}:{type:"space",space:n.contentId,page:r,changeRequest:void 0,revision:void 0}})},[])}function RC(t,o){return J4([{kind:"page",page:o.id},{kind:"page",page:o.id,space:t.key}]).filter(n=>n.page.id!==o.id||n.revision.contentId!==t.key)}function J4(t){let o=t.map(i=>XO(i)),[e]=Rc([UO(o)]),n=be(),r=zx(e,i=>{let a=mh([ea(i.space)])[0]?.result;if(a)return Wx(()=>n.store.getRevision(a.key,a.revision))});return e.map((i,a)=>{let s=r[a];return s?Object.keys(i.pages).filter(u=>Object.keys(i.pages[u].references).some(d=>o.includes(d))).map(u=>{let d=s.pages[u];return d?{key:`${s.contentId}-${u}`,revision:s,page:d}:null}).filter(ue):[]}).flat().sort((i,a)=>i.page.id<a.page.id?-1:i.page.id>a.page.id?1:0)}function Bv(t){let{space:o,analyticsContext:e,page:n,onClose:r,revision:i}=t,[,a]=_(W),s=$t(),l=async u=>{ze(s),u&&(await s.change(d=>{d.removePage(n.id,{deleteEmptyGroupParent:!0})}),re({...e,type:"edit_remove_page",pageKind:n.type})),r()};return It.createElement(lm,{title:n.type==="group"?"Delete group":"Delete page",kind:"danger",confirmButtonText:"Delete",onComplete:l},It.createElement(ai.View,null,It.createElement(ai.Text,{style:[a.Body,a.text]},"Confirming will delete all the content; however, it will still be available in the version history.")),It.createElement(It.Suspense,{fallback:null},It.createElement(Q4,{space:o,page:n,onClose:r})),n.type!=="link"?It.createElement(eF,{revision:i,page:n,onClose:r}):null)}function Q4(t){let{space:o,page:e,onClose:n}=t,[,r]=_(W),i=_C(),a=RC(o,e);return a.length===0?null:It.createElement(ai.View,{style:[g.Margin.mediumTop]},It.createElement(ai.View,null,It.createElement(ai.Text,{style:[r.Label,r.textMuted]},"Deleting this page will break links in the following ",a.length," pages:")),It.createElement(ai.View,{style:[w.directionRow,w.wrap]},a.map(s=>It.createElement(ai.View,{key:s.key,style:[g.Margin.smallRight,g.Margin.smallTop]},It.createElement(V,{kind:"secondary",size:"small",icon:v.ArrowDownLeft,onPress:()=>{n(),i(s)}},s.page.title)))))}function eF(t){let{page:o,revision:e,onClose:n}=t,[,r]=_(W),{navigateToPage:i}=zc(),s=Ic(e,o.id).map(u=>e.conflicts?.pages[u.id]==="deleted-in-base"?u:null).filter(ue),l=s.length;return l?It.createElement(ai.View,{style:[g.Margin.mediumTop]},It.createElement(ai.View,{style:[w.directionRow,g.Margin.mediumBottom]},It.createElement(yo,{kind:"warning",icon:v.Warning}),It.createElement(ai.Text,{style:[g.Margin.mediumLeft,r.Label,r.text,r.Bold]},"There ",l>1?"are":"is"," ",s.length," nested"," ",It.createElement(oa,{count:Object.keys(s.length).length,singular:"page",plural:"pages"})," ","deleted in the primary content but modified in your change request.",It.createElement("br",null),"Deleting the current page, you would delete ",l>1?"all of them":"it",".")),It.createElement(ai.View,null,s.map(u=>It.createElement(Es,{key:u.id,layout:"wide",icon:()=>It.createElement(yo,{kind:"danger",icon:v.Trashcan}),title:u.title,buttons:[It.createElement(V,{size:"medium",kind:"secondary",onPress:()=>{n(),i(e,u.id)}},"Open")]})))):null}function m6(t){let{page:o,document:e,conflictType:n,pageWithComments:r,pageIsDiff:i}=t,a=n===!1,[,s]=_(nF),l=$t(),[u,d]=En(),p=ho(),f=Zi.getDocumentConflicts(e),m=f.isEmpty(),h=()=>{ze(l),m&&d(async()=>{await l.change(S=>{S.resolveConflict(o.id)}),l.revision.conflicts||p.notify({kind:"success",icon:v.CheckCircle.CSS,title:"All conflicts have been resolved",details:"You can now merge this change request."})})},y=()=>{switch(n){case"deleted-in-head":case"deleted-in-base":case"deleted-in-base-subtree-modified-in-head":case"deleted-in-head-subtree-modified-in-base":return ge.createElement(oF,{...t,conflictType:n,onPressMarkAsResolved:h,loading:u,hasBeenResolved:a});case!1:case"document-conflict":return ge.createElement(tF,{conflictNodes:f,canBeResolved:m,loading:u,onPressMarkAsResolved:h,hasBeenResolved:a,...t});default:Ce(n)}};return ge.createElement(tn.View,{style:[w.directionRow,w.justifyContentCenter,g.Margin.mediumBottom,s.alert]},ge.createElement(tn.View,{style:[w.flex1,r||i?s.alertWithComments:s.alertFullWidth]},ge.createElement(tn.View,{style:[w.directionRow,w.alignCenter,g.Padding.mediumVertical,g.Padding.mediumHorizontal,s.alertInner]},y())))}var tF=t=>{let{hasBeenResolved:o,canBeResolved:e,loading:n,conflictNodes:r,onPressMarkAsResolved:i}=t,[,a]=_(W),s=ge.useRef(),l=f=>{let m=Sc(f);m&&ZP(m)},u=f=>{let h=(s.current?r.findIndex(S=>S.key===s.current):-1)+f;h<0?h=r.size-1:h>=r.size&&(h=0);let y=r.get(h)?.key;y&&(s.current=y,l(y))},d=()=>{u(1)},p=()=>{u(-1)};return ge.createElement(tn.View,{style:[w.flex1,w.directionColumn]},ge.createElement(tn.View,{style:[w.directionRow]},ge.createElement(tn.View,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},o?ge.createElement(yo,{kind:"success",size:"large",icon:v.Check}):ge.createElement(yo,{kind:"merge",size:"large",icon:v.Conflict})),ge.createElement(tn.View,{style:[w.flex1,w.directionColumn]},ge.createElement(tn.Text,{style:[a.Label,a.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":ge.createElement(ge.Fragment,null,"This page has ",e?"no":r.size," ","unresolved"," ",ge.createElement(oa,{count:r.size,singular:"conflict",plural:"conflicts"})," ","with the primary content."," ",e?"Confirm by marking this page as resolved.":"Resolve them by editing this document.")),o?null:ge.createElement(tn.View,{style:[w.directionRow,w.wrap]},e?null:ge.createElement(tn.View,{style:[w.directionRow,w.wrap,g.Margin.smallBottom]},ge.createElement(V,{style:[g.Padding.noneLeft],size:"medium",rightIcon:v.ChevronUp,onPress:p,testID:"conflictBanner.prevButton"},"Prev"),ge.createElement(V,{size:"medium",rightIcon:v.ChevronDown,onPress:d,style:g.Margin.smallRight,testID:"conflictBanner.nextButton"},"Next")),ge.createElement(tn.View,{style:[{marginLeft:"auto"}]},ge.createElement(V,{size:"medium",kind:"secondary",title:e?"Confirm resolution of all conflicts in this page":"You need to first resolve conflicts in the document",disabled:n||!e,icon:n?xe:v.Check,onPress:i,testID:"conflictBanner.resolveButton"},"Mark as resolved"))))))},oF=t=>{let{hasBeenResolved:o,loading:e,onPressMarkAsResolved:n,page:r,space:i,analyticsContext:a,revision:s,conflictType:l}=t,[u,d]=ge.useState(!1),[p,f]=ge.useState(!1),[,m]=_(W),h=Ic(s,r.id).filter(P=>s?.conflicts?.pages[P.id]==="deleted-in-head"||s?.conflicts?.pages[P.id]==="deleted-in-base"),y=()=>{let P="Do you want to keep the modified page or delete it?",L=h.length>1?"pages":"page";switch(l){case"deleted-in-base":return`This page has been deleted in the primary content, but has been modified in this change request. ${P}`;case"deleted-in-head":return`This page has been deleted in this change request, but has been modified in the primary content ${P}`;case"deleted-in-base-subtree-modified-in-head":return`This page has been deleted in the primary content but has ${h.length} conflicted child ${L}. Do you want to keep or delete it?`;case"deleted-in-head-subtree-modified-in-base":return`This page has been deleted in your change request but has ${h.length} conflicted child ${L}. Do you want to keep or delete it?`}},C=(P=>{let L=[];function R(T){let M=Pn(s,T.id);M&&s.conflicts?.pages[M.id]&&(L.push(M),R(M))}return R(P),L})(r),x=Ic(s,r.id),O=()=>f(!0),E=()=>{if(C.length||x.length){d(!0);return}n()};return ge.createElement(ge.Fragment,null,ge.createElement(ge.Fragment,null,ge.createElement(tn.View,{style:g.Margin.mediumRight,testID:"conflictBanner.badge"},o?ge.createElement(yo,{kind:"success",size:"large",icon:v.Check}):l==="deleted-in-base-subtree-modified-in-head"||l==="deleted-in-head-subtree-modified-in-base"?ge.createElement(yo,{kind:"warning",size:"large",icon:v.Conflict}):ge.createElement(yo,{kind:"danger",size:"large",icon:v.Trashcan})),ge.createElement(tn.View,{style:[w.flex1]},ge.createElement(tn.Text,{style:[m.Label,m.textMid],testID:"conflictBanner.message"},o?"All conflicts with the primary content have been resolved for this page.":y())),o?null:ge.createElement(tn.View,{style:[g.Margin.mediumLeft,w.directionRow]},ge.createElement(tn.View,{style:[g.Margin.mediumLeft,w.directionRow]},ge.createElement(V,{size:"medium",icon:e?xe:v.Copy,onPress:E,testID:"conflictBanner.keepButton"},"Keep"),ge.createElement(V,{size:"medium",icon:e?xe:v.Trashcan,onPress:O,testID:"conflictBanner.deleteButton"},"Delete")))),ge.createElement(Ct,null,u?ge.createElement(u6,{page:r,revision:s,analyticsContext:a,onClose:()=>d(!1),parentPages:C,childPages:x}):null),ge.createElement(Ct,null,p?ge.createElement(Bv,{space:i,page:r,revision:s,analyticsContext:a,onClose:()=>f(!1)}):null))},nF=G.create({alert:t=>({position:"sticky",top:-A.RADIUS_L,right:0,left:0,zIndex:1}),alertInner:t=>({borderRadius:A.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,...t.shadows.tight}),alertFullWidth:{maxWidth:Br+2*Ft},alertWithComments:{maxWidth:Br+Ft}});c();var ke=b(k()),Gn=b(q());var g6=Xh({width:1448,height:240}),iF=H.createInteractiveComponent(g6.View);function PC(t){let{page:o}=t;return o.cover?ke.createElement(ke.Suspense,{fallback:ke.createElement(aF,null)},ke.createElement(sF,{...t,page:o})):null}function aF(t){return ke.createElement(Gn.View,{style:[Qs.pageCover]},ke.createElement(h6,null))}function sF(t){let{page:o,revision:e,readOnly:n,rounded:r,analyticsContext:i}=t,[a,s]=ke.useState(!1),l=Wt(),u=$t(),d=Je(),[p,f]=En(),m=f6(),h=null;if(o.cover.ref){let I=o.cover.ref.kind==="file"?e.files[o.cover.ref.file]:null;m=(o.cover.ref.kind==="file"?I?yc(I?.downloadURL):null:o.cover.ref.url)||m,I?.dimensions&&(h=I.dimensions)}let y=o.cover.yPos||0,S=ke.useMemo(()=>new Gn.Animated.Value(y),[o.id,o.cover.yPos]),C=ke.useRef(y);ke.useEffect(()=>{let I=S.addListener(({value:N})=>{C.current=N});return()=>{S.removeListener(I)}},[S]);let x=async()=>{ze(u),s(!1),await u.change(I=>{I.movePageCover(o.id,C.current)}),re({...i,type:"edit_reposition_cover"})},O=()=>{s(!1),S.flattenOffset(),S.setValue(y)},E=ke.useRef(null),P=ce(E),L=ke.useCallback(async()=>{ze(u);let[I]=await l.prompt({title:"Select cover image",accept:"images",acceptURL:!0});I&&(await f(()=>u.change(N=>{N.addPageCover(o.id,I)})),re({...i,type:"edit_upload_cover"}))},[i,u,o.id]),R=ke.useCallback(async()=>{ze(u),await f(()=>u.change(I=>{I.removePageCover(o.id)})),re({...i,type:"edit_remove_cover"})},[i,u,o.id]),T=ke.useCallback(I=>{ze(u),u.change(N=>{N.updatePageLayout(o.id,{coverSize:I})}),re({...i,type:"edit_cover_size",coverSize:I})},[i,u,o.id]),M=ke.useMemo(()=>{if(n)return;let I=ld(o).coverSize;return ie({groups:[{key:"pageCover",commands:[{key:"pageCover.select",icon:v.Image,title:"Select image",trigger:()=>{L()}},{key:"pageCover.reposition",icon:v.ImageSizeBlock,title:"Reposition",trigger:()=>{s(!0)}}]},{key:"pageCoverSize",commands:[{key:"pageCoverSize.full",icon:v.FullWidth,title:"Full width",type:1,selected:I==="full",trigger:()=>T("full")},{key:"pageCoverSize.hero",icon:v.DefaultWidth,title:"Hero width",type:1,selected:I==="hero",trigger:()=>T("hero")}]},{key:"pageCoverDanger",commands:[{key:"pageCoverDanger.remove",icon:v.Trashcan,title:"Remove cover",trigger:()=>R()}]}]})},[i,R,n,L,T,o]);return ke.createElement(iF,{style:[Qs.pageCover],isPDF:d},ke.createElement(cF,{coverUrl:m,animatedY:S,repositioning:a,rounded:r,isPDF:d,coverFileDimensions:h}),p?ke.createElement(h6,null):null,n||d?null:ke.createElement(H.View.Child,{style:[Qs.pageCoverButton,w.directionRow],activeStyle:"visible",inactiveStyle:a||P.opened?"visible":"hidden"},a?ke.createElement(ke.Fragment,null,ke.createElement(V,{kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:O},"Cancel"),ke.createElement(V,{kind:"primary",size:"medium",onPress:x},"Save")):ke.createElement(ke.Fragment,null,o.cover?null:ke.createElement(V,{icon:v.Image,kind:"secondary",size:"medium",style:[g.Margin.smallRight],onPress:()=>{L()}},"Change cover"),ke.createElement(V,{ref:E,icon:v.MoreVertical,rounded:!0,size:"medium",kind:"secondary",active:P.opened,onPress:()=>{M&&P.open(M)}}))))}function cF(t){let{coverUrl:o,animatedY:e,repositioning:n,isPDF:r,rounded:i,coverFileDimensions:a}=t,s=Si(),l=ke.useRef(null),[u,d]=ke.useState(a),[p,f]=g6.useDimensions(),m=u?lF(p,u):0,[,{pageCoverRounded:h}]=_(dF),y=ke.useMemo(()=>Gn.PanResponder.create({onStartShouldSetPanResponder:(E,P)=>!1,onStartShouldSetPanResponderCapture:(E,P)=>!1,onMoveShouldSetPanResponder:(E,{dx:P})=>n,onMoveShouldSetPanResponderCapture:(E,P)=>!1,onPanResponderGrant:(E,{dx:P})=>{e.extractOffset()},onPanResponderMove:(E,{dy:P})=>{e.setValue(P/m)},onPanResponderTerminationRequest:(E,P)=>!0,onPanResponderRelease:(E,{dy:P})=>{e.flattenOffset()}}),[m,n]),S=u?u.width*m:0,C=u?u.height*m:0,x=(p.height-C)/2,O=!!u&&f;return ke.createElement(Gn.View,{...y.panHandlers,style:[Gn.StyleSheet.absoluteFill,Qs.pageCoverInner,n&&uF.pageCoverRepositioning,i&&h],...O?{testID:"page.cover"}:{}},!r&&ke.createElement(Gn.View,{style:[Qs.pageCoverOverlay,s.color==="dark"&&Qs.pageCoverOverlayDark,O&&Qs.pageCoverOverlayReady]}),ke.createElement(C1,{ref:l,source:{uri:o},loading:"priority",style:[Qs.pageCoverImage,S&&C?{top:r?0:Gn.Animated.diffClamp(Gn.Animated.add(x,Gn.Animated.multiply(e,m)),-(C-p.height),0),left:(p.width-S)/2,width:S,height:C}:{width:"100%",top:e}],onLoad:()=>{d({width:l.current?.width??0,height:l.current?.height??0})}}))}function h6(){return ke.createElement(Gn.View,{style:Qs.pageCoverLoadingOverlay},ke.createElement(xe,{size:"large"}))}function lF(t,o){let e=t.width/o.width,n=t.height/o.height;return o.height*e<t.height?n:e}var uF=Gn.StyleSheet.create({pageCoverRepositioning:{cursor:"grab"}}),dF=G.create({pageCoverRounded:t=>({borderRadius:t.radiuses.xlarge})}),Qs=Gn.StyleSheet.create({pageCoverOverlay:{position:"absolute",inset:0,opacity:1,zIndex:1,transitionDelay:"200ms",transition:"opacity 500ms ease-in, z-index 1000ms ease-in",backgroundColor:"rgba(255,255,255,.2)",backdropFilter:"blur(10px)"},pageCoverOverlayDark:{backgroundColor:"rgba(0,0,0,.2)"},pageCoverOverlayReady:{zIndex:-1,opacity:0},pageCover:{position:"relative",width:"100%",height:240},pageCoverInner:{overflow:"hidden"},pageCoverImage:{position:"absolute",left:0,right:0,objectFit:"cover",pointerEvents:"none"},pageCoverButton:{position:"absolute",bottom:g.medium,right:g.medium},pageCoverLoadingOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:$.GREY_BLUE_LIGHT,justifyContent:"center",alignItems:"center"}});c();var Oe=b(k()),rs=b(q());c();var du=JSON.parse('{"pageHeaderContainer":"pageHeaderContainer_f8iPF","pageControls":"pageControls_65PGe","hiddenIcon":"hiddenIcon_MYEiw","revealOnHover":"revealOnHover_QTUA-"}');c();var pF=Lt({key:"pageOptionsAtom",default:null});function zi(t){let o=tr(pF);return o===null?ld(t):o.layoutOptions}var tp={mobile:"MobileMainTitle",desktop:"MainTitle"},mF=Z.createResponsiveComponent(Jr),V0e=Z.createResponsiveComponent(p6),fF=Z.createResponsiveComponent(Dt),b6=Oe.memo(function(o){let{space:e,revision:n,page:r,changeRequest:i,readOnly:a,onSubmitDescription:s,analyticsContext:l,withDiff:u,toolbar:d}=o,p=gh("CUSTOM_FIELDS"),[f,m]=_(W),[,h]=_(gF),y=Je(),S=se(),{navigate:C}=ye(),[x,O]=En(),E=$t(),P=Oe.useRef(null),L=[m.Description,m.textMuted],R=zi(r),T=async Be=>{ze(E),await E.change(dt=>{dt.renamePage(r.id,Be)}),re({...l,type:"edit_page_title",pageKind:r.type})},M=async Be=>{ze(E),await E.change(dt=>{dt.setPageDescription(r.id,Be)}),re({...l,type:"edit_page_description",pageKind:r.type})},I=Be=>{Be.nativeEvent.key==="Enter"&&(Be.preventDefault(),P.current&&P.current.focus())},N=Be=>{Be.nativeEvent.key==="Enter"&&(Be.preventDefault(),s&&s())},z=()=>{O(async()=>{ze(E),await E.change(Be=>{Be.addPageCover(r.id)}),re({...l,type:"edit_add_cover"})})},Y=!R.title,Q=!R.description,te=Y&&Q||!Y,_e=Y&&!Q,Ae=[du.pageControls,du.revealOnHover,D.margin.smallTop,D.flex.row,D.gap.xsmallColumnGap];return Oe.createElement(U,{style:[D.position.relative,D.flex.column,a&&!p?D.padding.xlargeTop:du.pageHeaderContainer,Y&&Q?null:D.margin.largeBottom]},a?p?Oe.createElement(U,{style:Ae},Oe.createElement(y6,{style:[g.Padding.noneLeft]})):null:Oe.createElement(U,{style:Ae},Oe.createElement(V,{kind:"default",size:"xsmall",style:[g.Padding.noneLeft],icon:v.Options,onPress:()=>C({screen:{sideSheet:{type:"page"}}})},"Page options"),p?Oe.createElement(y6,null):null,sd(r)?null:Oe.createElement(V,{kind:"default",size:"xsmall",icon:x?xe:v.Image,disabled:x,onPress:z},"Page cover")),!a&&(Y||Q)?Oe.createElement(U,{style:[du.revealOnHover,D.margin.smallTop,D.gap.smallColumnGap]},Y?Oe.createElement(U,{style:[D.flex.alignCenter,D.gap.xsmallColumnGap]},Oe.createElement(v.EyeOff.CSS,{style:[du.hiddenIcon]}),Oe.createElement(At,{style:[D.text.label,D.textColor.muted]},"Page title hidden")):null,Q?Oe.createElement(U,{style:[D.flex.alignCenter,D.gap.xsmallColumnGap]},Oe.createElement(v.EyeOff.CSS,{style:[du.hiddenIcon]}),Oe.createElement(At,{style:[D.text.label,D.textColor.muted]},"Page description hidden")):null):null,Oe.createElement(U,{style:[D.flex.row,D.flex.justifySpaceBetween,D.flex.alignCenter,Y&&Q?D.margin.autoLeft:null]},Y?null:Oe.createElement(rs.View,{style:[w.directionRow,w.flex1]},Oe.createElement(Z.View,{style:[w.directionRow,w.justifyContentEnd,w.alignCenter],mobileStyle:h.emojiWrapperMobile,desktopStyle:h.emojiWrapperDesktop},r.emoji||!a?Oe.createElement(Z.View,{mobileStyle:[IC.pageEmojiRelative,g.Padding.noneLeft,g.Padding.mediumRight],desktopStyle:[IC.pageEmojiAbsolute,g.Padding.mediumLeft,g.Padding.mediumRight]},Oe.createElement(UL,{analyticsContext:l,page:r,readOnly:a,size:A.ICON_XL})):null),a?Oe.createElement(rs.View,{style:[w.flex1]},Oe.createElement(fF,{testID:"page.title",tag:"h1",style:[m.text],selectable:!0,mobileStyle:m[tp.mobile],desktopStyle:m[tp.desktop]},r.title)):Oe.createElement(mF,{key:r.id,testID:"page.title",component:v6,value:r.title,maxLength:pm,style:[m.text,w.flex1,m.Body],onChangeText:T,onKeyPress:I,placeholder:S("untitled_page"),placeholderTextColor:f.colors.text.muted,mobileStyle:m[tp.mobile],desktopStyle:m[tp.desktop]})),y||!d?null:te&&Oe.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),Oe.createElement(U,{style:[D.flex.row,D.flex.justifySpaceBetween,D.flex.alignCenter,Y&&Q?D.margin.autoLeft:null]},Q?null:Oe.createElement(Z.View,{style:[Y?null:g.Margin.mediumTop,w.flex1]},a?r.description?Oe.createElement(rs.View,null,Oe.createElement(rs.Text,{style:L,selectable:!0},r.description)):u?Oe.createElement(Z.View,{style:IC.pageDescriptionDiffPlaceholder,mobileStyle:"hidden"}):null:Oe.createElement(Jr,{key:r.id,ref:P,component:v6,value:r.description,style:L,maxLength:Lw,onChangeText:M,onSubmitEditing:s,onKeyPress:N,placeholder:S("page_description"),placeholderTextColor:f.colors.text.muted})),y||!d?null:_e&&Oe.createElement(d,{space:e,changeRequest:i,revision:n,page:r,analyticsContext:l,readOnly:a})),null)});function y6(t){let{navigate:o}=ye();return Oe.createElement(V,{kind:"default",size:"xsmall",icon:v.Metadata,onPress:()=>o({screen:{sideSheet:{type:"page-metadata"}}}),...t},"Page metadata")}var v6=Oe.forwardRef(function(o,e){let{style:n,...r}=o,[i,a]=Oe.useState(void 0);return Oe.createElement(rs.TextInput,{ref:e,...r,multiline:!0,style:[n,typeof i<"u"?{height:i}:void 0],onContentSizeChange:l=>{l.nativeEvent.contentSize.height!==i&&a(l.nativeEvent.contentSize.height)}})}),IC=rs.StyleSheet.create({pageEmojiRelative:{position:"relative"},pageEmojiAbsolute:{position:"absolute"},pageDescriptionDiffPlaceholder:{height:Vg.mediumLarge}}),gF=G.create({emojiWrapperMobile:{width:"auto",height:Ue[tp.mobile].lineHeight},emojiWrapperDesktop:{height:Ue[tp.desktop].lineHeight},pageBodyDesktopLeftMargin:{marginLeft:Ft},pageBodyMobileLeftMargin:{marginLeft:Qo}});c();var Yt=b(k()),is=b(q());var w6=Z.createResponsiveComponent(Is),S6=H.createInteractiveComponent(Zr),C6=Yt.memo(function(o){let{revision:e,page:n,style:r}=o,{getNavigationLinkProps:i}=ye(),[,a]=_(W),s=se(),l=Je(),u=H.useInteractiveComponent(v.ArrowLeft),d=H.useInteractiveComponent(v.ArrowRight),{desktopSidebarWidth:p}=Yt.useContext(ra),{nextPage:f,previousPage:m}=Yt.useMemo(()=>{let x=hF(e),O=x.findIndex(E=>E.id===n.id);return O===-1?{nextPage:null,previousPage:null}:{nextPage:EC(x,O,1),previousPage:EC(x,O,-1)}},[e,n.id]),{previousLinkProps:h,previousGroup:y,nextLinkProps:S,nextGroup:C}=Yt.useMemo(()=>({previousLinkProps:m?i({screen:{page:oo(e,m.id)}}):void 0,previousGroup:m?Pn(e,m.id):null,nextLinkProps:f?i({screen:{page:oo(e,f.id)}}):void 0,nextGroup:f?Pn(e,f.id):null}),[e,f,m]);return!f&&!m||l?null:Yt.createElement(Z.View,{style:r,desktopStyle:w.directionRow,customBreakpointsStyles:{[nl(p)]:w.directionColumn}},m?Yt.createElement(w6,{...h,style:[w.alignCenter,g.Padding.medium,w.flex1],desktopStyle:f?g.Margin.smallRight:null,customBreakpointsStyles:f?{[nl(p)]:[g.Margin.noneRight,g.Margin.smallBottom]}:void 0},Yt.createElement(is.View,{style:[g.Margin.mediumRight]},Yt.createElement(u.Child,{size:A.XS,style:[a.textMuted],hoverStyle:a.primary})),Yt.createElement(is.View,{style:[w.flex1,w.alignEnd]},Yt.createElement(is.View,null,Yt.createElement(is.Text,{style:[a.Caption,a.textMuted]},y&&y.type==="group"?`${y.title} - `:"",s("previous"))),Yt.createElement(S6.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},m.title))):null,f?Yt.createElement(w6,{...S,style:[w.alignCenter,g.Padding.medium,w.flex1],desktopStyle:m?g.Margin.smallLeft:null,customBreakpointsStyles:m?{[nl(p)]:[g.Margin.noneLeft,g.Margin.smallTop]}:void 0},Yt.createElement(is.View,{style:[w.flex1]},Yt.createElement(is.View,null,Yt.createElement(is.Text,{style:[a.Caption,a.textMuted]},s("next"),C&&C.type==="group"?` - ${C.title}`:"")),Yt.createElement(S6.Child,{style:[a.Body,a.Medium,a.text],activeStyle:a.primary},f.title)),Yt.createElement(is.View,{style:[g.Margin.mediumLeft]},Yt.createElement(d.Child,{size:A.XS,style:[a.textMuted],hoverStyle:a.primary}))):null)});function hF(t){let o=[];function e(n){let r=t.pages[n];o.push(r),r.type!=="link"&&r.pages.length&&r.pages.forEach(e)}return t.rootPages.forEach(e),o}function EC(t,o,e){let n=t[o+e];if(n)return n.type!=="document"?EC(t,o+e,e):n}c();var Vo=b(k()),op=b(q());var yF=Z.createResponsiveComponent(Is),vF=H.createInteractiveComponent(Zr);function k6(t){let{subPages:o,revision:e}=t,{desktopSidebarWidth:n}=Vo.useContext(ra),r=se(),[,i]=_(W);return Je()?null:Vo.createElement(op.View,null,Vo.createElement(op.Text,{style:[i.Body,i.text]},r("page_articles_section")),Vo.createElement(Z.View,{style:[g.Padding.largeTop,w.wrap],desktopStyle:w.directionRow,customBreakpointsStyles:{[nl(n)]:w.directionColumn}},o.map((s,l)=>Vo.createElement(Vo.Suspense,{fallback:Vo.createElement(x6,{page:s,revision:e,index:l,totalPageNumber:o.length}),key:s.id},Vo.createElement(bF,{page:s,revision:e,index:l,totalPageNumber:o.length})))))}function bF(t){let{page:o}=t,e=Qe(o.type==="link"?o.target:void 0);return Vo.createElement(x6,{...t,contentRef:e})}function x6(t){let{page:o,revision:e,index:n,totalPageNumber:r,contentRef:i}=t,{desktopSidebarWidth:a}=Vo.useContext(ra),{getNavigationLinkProps:s}=ye(),[,l]=_(W),u=o.emoji?H.createInteractiveComponent(mt(No,{code:o.emoji})):null,d=H.createInteractiveComponent(i?.secondaryIcon||xe),p=r%2===0;return Vo.createElement(yF,{...o.type==="link"?i?Fc(i):{}:s({screen:{page:oo(e,o.id)}}),style:[w.alignCenter,g.Padding.medium,w.flex1,{minWidth:`calc(50% - ${g.small}px)`}],desktopStyle:[n%2===0?p?g.Margin.smallRight:null:g.Margin.smallLeft,n<r-(p?2:1)?g.Margin.smallBottom:null],customBreakpointsStyles:{[nl(a)]:[g.Margin.noneHorizontal,n<r-1?g.Margin.smallBottom:null]}},u?Vo.createElement(op.View,{style:[g.Margin.mediumRight]},Vo.createElement(u.Child,{size:A.XS,style:[l.textMuted],hoverStyle:l.primary})):null,Vo.createElement(vF.Child,{style:[l.Body,l.Medium,l.text],activeStyle:l.primary},o.title),o.type==="link"&&(!i||i.secondaryIcon)?Vo.createElement(op.View,{style:[g.Margin.mediumLeft]},Vo.createElement(d.Child,{size:A.XS,style:[l.textMuted],hoverStyle:l.primary})):null)}c();var si=b(k()),_6=b(q());c();var TC=b(k());function np(t){let{space:o,changeRequest:e,analyticsContext:n,page:r,onClose:i}=t;return nd({screen:"space_import",...n},[o.key,e?.key]),TC.createElement(Tn,null,TC.createElement(O6,{target:{page:r,space:o,changeRequest:e?.key},onClose:i}))}function R6(t){let{space:o,changeRequest:e,analyticsContext:n}=t,{navigate:r}=ye(),i=hh(o),[a,s]=_(wF),l=Je(),[u,d]=si.useState(null);return l?null:si.createElement(si.Fragment,null,si.createElement(Ct,null,u==="import"?si.createElement(np,{space:o,changeRequest:e,analyticsContext:n,onClose:()=>{d(null)}}):null),si.createElement(_6.View,{style:[g.Padding.smallHorizontal,g.Padding.smallVertical,g.Margin.mediumTop,s.blankslateBox,w.directionRow,w.wrap]},si.createElement(V,{icon:v.Download,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{d("import"),re({...n,type:"space_blank_slate_initiate",kind:"import"})}},"Import content"),si.createElement(V,{icon:v.Page,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{r({overlay:{type:"template",space:o.key,organization:o.organization}}),re({...n,type:"space_blank_slate_initiate",kind:"template"})}},"Use a template"),si.createElement(V,{icon:v.GitHub,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{i(),re({...n,type:"space_blank_slate_initiate",kind:"gitsync"})}},"Sync with GitHub / GitLab"),si.createElement(V,{icon:v.User,size:"medium",style:g.Margin.xsmallRight,iconTint:a.colors.primary.main,onPress:()=>{r({screen:{sideSheet:{type:"share",tab:"invite"}}}),re({...n,type:"space_blank_slate_initiate",kind:"invite-members"})}},"Add members")))}var wF=G.create({blankslateBox:t=>({borderRadius:A.RADIUS_L,borderWidth:1,borderColor:t.colors.border.mid})});c();var P6=b(k());function I6(t,o,e){let n=Je(),r=Gg();P6.useEffect(()=>{if(o&&!n&&r.current)if(o.hash){let i=window.document.getElementById(o.hash);i&&i.scrollIntoView({behavior:"auto",block:"start",inline:"nearest"})}else e?.current?.scrollTo(0,0)},[t,o?.hash,e,n])}c();var rl=b(k());c();var fa=b(k()),rp=b(q());var CF=H.createInteractiveComponent(Zr),kF={[Fe]:null,[qe]:g.Margin.smallLeft,[To]:null},TLe=fa.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=_(W),[,i]=_(E6),a=se();return fa.createElement(rp.View,{style:[i.pageOutline]},fa.createElement(rp.View,{style:[w.directionRow,w.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},fa.createElement(rp.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(s=>fa.createElement(xF,{key:s.key,section:s,active:n===s.key})))});function xF(t){let{section:o,active:e}=t,[,n]=_(W),[,r]=_(E6),{navigateToHash:i}=ye();return fa.createElement(H.TouchableOpacity,{style:[w.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?fa.createElement(Pr,{backgroundColor:Vl[o.tag]||$.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,w.alignSelfCenter]},fa.createElement(rp.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,fa.createElement(CF.Child,{style:[n.Label,n.textMid,o.type&&kF[o.type],e&&n.primary],hoverStyle:n.primary},o.title))}var E6=G.create({pageOutline:t=>({borderLeftWidth:1,borderLeftColor:t.colors.border.main,maxWidth:ol}),sectionItem:{paddingTop:g.xsmall,paddingBottom:g.xsmall,marginLeft:-1,borderLeftWidth:2,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:A.XXS,height:A.XXS,paddingHorizontal:g.small,justifyContent:"center"}});function T6(t,o){let e=g.large,n=t.length,r=Math.floor(Math.log2(n)+1),i=0,a=n-1,s=Math.ceil((i+a)/2),l=-1,u=null;for(let d=0;d<r;d++){let p=t[s];if(!p)return null;let f=Sc(p.key),m=f?f.getBoundingClientRect().top-o:null;if(m===null||m>e)a=s,s=Math.floor((i+a)/2);else{if(m>=-e&&m<=e)return t[s].key;m<e&&((u===null||m>u)&&(u=m,l=s),i=s,s=Math.ceil((i+a)/2))}}return l!==-1?t[l].key:null}var M6=.9;function L6(t,o){let[e,n]=rl.useState(null),r=ph(),i=rl.useRef(0),a=rl.useRef(null),s=rl.useRef(new Map),l=t.length>1,u=OF(()=>{typeof i.current!="number"&&(i.current=o.current.getBoundingClientRect().top);let p=T6(t,i.current);p!==e&&n(p)},500),d=p=>{p.forEach(m=>{let h=m.target.getAttribute("data-key");h&&s.current.set(h,m.isIntersecting&&m.intersectionRatio>=M6)});let f=Array.from(s.current.entries()).find(([,m])=>m);f&&n(f[0])};return rl.useEffect(()=>{if(!(!o?.current||!l)){if(!r)o.current?.addEventListener("scroll",u);else{let p=t.map(f=>Sc(f.key)).filter(ue);a.current=new IntersectionObserver(d,{rootMargin:`-${wC}px 0px -40% 0px`,threshold:M6}),p.forEach(f=>{a.current?.observe(f)})}return()=>{o.current?.removeEventListener("scroll",u),a.current?.disconnect()}}},[o?.current,l]),e}function OF(t,o){let e=!1;return(...n)=>{e||(t.apply(this,n),e=!0,setTimeout(()=>e=!1,o))}}c();var Cf=b(k());function MC(t,o,e){let{baseRevision:n,diffMode:r,diffs:i}=Cf.useContext(Av),a=be(),s=Cf.useMemo(()=>{if(!r)return null;let l;switch(r){case"quick":let d=n?.pages[o];l=d&&d.type==="document"?d.document:void 0;break;case"full":let p=i.get(o);if(!p||p.type!=="modified"||p.before.page.type!=="document")return null;l=p.before.page.document;break}if(!l)return qu(o);let u=Ur(a.store.getDocument(t,l));if(!u)throw new Error(`Original page document "${l}" not found`);return Vu(u)},[r,n,t,o,i]);return Cf.useMemo(()=>r!=="full"?[e,s]:[s?Kp.create({document:pO(s.document,e.document)}):e,s],[r,s,e])}var _F=Ze("sheet"),RF=Z.createResponsiveComponent(pe);function Wv(t){let o=$t(),{page:e,screen:n,scrollRef:r,changeRequest:i}=t;return I6(e.id,n,r),!o||n&&n.revision!==void 0||n?.changeRequest&&i&&["merged","archived"].includes(i.status)?ae.createElement(PF,{...t}):ae.createElement(IF,{...t,hiveBranch:o})}function PF(t){let{space:o,page:e}=t,n=be(),r=e.document?Ur(n.store.getDocument(o.key,e.document)):void 0,i=ae.useMemo(()=>r?Vu(r):qu(e.id),[r]),[a,s]=MC(o.key,e.id,i);return ae.createElement(N6,{...t,value:a,baseValue:s,onChange:()=>{}})}function IF(t){let{hiveBranch:o,space:e,page:n,analyticsContext:r,readOnly:i}=t,a=od();ze(o),o6(o);let s=TP({branch:o,pageId:n.id,presence:{userId:a.uid,userDisplayName:qx(a)},readOnly:i});ae.useEffect(()=>()=>{s.dataSync.flushBatchUpdates()},[s]),ae.useEffect(()=>{o.openPage(s.pageId)},[]);let l=ZL({analyticsContext:r,hivePage:s}),u=AP(s),d=ae.useMemo(()=>[u],[u]),[p,f,m]=MP(s),[h,y]=MC(e.key,n.id,p),S=ae.useCallback(O=>{m(O),O.value.document!==O.initialValue.document&&l()},[m]);return ae.createElement(N6,{...t,value:h,baseValue:y,onChange:S,selections:f,uploadFiles:async O=>{let E=[],P=await Sw({kind:"space_file",space:e.key},O);return await o.change(L=>{P.forEach(R=>{let T=Q_(R,a.uid);E.push({kind:"file",file:T.id}),L.insertFile(T)})}),E.forEach((L,R)=>{_F.info(`file ${L.file} uploaded (${R+1} / ${E.length})`)}),E},updateFile:async(O,E)=>{let[P]=await Sw({kind:"space_file",space:e.key},[E]);await o.change(L=>{L.updateFile(O.file,P)})},editorPlugins:d})}function N6(t){let{space:o,revision:e,page:n,changeRequest:r,readOnly:i=!0,value:a,baseValue:s,onChange:l,selections:u,uploadFiles:d,updateFile:p,withComments:f,analyticsContext:m,withToC:h,outline:y,toolbar:S,footer:C,withDiff:x,scrollRef:O,sideColumnStickyTop:E,editorPlugins:P}=t,{color:L}=Si(),{mode:R}=ae.useContext($o),T=ae.useRef(null),{pages:M,setContentDiffPage:I}=ae.useContext(QL),N=Ga(),z=M_(),Y=se(),Q=Je(),te=ae.useRef(),{sections:_e,sectionIDs:Ae}=ae.useMemo(()=>{let lt=gO(a.document,te.current),hi=Sg(a.document,lt).filter(er=>er.parentType==="document"&&er.type!==null&&[Fe,qe,To].includes(er.type));return{sectionIDs:lt,sections:hi}},[a.document,te]);te.current=Ae;let Be=N.screen.type==="space"&&N.screen.sideSheet?.type==="comments"?{commentKey:N.screen.sideSheet.comment,nodeKey:N.screen.sideSheet.node}:void 0;ae.useEffect(()=>{Be?.commentKey&&Be?.nodeKey&&Sc(Be.nodeKey)?.scrollIntoView()},[Be?.commentKey]);let dt=ae.useRef(null),eo=ae.useCallback(()=>{let lt=dt.current;if(!lt)return;let hi=lt.value.change();xs(hi.value.document)||hi.collapseToStartOf(lt.value.document),hi.focus(),l(hi)},[dt]),Vr=ae.useMemo(()=>M.find(lt=>lt.page.id===n.id&&lt.diff),[M,n.id]),On=lt=>{l(lt),!Vr&&r&&!a.document.equals(lt.value.document)&&I({diff:"modified",page:n})},xr=eo,qr=_e.length>1,Gr=!y||Q,wt=L6(_e,O),dc=ae.useCallback(lt=>{re({...m,...lt})},[m]),{desktopSidebarWidth:rn}=ae.useContext(ra),{customBreakpointsOutlineStyles:gi,customBreakpointsPageBodyStyles:K}=ae.useMemo(()=>{let lt=R==="public-content"?1280:Sf(2,rn);return{customBreakpointsOutlineStyles:{[lt]:"hidden"},customBreakpointsPageBodyStyles:{[lt]:w.justifyContentCenter}}},[R,rn]),ne=SC(rn,Lv),j=e.conflicts?.pages[n.id],oe=xs(a.document),Ee=oe&&Object.keys(e.pages).length===1&&!i,{diffs:at}=ae.useContext(Av),Ye=at.has(n.id),[st,ct]=l6({isDiffViewEnabled:x,isCommentMarginVisible:f,isFullPage:h||Gr}),et=GI(),lo=ae.useCallback(lt=>{lt?et.highlight(lt,{highlighting:!1,postButton:!0}):et.highlight(null)},[et]),Io=!N.overlay&&oe&&!i;ae.useEffect(()=>{Io&&eo()},[n.id,Io,eo]);let an=zi(n),Ra=sd(n)&&!!an.cover,Mu=an.coverSize,Dp=!an.pagination||o.showPagination===!1,Pa=ae.useMemo(()=>({type:"document",editable:!i,spaceId:o.key,theme:L}),[o.key,L,i]),pc=f_(bo("listSpaceIntegrationsBlocks",{spaceId:o.key}),ae.useCallback(lt=>{let hi={};return lt.forEach(er=>{hi[er.name]=er.blocks}),hi},[]));return ae.createElement(ae.Fragment,null,Ra&&Mu==="full"?ae.createElement(U,{style:R==="public-content"&&!h?YL.pageCoverBleedFull:null},ae.createElement(PC,{revision:e,page:n,readOnly:i,analyticsContext:m})):null,ae.createElement(ip.View,{ref:T,style:[w.flex1,w.directionRow]},ae.createElement(s6,{style:[D.flex.flex1,D.flex.column]},Ra&&Mu==="hero"?ae.createElement(Qd,null,ae.createElement(U,{style:[D.flex.flex1,D.margin.mediumTop]},ae.createElement(PC,{revision:e,page:n,readOnly:i,analyticsContext:m,rounded:!0}))):null,ae.createElement(pe,{tag:"main",style:[w.flex1,w.directionColumn]},ae.createElement(Qd,null,ae.createElement(Z.View,{style:[w.flex1,w.directionRow],customBreakpointsStyles:K},ae.createElement(ip.View,{style:[w.flex1]},ae.createElement(b6,{space:o,revision:e,page:n,changeRequest:r,readOnly:i,onSubmitDescription:xr,analyticsContext:m,withDiff:x,toolbar:S})))),ae.createElement(Z.View,{desktopStyle:Q?void 0:g.Padding.xlargeBottom},j!==void 0?ae.createElement(st,{renderMode:"marginless-centered"},ae.createElement(m6,{space:o,page:n,revision:e,document:a.document,pageIsDiff:x,conflictType:j,analyticsContext:m})):null,i&&oe&&n.pages.length?ae.createElement(st,{renderMode:"centered"},ae.createElement(k6,{subPages:n.pages.map(lt=>e.pages[lt]),revision:e})):ae.createElement(JI,{withComments:f,spaceKey:o.key,pageKey:n.id,changeRequestKey:r?.key},ae.createElement(A6,{ref:dt,value:a,baseValue:s,selections:u,onChange:On,readOnly:i,isDiff:Ye,logAnalyticsEvent:dc,uploadFiles:d,updateFile:p,placeholder:"Enter your content here\u2026",sectionIDs:Ae,selectedSection:N.screen.hash||null,blockLayoutComponent:st,rightGutterComponent:ct,integrationBlocksContext:Pa,integrationsBlocksSubscription:pc,integrationBlocksRemote:z,onBlockHover:lo,plugins:P}),Ee?ae.createElement(st,{renderMode:"centered"},ae.createElement(R6,{space:o,analyticsContext:m,changeRequest:r})):null),Ee?null:ae.createElement(Qd,{style:D.margin.largeTop},ae.createElement(Z.View,{style:[w.flex1,w.directionRow],customBreakpointsStyles:K},ae.createElement(ip.View,{style:[w.flex1]},ae.createElement(Z.View,null,Dp?null:ae.createElement(C6,{analyticsContext:m,space:o,revision:e,page:n,style:g.Margin.largeBottom}),C||null))))))),Gr?null:ae.createElement(RF,{tag:"aside",accessibilityLabel:Y("page_outline"),testID:"page.outline",style:[LC.pageSideColumn,g.Margin.largeVertical,{top:E!==void 0?E:g.large,maxHeight:E!==void 0?`calc(100vh - ${E}px)`:`calc(100vh - ${yC+g.large}px)`},R==="app"?LC.pageSideMaxWidth:LC.pageSidePublicMaxWidth],mobileStyle:"hidden",desktopStyle:{width:ne},customBreakpointsStyles:gi},qr?ae.createElement(y,{sections:_e,activeSection:wt}):null)))}var LC=ip.StyleSheet.create({pageSideMaxWidth:{maxWidth:ol},pageSidePublicMaxWidth:{maxWidth:ol},pageSideColumn:{position:"sticky",overflowY:"auto",alignSelf:"flex-start"},pageBody:{maxWidth:Br+2*Ft},pageBodyWithComments:{maxWidth:Br+Ft,marginRight:0},pageBodyDesktopRightPadding:{paddingRight:Ft},pageBodyMobileRightPadding:{paddingRight:Qo},pageBodyPDFRightPadding:{paddingRight:Qo},pageBodyDesktopLeftMargin:{marginLeft:Ft},pageBodyMobileLeftMargin:{marginLeft:Qo},pageBodyPDFLeftMargin:{marginLeft:Qo}});c();var NC=b(k()),D6=b(q());function Fv(t){let{withPageOutline:o=!0}=t;return NC.createElement(Z.View,{style:[w.directionRow,w.justifyContentCenter],desktopStyle:[g.Padding.xxlargeTop,zv.pageSheetLoadingDesktop,o&&zv.pageSheetLoadingDesktopWithOutline],mobileStyle:[g.Padding.mediumTop,zv.pageSheetLoadingMobile]},NC.createElement(Lo,{size:"xlarge",style:zv.pageBody}))}var zv=D6.StyleSheet.create({pageSheetLoadingDesktop:{paddingRight:Ft,paddingLeft:Ft},pageSheetLoadingDesktopWithOutline:{paddingRight:ol+Ft},pageSheetLoadingMobile:{paddingLeft:Qo,paddingRight:Qo},pageBody:{maxWidth:Br+2*Ft}});c();var Hn=b(k());c();var $e=b(k()),ga=b(q());function B6(t){let{revision:o,analyticsContext:e,page:n,onClose:r}=t,i=$e.useRef(null),[,a]=_(W),[s,l]=$e.useState(n.title),[u,d]=$e.useState(n.emoji),[p,f]=$e.useState("slug"in n&&n.slug?n.slug:""),[m,h]=$e.useState(n.type==="link"?n.target:void 0),y=$t(),S=s.length>0&&(n.type==="link"?!!m:!0),C=Pn(o,n.id),x=C?oo(o,C.id):"",O=n.type!=="link"?WO(o,n.id,s):"",E=async()=>{S&&(ze(y),await y.change(R=>{R.updatePage(n.id,n.type!=="link"?{title:s,emoji:u,slug:p?pw(p):void 0}:{title:s,emoji:u,target:m})}),n.title!==s&&re({...e,type:"edit_page_title",pageKind:n.type}),n.type!=="link"&&p&&n.slug!==p&&re({...e,type:"edit_page_path",pageKind:n.type}),n.emoji!==u&&re({...e,...u?{type:"edit_pick_page_emoji",pageKind:n.type,emoji:u}:{type:"edit_remove_page_emoji",pageKind:n.type}}),r())},P=R=>{i.current?.close(),d(R)},L=$e.useMemo(()=>u?mt(No,{code:u}):null,[u]);return $e.createElement(vo,{title:"Edit page",onClose:r,footer:$e.createElement(ga.View,{style:[w.directionRow,w.justifyContentEnd]},$e.createElement(V,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),$e.createElement(im,{disabled:!S,kind:"primary",onPress:E},"Save"))},$e.createElement(ga.View,{style:[g.Margin.largeBottom]},$e.createElement(ga.View,{style:[g.Margin.smallBottom]},$e.createElement(Qu,null,"Title")),$e.createElement(ga.View,{style:[w.directionRow,w.alignEnd]},$e.createElement(ga.View,{style:[g.Margin.mediumRight]},$e.createElement(wc,{ref:i,wrapper:xi,anchor:({ref:R,opened:T,toggle:M})=>$e.createElement(V,{ref:R,active:T,onPress:M,kind:"secondary",size:"large",icon:L||v.EmojiReaction})},$e.createElement(Mn,{kind:"wide"},$e.createElement(ry,{onPick:P,onRemove:u?()=>P(void 0):void 0})))),$e.createElement(ga.View,{style:[w.flex1]},$e.createElement(no,{size:"large",value:s,onChangeText:l,onSubmit:E})))),n.type==="link"?$e.createElement(ga.View,null,$e.createElement(hy,{label:"Reference",size:"large",value:m,onChangeValue:h})):$e.createElement(ga.View,null,$e.createElement(no,{label:"Slug",size:"large",prefix:`${x}/`,value:p,placeholder:O,onChangeText:f,onSubmit:E,feedback:p&&!Hx(p)?{type:"warning",message:$e.createElement($e.Fragment,null,"The page slug contains unsupported characters for an URL. Saving will replace it by"," ",$e.createElement(ga.Text,{style:[a.Bold]},pw(p)),".")}:void 0})))}c();var hr=b(k());c();var ha=b(k()),AC=b(q());function W6(t){let{onClose:o,onSubmit:e}=t,[n,r]=ha.useState(""),[i,a]=ha.useState(),s=async()=>{i?e(j_({title:n,target:i})):o()};return ha.createElement(vo,{title:"Insert link",onClose:o,subtitle:"Insert a link to external content in your content navigation, this link will open in a new tab.",footer:ha.createElement(AC.View,{style:[w.directionRow,w.justifyContentEnd]},ha.createElement(V,{kind:"secondary",onPress:o,style:g.Margin.smallRight},"Cancel"),ha.createElement(V,{kind:"primary",onPress:s,disabled:!i},"Insert"))},ha.createElement(AC.View,{style:[g.Margin.largeBottom]},ha.createElement(no,{autoFocus:!0,label:"Title",size:"large",placeholder:"Enter title to display",value:n,onChangeText:r})),ha.createElement(hy,{label:"To",size:"large",placeholder:"Paste in or type a url",value:i,onChangeValue:a}))}function z6(t){let{space:o,revision:e,changeRequest:n,analyticsContext:r,parent:i}=t,{navigateToPage:a}=zc(),[s,l]=hr.useState(null),u=$t(),d=hr.useCallback(y=>{ze(u);let S=u.syncChange(C=>{let x=typeof y=="function"?y(C):y;return C.insertPage(x,{into:i}),x});re({...r,type:"edit_create_page",pageKind:S.type}),S.type!=="link"&&a(u.revision,S.id)},[u,a]),p=hr.useCallback(()=>{ze(u);let y=u.syncChange(S=>{let C=AO({title:S.getUniquePageTitle("Group",!0)}),x=em({title:S.getUniquePageTitle("Page",!0)});return S.insertPage(C,{into:i}),S.insertPage(x,{into:C.id}),x});re({...r,type:"edit_create_page",pageKind:"group"}),a(u.revision,y.id)},[e,u,a]),f=hr.useMemo(()=>ie({groups:[{key:"insertPage",commands:[{key:"insertPage.sheet",icon:v.Page,title:"New document page",trigger:()=>{d(y=>em({title:y.getUniquePageTitle("Page",!0)}))}},i?null:{key:"insertPage.group",icon:v.AddPageGroup,title:"New group",trigger:()=>{p()}},{key:"insertPage.link",icon:v.Link,title:"New link",trigger:()=>{l("link")}}].filter(ue)},{key:"insertExisting",commands:[{key:"insertExisting.import",icon:v.Download,title:"Import new pages",trigger:()=>{l("import")}}].filter(ue)}]}),[e,i,p,d]),m=()=>{l(null)};return[hr.createElement(hr.Fragment,null,hr.createElement(Ct,null,s==="link"?hr.createElement(W6,{onClose:m,onSubmit:y=>{d(y),l(null)}}):null),hr.createElement(Ct,null,s==="import"?hr.createElement(np,{space:o,changeRequest:n,page:i,analyticsContext:r,onClose:m}):null)),f,d]}function Vv(t,o=[]){let{space:e,revision:n,changeRequest:r,page:i,analyticsContext:a,readOnly:s}=t,[l,u]=Hn.useState(null),d=be(),p=$t(),{getNavigationHref:f,navigateToPage:m}=zc(),{navigate:h}=ye(),y=Hn.useContext($o),S=se(),C=Kg(),[x,O,E]=z6({space:e,revision:n,changeRequest:r,parent:i.id,analyticsContext:a}),P=Object.keys(n.pages).length>1,L=Hn.useMemo(()=>ie({groups:[s?null:{key:"pageEdit",commands:[i.type!=="link"?{key:"pageEdit.insert",icon:v.AddPageGroup,title:"Insert subpage",descendant:()=>O,trigger:()=>{E(T=>em({title:T.getUniquePageTitle("Page",!0)}))}}:null,i.type!=="link"?{key:"pageEdit.import",icon:v.Download,title:"Import subpages",trigger:()=>{u("import")}}:null,i.type==="document"&&sd(i)?{key:"pageEdit.addCover",icon:v.Image,title:"Add cover",trigger:async()=>{ze(p),await p.change(T=>{T.addPageCover(i.id)}),re({...a,type:"edit_add_cover"})}}:null,{key:"pageEdit.edit",icon:v.Type,title:i.type==="link"?"Edit":"Rename",trigger:()=>{u("edit")}},{key:"pageEdit.duplicate",icon:v.PageDuplicate,title:"Duplicate",trigger:async()=>{ze(p);let T=await d.duplicateContent({contentId:p.contentId,branchId:p.branchId},{contentId:p.contentId,branchId:p.branchId,pageId:i.id});re(Dg(e,i,{...a,type:"edit_duplicate_page",pageKind:i.type})),i.type!=="link"&&m(p.revision,T.pageId)}},i.type==="document"?{key:"pageEdit.options",icon:v.Options,title:"Options",trigger:()=>{h({screen:{sideSheet:{type:"page"}}})}}:null,P?{key:"pageEdit.delete",icon:v.Trashcan,title:"Delete",trigger:()=>{u("delete")}}:null].filter(ue)},{key:"pageRead",commands:[i.type==="document"&&(e.hasPDFExport||y.mode!=="public-content")?{key:"pageRead.export",icon:v.PDF,title:S("export_pdf"),testID:"page.exportButton",trigger:()=>{m(n,i.id,{sideSheet:{type:"share",tab:"pdf"}})}}:null,i.type!=="link"?{key:"pageRead.copyURL",icon:v.Link,title:S("copy_link"),trigger:()=>{let T=f(n,i.id),M=`${window.location.origin}${T}`;C.writeTextAndNotify(M,{title:"Page URL copied to clipboard"})}}:null,i.type!=="link"&&e.showEditOnGitProvider&&e.git?.url&&e.git?.installationProvider&&i.git?.filePath&&y.mode==="public-content"?{key:"pageRead.editOnGitHub",icon:G_[e.git?.installationProvider],title:S("edit_on_github",H_[e.git?.installationProvider]),trigger:()=>{window.location.assign(`${e.git?.url}/${i.git?.filePath}`)}}:null,...o].filter(ue)}].filter(ue)}),[s,e,n,i,P,y.mode,f,m,r,o,d,p]),R=()=>{u(null)};return[Hn.createElement(Hn.Fragment,null,x,Hn.createElement(Ct,null,l==="edit"?Hn.createElement(B6,{revision:n,page:i,analyticsContext:a,onClose:R}):null),Hn.createElement(Ct,null,l==="delete"?Hn.createElement(Bv,{space:e,page:i,revision:n,analyticsContext:a,onClose:R}):null),Hn.createElement(Ct,null,l==="import"?Hn.createElement(np,{space:e,changeRequest:r,page:i.id,analyticsContext:a,onClose:R}):null)),L]}var EF=[{size:25,label:"Small"},{size:50,label:"Medium"},{size:75,label:"Large"},{size:100,label:"Fit"}];function F6(t,o){let e=typeof t=="number"?t:t?.value,n=typeof t=="number"?"px":t?.unit;return`${e||100}${n||o}`}function V6(t,o){return typeof t=="number"?`${t}px`:t?.unit==="px"?`${t.value}${t.unit}`:o}async function TF(t,o,e,n){let r=o.nodes.toArray().map(s=>{let{ref:l,refDark:u}=s.data.toFrozenObject();return n==="dark"&&u?u:l}),i={url:"",broken:!0},a=r.map(s=>AE(t,s,e).then(({uri:l})=>typeof l!="string"||l===""?i:{url:l,broken:!1}).catch(()=>i));return Promise.all(a)}function q6(t){let{node:o,parent:e,isSelected:n,attributes:r,editor:i}=t,{readOnly:a}=i,{ref:s,refDark:l,height:u,width:d}=o.data.toFrozenObject(),p=tv(i,o.key),{logAnalyticsEvent:f}=fe.useContext(Ve),m=yy(s,l),h=be(),y=ut(),[,S]=_(DC),C=kd(),x=H.useInteractiveState(),O=e.nodes.size>1,E=mn({disabled:!O,...zn({id:o.key,type:"block",blockType:o.type,previewLabel:"Move image"})}),P=H.useInteractiveState(),L=Rs(),[R,T]=fe.useState(null),M=Uo.getImageAltText(o),I=F6(d,"%"),N=F6(u,"%"),z=V6(u,"auto"),Y=V6(d,"100%"),Q=()=>{T("alt")},te=()=>{T(null)},_e=async()=>{if(!m||!m.uri)return;let Be=await TF(h,e,y,L.color),dt=e.getChildIndex(o.key);C.open(Be,dt)},Ae=Be=>{if(!m)return;f({type:"edit_page_document_edit_block_property",blockType:$i,blockProperty:"size",fromValue:void 0,toValue:Be.label});let dt=AF(m,Be.size);i.change(eo=>{u&&eo.removeDataPathByKey(o.key,["height"]),dt?eo.insertDataByKey(o.key,["width"],dt):eo.removeDataPathByKey(o.key,["width"])})};return fe.createElement(fe.Fragment,null,fe.createElement(Ct,null,R==="alt"?fe.createElement(Iv,{...t,onClose:te}):null),fe.createElement(as.View,{style:[w.alignCenter,w.flex1]},fe.createElement(as.View,{ref:E.setNodeRef,style:[S.imageWrapper,{maxWidth:I,maxHeight:N}],...x.events,...r},fe.createElement(Ut,{...t},m?fe.createElement(H.TouchableOpacity,{onPress:_e,style:w.alignCenter},fe.createElement(jo,{width:Y,height:z,source:m,accessibilityLabel:M,loading:p?"priority":"lazy",style:[S.image,E.isDragging&&je.translucent]})):fe.createElement(MF,{accessibilityLabel:M})),a?null:fe.createElement(fe.Fragment,null,(n||x.hovered)&&!E.isDragging?fe.createElement(LF,{...t,openAltTextModal:Q,setSize:Ae}):null,fe.createElement(Ci,{theme:{color:"dark"}},O?fe.createElement(as.View,{ref:E.setActivatorNodeRef,style:[S.imageDragHandle,{display:(x.hovered||P.hovered)&&!E.isDragging?"flex":"none"}],...P.events,...E.listeners},fe.createElement(v.GrabberVertical,{size:A.ICON_S,style:[S.imageDragHandleIcon]})):null)))),fe.createElement($c,{...t,isSelected:t.isSelected||x.hovered}))}function MF(t){let{style:o,...e}=t,[,n]=_(W),[,r]=_(DC);return fe.createElement(as.View,{style:[w.alignCenter,w.justifyContentCenter,r.brokenImage,g.Padding.large,o],...e},fe.createElement(as.View,null,fe.createElement(v.CloudOff,{size:A.ICON_L,style:[n.textMuted]})),fe.createElement(as.View,{style:[g.Margin.mediumTop]},fe.createElement(as.Text,{style:[n.Caption,n.textMuted]},"Could not load image")))}function LF(t){let{editor:o,node:e,openAltTextModal:n,setSize:r}=t,i=Rs(),[,a]=_(DC),[s,l]=fe.useState(!1),u=Xr(O_),d=e.data.toFrozenObject(),p=()=>{o.change(f=>{e&&he.isTextRange(f.value.selection)&&!f.value.selection.hasEdgeIn(e)&&f.collapseToStartOf(e),f.focus()}),l(!0)};return fe.createElement(fe.Fragment,null,fe.createElement(as.View,{style:[a.imageToolbar,d.refDark?a.imageToolbarWith2Buttons:null,w.directionRow,s?a.imageToolbarOpen:null]},s?fe.createElement(fe.Fragment,null,fe.createElement(NF,{onPress:r,...t}),fe.createElement(V,{title:"ALT text",size:"small",icon:v.AltText,style:[g.Margin.smallRight],onPress:n}),fe.createElement(Tv,{editor:o,node:e,style:D.margin.smallRight}),fe.createElement(V,{size:"small",icon:v.X,onPress:()=>l(!1)})):fe.createElement(fe.Fragment,null,d.refDark?fe.createElement(V,{size:"small",icon:i.color==="light"?v.ThemeDark:v.ThemeLight,title:`Image has a ${i.color==="light"?"dark":"light"} mode alternative.
Toggle theme to see it.`,onPress:()=>{u(i.color==="light"?"dark":"light")},style:[g.Margin.smallRight]}):null,fe.createElement(V,{size:"small",icon:v.MoreVertical,onPress:p}))))}function NF(t){let{editor:o,node:e,onPress:n}=t,r=fe.useRef(null),i=EF.map(({size:l,label:u})=>({key:`${l}`,title:u,trigger:()=>{n({size:l,label:u})}})),a=ce(r),s=()=>{a.open(ie({position:{width:"anchor"},groups:[{key:"image.resize",commands:i}].filter(ue)})),o.change(l=>{e&&he.isTextRange(l.value.selection)&&!l.value.selection.hasEdgeIn(e)&&l.collapseToStartOf(e),l.focus()})};return fe.createElement(fe.Fragment,null,fe.createElement(V,{ref:r,active:a.opened,size:"small",rightIcon:v.ChevronDown,onPress:s},"Size"))}function AF(t,o){let e=t.width||en.PAGE_BODY_MAX_WIDTH;if(o===100)return;let n=Math.min(e,en.PAGE_BODY_MAX_WIDTH);return Math.round(n*(o/100))}var DC=G.create({imageWrapper:{position:"relative",borderRadius:A.RADIUS_M},imageCaption:{position:"relative",textAlign:"center"},image:{borderRadius:A.RADIUS_M,maxWidth:"100%"},imageToolbar:t=>({position:"absolute",top:g.small,right:g.small,padding:g.small,borderRadius:A.RADIUS_M,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"solid",backgroundColor:t.colors.background.mid,overflow:"hidden",width:42,transition:"width 50ms ease-in-out"}),imageToolbarWith2Buttons:{width:76},imageToolbarOpen:{width:188},imageDragHandle:{position:"absolute",top:g.small,left:g.small,cursor:"grab"},imageDragHandleIcon:{textShadowColor:$.BLACK,textShadowRadius:3,color:$.WHITE},brokenImage:t=>({borderRadius:A.RADIUS_M,backgroundColor:t.colors.background.muted})});c();var Ne=b(k());c();var BC=JSON.parse('{"tooltip":"tooltip_8qsEs","brokenImage":"brokenImage_F5FWc"}');function G6(t){let{editor:o,node:e,parent:n,ancestors:r}=t,i=tv(o,e.key),a=Ne.useRef(null),s=gr(n.object==="block"?n:null),l=e.data.get("size","original"),[,u]=_(zF),d=r.some(f=>f.object==="inline"&&f.type===Rn),p=f=>Ne.createElement(qd,{...f,...t,style:[u.inlineFrame,l==="line"?w.alignCenter:null]},Ne.createElement(Ne.Suspense,{fallback:Ne.createElement(xe,{size:"small"})},Ne.createElement(DF,{node:e,parentLineHeight:s,size:l,ref:a,withPriorityLoading:i})));return o.readOnly?p(d?{}:{onPress:()=>{a.current?.openInGallery()}}):Ne.createElement(WF,{...t,anchor:p})}var DF=Ne.forwardRef(function(o,e){let{node:n,parentLineHeight:r,size:i,withPriorityLoading:a}=o,{ref:s,refDark:l}=n.data.toFrozenObject(),u=Uo.getImageAltText(n),d=yy(s,l),p=kd();Ne.useImperativeHandle(e,()=>({openInGallery:()=>{d?.uri&&p.open([{url:d.uri}])}}),[d?.uri]);let f={};i==="original"?f={maxWidth:300}:f={maxHeight:r,height:r,width:"auto"};let m=Ne.createElement(BF,{accessibilityLabel:u});return d?Ne.createElement(jo,{accessibilityLabel:u,source:d,style:f,errorFallback:m,loading:a?"priority":"lazy"}):m});function BF(t){let{accessibilityLabel:o}=t,[,e]=_(W);return Ne.createElement(U,{style:BC.brokenImage,"aria-label":o},Ne.createElement(v.CloudOff,{size:A.ICON_M,style:e.textMuted}))}function WF(t){let{node:o,anchor:e,isFocused:n,editor:r}=t,{logAnalyticsEvent:i}=Ne.useContext(Ve),a=Ne.useRef(null),[s,l]=Ne.useState(null),u=n&&r.value.selection.isCollapsed,[d,p]=Ne.useState(!1);Ne.useEffect(()=>{if(u){p(!0);return}let y=setTimeout(()=>{p(!1)},300);return()=>{clearTimeout(y)}},[u]);let f=()=>{r.change(y=>{y.collapseToStartOf(o).focus()})},m=y=>{r.change(S=>{S.insertDataByKey(o.key,["size"],y),S.collapseToStartOf(o).focus()})},h=()=>{i({type:"edit_page_document_edit_block_type",fromType:gc,toType:$i}),r.change(y=>{Uo.replaceInlineImageWithBlock(y,o)})};return Yu(()=>{a.current?.updatePosition()},[o.data]),Ne.createElement(Ne.Fragment,null,Ne.createElement(Ct,null,s==="alt"?Ne.createElement(Iv,{...t,onClose:()=>l(null)}):null),Ne.createElement(za,{ref:a,opened:u||d,anchor:({ref:y})=>e({ref:y,onPress:f})},Ne.createElement(Mn,{kind:"tooltip"},Ne.createElement(U,{style:BC.tooltip},Ne.createElement(V,{size:"small",title:"Inline size",onPress:()=>m("line"),icon:v.ImageSizeSmall}),Ne.createElement(V,{size:"small",title:"Original size",onPress:()=>m("original"),icon:v.ImageSizeLarge}),Ne.createElement(V,{size:"small",title:"Convert to block",onPress:h,icon:v.ImageSizeBlock}),Ne.createElement(Tv,{editor:r,node:o}),Ne.createElement(V,{size:"small",title:"ALT text",onPress:()=>l("alt"),icon:v.AltText})))))}var zF=G.create({inlineFrame:{maxWidth:"100%"}});c();var H6=b(k());function K6(t){let{children:o,attributes:e}=t;return H6.createElement(Dt,{tag:"strong",style:go.Bold,...e},o)}c();var X6=b(k());function U6(t){let{children:o,attributes:e}=t;return X6.createElement(Dt,{tag:"em",style:go.Italic,...e},o)}c();var Y6=b(k());function j6(t){let{children:o,attributes:e}=t;return Y6.createElement(Dt,{tag:"span",style:go.Strikethrough,...e},o)}c();var $6=b(k());function Z6(t){let{children:o,attributes:e}=t,[,n]=_(FF);return q1(),$6.createElement(Dt,{tag:"code",style:[n.markCode],...e},o)}var FF=G.create({markCode:t=>({backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.medium,paddingLeft:g.xsmall,paddingRight:g.xsmall,fontFamily:zg})});c();var J6=b(k());function Q6(t){let{children:o,mark:e,attributes:n}=t,r=e.data.toObject(),i=Si(),a=r.background&&r.background!=="default",s=r.text&&r.text!=="default",l=a&&i.color==="dark"?{color:$.lightModeText.base}:null;s&&(l=ty.find(d=>d.key===r.text)||null);let u=a?oy.find(d=>d.key===r.background):null;return J6.createElement(Dt,{tag:"mark",style:[{color:l?l.color:"inherit",backgroundColor:u?u.color:"inherit"}],...n},o)}c();var ss=b(k()),Hv=b(q());c();var qo=b(k()),kf=b(q());c();var e7=JSON.parse('{"exitHint":"exitHint_xASL-","show":"show_HIlHf"}');function qv(t){let{node:o,anchor:e,isSelected:n,isOnlyNodeSelected:r,isFocused:i,editor:a}=t,{formula:s}=o.data.toFrozenObject(),l=qo.useRef(null),[u,d]=qo.useState(!1),[p,f]=qo.useState(!1),[m,h]=Uu(s,[s]),[,y]=_(W),S=()=>{d(!1),f(!1)},C=()=>{u||(a.change(P=>{qt(P.value.selection)&&P.collapseToStartOf(o).focus()}),d(!0))};qo.useEffect(()=>{u&&l.current?.focus()},[u]),qo.useEffect(()=>{r&&C()},[r]);let x=P=>{h(P),f(!1)},O=()=>{S(),a.change(P=>{P.blur(),P.insertDataByKey(o.key,["formula"],o.object==="inline"?m.replace(/\n/g," "):m)})},E=()=>{S(),a.change(P=>{if(P.blur(),P.insertDataByKey(o.key,["formula"],o.object==="inline"?m.replace(/\n/g," "):m),o.object==="block")St(P);else{let L=o.getFirstText()?.key;if(L){let R=P.value.document.getNextText(L);R&&P.collapseToStartOf(R)}}P.focus()})};return a.readOnly?e({formula:s}):qo.createElement(UP,{opened:u,onClose:O,wrapper:L1,anchor:({ref:P})=>e({ref:P,isFocused:n&&i||u,onPress:C,formula:m,onError:()=>{f(!0)}})},qo.createElement(Mn,{kind:"tooltip"},qo.createElement(kf.View,null,qo.createElement(no,{ref:l,multiline:!0,numberOfLines:3,autoFocus:!0,selectTextOnFocus:!0,value:m,onChangeText:x,placeholder:"Enter your TeX formula",onSubmit:E,kind:"inverted",textStyle:p?[y.danger]:void 0}),qo.createElement(VF,null),p?qo.createElement(Va,{tooltip:"There is an error in your math formula",preferredPlacement:"bottom"},(P,L)=>qo.createElement(kf.View,{ref:L,style:qF.blockErrorBadge,...P.events},qo.createElement(yo,{icon:v.ExclamationCircle,kind:"danger"}))):null)))}function VF(){return qo.createElement(At,{style:[e7.exitHint,D.text.label,D.textColor.muted,D.text.notSelectable],contentEditable:!1},"Exit with"," ",qo.createElement(In,{inverted:!0,style:[D.flex.inline],shortcut:Ge.EDITOR_EXIT_BLOCK}))}var qF=kf.StyleSheet.create({blockErrorBadge:{position:"absolute",bottom:g.small,left:g.small}});c();var Gv=Zg("f1a718ae5a0b5d0a680254c13fabc0ed4b38f7b4037704dda83756645a7f1027",()=>import("https://app.gitbook.com/public/app/chunks/MathTeXView.lazycomponent-3VN4X3SL.min.js"));function t7(t){return ss.createElement(qv,{anchor:({formula:o,onError:e,...n})=>ss.createElement(ve,{...t},ss.createElement(Ut,{...t,...n},ss.createElement(ss.Suspense,{fallback:ss.createElement(ni,null)},ss.createElement(Hv.ScrollView,{horizontal:!0,showsVerticalScrollIndicator:!1,contentContainerStyle:GF.container},ss.createElement(Gv,{formula:o,inline:!1,onError:e}))))),...t})}var GF=Hv.StyleSheet.create({container:{marginLeft:"auto",marginRight:"auto"}});c();var il=b(k());function o7(t){return il.createElement(qv,{anchor:({formula:o,onError:e,...n})=>il.createElement(qd,{...t,...n},il.createElement(il.Suspense,{fallback:il.createElement(xe,{size:"small"})},il.createElement(Gv,{formula:o,inline:!0,onError:e}))),...t})}c();var Qt=b(k());c();var n7=b(k()),Kv=n7.createContext(new Map);c();c();var FC=b(k());c();c();var WC=b(k()),r7=b(q());var i7={title:"Checkbox",description:"A single checkbox that can be checked or unchecked.",IconComponent:v.ColumnTypeCheckbox,ValueComponent:HF,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o&&e(!1);break;case"enter":e(!o);break}}};function HF(t){let{value:o,readOnly:e,onValueChange:n,style:r}=t;return WC.default.createElement(r7.View,{style:[r,w.flex1,w.directionRow,w.alignCenter]},WC.default.createElement(kc,{value:o,onValueChange:n,readOnly:e}))}c();var ci=b(k()),xf=b(q());var a7={title:"Link",description:"Reference another page, file, space or collection.",IconComponent:v.PageLink,ValueComponent:KF};function KF(t){let{value:o,selected:e,readOnly:n,displayMode:r,style:i,onValueChange:a}=t,s=ci.default.useRef(null),l=ce(s),u=ut(),d=be(),p=()=>{l.open(Bn(a,u,d,{accept:["page","file","space","collection","anchor","url"]}))};return ci.default.createElement(xf.View,{ref:s,style:[w.directionRow,w.wrap,w.flex1,w.alignCenter,i]},ci.default.createElement(ci.default.Suspense,{fallback:ci.default.createElement(xe,null)},o?ci.default.createElement(xf.View,{style:[w.flex1,w.directionRow]},ci.default.createElement(XF,{contentRef:o})):null,(r==="block"||e)&&!n?ci.default.createElement(V,{icon:v.MoreVertical,title:r!=="block"?"Select target":null,kind:"secondary",size:"small",onPress:p},r==="block"?"Select target":null):null))}function XF(t){let{contentRef:o}=t,[e]=IS([o]),[,n]=_(W);return e?ci.default.createElement(xf.View,{style:[w.directionRow,w.alignCenter]},e.icon?ci.default.createElement(xf.View,{style:[g.Margin.smallRight]},ci.default.createElement(e.icon,{size:A.ICON_M,style:[n.textMuted]})):null,ci.default.createElement(qa,{url:e.href,onPress:r=>{r.preventDefault(),e.open()},style:[n.Body]},e.title)):null}c();var zr=b(k()),ya=b(q());var s7={title:"Files",description:"Attachments allow you to add images, documents, or other files which can then be viewed or downloaded.",IconComponent:v.ColumnTypeFile,ValueComponent:UF};function UF(t){let{value:o,selected:e,readOnly:n,displayMode:r,onValueChange:i,style:a}=t,s=Wt(),l=async()=>{let d=await s.prompt({title:"Select file"});i([...o,...d.filter(p=>p.kind==="file").map(p=>p.file)])},u=d=>{let p=[...o];p.splice(d,1),i(p)};return zr.default.createElement(ya.View,{style:[w.directionRow,w.wrap,w.flex1,o.length>0?jF.filesList:null,a]},zr.default.createElement(zr.default.Suspense,{fallback:zr.default.createElement(xe,null)},o.map((d,p)=>zr.default.createElement(YF,{key:d,fileId:d,readOnly:n,onRemove:()=>u(p)}))),(r==="block"||e)&&!n?zr.default.createElement(V,{icon:v.Plus,title:"Add attachment",kind:"secondary",size:"small",onPress:l},r==="block"?"Add file":null):null)}function YF(t){let{fileId:o,readOnly:e,onRemove:n}=t,[,r]=_(W),i=H.useInteractiveState(),a=zr.default.useRef(null),s=ce(a),l=Qe({kind:"file",file:o}),u=l.resolution?.extra?.file;return zr.default.createElement(ya.TouchableOpacity,{onPress:()=>{e?l.href&&Ts(l.href):s.open(ie({groups:[{key:"file",commands:[{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}},u?{key:"download",title:"Download",icon:v.Download,trigger:()=>{Ts(l.href)}}:null].filter(ue)}]}))},...i.events},zr.default.createElement(ya.View,{ref:a,style:[w.directionRow,w.alignCenter,g.Margin.smallRight]},zr.default.createElement(ya.View,{style:[g.Margin.smallRight]},zr.default.createElement(_d,{file:u,size:A.BUTTON_S})),zr.default.createElement(ya.View,null,zr.default.createElement(ya.Text,{style:[r.Body,i.active||s.opened?r.primary:r.text]},u?.name||"Deleted"))))}var jF=ya.StyleSheet.create({filesList:{gap:g.small}});c();var zC=b(k()),ap=b(q());var c7={title:"Number",description:"",IconComponent:v.Numbers,ValueComponent:$F,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(null);break;case"enter":typeof o!="number"&&e(0);break}}};function $F(t){let{readOnly:o,value:e,onValueChange:n,onSelectionChange:r,style:i}=t,[,a]=_(W),s=[a.Body,ZF.numberInput,a.textMid,i],l=()=>{r(!0)};return o?zC.default.createElement(ap.Text,{style:s},typeof e=="number"?String(e):""):zC.default.createElement(ap.TextInput,{style:s,value:typeof e=="number"?String(e):"",onChangeText:u=>n(Number(u)),onFocus:l})}var ZF=ap.StyleSheet.create({numberInput:{height:"auto",padding:0,width:"100%",borderWidth:0}});c();var pu=b(k()),Of=b(q());var JF=8,QF={info:$.primary.light,merge:$.violet.light,upgrade:$.fuchsia.light,danger:$.scarlet.light},l7={title:"Rating",description:"",IconComponent:v.ColumnTypeRating,ValueComponent:tV,commands:eV,onKeyDown:(t,o,e)=>{switch(t){case"backspace":e(0);break;case"enter":break}}};function eV(t){let{definition:o,setDefinition:e}=t;return[{key:"rating",commands:[{key:"rating.max_value",title:"Max",icon:v.MaximumValue,descendant:()=>ie({search:"Select max rating\u2026",groups:[{key:"max_values",commands:[...Array(5).keys()].map(n=>({key:`${n+1}`,title:`${n+1}`,type:1,selected:o.max===n+1,trigger:()=>{e({...o,max:n+1})}}))}]})}]}]}function tV(t){let{value:o,definition:e,definitionColorKind:n,onValueChange:r,readOnly:i,style:a}=t,[s,l]=_(nV),[u,d]=pu.default.useState(0),p=[...Array(e.max+1).keys()].slice(1),f=S=>{r(S===o?null:S)},m=S=>{i||d(S)},h=l.circleBase,y=n?{backgroundColor:QF[n]}:l.circleActiveDefault;return pu.default.createElement(Of.View,{style:[w.directionRow,w.flex1,w.alignCenter,a]},p.map(S=>pu.default.createElement(H.WithInteractiveState,{key:String(S),onHoverIn:()=>m(S),onHoverOut:()=>m(0)},({events:C})=>pu.default.createElement(Of.TouchableOpacity,{...C,onPress:()=>f(S)},pu.default.createElement(oV,{size:JF+2*(S-1),style:[u===0&&o&&o>=S||u>=S?y:h,{marginRight:g.xsmall}]})))))}function oV({size:t,style:o}){return pu.default.createElement(Of.View,{style:[{width:t,height:t,borderRadius:t/2},o]})}var nV=G.create({circleBase:t=>({backgroundColor:t.colors.background.standout}),circleActiveDefault:()=>({backgroundColor:$.primary.light})});c();var u7=b(VD()),Kn=b(k()),cs=b(q());var d7={title:"Select",description:"Select allows you to select an option from predefined options in a dropdown.",IconComponent:v.ColumnTypeSelect,ValueComponent:aV,commands:rV,onKeyDown:(t,o,e)=>{switch(t){case"backspace":o.length>0&&e([]);break}}};function rV(t){let{definition:o,setDefinition:e}=t;return[{key:"select",commands:[{key:"select.allow_multiple",title:"Allow multiple",icon:v.OptionAdd,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}},{key:"select.options",title:"Manage options",icon:v.OptionManage,descendant:()=>p7(t)}]}]}function p7(t){let{definition:o,setDefinition:e,openModal:n}=t,{options:r}=o,i=r.map((a,s)=>{let l=u=>{let d=[...r];d[s]={...a,label:u},e({...o,options:d})};return{key:a.value,title:a.label,descendant:()=>ie({groups:[{key:"select.options.manageOption",commands:[{key:"editOption",title:"Edit option",icon:v.Edit,trigger:()=>{n(u=>Kn.default.createElement(iV,{...u,option:a,onSave:l}))}},{key:"deleteOption",title:"Delete option",icon:v.Trashcan,trigger:()=>{let u=[...r];u.splice(s,1),e({...o,options:u})}}]}]})}});return ie({search:"Search options or type to add",groups:[{key:"select.options.manage",commands:a=>{let s=a.query.text.trim();return a.query.text&&!i.find(l=>l.title===s)?[{key:"add_new_option",title:s,icon:v.Plus,trigger:()=>{let u={value:ag(),label:s,color:"blue"},[,d]=e({...o,options:[...r,u]});return p7(d)}},...i]:i}}]})}function iV(t){let{option:o,definition:e,onSave:n,onClose:r}=t,{options:i}=e,a=[...i].filter(m=>m.label!==o.label),[s,l]=Kn.default.useState(o),u=m=>m.length===0?"The label can not be empty":a.filter(y=>y.label===m).length>0?"Another option already exists with this label":null,d=()=>{n(s.label),r()},p=m=>{l({...s,label:m})},f=u(s.label);return Kn.default.createElement(vo,{title:"Edit option",footer:Kn.default.createElement(cs.View,{style:[w.directionRow,w.justifyContentEnd]},Kn.default.createElement(V,{kind:"secondary",onPress:r,style:g.Margin.smallRight},"Cancel"),Kn.default.createElement(V,{kind:"primary",onPress:d,disabled:!!f},"Save")),onClose:r},Kn.default.createElement(cs.View,null,Kn.default.createElement(no,{autoFocus:!0,value:s.label,label:"Label",onChangeText:p,feedback:f?{type:"danger",message:f}:void 0})))}function aV(t){let{value:o,selected:e,definition:n,onValueChange:r,definitionColorKind:i,readOnly:a,displayMode:s,style:l}=t,u=Kn.default.useRef(null),d=ce(u),[,p]=_(W),f=()=>{d.open(sV(n,o,r))},m=Kn.default.createElement(cs.View,{style:[w.directionRow,w.wrap,w.flex1,o.length>0?cV.optionsList:null]},o.map(h=>{let y=n.options.find(S=>S.value===h);return y?Kn.default.createElement(e_,{key:y.value,deletable:!a&&n.multiple,kind:i??"info",onPress:()=>n.multiple?r(o.filter(S=>S!==y.value)):null,size:"small"},y.label):null}));return a||s==="inline"&&!e?m:Kn.default.createElement(cs.TouchableOpacity,{ref:u,onPress:f,style:[l]},Kn.default.createElement(cs.View,{style:[w.directionRow,w.flex1,w.alignCenter]},m,s==="inline"?Kn.default.createElement(cs.View,{style:[g.Margin.smallLeft]},Kn.default.createElement(v.ChevronDown,{size:A.ICON_XS,style:p.textMuted})):null))}function sV(t,o,e){return ie({search:"Find an option\u2026",position:{width:"small"},groups:[{key:"options",commands:t.options.map(n=>{let r=o.includes(n.value);return{key:n.value,title:n.label,...t.multiple?{type:1,selected:r}:{selected:void 0},trigger:()=>{e(r?o.filter(i=>i!==n.value):(0,u7.default)(t.multiple?[...o,n.value]:[n.value]))}}})}]})}var cV=cs.StyleSheet.create({optionsList:{gap:g.small}});c();var Xv=b(k()),Uv=b(q());var m7={title:"Text",description:"",IconComponent:v.ColumnTypeText,ValueComponent:uV,commands:lV};function lV(t){let{definition:o}=t,{textAlignment:e}=o,n={left:v.AlignTextLeft,center:v.AlignTextCenter,right:v.AlignTextRight};return[{key:"text.alignment",commands:[{key:"text.alignment",title:"Alignment",descendant:()=>f7(t),icon:n[e]}]}]}function f7(t){let{definition:o,setDefinition:e}=t;return ie({groups:[{key:"text.alignment.select",commands:[{label:"Left",value:"left",icon:v.AlignTextLeft},{label:"Center",value:"center",icon:v.AlignTextCenter},{label:"Right",value:"right",icon:v.AlignTextRight}].map(n=>({key:`text.alignment.${n.value}`,title:n.label,type:1,selected:o.textAlignment===n.value,icon:n.icon,trigger:()=>{let[,r]=e({...o,textAlignment:n.value});return f7(r)}}))}]})}function uV(t){let{value:o,definition:e,style:n,readOnly:r}=t;return o==null?null:Xv.default.createElement(Uv.View,{style:[w.flex1,!r&&dV.editableFragment,n]},Xv.default.createElement(Wc.Provider,{value:e.textAlignment},Xv.default.createElement(ur,{fragment:o})))}var dV=Uv.StyleSheet.create({editableFragment:{cursor:"text"}});c();var Xn=b(k()),Fi=b(q());var g7={title:"Users",description:"A user field lets you add collaborators to your records.",IconComponent:v.Users,ValueComponent:mV,commands:pV};function pV(t){let{definition:o,setDefinition:e}=t;return[{key:"users",commands:[{key:"users.allow_multiple",title:"Allow multiple",icon:v.Team,type:2,enabled:o.multiple,trigger:()=>{let[n]=e({...o,multiple:!o.multiple});return n}}]}]}function mV(t){let{value:o,selected:e,readOnly:n,displayMode:r,definition:i,onValueChange:a,style:s}=t,l=Xn.default.useRef(null),u=ce(l),d=m=>{let h=[...o];h.splice(m,1),a(h)},p=()=>{u.open(ie({search:"Search users\u2026",position:{width:"small"},groups:[{key:"users",commands:m=>El.read({query:m.query.text,types:["users"]}).map(y=>y.index!=="users"?null:{key:y.object.objectID,title:y.object.displayName,icon:({size:S})=>Xn.default.createElement(Tl,{user:y.object,size:S}),trigger:()=>{a([...o,y.object.objectID])}}).filter(ue)}]}))},f=i.multiple?"Add users":"Replace";return Xn.default.createElement(Fi.View,{style:[w.flex1,w.directionRow,s]},Xn.default.createElement(Fi.View,{style:[w.directionRow,w.wrap,w.flex1,o.length>0?gV.filesList:null]},Xn.default.createElement(Xn.default.Suspense,{fallback:null},o.map((m,h)=>Xn.default.createElement(fV,{key:m,userId:m,readOnly:n,onRemove:()=>d(h)})))),(r==="block"||e)&&!n?Xn.default.createElement(V,{ref:l,icon:i.multiple?v.Plus:v.ChevronDown,title:r==="block"?void 0:f,kind:"secondary",size:"small",onPress:p,active:u.opened},r==="block"?f:null):null)}function fV(t){let{userId:o,readOnly:e,onRemove:n}=t,[,r]=_(W),i=H.useInteractiveState(),a=Xn.default.useRef(null),s=ce(a),[l]=Rc([Vx(o)]);return Xn.default.createElement(Fi.TouchableOpacity,{onPress:()=>{s.open(ie({position:{width:"small"},groups:[{key:"user",commands:[e?null:{key:"remove",title:"Remove",icon:v.Trashcan,trigger:()=>{n()}}].filter(ue)}]}))},...i.events},Xn.default.createElement(Fi.View,{ref:a,style:[w.directionRow,w.alignCenter,g.Margin.smallRight]},l?Xn.default.createElement(Fi.View,{style:[g.Margin.smallRight]},Xn.default.createElement(Tl,{user:l,size:A.BUTTON_S})):null,Xn.default.createElement(Fi.View,null,Xn.default.createElement(Fi.Text,{style:[r.Body,i.active||s.opened?r.primary:r.text]},l?.displayName||"Deleted"))))}var gV=Fi.StyleSheet.create({filesList:{gap:g.small}});var li={checkbox:i7,number:c7,text:m7,files:s7,select:d7,users:g7,rating:l7,"content-ref":a7},h7=["text","number","checkbox","select","users","files","content-ref","rating"];function ls(t){return t.title||li[t.type].title}function sp(t){let{record:o,definition:e,readOnly:n,displayMode:r="inline",editor:i,nodeKey:a,selected:s,definitionColorKind:l,style:u}=t,{ValueComponent:d}=li[t.definition.type],p=h=>{i.change(y=>{ee.setRecordValue(y,a,o.key,e.id,h)})},f=h=>{h&&i.change(y=>{ee.moveTableSelection(y,a,{recordId:o.key,definitionId:e.id})})},m=FC.createElement(d,{editor:i,nodeKey:a,readOnly:n,displayMode:r,selected:s,value:o.value.values[e.id],definitionColorKind:l,definition:e,onValueChange:p,onSelectionChange:f,style:u});return e.type==="text"?m:FC.createElement(pe,{style:w.flex1,onClick:h=>{h.stopPropagation(),f(!0)}},m)}c();function ec(t,o={}){return ie({search:"Select column type",groups:[{key:"types",commands:h7.map(e=>{let n=li[e];return{key:e,icon:n.IconComponent,title:n.title,...o.selectedType?{type:1,selected:o.selectedType===e}:{selected:void 0},trigger:()=>{t(e)}}})}]})}c();var al=b(k()),mu=b(q());function y7(t){return t.readOnly?al.createElement(hV,{...t}):al.createElement(yV,{...t})}function hV(t){let{definition:o,style:e}=t,[,n]=_(W);return al.createElement(mu.Text,{style:[w.directionRow,o.type==="text"?Yv[o.textAlignment]:null,n.Body,n.textMid,n.Medium,Yv.columnHeader,e],selectable:!0},ls(o))}function yV(t){let{editor:o,nodeKey:e,definition:n,style:r}=t,[i,a]=_(W),s=f=>{o.change(m=>{ee.renameColumn(m,e,n.id,f)})},l=n.title||"",u=ls(n),d=al.useMemo(()=>mu.StyleSheet.flatten([r,a.Body,a.textMid,a.Medium,Yv.columnHeader,n.type==="text"?Yv[n.textAlignment]:null]),[r,n]),p=al.useMemo(()=>th(l||u||"",d),[l,u,d]);return al.createElement(Jr,{component:mu.TextInput,value:l,placeholder:u,placeholderTextColor:i.colors.text.muted,onChangeText:s,style:[d,p===void 0?{}:{width:p,maxWidth:"100%"}]})}var Yv=mu.StyleSheet.create({columnHeader:{wordWrap:"anywhere"},left:{textAlign:"left"},center:{textAlign:"center"},right:{textAlign:"right"}});c();var b7=b(k()),v7=["info","merge","upgrade","danger"];function vV(t,o){let{definitionColorsKindsMap:e}=o.reduce((n,r)=>{let i=t[r];if(i.type==="rating"||i.type==="select"){let a=v7[n.colorIndexToBeClaimed];n.definitionColorsKindsMap[r]=a,n.colorIndexToBeClaimed=(n.colorIndexToBeClaimed+1)%v7.length}return n},{colorIndexToBeClaimed:0,definitionColorsKindsMap:{}});return e}function w7(t,o){return b7.default.useMemo(()=>vV(t,o),[t])}c();var di=b(k());c();c();c();var VC=b(k());function S7(t){return VC.default.createElement(VC.default.Fragment,null)}c();c();function cp(t,o,e={}){let{selected:n=[],search:r="Select columns\u2026",multiple:i=!1,filterDefinition:a=()=>!0}=e;return ie({search:r,groups:[{key:"columns",commands:Object.entries(t).filter(([s,l])=>a(l)).map(([s,l])=>{let u=li[l.type],d=n.includes(s);return{key:s,title:ls(l),icon:u.IconComponent,type:1,selected:d,trigger:()=>o(i?d?n.filter(p=>p!==s):[...n,s]:d?[]:[s])}})}]})}c();function bn(t,o,e,n){let{focus:r="end",definition:i,record:a}=n;if(!e.selection.definitionId)return!1;let s=e.records.findIndex(p=>p.key===e.selection.recordId),l=e.view.columns.indexOf(e.selection.definitionId),u=e.records["relative"in a?s+a.relative:a.absolute],d=e.view.columns["relative"in i?l+i.relative:i.absolute];return!d||!u?!1:(ee.moveTableSelection(t,o,{recordId:u.key,definitionId:d},r),!0)}function fu(t,o,e,n){let r=e.records.findIndex(a=>a.key===e.selection.recordId),i=e.records["relative"in n?r+n.relative:n.absolute];return i?(ee.moveTableSelection(t,o,{recordId:i.key,definitionId:void 0}),!0):!1}var C7=(t,o,e,n)=>{if(!e.selection.definitionId&&e.selection.recordId)return wV(t,o,e,n);if(e.selection.definitionId&&e.selection.recordId)return bV(t,o,e,n)},bV=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"move-up":case"move-down":{bn(n,o,e,{definition:{relative:t==="move-up"?-1:1},record:{relative:0},focus:t==="move-up"?"end":"start"})||bn(n,o,e,{definition:{absolute:t==="move-up"?e.view.columns.length-1:0},record:{relative:t==="move-up"?-r:r},focus:t==="move-up"?"end":"start"})||(t==="move-up"?zu(n,o):St(n,o));break}case"move-left":case"move-right":{bn(n,o,e,{definition:{absolute:0},record:{relative:t==="move-left"?-1:1},focus:t==="move-left"?"end":"start"});break}case"tab":case"enter":{if(!bn(n,o,e,{definition:{relative:1},record:{relative:0},focus:"end"})&&!bn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:"end"})){let i=ee.insertEmptyRecord(n,o.key);ee.moveTableSelection(n,o,{recordId:i,definitionId:e.view.columns[0]},"start")}break}case"backspace":{bn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"})||ee.moveTableSelection(n,o,{recordId:e.selection.recordId,definitionId:void 0});break}}},wV=(t,o,e,n)=>{let r=e.view.cardSize==="medium"?3:2;switch(t){case"tab":{fu(n,o,e,{relative:1});break}case"shift+tab":{fu(n,o,e,{relative:-1});break}case"move-left":case"move-right":{fu(n,o,e,{relative:t==="move-left"?-1:1})||(t==="move-left"?zu(n,o):St(n,o));break}case"move-up":case"move-down":{fu(n,o,e,{relative:t==="move-up"?-r:r})||(t==="move-up"?zu(n,o):St(n,o));break}case"backspace":{fu(n,o,e,{relative:-1})||fu(n,o,e,{relative:1}),ee.removeRecord(n,o.key,e.selection.recordId);break}case"enter":{bn(n,o,e,{definition:{absolute:0},record:{relative:0},focus:"start"});break}}};c();var tc=b(k());c();var jv=b(k());function k7(t){let{editor:o,nodeKey:e,defaultTextDefinitionId:n}=t,[,r]=_(SV),[,i]=_(W),a=()=>{o.change(s=>{let l=ee.insertEmptyRecord(s,e);ee.moveTableSelection(s,e,{recordId:l,definitionId:n})})};return jv.createElement(H.TouchableOpacity,{style:[w.flex1,r.cardPlaceholder,w.directionRow,w.alignCenter,w.justifyContentCenter,g.Padding.medium],activeStyle:r.cardPlaceholderActive,onPress:a},jv.createElement(H.Text.Child,{style:[i.Body,i.textMuted],activeStyle:i.primary},jv.createElement(v.Plus,{size:A.ICON_M,style:[g.Margin.smallRight]}),"New card"))}var SV=G.create({cardPlaceholder:t=>({borderRadius:t.radiuses.large,borderColor:t.colors.border.mid,borderWidth:1,borderStyle:"dashed"}),cardPlaceholderActive:t=>({borderColor:t.colors.primary.main})});c();var Un=b(k()),cl=b(q());c();var $v=JSON.parse('{"targetCard":"targetCard_YoeqR","controlButtons":"controlButtons_l18tz","grab":"grab_y1-pK","grabbing":"grabbing_fDPig"}');c();var sl=b(k()),x7=b(q());function O7(t){let{nodeKey:o,editor:e,record:n,view:r,visible:i,onExpand:a,draggableState:s}=t,{setNodeRef:l,isDragging:u,listeners:d}=s,p=sl.useRef(null),f=ki(p,l),m=ce(p),h=Wt(),y=ut(),S=be(),C=r.coverDefinition?n.value.values[r.coverDefinition]?.length>0:!1,x=r.targetDefinition?!!n.value.values[r.targetDefinition]:!1,O=async()=>{let[L]=await h.prompt({title:"Select file",accept:"images",acceptURL:!1});!L||L.kind!=="file"||e.change(R=>{ee.cards.setCardCoverForRecord(R,o,n.key,L)})},E=()=>Bn(L=>{e.change(R=>{ee.cards.setCardTargetForRecord(R,o,n.key,L)})},y,S,{accept:["page","file","space","collection","anchor","url"]}),P=L=>{L.preventDefault(),L.stopPropagation(),m.open(ie({groups:[{key:"actions",commands:[{key:"actions.target",icon:v.PageLink,...x?{title:"Target link",descendant:()=>ie({groups:[{key:"target",commands:[{key:"target.set",title:"Replace target",icon:v.Replace,trigger:()=>E()},{key:"target.remove",title:"Remove target",icon:v.Trashcan,trigger:()=>{e.change(R=>{ee.cards.removeCardTargetForRecord(R,o,n.key)})}}]}]})}:{title:"Add target link",trigger:()=>E()}},{key:"actions.cover",icon:v.Image,...C?{title:"Cover",descendant:()=>ie({groups:[{key:"cover",commands:[{key:"cover.set",title:"Replace cover",icon:v.Replace,trigger:()=>{O()}},{key:"cover.remove",title:"Remove cover",icon:v.Trashcan,trigger:()=>{e.change(R=>{ee.cards.removeCardCoverForRecord(R,o,n.key)})}}]}]})}:{title:"Add cover",trigger:()=>{O()}}},{key:"actions.delete",title:"Delete",icon:v.Trashcan,trigger:()=>{e.change(R=>{ee.removeRecord(R,o,n.key)})}}]}]}))};return sl.createElement(x7.TouchableWithoutFeedback,{onPressIn:L=>{L.preventDefault(),L.stopPropagation()}},sl.createElement(U,{style:[D.flex.row,D.flex.alignCenter,$v.controlButtons,u&&D.opacity.translucent],inlineStyle:m.opened||i?{opacity:1}:void 0},sl.createElement(bt,{ref:f,kind:"secondary",size:"small",leadingIcon:v.GrabberVertical.CSS,iconOnly:!0,rounded:!0,label:"Drag card",tooltipTitle:u?void 0:`Click for options.
Drag to move.`,onClick:P,preventFocusOnPress:!0,style:{cursor:u?"grabbing":"grab"},...d}),sl.createElement(U,{style:[D.gap.smallColumnGap,D.margin.autoLeft]},sl.createElement(V,{kind:"secondary",size:"small",rounded:!0,icon:v.Maximize,onPress:a,title:"Open card",tooltipDelay:300}))))}c();var qC=b(k()),Zv=b(q());function _7(t){let{coverRef:o}=t,[,e]=_(CV),n=Qe(o),r=n.resolution?.extra?.file,i=n&&r&&hc(r)?na(r.downloadURL,{width:371}):null;return i?qC.createElement(Zv.View,{style:e.cardCover},qC.createElement(Zv.Image,{source:{uri:i},style:e.cardImage})):null}var CV=G.create({cardCover:t=>({backgroundColor:t.colors.background.muted}),cardImage:{width:"100%",aspectRatio:16/9}});function R7(t){let{nodeKey:o,definition:e,editor:n,readOnly:r,record:i,view:a,selected:s,selectedBy:l,isLastInRow:u,beforeOrderIndex:d,afterOrderIndex:p,onExpand:f}=t,[,m]=_(kV),[,h]=_(W),y=Ja(l),[S,C]=Un.useState(),x=Yo(S),O={type:"table-record",id:i.key,blockKey:o,previewLabel:"Move card"},E=mn({disabled:r,...zn(O)}),P=mr({shouldAccept:Un.useCallback(N=>N.type==="table-record"&&i.key!==N.id&&o===N.blockKey,[i.key]),onDrop:N=>{n.change(z=>{ee.moveRecord(z,o,N.id,x.current==="before"?{before:d,after:i.value.orderIndex}:{before:i.value.orderIndex,after:p})})},onHoverMove:({xPosition:N})=>{let z=N==="right"?"after":"before";S!==z&&C(z)}}),L=a.targetDefinition?i.value.values[a.targetDefinition]:void 0,R=Qe(L),T=()=>{n.change(N=>{ee.moveTableSelection(N,o,{recordId:i.key}),N.focus()})},M=a.coverDefinition&&i.value.values[a.coverDefinition]?.[0]?i.value.values[a.coverDefinition]?.[0]:null,I=Un.createElement(cl.View,{style:[w.flex1,g.Padding.medium,!M&&!r&&g.Margin.mediumVertical,!r&&m.editableArea]},a.columns.map((N,z)=>{let Y=e[N],Q=Un.createElement(sp,{record:i,selected:!1,definition:Y,nodeKey:o,editor:n,readOnly:r});return Un.createElement(cl.View,{key:N,style:[z<a.columns.length-1?g.Margin.smallBottom:null]},a.hideColumnTitle?null:Un.createElement(cl.View,null,Un.createElement(cl.Text,{style:[h.Label,h.textMid]},Y.title)),Q)}));return Un.createElement(sC,{style:[w.flex1],readOnly:r,selected:s,selectionColor:y.base,onSelect:T},Un.createElement(U,{style:[$v.targetCard,D.flex.flex1,E.isDragging&&D.opacity.translucent,F1,{[Yg]:P.isOver&&(!u||u&&S==="before"),[Zu]:P.isOver&&u&&S==="after"}],ref:P.setNodeRef},Un.createElement(Is,{style:[w.flex1,w.directionColumn],...L?{component:H.TouchableOpacity,href:r?R.href:void 0,onPress:N=>{N.preventDefault(),R?.open()}}:{component:H.View}},M?Un.createElement(_7,{coverRef:{kind:"file",file:M}}):null,r?I:Un.createElement(cl.TouchableWithoutFeedback,{onPressIn:N=>{N.preventDefault(),N.stopPropagation()}},I),r?null:Un.createElement(O7,{nodeKey:o,editor:n,record:i,view:a,visible:s,onExpand:f,draggableState:E}))))}var kV=G.create({editableArea:{cursor:"text"}});function P7(t){let{nodeKey:o,editor:e,readOnly:n,definition:r,records:i,view:a,selection:s,selections:l,openRecord:u}=t,d=$u(),p=tc.useMemo(()=>a.columns.find(h=>r[h].type==="text")||void 0,[a.columns,r]),f=tc.useMemo(()=>{switch(a.cardSize){case"medium":return{mobile:1,tablet:2,desktop:3};case"large":return{mobile:1,tablet:1,desktop:2};default:Ce(a.cardSize)}},[a.cardSize]),m=tc.useCallback(({item:h,index:y})=>{if(h.key==="new")return tc.createElement(k7,{editor:e,nodeKey:o,defaultTextDefinitionId:p});let S=!s.definitionId&&s.recordId===h.key,C=l.find(x=>x.recordId===h.key&&!x.definitionId);return tc.createElement(R7,{nodeKey:o,editor:e,readOnly:n,definition:r,record:h,view:a,selected:S||!!C,selectedBy:S?void 0:C?.clientId,isLastInRow:f[d]===1||(y+1)%f[d]===0,beforeOrderIndex:y>0?i[y-1].value.orderIndex:void 0,afterOrderIndex:y<i.length-1?i[y+1].value.orderIndex:void 0,onExpand:()=>u(h.key)})},[o,e,n,r,a,s.recordId,!!s.definitionId,p,u,l]);return tc.createElement(W1,{data:n?i:[...i,{key:"new"}],renderItem:m,numColumnsPerScreen:f,columnSpacing:g.medium,rowSpacing:g.medium})}var I7={IconComponent:v.Cards3Columns,title:"Cards",recordName:"card",definitionName:"field",selectableView:!1,ViewComponent:P7,DefinitionSettingsComponent:S7,commands:xV,onKeyDown:C7};function xV(t){let{view:o,setView:e}=t;return[{key:"cards.definitions",commands:[{key:"cards.selectCover",title:"Cover image",icon:v.Image,descendant:()=>OV(t)},{key:"cards.selectTarget",title:"Target link",icon:v.PageLink,descendant:()=>_V(t)}]},{key:"cards.size",commands:[{key:"cards.size.medium",title:"Medium",icon:v.Cards3Columns,type:1,selected:o.cardSize==="medium",trigger:()=>{let[n]=e({...o,cardSize:"medium"});return n}},{key:"cards.size.large",title:"Large",icon:v.Cards2Columns,type:1,selected:o.cardSize==="large",trigger:()=>{let[n]=e({...o,cardSize:"large"});return n}}]},{key:"cards.options",commands:[{key:"cards.hideColumnTitle",title:"Show labels",icon:v.EyeOff,type:2,enabled:!o.hideColumnTitle,trigger:()=>{let[n]=e({...o,hideColumnTitle:!o.hideColumnTitle});return n}},{key:"cards.definitions",title:"Fields",icon:v.EyeOff,descendant:()=>E7(t)}]}]}function OV(t){let{view:o,definition:e,setView:n}=t;return cp(e,r=>{n({...o,coverDefinition:r[0]})},{multiple:!1,search:"Select column for cover\u2026",selected:o.coverDefinition?[o.coverDefinition]:[],filterDefinition:r=>r.type==="files"})}function _V(t){let{view:o,definition:e,setView:n}=t;return cp(e,r=>{n({...o,targetDefinition:r[0]})},{multiple:!1,search:"Select column for target\u2026",selected:o.targetDefinition?[o.targetDefinition]:[],filterDefinition:r=>r.type==="content-ref"})}function E7(t){let{view:o,definition:e,setView:n}=t;return cp(e,r=>{let[,i]=n({...o,columns:r});return E7(i)},{multiple:!0,search:"Select visible columns\u2026",selected:o.columns})}c();c();var _f=b(k());c();var M7=b(sg()),Et=b(k()),Vi=b(q());var oc=Et.createContext(new Map),L7=Et.forwardRef((t,o)=>{let{nodeKey:e,editor:n,view:r,children:i}=t,{readOnly:a}=n,[,s]=_(N7),[l]=Us.useDimensions(),u=Je(),d=u?l.width:l.width-2,{widths:p,totalWidth:f}=Et.useMemo(()=>Zy(r,d,u),[d,r.columns,r.columnWidths]),[m,h]=Et.useState({left:!1,right:!1});Et.useEffect(()=>{h(O=>({left:f>d?O.left:!1,right:f>d?O.right:!1}))},[f,d]);let y=Yo(m),S=Et.useCallback(O=>{let{contentOffset:E,contentSize:P,layoutMeasurement:L}=O.nativeEvent,R=E.x>0,T=E.x<P.width-L.width;y.current.left===R&&y.current.right===T||h({left:R,right:T})},[]),C=Et.useCallback((O,E)=>{let P=p.get(O);ze(P),n.change(L=>{L.setDataByKey(e,["view","columnWidths",O],(0,M7.default)(P.width+E,$y,cf),{normalize:!1}),L.setDataByKey(e,["view","useNewSizing"],!0,{normalize:!1})})},[p]),x=(O,E)=>{n.change(P=>{ee.moveColumn(P,e,E.id,O)})};return Et.createElement(Vi.View,{ref:o},Et.createElement(oc.Provider,{value:p},Et.createElement(Vi.ScrollView,{horizontal:!0,style:s.tableScrollWrapper,onScroll:S,scrollEventThrottle:100,contentContainerStyle:s.tableWrapper},i,a?null:[...r.columns].reverse().reduce((O,E,P,L)=>{let R=p.get(E);return ze(R),Et.createElement(RV,{key:E,columnId:E,columnAfterId:L[P-1],tableKey:e,controller:R.controller,width:R.animated,onResizeComplete:C,onDropBefore:T=>x(E,T)},O)},null))),!u&&m.left?Et.createElement(Vi.View,{style:s.tableScrollIndicatorLeft,pointerEvents:"none"}):null,!u&&m.right?Et.createElement(Vi.View,{style:s.tableScrollIndicatorRight,pointerEvents:"none"}):null)});function RV(t){let{tableKey:o,columnId:e,columnAfterId:n,controller:r,width:i,children:a,onDropBefore:s,onResizeComplete:l}=t,[u,d]=_(N7),p=Et.useMemo(()=>Vi.PanResponder.create({onStartShouldSetPanResponder:(h,y)=>!1,onStartShouldSetPanResponderCapture:(h,y)=>!1,onMoveShouldSetPanResponder:(h,{dx:y})=>!0,onMoveShouldSetPanResponderCapture:(h,y)=>!1,onPanResponderGrant:(h,{dx:y})=>{},onPanResponderMove:(h,{dx:y})=>{r.setValue(y)},onPanResponderTerminationRequest:(h,y)=>!1,onPanResponderRelease:(h,{dx:y})=>{l(e,y)},onPanResponderTerminate:(h,y)=>{}}),[e,r,l]),f=H.useInteractiveState(p.panHandlers),m=mr({shouldAccept:Et.useCallback(h=>h.type==="table-definition"&&e!==h.id&&n!==h.id&&o===h.blockKey,[e,n,o]),onDrop:h=>{h.type==="table-definition"&&s(h)}});return Et.createElement(Vi.Animated.View,{style:[d.columnLine,{left:i}]},Et.createElement(Vi.View,{ref:m.setNodeRef,style:d.blockGrabber,...f.events},Et.createElement(Vi.View,{style:[d.blockGrabberBar,(f.hovered||f.dragging||m.isOver)&&{backgroundColor:u.colors.primary.main}]})),a)}var Jv=10,T7=3,N7=G.create({tableScrollWrapper:{borderWidth:0},tableScrollIndicatorLeft:t=>({position:"absolute",left:-1,top:0,bottom:0,width:1,shadowColor:$.BLACK,shadowOffset:{width:5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableScrollIndicatorRight:t=>({position:"absolute",right:-1,top:0,bottom:0,width:1,shadowColor:$.BLACK,shadowOffset:{width:-5,height:0},shadowOpacity:.6,shadowRadius:7,elevation:4}),tableWrapper:{position:"relative",overflow:"hidden",flexDirection:"column"},columnLine:{position:"absolute",top:0,bottom:0},blockGrabber:{position:"absolute",top:0,right:-(Jv/2),bottom:0,width:Jv,cursor:"ew-resize"},blockGrabberBar:{position:"absolute",top:0,right:Jv/2-T7/2,bottom:0,width:T7,borderRadius:A.RADIUS_M},blockGrabberPlus:{position:"absolute",top:g.small,left:-(A.BUTTON_XS/2)+Jv/2}});function A7(t){let{view:o,columnId:e,setView:n}=t,r=_f.default.useContext(oc);function i(a){if(a){let{[e]:s,...l}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:l})}else n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e]:r.get(e)?.width||Xc}})}return _f.default.createElement(_f.default.Fragment,null,_f.default.createElement(oh,{value:typeof o.columnWidths?.[e]>"u",onValueChange:i,label:"Fill available space",labelDescription:"Expand this column to fill the available horizontal space"}))}c();var D7=(t,o,e,n)=>{let r=(i=e.selection.definitionId)=>{if(!i)return;let a=e.records.findIndex(d=>d.key===e.selection.recordId),s=e.records[a],l=e.records[a+1],u=ee.insertEmptyRecord(n,o.key,{before:s.value.orderIndex,after:l?.value.orderIndex});ee.moveTableSelection(n,o,{recordId:u,definitionId:i},"start")};switch(t){case"move-up":case"move-down":{bn(n,o,e,{definition:{relative:0},record:{relative:t==="move-up"?-1:1},focus:t==="move-up"?"end":"start"})||(t==="move-up"?zu(n,o):St(n,o));break}case"tab":case"move-right":{let i=t==="tab"?"select":"start";bn(n,o,e,{definition:{relative:1},record:{relative:0},focus:i})||!bn(n,o,e,{definition:{absolute:0},record:{relative:1},focus:i})&&t==="tab"&&r(e.view.columns[0]);break}case"shift+tab":case"move-left":{let i=t==="shift+tab"?"select":"end";bn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:i})||bn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:i});break}case"enter":{r();break}case"backspace":{if(bn(n,o,e,{definition:{relative:-1},record:{relative:0},focus:"end"}))break;e.selection.recordId&&ee.isRowEmpty(o,e.selection.recordId)?(bn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"}),ee.removeRecord(n,o.key,e.selection.recordId)):bn(n,o,e,{definition:{absolute:e.view.columns.length-1},record:{relative:-1},focus:"end"});break}}};c();var jn=b(k()),nb=b(q());c();var qi=b(k());c();var Qv=g.Padding.mediumLeft;c();var yr=b(k()),nc=b(q());var eb=yr.default.forwardRef(function(o,e){let{recordKey:n,columnId:r,selected:i,selectedBy:a,width:s,children:l,header:u=!1,isFirstColumn:d=!1,isFirstRow:p=!1,isLastColumn:f=!1,isLastRow:m=!1,onPress:h,readOnly:y,...S}=o,C=yr.default.useRef(null),x=ki(C,e),[,O]=_(PV),P={backgroundColor:Ja(a).base};yr.default.useEffect(()=>{i&&C.current&&Qg(C.current,{behavior:"smooth",scrollMode:"if-needed"})},[i]);let L=yr.default.createElement(nc.Animated.View,{ref:x,style:[O.cell,w.directionRow,w.alignCenter,d?O.farLeftCell:{},p?O.topCell:{},m?O.bottomCell:{},p&&d?O.topLeftCell:{},p&&f?O.topRightCell:{},m&&d?O.bottomLeftCell:{},m&&f?O.bottomRightCell:{},u?O.columnHeader:{},p?go.Bold:{},{width:s}]},l,i?yr.default.createElement(yr.default.Fragment,null,yr.default.createElement(nc.View,{style:[O.cellSelectionBorderTop,P]}),yr.default.createElement(nc.View,{style:[O.cellSelectionBorderBottom,P]}),yr.default.createElement(nc.View,{style:[O.cellSelectionBorderRight,P]}),yr.default.createElement(nc.View,{style:[O.cellSelectionBorderLeft,P]})):null);return yr.default.createElement(pe,{style:[O.unsetDefaultTH,w.directionRow,w.justifyContentCenter],tag:u?"th":"td"},y?yr.default.createElement(yr.default.Fragment,null,L):yr.default.createElement(nc.TouchableWithoutFeedback,{...S},L))}),Yn=1,PV=G.create({unsetDefaultTH:{textAlign:"left"},cell:t=>({position:"relative",paddingVertical:g.small,paddingHorizontal:g.medium,borderLeftWidth:1,borderTopWidth:1,borderColor:t.colors.border.mid}),cellSelectionBorderTop:{position:"absolute",top:-Math.floor(Yn/2),left:-Math.floor(Yn/2),right:-Math.floor(Yn/2),height:Yn},cellSelectionBorderBottom:{position:"absolute",bottom:-Math.floor(Yn/2),left:-Math.floor(Yn/2),right:-Math.floor(Yn/2),height:Yn},cellSelectionBorderRight:{position:"absolute",bottom:-Math.floor(Yn/2),top:-Math.floor(Yn/2),right:-Math.floor(Yn/2),width:Yn},cellSelectionBorderLeft:{position:"absolute",bottom:-Math.floor(Yn/2),top:-Math.floor(Yn/2),left:-Math.floor(Yn/2),width:Yn},topCell:{borderTopWidth:0},farLeftCell:{borderLeftWidth:0},topLeftCell:{},bottomLeftCell:{},topRightCell:{},bottomRightCell:{},bottomCell:{borderBottomWidth:1},columnHeader:t=>({backgroundColor:"transparent"})});var W7=qi.memo(function(o){let{editor:e,nodeKey:n,readOnly:r,definition:i,view:a}=o,s=qi.useContext(oc),[,l]=_(TV);return qi.createElement(pe,{tag:"thead"},qi.createElement(pe,{style:[w.directionRow,l.background],tag:"tr"},a.columns.map((u,d)=>{let p=i[u],f=s.get(u);return ze(f),qi.createElement(EV,{key:u,columnId:u,editor:e,nodeKey:n,columnDef:p,view:a,readOnly:r,width:f.animated,isFirstColumn:d===0,isLastColumn:d===a.columns.length-1,isFirstRow:!0,header:!0})})))}),B7=H.createInteractiveHandle("table-column"),IV=H.createInteractiveComponent(pe);function EV(t){let{columnDef:o,readOnly:e,editor:n,nodeKey:r,view:i,...a}=t;return qi.createElement(IV,{handle:B7},qi.createElement(eb,{focusable:!1,readOnly:e,...a},qi.createElement(y7,{editor:n,nodeKey:r,definition:o,readOnly:e,style:[w.flex1,a.isFirstColumn&&!e?Qv:null]}),e?null:qi.createElement(tb,{editor:n,nodeKey:r,view:i,definition:o,descendantOf:B7,icon:v.GrabberVertical,rounded:!0})))}var TV=G.create({background:t=>({backgroundColor:t.colors.background.mid,borderBottomColor:t.colors.border.mid,borderBottomWidth:2})});c();var _t=b(k()),Rf=b(q());var z7=H.createInteractiveHandle("table-row"),MV=H.createInteractiveComponent(pe),q7=_t.memo(_t.forwardRef(function(o,e){let{nodeKey:n,editor:r,readOnly:i,record:a,definition:s,view:l,isFirstRow:u,isLastRow:d,beforeOrderIndex:p,afterOrderIndex:f,selectedColumnId:m,selections:h,definitionColorKinds:y,openRecord:S,style:C}=o,x=_t.useContext(oc),O=ui[l.type],E={id:a.key,type:"table-record",blockKey:n,previewLabel:"Move record",previewIcon:"TableRecord"},P=mn({...zn(E),disabled:i}),L=(z,Y)=>{r.change(Q=>{ee.moveRecord(Q,n,z.id,Y)})},R=_t.useRef(null),T=ce(R),M=()=>{T.open(ie({search:"Select action\u2026",groups:[{key:"table.row",commands:[{key:"table.row.open",title:`Open ${O.recordName}`,icon:v.Maximize,trigger:()=>{S(a.key)}},{key:"table.row.insertAbove",title:"Insert above",icon:v.TableInsertRowAbove,trigger:()=>{r.change(z=>{ee.insertEmptyRecord(z,n,{after:a.value.orderIndex,before:p})})}},{key:"table.row.insertBelow",title:"Insert below",icon:v.TableInsertRow,trigger:()=>{r.change(z=>{ee.insertEmptyRecord(z,n,d?{before:a.value.orderIndex}:{after:a.value.orderIndex,before:f})})}},{key:"table.row.addColumn",icon:v.TableInsertColumn,title:`Add ${O.definitionName}`,trigger:()=>{r.change(z=>{ee.insertColumn(z,n,ee.createColumnFromType("text"))})},descendant:()=>ec(z=>{r.change(Y=>{ee.insertColumn(Y,n,ee.createColumnFromType(z))})})},{key:"table.row.remove",title:`Delete ${O.recordName}`,icon:v.Trashcan,trigger:()=>{r.change(z=>{ee.removeRecord(z,n,a.key)})}}]}]}))},[,I]=_(G7),N=_t.createElement(MV,{ref:e,handle:z7,style:[w.directionRow,P.isDragging&&je.translucent,C],tag:"tr"},l.columns.map((z,Y)=>{let Q=s[z],te=m===z,_e=h?.find(dt=>dt.definitionId===z),Ae=y[z],Be=_t.createElement(sp,{definitionColorKind:Ae,record:a,selected:te,definition:Q,nodeKey:n,editor:r,readOnly:i});return _t.createElement(eb,{key:z,recordKey:a.key,columnId:z,width:x.get(z).animated,selected:te||!!_e,selectedBy:te?void 0:_e?.clientId,isFirstColumn:Y===0,isLastColumn:Y===l.columns.length-1,isFirstRow:u,isLastRow:d,onPressIn:dt=>{dt.type!=="keydown"&&(dt.preventDefault(),r.change(eo=>{ee.moveTableSelection(eo,n,{recordId:a.key,definitionId:z})}))},readOnly:i},Y>0||i?Be:_t.createElement(_t.Fragment,null,_t.createElement(H.View.Child,{descendantOf:z7,ref:P.setNodeRef,style:[w.justifyContentCenter,I.rowGrabber],inactiveStyle:T.opened?{}:je.hidden,activeStyle:je.visible},_t.createElement(V,{ref:R,size:"xsmall",rounded:!0,kind:"grey",active:T.opened,title:`Click for options.
Drag to move.`,icon:v.GrabberVertical,onPress:M,...P.listeners})),_t.createElement(Rf.View,{style:[w.flex1,w.justifyContentCenter,Qv]},Be)))}));return i?N:_t.createElement(Rf.View,null,N,_t.createElement(F7,{currentItem:E,position:"before",onDrop:z=>L(z,{before:p,after:a.value.orderIndex})}),d?_t.createElement(F7,{currentItem:E,position:"after",onDrop:z=>L(z,{before:a.value.orderIndex,after:f})}):null)}));function F7(t){let{currentItem:o,position:e,onDrop:n}=t,r=H.useInteractiveState(),[,i]=_(G7),{logAnalyticsEvent:a}=_t.useContext(Ve),s=mr({shouldAccept:_t.useCallback(l=>l.type==="table-record"&&o.id!==l.id&&o.blockKey===l.blockKey,[o.id,o.blockKey]),onDrop:l=>{l.type==="table-record"&&(a({type:"edit_page_document_move_block",method:"dnd",blockType:"table-row",toParent:"table",fromParent:"table"}),n(l))}});return _t.createElement(Rf.View,{ref:s.setNodeRef,style:[i.insertionLineWrapper,e==="after"?i.insertionLineAfter:i.insertionLineBefore],...r.events},_t.createElement(Rf.View,{style:[i.insertionLineBar,(r.hovered&&r.dragging||s.isOver)&&i.insertionLineBarHovered]}))}var ob=10,V7=3,G7=G.create({insertionLineWrapper:{position:"absolute",left:0,right:0,height:ob},insertionLineBefore:{top:-(ob/2)},insertionLineAfter:{bottom:-(ob/2)},insertionLineBar:{position:"absolute",left:0,right:0,top:ob/2-V7/2,height:V7,borderRadius:A.RADIUS_M},insertionLineBarHovered:t=>({backgroundColor:t.colors.primary.main}),rowGrabber:{position:"absolute",left:g.xsmall,bottom:"auto",zIndex:10}});var LV=20;function H7(t){let{view:o,editor:e,nodeKey:n}=t,[r,i]=jn.useState(),a=jn.useCallback(s=>{s!==null&&i(s)},[]);return jn.createElement(L7,{editor:e,nodeKey:n,view:o,ref:a},jn.createElement(NV,{...t,parentRef:r}))}function NV(t){let{selection:o,selections:e,records:n,definition:r,view:i,readOnly:a,editor:s,nodeKey:l,parentRef:u,openRecord:d}=t,{mode:p}=jn.useContext($o),f=s.value.document.getNode(l),m=jn.useContext(oc),h=$1({enabled:p==="app"&&n.length>LV,parentRef:u?{current:u}:void 0,getEstimatedItemHeight:x=>rC(f,String(x.key),m),list:n.map(x=>({key:x.key}))}),y=w7(r,i.columns),C=!(i.hideHeader||a&&ee.isHeaderEmpty({definition:r,view:i,records:{}}))||!!o.recordId;return jn.createElement(pe,{tag:"table"},C?jn.createElement(W7,{definition:r,view:i,editor:s,nodeKey:l,readOnly:a}):null,jn.createElement(pe,{tag:"tbody"},h.map(([x,O,E],P)=>{let L=n[P],R=P>0?n[P-1]:void 0,T=n[P+1],M=e.filter(I=>I.recordId===L.key);return O?jn.createElement(q7,{key:L.key,ref:x.nodeRef,selectedColumnId:o.recordId===L.key?o.definitionId:void 0,selections:M.length>0?M:void 0,record:L,definition:r,view:i,readOnly:a,editor:s,nodeKey:l,isFirstRow:!C&&P===0,isLastRow:P===n.length-1,beforeOrderIndex:R?.value.orderIndex,afterOrderIndex:T?.value.orderIndex,definitionColorKinds:y,openRecord:d,...x.nodeProps}):jn.createElement(nb.View,{key:L.key,style:{height:E},ref:x.nodeRef},jn.createElement(nb.Text,null,ee.getTableRowPlainText(f,L.value)))})))}var K7={IconComponent:v.Table,title:"Table",recordName:"row",definitionName:"column",selectableView:!0,ViewComponent:H7,DefinitionSettingsComponent:A7,commands:DV,definitionCommands:AV,onKeyDown:D7};function AV(t){let{view:o,definition:e,setView:n}=t,r=typeof o.columnWidths?.[e.id]>"u";return[{key:"grid",commands:[{key:"grid.autoSize",title:"Auto size",icon:v.AutoSize,type:2,enabled:r,trigger:()=>{if(r)n({...o,useNewSizing:!0,columnWidths:{...o.columnWidths,[e.id]:Xc}});else{let{[e.id]:i,...a}=o.columnWidths||{};n({...o,useNewSizing:!0,columnWidths:a})}}}]}]}function DV(t){let{view:o,setView:e}=t;return[{key:"grid",commands:[{key:"grid.toggleHeader",title:"Show header",type:2,enabled:!o.hideHeader,trigger:()=>{let[n]=e({...o,hideHeader:!o.hideHeader});return n}},{key:"grid.resetSizing",title:"Reset column sizing",trigger:()=>{let{columnWidths:n,...r}=o;e({...r,useNewSizing:!0})}},{key:"grid.columns",title:"Hide Columns",icon:v.EyeOff,descendant:()=>X7(t)}]}]}function X7(t){let{view:o,definition:e,setView:n}=t;return cp(e,r=>{let[,i]=n({...o,columns:r});return X7(i)},{multiple:!0,search:"Select visible columns",selected:o.columns})}var ui={grid:K7,cards:I7};function tb(t){let{nodeKey:o,editor:e,view:n,definition:r,descendantOf:i,icon:a,rightIcon:s,rounded:l}=t,[,u]=_(BV),d=di.useRef(null),p=ce(d),f=H.useInteractiveState(),m=mn({...zn({id:r.id,type:"table-definition",blockKey:o,previewLabel:ls(r)})}),[h,y]=di.useState(null),S=R=>{e.change(T=>{ee.setColumnDefinition(T,o,r.id,R)})},C=()=>{let T=e.value.document.assertBlock(o).data.toFrozenObject(),M=T.definition[r.id];return[O(T.view,M),x(T.view,M)]},x=(R,T)=>({definition:T,view:R,setView:M=>(e.change(I=>{ee.setView(I,o,M)}),C()),setDefinition:M=>(S(M),C()),openModal:M=>{y({type:"command",modal:di.createElement(M,{definition:T,onClose:()=>y(null)})})}}),O=(R,T)=>{let M=li[T.type],I=ui[R.type],N=x(R,T);return ie({search:"Select action\u2026",groups:[{key:"definition.type",commands:[{key:"definition.type.change",title:M.title,icon:M.IconComponent,descendant:()=>ec(z=>{y({type:"change_type",columnType:z})},{selectedType:T.type})}]},...M.commands?M.commands(N):[],...I.definitionCommands?I.definitionCommands(N):[],{key:"definition.danger",commands:[{key:"definition.add",title:`Add ${I.definitionName}`,icon:v.TableInsertColumn,trigger:()=>{e.change(z=>{let Y=[...R.columns].findIndex(Q=>T.id===Q);ee.insertColumn(z,o,ee.createColumnFromType("text"),Y+1)})},descendant:()=>ec(z=>{let Y=[...R.columns].findIndex(Q=>T.id===Q);e.change(Q=>{ee.insertColumn(Q,o,ee.createColumnFromType(z),Y+1)})})},{key:"definition.hide",title:`Hide ${I.definitionName}`,icon:v.EyeOff,trigger:()=>{e.change(z=>{ee.hideColumn(z,o,T.id)})}},{key:"definition.delete",title:`Delete ${I.definitionName}`,icon:v.Trashcan,trigger:()=>{y({type:"delete"})}}]}]})},E=()=>{p.open(O(n,r))},P=R=>{y(null),R&&e.change(T=>{ee.removeColumn(T,o,r.id)})},L=R=>{y(null),R&&h?.type==="change_type"&&S(ee.changeColumnType(r,h.columnType))};return di.createElement(di.Fragment,null,h?.type==="delete"?di.createElement(lm,{kind:"danger",title:"Delete column",confirmButtonText:"Delete",onComplete:P},"Do you really want to delete this column and all of its data?"):null,h?.type==="change_type"?di.createElement(lm,{title:"Change column type",confirmButtonText:"Change",onComplete:L},"You are about to change this column type from ",r.type," to"," ",h.columnType,". We will try to convert any value automatically, but you may lose data if we cannot convert them."):null,h?.type==="command"?h.modal:null,di.createElement(H.View.Child,{...f.events,descendantOf:i,ref:m.setNodeRef,style:[w.justifyContentCenter,u.columnGrabber],inactiveStyle:p.opened||f.focused?{}:je.hidden,activeStyle:je.visible,focusStyle:je.translucent,...m.listeners},di.createElement(V,{kind:"grey",size:"small",ref:d,title:`Click for options.
Drag to move.`,active:p.opened,icon:a,rightIcon:s,rounded:l,onPress:E})))}var BV=G.create({columnGrabber:{position:"absolute",right:g.xsmall,bottom:"auto"}});function rb(t,o,e){let n=o.data.toFrozenObject(),r=ui[n.view.type],i=r.commands?r.commands(U7(t,n,o.key,e)):[];return{...nt(t,o.key,[{key:"views",commands:Object.entries(ui).map(([a,s])=>({key:a,title:s.title,icon:s.IconComponent,type:1,selected:a===n.view.type,trigger:()=>{t.change(u=>{ee.setView(u,o.key,{type:a})});let l=t.value.document.assertBlock(o.key);return rb(t,l,e)}}))},{key:"table",commands:[{key:"addColumn",icon:v.ArrowRight,title:`Add ${r.definitionName}`,trigger:()=>{t.change(a=>{ee.insertColumn(a,o.key,ee.createColumnFromType("text"))})},descendant:()=>ec(a=>{t.change(s=>{ee.insertColumn(s,o.key,ee.createColumnFromType(a))})})},{key:"insertRow",icon:v.ArrowDown,title:`Insert ${r.recordName}`,trigger:()=>{t.change(a=>{ee.insertEmptyRecord(a,o.key)})}}]},...i,...e]),search:"Select action\u2026"}}function U7(t,o,e,n){return{view:o.view,definition:o.definition,setView:r=>{t.change(a=>{ee.setView(a,e,r)});let i=t.value.document.assertBlock(e);return[rb(t,i,n),U7(t,i.data.toFrozenObject(),e,n)]}}}c();var j7=b(FD()),ao=b(k()),rc=b(q());c();var Gi=b(k()),HC=b(q());c();var GC=JSON.parse('{"definitionWrapper":"definitionWrapper_0vx5U","grabberWrapper":"grabberWrapper_WLh-V"}');var Y7=H.createInteractiveHandle("record-column-value-line");function KC(t){let{nodeKey:o,editor:e,readOnly:n,record:r,view:i,definition:a,style:s}=t,[,l]=_(WV),u=mn({...zn({id:a.id,type:"table-definition",blockKey:o,previewLabel:ls(a)}),disabled:n}),d=mr({shouldAccept:Gi.useCallback(p=>p.type!=="table-definition"?!1:a.id!==p.id&&o===p.blockKey,[a.id,o]),onDrop:p=>{e.change(f=>{ee.moveColumn(f,o,p.id,a.id)})}});return Gi.createElement(U,{ref:d.setNodeRef,style:[D.flex.column,D.flex.flex1,GC.definitionWrapper,u.isDragging&&D.opacity.translucent,jg,{[Zu]:d.isOver}]},Gi.createElement(H.View,{handle:Y7,style:s},Gi.createElement(HC.View,{style:[w.directionRow,w.alignCenter,g.Margin.xsmallBottom]},Gi.createElement(U,{style:[D.position.relative,D.flex.alignCenter]},Gi.createElement(OI,{style:[D.padding.smallRight,GC.grabberWrapper],ref:u.setNodeRef,size:"medium"}),Gi.createElement(HC.View,{style:[w.flex1]},Gi.createElement(Qu,null,ls(a)))),n?null:Gi.createElement(tb,{nodeKey:o,editor:e,view:i,definition:a,descendantOf:Y7,icon:li[a.type].IconComponent,rightIcon:v.ChevronDown})),Gi.createElement(sp,{nodeKey:o,editor:e,readOnly:n,record:r,definition:a,selected:!1,displayMode:"block",style:[l.recordValueBox,g.Padding.smallVertical,g.Padding.mediumHorizontal]})))}var WV=G.create({recordValueBox:t=>({borderWidth:1,borderColor:t.colors.border.mid,backgroundColor:t.colors.background.main,borderRadius:t.radiuses.large,minHeight:A.BUTTON_L})});function $7(t){let{nodeKey:o,editor:e,readOnly:n,record:r,records:i,view:a,definition:s,openRecord:l,onClose:u}=t,[,d]=_(W),[,p]=_(zV),[f,m]=ao.useState(!1),h=ui[a.type],y=a.columns,S=ao.useMemo(()=>(0,j7.default)(Object.keys(s),y),[y,a,s]),C=ao.useMemo(()=>i.findIndex(E=>E.key===r.key),[i,r.key]),x=i[C-1],O=i[C+1];return ao.createElement(vo,{title:`Edit ${h.recordName}`,size:"large",footer:ao.createElement(rc.View,{style:[w.directionRow,w.alignCenter,w.justifySpaceBetween]},n?null:ao.createElement(V,{icon:v.Trashcan,kind:"secondary",size:"medium",onPress:()=>{e.change(E=>{ee.removeRecord(E,o,r.key)}),u()}},`Delete ${h.recordName}`),ao.createElement(rc.View,{style:[w.directionRow,w.alignCenter]},ao.createElement(V,{icon:v.ChevronLeft,kind:"secondary",size:"medium",title:`Previous ${h.recordName}`,disabled:!x,onPress:()=>{x&&l(x.key)}}),ao.createElement(rc.View,{style:[g.Padding.mediumHorizontal]},ao.createElement(rc.Text,{style:[d.Body,d.textMuted]},`${C+1} of ${i.length}`)),ao.createElement(V,{icon:v.ChevronRight,kind:"secondary",size:"medium",title:`Next ${h.recordName}`,disabled:!O,onPress:()=>{O&&l(O.key)}}))),onClose:u},ao.createElement(rc.View,null,y.map((E,P)=>ao.createElement(KC,{key:E,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:s[E],style:[g.Margin.mediumBottom,P===0?null:g.Margin.xsmallTop]}))),S.length>0||!n?ao.createElement(rc.View,{style:[w.directionRow,w.justifySpaceBetween]},S.length>0?ao.createElement(V,{icon:f?v.ChevronUp:v.ChevronDown,kind:"grey",size:"medium",onPress:()=>{m(E=>!E)}},f?"Hide":`Show hidden ${h.definitionName}s`):null,n?null:ao.createElement(sh,{icon:v.Plus,kind:"grey",size:"medium",palette:()=>ec(E=>{e.change(P=>{ee.insertColumn(P,o,ee.createColumnFromType(E))})})},"Add ",h.definitionName)):null,f?ao.createElement(rc.View,{style:[p.hiddenColumnsGroup,g.Margin.mediumTop,g.Padding.mediumTop]},S.map((E,P)=>ao.createElement(KC,{key:E,nodeKey:o,editor:e,readOnly:n,view:a,record:r,definition:s[E],style:[g.Margin.mediumBottom,P===0?null:g.Margin.xsmallTop]}))):null)}var zV=G.create({hiddenColumnsGroup:t=>({borderTopWidth:1,borderTopColor:t.colors.border.mid,borderTopStyle:"dashed"})});c();function Z7(t){return ee.defaultRecordSortedKeys(t).map(e=>({key:e,value:t.records[e]}))}function J7(t){let{node:o,editor:e,isFocused:n,selections:r}=t,i=o.data.toFrozenObject(),a=Qt.useMemo(()=>Z7(i),[i]),[s,l]=Qt.useState(null),u=Qt.useMemo(()=>s===null?null:a.find(C=>C.key===s),[a,s]),d=Qt.useCallback(C=>{l(C)},[l]),p=Qt.useMemo(()=>{let C=[],x=[];return r.forEach(O=>{let E=ee.getTableSelection(e.value.document,O,o);C.push(E),!E.recordId&&!E.definitionId&&x.push(O)}),{states:C,filtered:Ma.create(x)}},[a,o,e.readOnly,r]),f=Qt.useMemo(()=>e.readOnly?{}:ee.getTableSelection(e.value.document,e.value.selection,o),[a,o,e.readOnly,e.value.selection]),m={view:i.view,definition:i.definition,records:a,selection:f,selections:p.states},h=Qt.useContext(Kv);h.set(o.key,m),Qt.useEffect(()=>()=>{h.delete(o.key)},[h,o.key]);let y=ui[m.view.type],S=Ti(e,o.key);return Qt.createElement(Qt.Fragment,null,Qt.createElement(ve,{...t,palette:rb(e,o,S?[S]:[])},Qt.createElement(Ut,{...t,selectable:y.selectableView,isFocused:n&&!f.definitionId&&!f.recordId,selections:p.filtered,onSelect:()=>{e.change(C=>{ee.moveTableSelection(C,o,{}),C.focus()})}},Qt.createElement(j1,{readOnly:!!u},Qt.createElement(y.ViewComponent,{editor:t.editor,nodeKey:o.key,readOnly:e.readOnly,openRecord:d,...m})))),u?Qt.createElement($7,{editor:t.editor,nodeKey:o.key,readOnly:e.readOnly,view:m.view,records:m.records,definition:m.definition,record:u,openRecord:d,onClose:()=>{l(null)}}):null)}c();var gu=b(wi()),ab=b(k());var Q7=(0,gu.isKeyHotkey)("enter"),FV=(0,gu.isKeyHotkey)("shift+enter"),eN=(0,gu.isKeyHotkey)("mod+enter"),XC=(0,gu.isKeyHotkey)("tab"),ib=(0,gu.isKeyHotkey)("shift+tab"),tN=(0,gu.isKeyHotkey)("backspace");function oN(){let t=ab.useContext(Kv);return[ab.useMemo(()=>({onKeyDown:(...e)=>VV(t,...e)}),[t])]}function VV(t,o,e,n){if(o.key!=="ArrowUp"&&o.key!=="ArrowDown"&&o.key!=="ArrowRight"&&o.key!=="ArrowLeft"&&!(Q7(o)&&!FV(o))&&!eN(o)&&!tN(o)&&!XC(o)&&!ib(o))return;let{selection:r}=e.value;if(!qt(r)||!r.isCollapsed&&!XC(o)&&!ib(o))return;let i=ee.getCurrentTable(e.value);if(!i)return;let{table:a,fragment:s}=i;if(i.ancestorBlocks&&i.ancestorBlocks.size>0)return;if(eN(o))return o.preventDefault(),St(e,a),e;let l=t.get(a.key);if(!l||!l.selection.recordId&&!l.selection.definitionId)return;let u=a.data.toFrozenObject(),d=l.selection.recordId?u.records[l.selection.recordId]:null,p=l.selection.definitionId?u.definition[l.selection.definitionId]:null,f=ui[l.view.type],m=p?li[p.type]:null,h=S=>{if(!m||!m.onKeyDown||!d||!p)return!1;let C=!1;return m.onKeyDown(S,d.values[p.id],x=>{C=!0,ee.setRecordValue(e,a.key,l.selection.recordId,l.selection.definitionId,x)}),C},y=S=>{f.onKeyDown&&f.onKeyDown(S,a,l,e)};if(Q7(o)){if(s&&!r.hasAnchorAtEndOf(s))return;o.preventDefault(),h("enter")||y("enter")}else if(tN(o)){if(s&&!r.hasAnchorAtStartOf(s))return;o.preventDefault(),h("backspace")||y("backspace")}else if(XC(o)||ib(o))o.preventDefault(),y(ib(o)?"shift+tab":"tab");else if(o.key==="ArrowDown"){if(s&&!GV(s,r))return;o.preventDefault(),y("move-down")}else if(o.key==="ArrowUp"){if(s&&!qV(s,r))return;o.preventDefault(),y("move-up")}else if(o.key==="ArrowRight"){if(s&&!r.hasAnchorAtEndOf(s))return;o.preventDefault(),y("move-right")}else if(o.key==="ArrowLeft"){if(s&&!r.hasAnchorAtStartOf(s))return;o.preventDefault(),y("move-left")}return e}function qV(t,o){let e=t.nodes.first();return e?o.hasAnchorIn(e):!1}function GV(t,o){let e=t.nodes.last();return e?o.hasAnchorIn(e):!1}c();var so=b(k()),ub=b(q());c();var nN=b(k()),rN=b(q());function UC(t){let{children:o}=t,[,e]=_(HV);return nN.default.createElement(rN.View,{style:[e.blockTabsBody]},o)}var HV=G.create({blockTabsBody:t=>({border:`1px solid ${t.colors.border.main}`,backgroundColor:t.colors.background.main,paddingHorizontal:tC,borderRadius:t.radiuses.medium,borderTopLeftRadius:0,"@media print":{padding:0,border:0}})});c();var sb=b(k()),YC=b(q());function jC(t){let{children:o}=t,[,e]=_(KV);return sb.default.createElement(YC.View,{style:e.blockTabsHeader},sb.default.createElement(Ug,{style:e.blockTabsHeaderContainer},sb.default.createElement(YC.View,{style:e.blockTabsHeaderContent},o)))}var KV=G.create({blockTabsHeader:{position:"relative",display:"flex",flexDirection:"row",width:"100%",alignItems:"center",whiteSpace:"nowrap",marginBottom:-1,"@media print":{display:"none"},zIndex:1},blockTabsHeaderContainer:{maxWidth:"100%",display:"flex"},blockTabsHeaderContent:t=>({maxWidth:"100%",display:"flex",flexDirection:"row",borderTopRightRadius:t.radiuses.medium,borderTopLeftRadius:t.radiuses.medium,pointerEvents:"auto"})});c();var Po=b(k()),kN=b(bN()),ic=b(q());c();var hu=b(k()),cb=b(q());var CN=hu.default.forwardRef(function(o,e){let{active:n,editor:r,tab:i,isLast:a,onDropBefore:s,onDropAfter:l,onInsertLeft:u,onInsertRight:d,onDelete:p,children:f,...m}=o;return hu.default.createElement(cb.View,{style:[SN.tabItemControls,n&&SN.tabItemControlsActive],...m,ref:e},hu.default.createElement(wN,{position:"before",onDrop:s,onInsert:u}),f,a?hu.default.createElement(wN,{position:"after",onDrop:l,onInsert:d}):null)});function wN(t){let{position:o,onDrop:e,onInsert:n}=t,r=mr({shouldAccept:hu.default.useCallback(i=>i.type==="tab",[]),onDrop:i=>{i.type==="tab"&&e(i.id)}});return hu.default.createElement(sm,{ref:r.setNodeRef,dropHovered:r.isOver,position:o==="before"?"left":"right",button:{kind:"default",size:"xsmall",icon:v.Plus,onPress:n}})}var SN=cb.StyleSheet.create({tabItemControls:{position:"relative",flexShrink:1},tabItemControlsActive:{flexShrink:0},tabItemInsertionLine:{flex:1,opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},tabItemInsertionLineHovered:{opacity:1}});function ek(t){let{editor:o,tab:e,index:n,active:r,isFirst:i,isLast:a,onSelect:s}=t,{readOnly:l}=o,u=e.data?e.data.get("title"):"Untitled",d=mn({disabled:l,...zn({type:"tab",id:e.key,previewLabel:"Move tab"})}),p=y=>{o.change(S=>{let C=S.value.document.getParent(e.key);if(!C)return;let x=Ji.createTabsItem("Untitled");S.insertNodeByKey(C.key,n+y,x);let O=S.value.document.getDescendant(x.key);O&&S.collapseToStartOf(O).focus(),s(x)})},f=y=>{o.change(S=>{S.setNodeByKey(e.key,{data:e.data.merge({title:y})})})},m=(y,S)=>{o.change(C=>{S==="before"?C.moveBeforeNodeByKey(y,e.key):C.moveAfterNodeByKey(y,e.key);let x=C.value.document.getDescendant(y);x&&C.collapseToStartOf(x).focus()})},h=()=>{o.change(y=>{y.removeNodeByKey(e.key)})};return l?Po.default.createElement(ic.TouchableWithoutFeedback,{onPress:()=>s(e)},Po.default.createElement(QC,{title:u,active:r,isFirst:i,isLast:a,isEditable:!1,withOptions:!1,editor:o,tab:e})):Po.default.createElement(ic.TouchableWithoutFeedback,{onPress:()=>s(e)},Po.default.createElement(CN,{onInsertLeft:()=>p(0),onInsertRight:()=>p(1),onDropBefore:y=>m(y,"before"),onDropAfter:y=>m(y,"after"),onDelete:h,...t},Po.default.createElement(QC,{title:u,active:r,isFirst:i,isLast:a,isEditable:r,onTitleChange:f,editor:o,tab:e,withOptions:!0,isDragging:d.isDragging,dragHandle:d})))}var QC=Po.default.forwardRef((t,o)=>{let{title:e,titlePlaceholder:n="Untitled",active:r=!1,isFirst:i=!1,isLast:a=!1,isDragging:s=!1,isEditable:l,withOptions:u,onTitleChange:d,editor:p,tab:f,dragHandle:m,...h}=t,[y,S]=Po.default.useState(e),[C,x]=_(oq),O=d?()=>{d(y||"")}:void 0;Po.default.useEffect(()=>{S(e)},[e]);let E=Po.default.useRef(null),P=ki(E,m?.setNodeRef),L=ce(E),R=()=>{L.open(ie({position:{width:"small"},groups:[{key:"tab",commands:[{key:"delete",title:"Delete",icon:v.Trashcan,trigger:()=>{p.change(T=>{Ji.removeTab(T,f.key)})}}]}]}))};return Po.default.createElement(H.View,{ref:o,style:[x.blockTabsBodyItem,g.Padding.xsmallVertical,r&&x.blockTabsBodyItemActive,i&&x.blockTabsBodyItemFirst,a&&x.blockTabsBodyItemLast],...h},Po.default.createElement(ic.View,{style:x.flexPadding}),Po.default.createElement(ic.View,{style:[x.blockTabsBodyItemTitleContainer,s&&je.translucent,g.Padding.xsmallVertical]},l?Po.default.createElement(Po.default.Fragment,null,Po.default.createElement(kN.default,{value:y,inputStyle:{...Ue.Label,color:C.colors.text.main,backgroundColor:"transparent",border:"none",...qg.Bold,padding:0,margin:0,lineHeight:"22px"},title:y,placeholder:n,onChange:T=>S(T.target.value),onBlur:O})):Po.default.createElement(ic.Text,{style:[go.Label,x.blockTabsBodyItemReadonlyTitle,r&&x.blockTabsBodyItemTitleReadonlyActive]},y||n)),u?Po.default.createElement(H.View.Child,{style:[x.tabItemOptions],inactiveStyle:L.opened||l?je.visible:je.hidden,activeStyle:je.visible},Po.default.createElement(V,{ref:P,kind:"grey",size:"small",rounded:!0,active:L.opened,onPress:R,icon:v.GrabberVertical,title:`Click for options.
Drag to move.`,...m?.listeners})):null,Po.default.createElement(ic.View,{style:x.flexPadding}))});QC.displayName="TabItem";var oq=G.create({blockTabsBodyItem:t=>({flexGrow:0,flexShrink:1,flexBasis:"auto",textOverflow:"ellipsis",maxWidth:"100%",minWidth:0,borderWidth:1,borderColor:t.colors.border.main,borderLeftColor:"transparent",backgroundColor:t.colors.background.muted,flexDirection:"row",cursor:"pointer"}),blockTabsBodyItemFirst:t=>({borderLeftColor:t.colors.border.main,borderTopLeftRadius:t.radiuses.medium}),blockTabsBodyItemLast:t=>({borderTopRightRadius:t.radiuses.medium}),blockTabsBodyItemActive:t=>({flexGrow:0,flexShrink:0,flexBasis:"auto",cursor:"auto",backgroundColor:t.colors.background.main,borderBottomColor:t.colors.background.main}),flexPadding:{minWidth:8,width:16,flexGrow:1,flexShrink:1,flexBasis:"16px"},blockTabsBodyItemTitleContainer:{flexGrow:0,flexShrink:1,flexBasis:"auto",maxWidth:"100%",minWidth:0,display:"flex",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",flexDirection:"row"},blockTabsBodyItemReadonlyTitle:t=>({color:t.colors.text.muted,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),blockTabsBodyItemTitleReadonlyActive:t=>({color:t.colors.text.main}),tabItemOptions:{marginLeft:g.medium,display:"flex",alignItems:"center",justifyContent:"center"}});c();var ON=b(k()),lb=b(q());function tk(t){let{active:o,children:e,...n}=t;return ON.default.createElement(lb.View,{style:[xN.blockTabsItem,o&&xN.blockTabsItemActive],...n},e)}var xN=lb.StyleSheet.create({blockTabsItem:{display:"none",pageBreakInside:"avoid"},blockTabsItemActive:{display:"flex"}});c();var If=b(k());var nq=5,_N={activeKeys:{},activeTitles:[]},rq=Lt({key:"tabsAtom",default:_N,effects:[Ir.recoilEffect("@recoil/tabsAtom",_N)]});function RN(t){let{sections:o,selected:e}=If.useContext(Ii),n=If.useMemo(()=>{let u=new Map;return t.blockNodes.forEach(d=>{let p=Fu();[...o.entries()].filter(([f])=>d.getNode(f)).forEach(([f,m])=>{p.set(f,m)}),u.set(d.key,p)}),u},[o,t]),[r,i]=or(rq),[a,s]=Uu(!1,[e]),l=Cc();return If.useMemo(()=>{let{value:u,readOnly:d}=l;return[(d?null:aq(u,t))||iq(r,t,a,n,e)||(d?sq(r,t):null)||t.blockNodes.first(),f=>{let m=f.data.get("title");s(!0),i(h=>({activeKeys:{...h.activeKeys,[t.key]:f.key},activeTitles:m?h.activeTitles.filter(y=>y!==m).concat([m]).slice(-nq):h.activeTitles}))}]},[l,r,i,a,n,e])}function iq(t,o,e,n,r){let i=t.activeKeys[o.key];return e&&i?o.blockNodes.find(a=>a.key===i):o.blockNodes.find(a=>[...n.get(a.key)?.values()||[]].includes(r||""))}function aq(t,o){if(t.selection.isFocused)return o.blockNodes.find(e=>he.isTextRange(t.selection)&&(t.selection.hasAnchorIn(e)||t.selection.hasFocusIn(e)))}function sq(t,o){return o.blockNodes.map(e=>{let n=e.data.get("title");return{node:e,score:t.activeTitles.indexOf(n)}}).filter(({score:e})=>e>=0).sortBy(({score:e})=>-e).map(({node:e})=>e).first()||void 0}function PN(t){let{node:o,children:e,editor:n}=t,[r,i]=RN(o),a=o.getChildIndex(r.key),s=Je(),l=so.default.useRef(null),u=so.default.useRef(null),d=so.default.useCallback(m=>{let h=l.current;h&&h.measureInWindow((y,S)=>{u.current=S}),n.readOnly||n.change(y=>{y.blur()}),i(m)},[n,i]);so.default.useEffect(()=>{let{current:m}=u;m&&(u.current=null,window.requestAnimationFrame(()=>{let h=l.current;h&&h.measureInWindow((y,S)=>{window.scrollBy(0,S-m)})}))},[r]);let p=o.blockNodes.map((m,h)=>so.default.createElement(ek,{key:m.key,editor:n,tab:m,index:h,active:h===a,isFirst:h===0,isLast:h===o.nodes.size-1,onSelect:y=>d(y)})),f=so.default.Children.map(e,(m,h)=>so.default.createElement(tk,{key:m&&typeof m=="object"&&"key"in m?m.key:h,active:h===a},m));return s?so.default.createElement(ve,{...t},so.default.createElement(ub.View,{ref:l},so.default.Children.map(e,(m,h)=>{let y=o.nodes.toArray()[h];return so.default.createElement(ve,{key:y.key,...t},so.default.createElement(ub.View,{ref:l},so.default.createElement(jC,null,so.default.createElement(ek,{editor:n,key:y.key,tab:y,index:h,active:!0,isFirst:!0,isLast:!1,onSelect:()=>{}})),so.default.createElement(UC,null,so.default.createElement(tk,{active:!0},m))))}))):so.default.createElement(ve,{...t},so.default.createElement(ub.View,{ref:l},so.default.createElement(jC,null,p),so.default.createElement(UC,null,f)))}c();var ok=b(k()),IN=b(q());function EN(t){let{attributes:o,children:e}=t;return ok.default.createElement(ve,{...t},ok.default.createElement(IN.View,{...o},e))}c();var Ef=b(wi());var TN={onKeyDown:cq};function cq(t,o){let{value:e}=o;return Eo(e.selection)?null:(0,Ef.default)("backspace",t)&&e.isCollapsed?lq(t,o):(0,Ef.default)("enter",t)?uq(t,o):(0,Ef.default)("mod+enter",t)?dq(t,o):(0,Ef.default)("mod+a",t)?pq(t,o):null}function lq(t,o){let{value:e}=o,n=Ji.getCurrentTab(e);return!n||!jp(n)?null:(t.preventDefault(),Ji.removeTab(o,n.key))}function uq(t,o){let{value:e}=o,n=Ji.getCurrentTab(e);if(!n||n.nodes.size<=1||!jp(n.blockNodes.last()))return null;let r=e.document.getClosest(e.startKey,u=>"type"in u&&u.type===ir);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter is pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab when enter is pressed twice");let a=i.getChildIndex(r.key);if(a<0)throw new Error("Could not find child of parent while exiting tab when enter is pressed twice");t.preventDefault();let s=n.blockNodes.last();s&&o.removeNodeByKey(s.key);let l=Gt.create({type:de,nodes:[cg.create("")]});return o.insertNodeByKey(i.key,a+1,l).collapseToStartOf(l)}function dq(t,o){let{value:e}=o;if(!Ji.getCurrentTab(e))return null;let r=e.document.getClosest(e.startKey,s=>"type"in s&&s.type===ir);if(!r)throw new Error("Could not find parent of type BLOCK_TABS while exiting tab when enter are pressed twice");let i=e.document.getParent(r.key);if(!i)throw new Error("Could not find parent of tab while exiting tab on mod+enter");if(i.getChildIndex(r.key)<0)throw new Error("Could not find child of parent while exiting tab on mod+enter");return t.preventDefault(),St(o,r),o}function pq(t,o){let{value:e}=o,n=Ji.getCurrentTab(e);return n?(t.preventDefault(),o.collapseToStartOf(n).extendToEndOf(n)):null}var MN={renderNode:mq,renderVirtualNode:fq,renderMark:gq,estimateNodeSize:(t,o)=>{let e=Mi(t,o);return{height:ru(t,o,{blockSpacing:e})}}};function mq(t){if(Gt.isBlock(t.node)&&!Hp.isInline(t.parent)){let o=t;switch(t.node.type){case de:return Xe.createElement(sL,{...o,node:t.node,parent:t.parent});case po:case Ht:case mo:return Xe.createElement(Y0,{...o,node:t.node,parent:t.parent});case Xo:return Xe.createElement(j0,{...o,node:t.node,parent:t.parent});case Fe:case qe:case tt:return Xe.createElement(GL,{...o,node:t.node,parent:t.parent});case _r:return Xe.createElement(J7,{...o,node:t.node,parent:t.parent});case rr:return Xe.createElement(m0,{...o,node:t.node,parent:t.parent});case La:return Xe.createElement(h0,{...o,node:t.node,parent:t.parent});case ln:return Xe.createElement(XL,{...o,node:t.node,parent:t.parent});case $i:return Xe.createElement(q6,{...o,node:t.node,parent:t.parent});case bs:return Xe.createElement(FL,{...o,node:t.node,parent:t.parent});case _n:return Xe.createElement(C0,{...o,node:t.node,parent:t.parent});case To:return Xe.createElement(cM,{...o,node:t.node,parent:t.parent});case uo:return Xe.createElement(mL,{...o,node:t.node,parent:t.parent});case Kt:return Xe.createElement(dL,{...o,node:t.node,parent:t.parent});case ir:return Xe.createElement(PN,{...o,node:t.node,parent:t.parent});case Or:return Xe.createElement(EN,{...o,node:t.node,parent:t.parent});case Sl:return Xe.createElement(t7,{...o,node:t.node,parent:t.parent});case Wu:return Xe.createElement(xL,{...o,node:t.node,parent:t.parent});case Cs:return Xe.createElement(CL,{...o,node:t.node,parent:t.parent});case Yr:return Xe.createElement(T0,{...o,node:t.node,parent:t.parent});case vs:return Xe.createElement(zL,{...o,node:t.node,parent:t.parent});case jr:return Xe.createElement(x0,{...o,node:t.node,parent:t.parent});case ws:return Xe.createElement(IL,{...o,node:t.node,parent:t.parent})}}if(Hp.isInline(t.node)&&!fc.isDocument(t.parent))switch(t.node.type){case Rn:return Xe.createElement(G0,{...t,node:t.node,parent:t.parent});case gc:return Xe.createElement(G6,{...t,node:t.node,parent:t.parent});case lg:return Xe.createElement(o7,{...t,node:t.node,parent:t.parent});case ug:return Xe.createElement(iE,{...t,node:t.node,parent:t.parent})}return null}function fq(t){switch(t.node.type){case Fe:case qe:case tt:return Xe.createElement(HL,{...t,key:t.node.key})}}function gq(t){switch(t.mark.type){case ar:return Xe.createElement(K6,{...t});case sr:return Xe.createElement(U6,{...t});case $r:return Xe.createElement(j6,{...t});case fo:return Xe.createElement(Z6,{...t});case Xp:return Xe.createElement(Q6,{...t});case dg:case mg:case pg:return Xe.createElement(RL,{...t})}return null}var A6=rt.forwardRef(function(o,e){let{value:n,baseValue:r,selections:i=Ma.create(),onChange:a,placeholder:s,uploadFiles:l,updateFile:u,logAnalyticsEvent:d,readOnly:p=!1,style:f,sectionIDs:m,selectedSection:h,isDiff:y,blockLayoutComponent:S,rightGutterComponent:C,integrationBlocksContext:x,integrationBlocksRemote:O,integrationsBlocksSubscription:E,onBlockHover:P,plugins:L}=o,{mode:R}=rt.useContext($o),T=rt.useRef(null),M=ki(T,e),I=rt.useMemo(()=>i.filter(qt).filter(wt=>wt.isSet),[i]),N=rt.useMemo(()=>({..._S,...S?{blockLayoutComponent:S}:{},...C?{rightGutterComponent:C}:{},onBlockHover:P,integrationBlocksContext:x,integrationsBlocksSubscription:E}),[P,x,E]);l&&(N.uploadFiles=l),u&&(N.updateFile=u),d&&(N.logAnalyticsEvent=d),N.integrationBlocksRemote=O;let[,z]=_(W),Y=s0(N),[Q]=oN(),te=X0(N),_e=X1(n.document,rr),Ae=rt.useMemo(()=>[MN,Q,c0,y0,gL,TN,cL,$0,te,...tL,aL,E0,B0,O0,_0,M0,aE,_e,SL,Y,u0,qM,l0,...L??[]],[Y,te,_e,L]),Be=Je(),dt=xs(n.document);rt.useEffect(()=>{if(T.current?.value.isFocused)return yh(T.current?.value.selection.isCollapsed?"editor-selection-collapsed":"editor-selection-expanded")},[T.current?.value.isFocused,T.current?.value.selection.isCollapsed]);let eo=rt.useRef(null),Vr=T.current?.value?.selection?Eo(T.current?.value?.selection):!1;rt.useEffect(()=>{let wt=Vr?"block":"text";eo.current&&wt!==eo.current&&d?.({type:"edit_switch_selection_mode",selectionMode:wt}),eo.current=Vr?"block":"text"},[Vr]);let[On,xr]=rt.useState(null),qr=rt.useMemo(()=>({sections:m||Fu(),active:On,selected:h,setActive:xr}),[m,On]),Gr=r===null?null:r===void 0?void 0:r.document;return rt.createElement(HM,{original:Gr,modified:n.document},rt.createElement(Ii.Provider,{value:qr},rt.createElement(Ve.Provider,{value:N},rt.createElement(Us.View,{style:[lp.editor,f],isPDF:Be},p?null:rt.createElement(va.TouchableWithoutFeedback,{onPress:()=>{T.current?.change(wt=>yw(wt,"DOCUMENT_START"))}},rt.createElement(va.View,{style:[lp.editorFocusArea,lp.editorFocusAreaTop]})),dt&&s&&!n.isFocused&&!p?rt.createElement(N.blockLayoutComponent,{renderMode:"centered"},rt.createElement(va.View,{style:[lp.placeholder]},rt.createElement(va.Text,{style:[z.Body,z.textMuted]},s))):null,rt.createElement(Z1,{ref:M,testID:"page.contentEditor",value:n,onChange:a,readOnly:p,selections:I,plugins:Ae,virtualize:R==="app",enableBlockContainment:p&&!y},!p&&qt(n.selection)?rt.createElement(wM,{value:n,selection:n.selection}):null),p?null:rt.createElement(va.TouchableWithoutFeedback,{onPress:()=>{T.current?.change(wt=>yw(wt,"DOCUMENT_END"))}},rt.createElement(va.View,{style:[lp.editorFocusArea,lp.editorFocusAreaBottom]}))))))}),lp=va.StyleSheet.create({editor:{position:"relative"},editorFocusArea:{position:"absolute",cursor:"text",right:0,left:0},editorFocusAreaTop:{height:g.large,top:-g.large},editorFocusAreaBottom:{height:g.large,bottom:-g.large},placeholder:{position:"absolute",top:g.small}});c();var vr=b(k());c();c();var Ff=b(k());c();var us=b(k());c();var $n=b(k());c();var yu="right-scroll-bar-position",vu="width-before-scroll-bar",nk="with-scroll-bars-hidden",rk="--removed-body-scroll-bar-size";c();c();function LN(t,o){return typeof t=="function"?t(o):t&&(t.current=o),t}c();var NN=b(k());function AN(t,o){var e=(0,NN.useState)(function(){return{value:t,callback:o,facade:{get current(){return e.value},set current(n){var r=e.value;r!==n&&(e.value=n,e.callback(n,r))}}}})[0];return e.callback=o,e.facade}c();function Tf(t,o){return AN(o||null,function(e){return t.forEach(function(n){return LN(n,e)})})}c();c();c();function DN(t){return t}function BN(t,o){o===void 0&&(o=DN);var e=[],n=!1,r={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return e.length?e[e.length-1]:t},useMedium:function(i){var a=o(i,n);return e.push(a),function(){e=e.filter(function(s){return s!==a})}},assignSyncMedium:function(i){for(n=!0;e.length;){var a=e;e=[],a.forEach(i)}e={push:function(s){return i(s)},filter:function(){return e}}},assignMedium:function(i){n=!0;var a=[];if(e.length){var s=e;e=[],s.forEach(i),a=e}var l=function(){var d=a;a=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),e={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),e}}}};return r}function Mf(t,o){return o===void 0&&(o=DN),BN(t,o)}function bu(t){t===void 0&&(t={});var o=BN(null);return o.options=cn({async:!0,ssr:!1},t),o}c();var WN=b(k()),zN=function(t){var o=t.sideCar,e=wl(t,["sideCar"]);if(!o)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=o.read();if(!n)throw new Error("Sidecar medium not found");return WN.createElement(n,cn({},e))};zN.isSideCarExport=!0;function wu(t,o){return t.useMedium(o),zN}var db=bu();var ik=function(){},pb=$n.forwardRef(function(t,o){var e=$n.useRef(null),n=$n.useState({onScrollCapture:ik,onWheelCapture:ik,onTouchMoveCapture:ik}),r=n[0],i=n[1],a=t.forwardProps,s=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,p=t.shards,f=t.sideCar,m=t.noIsolation,h=t.inert,y=t.allowPinchZoom,S=t.as,C=S===void 0?"div":S,x=wl(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),O=f,E=Tf([e,o]),P=cn(cn({},x),r);return $n.createElement($n.Fragment,null,d&&$n.createElement(O,{sideCar:db,removeScrollBar:u,shards:p,noIsolation:m,inert:h,setCallbacks:i,allowPinchZoom:!!y,lockRef:e}),a?$n.cloneElement($n.Children.only(s),cn(cn({},P),{ref:E})):$n.createElement(C,cn({},P,{className:l,ref:E}),s))});pb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pb.classNames={fullWidth:vu,zeroRight:yu};c();c();var Tt=b(k());c();var Lf="data-focus-lock",mb="data-focus-lock-disabled",FN="data-no-focus-lock",VN="data-autofocus-inside",qN="data-no-autofocus";var KN=b(k());c();var up=b(k());var dp={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},GN=function(o){var e=o.children;return up.createElement(up.Fragment,null,up.createElement("div",{key:"guard-first","data-focus-guard":!0,"data-focus-auto-guard":!0,style:dp}),e,e&&up.createElement("div",{key:"guard-last","data-focus-guard":!0,"data-focus-auto-guard":!0,style:dp}))};GN.propTypes={};GN.defaultProps={children:null};c();var fb=Mf({},function(t){var o=t.target,e=t.currentTarget;return{target:o,currentTarget:e}}),gb=Mf(),HN=Mf(),hb=bu({async:!0});var yq=[],ak=Tt.forwardRef(function(o,e){var n,r=Tt.useState(),i=r[0],a=r[1],s=Tt.useRef(),l=Tt.useRef(!1),u=Tt.useRef(null),d=o.children,p=o.disabled,f=o.noFocusGuards,m=o.persistentFocus,h=o.crossFrame,y=o.autoFocus,S=o.allowTextSelection,C=o.group,x=o.className,O=o.whiteList,E=o.hasPositiveIndices,P=o.shards,L=P===void 0?yq:P,R=o.as,T=R===void 0?"div":R,M=o.lockProps,I=M===void 0?{}:M,N=o.sideCar,z=o.returnFocus,Y=o.focusOptions,Q=o.onActivation,te=o.onDeactivation,_e=Tt.useState({}),Ae=_e[0],Be=Tt.useCallback(function(){u.current=u.current||document&&document.activeElement,s.current&&Q&&Q(s.current),l.current=!0},[Q]),dt=Tt.useCallback(function(){l.current=!1,te&&te(s.current)},[te]);(0,KN.useEffect)(function(){p||(u.current=null)},[]);var eo=Tt.useCallback(function(rn){var gi=u.current;if(gi&&gi.focus){var K=typeof z=="function"?z(gi):z;if(K){var ne=typeof K=="object"?K:void 0;u.current=null,rn?Promise.resolve().then(function(){return gi.focus(ne)}):gi.focus(ne)}}},[z]),Vr=Tt.useCallback(function(rn){l.current&&fb.useMedium(rn)},[]),On=gb.useMedium,xr=Tt.useCallback(function(rn){s.current!==rn&&(s.current=rn,a(rn))},[]),qr=Ks((n={},n[mb]=p&&"disabled",n[Lf]=C,n),I),Gr=f!==!0,wt=Gr&&f!=="tail",dc=Tf([e,xr]);return Tt.createElement(Tt.Fragment,null,Gr&&[Tt.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:dp}),E?Tt.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:dp}):null],!p&&Tt.createElement(N,{id:Ae,sideCar:hb,observed:i,disabled:p,persistentFocus:m,crossFrame:h,autoFocus:y,whiteList:O,shards:L,onActivation:Be,onDeactivation:dt,returnFocus:eo,focusOptions:Y}),Tt.createElement(T,Ks({ref:dc},qr,{className:x,onBlur:On,onFocus:Vr}),d),wt&&Tt.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:dp}))});ak.propTypes={};ak.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};var XN=ak;c();function sk(t){var o=window,e=o.setImmediate;typeof e<"u"?e(t):setTimeout(t,1)}var UN=XN;c();var yb=bu(),vb="data-focus-on-hidden";var YN=us.forwardRef(function(t,o){var e=us.useState(!1),n=e[0],r=e[1],i=t.children,a=t.autoFocus,s=t.shards,l=t.enabled,u=l===void 0?!0:l,d=t.scrollLock,p=d===void 0?!0:d,f=t.focusLock,m=f===void 0?!0:f,h=t.returnFocus,y=h===void 0?!0:h,S=t.inert,C=t.allowPinchZoom,x=t.sideCar,O=t.className,E=t.shouldIgnore,P=t.style,L=t.as,R=wl(t,["children","autoFocus","shards","enabled","scrollLock","focusLock","returnFocus","inert","allowPinchZoom","sideCar","className","shouldIgnore","style","as"]),T=x,M=n.onActivation,I=n.onDeactivation,N=wl(n,["onActivation","onDeactivation"]),z=cn(cn({},N),{sideCar:x,shards:s,allowPinchZoom:C,as:L,inert:S,style:P,enabled:u&&p});return us.createElement(us.Fragment,null,us.createElement(UN,{ref:o,sideCar:x,disabled:!(n&&u&&m),returnFocus:y,autoFocus:a,shards:s,onActivation:M,onDeactivation:I,className:O,whiteList:E,lockProps:z,as:pb},i),u&&us.createElement(T,cn({},R,{sideCar:yb,setLockProps:r,shards:s})))});c();c();c();var f2=b(k());c();c();c();function Nf(t,o){return Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Nf(t,o)}function ck(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,Nf(t,o)}var bb=b(k());function vq(t,o){function e(n){return n.displayName||n.name||"Component"}return function(r){var i=[],a;function s(){a=t(i.map(function(u){return u.props})),o(a)}var l=function(u){ck(d,u);function d(){return u.apply(this,arguments)||this}d.peek=function(){return a};var p=d.prototype;return p.componentDidMount=function(){i.push(this),s()},p.componentDidUpdate=function(){s()},p.componentWillUnmount=function(){var m=i.indexOf(this);i.splice(m,1),s()},p.render=function(){return bb.default.createElement(r,this.props)},d}(bb.PureComponent);return h1(l,"displayName","SideEffect("+e(r)+")"),l}}var jN=vq;c();c();c();c();var Zn=function(t){for(var o=Array(t.length),e=0;e<t.length;++e)o[e]=t[e];return o},Af=function(t){return Array.isArray(t)?t:[t]};c();var bq=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var o=window.getComputedStyle(t,null);return!o||!o.getPropertyValue?!1:o.getPropertyValue("display")==="none"||o.getPropertyValue("visibility")==="hidden"},$N=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},ZN=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},wq=function(t,o){return!t||ZN(t)||!bq(t)&&o($N(t))},lk=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=wq(o,lk.bind(void 0,t));return t.set(o,n),n},Sq=function(t,o){return t&&!ZN(t)?kq(t)?o($N(t)):!1:!0},uk=function(t,o){var e=t.get(o);if(e!==void 0)return e;var n=Sq(o,uk.bind(void 0,t));return t.set(o,n),n},dk=function(t){return t.dataset},Cq=function(t){return t.tagName==="BUTTON"},JN=function(t){return t.tagName==="INPUT"},pk=function(t){return JN(t)&&t.type==="radio"},QN=function(t){return!((JN(t)||Cq(t))&&(t.type==="hidden"||t.disabled))},kq=function(t){var o=t.getAttribute(qN);return![!0,"true",""].includes(o)},Df=function(t){var o;return!!(t&&(!((o=dk(t))===null||o===void 0)&&o.focusGuard))},pp=function(t){return!Df(t)},e2=function(t){return!!t};c();var xq=function(t,o){var e=t.tabIndex-o.tabIndex,n=t.index-o.index;if(e){if(!t.tabIndex)return 1;if(!o.tabIndex)return-1}return e||n},mk=function(t,o,e){return Zn(t).map(function(n,r){return{node:n,index:r,tabIndex:e&&n.tabIndex===-1?(n.dataset||{}).focusGuard?0:-1:n.tabIndex}}).filter(function(n){return!o||n.tabIndex>=0}).sort(xq)};c();c();var t2=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"];var fk=t2.join(","),Oq="".concat(fk,", [data-focus-guard]"),o2=function(t,o){var e;return Zn(((e=t.shadowRoot)===null||e===void 0?void 0:e.children)||t.children).reduce(function(n,r){return n.concat(r.matches(o?Oq:fk)?[r]:[],o2(r))},[])},wb=function(t,o){return t.reduce(function(e,n){return e.concat(o2(n,o),n.parentNode?Zn(n.parentNode.querySelectorAll(fk)).filter(function(r){return r===n}):[])},[])},n2=function(t){var o=t.querySelectorAll("[".concat(VN,"]"));return Zn(o).map(function(e){return wb([e])}).reduce(function(e,n){return e.concat(n)},[])};var gk=function(t,o){return Zn(t).filter(function(e){return lk(o,e)}).filter(function(e){return QN(e)})},hk=function(t,o){return o===void 0&&(o=new Map),Zn(t).filter(function(e){return uk(o,e)})},Bf=function(t,o,e){return mk(gk(wb(t,e),o),!0,e)},yk=function(t,o){return mk(gk(wb(t),o),!1)},r2=function(t,o){return gk(n2(t),o)},ll=function(t,o){return t.shadowRoot?ll(t.shadowRoot,o):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,o)?!0:Zn(t.children).some(function(e){return ll(e,o)})};c();var _q=function(t){for(var o=new Set,e=t.length,n=0;n<e;n+=1)for(var r=n+1;r<e;r+=1){var i=t[n].compareDocumentPosition(t[r]);(i&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&o.add(r),(i&Node.DOCUMENT_POSITION_CONTAINS)>0&&o.add(n)}return t.filter(function(a,s){return!o.has(s)})},i2=function(t){return t.parentNode?i2(t.parentNode):t},mp=function(t){var o=Af(t);return o.filter(Boolean).reduce(function(e,n){var r=n.getAttribute(Lf);return e.push.apply(e,r?_q(Zn(i2(n).querySelectorAll("[".concat(Lf,'="').concat(r,'"]:not([').concat(mb,'="disabled"])')))):[n]),e},[])};c();var a2=function(t){return t.activeElement?t.activeElement.shadowRoot?a2(t.activeElement.shadowRoot):t.activeElement:void 0},fp=function(){return document.activeElement?document.activeElement.shadowRoot?a2(document.activeElement.shadowRoot):document.activeElement:void 0};var Rq=function(t){return t===document.activeElement},Pq=function(t){return!!Zn(t.querySelectorAll("iframe")).some(function(o){return Rq(o)})},Sb=function(t){var o=document&&fp();return!o||o.dataset&&o.dataset.focusGuard?!1:mp(t).some(function(e){return ll(e,o)||Pq(e)})};c();var vk=function(){var t=document&&fp();return t?Zn(document.querySelectorAll("[".concat(FN,"]"))).some(function(o){return ll(o,t)}):!1};c();c();c();var Iq=function(t,o){return o.filter(pk).filter(function(e){return e.name===t.name}).filter(function(e){return e.checked})[0]||t},Cb=function(t,o){return pk(t)&&t.name?Iq(t,o):t},s2=function(t){var o=new Set;return t.forEach(function(e){return o.add(Cb(e,t))}),t.filter(function(e){return o.has(e)})};c();var bk=function(t){return t[0]&&t.length>1?Cb(t[0],t):t[0]},wk=function(t,o){return t.length>1?t.indexOf(Cb(t[o],t)):o};var Sk="NEW_FOCUS",c2=function(t,o,e,n){var r=t.length,i=t[0],a=t[r-1],s=Df(e);if(!(e&&t.indexOf(e)>=0)){var l=e!==void 0?o.indexOf(e):-1,u=n?o.indexOf(n):l,d=n?t.indexOf(n):-1,p=l-u,f=o.indexOf(i),m=o.indexOf(a),h=s2(o),y=e!==void 0?h.indexOf(e):-1,S=y-(n?h.indexOf(n):l),C=wk(t,0),x=wk(t,r-1);if(l===-1||d===-1)return Sk;if(!p&&d>=0)return d;if(l<=f&&s&&Math.abs(p)>1)return x;if(l>=m&&s&&Math.abs(p)>1)return C;if(p&&Math.abs(S)>1)return d;if(l<=f)return x;if(l>m)return C;if(p)return Math.abs(p)>1?d:(r+d+p)%r}};c();var Eq=function(t){return function(o){var e,n=(e=dk(o))===null||e===void 0?void 0:e.autofocus;return o.autofocus||n!==void 0&&n!=="false"||t.indexOf(o)>=0}},l2=function(t,o,e){var n=t.map(function(i){var a=i.node;return a}),r=hk(n.filter(Eq(e)));return r&&r.length?bk(r):bk(hk(o))};c();var kk=function(t,o){return o===void 0&&(o=[]),o.push(t),t.parentNode&&kk(t.parentNode.host||t.parentNode,o),o},Ck=function(t,o){for(var e=kk(t),n=kk(o),r=0;r<e.length;r+=1){var i=e[r];if(n.indexOf(i)>=0)return i}return!1},kb=function(t,o,e){var n=Af(t),r=Af(o),i=n[0],a=!1;return r.filter(Boolean).forEach(function(s){a=Ck(a||s,s)||a,e.filter(Boolean).forEach(function(l){var u=Ck(i,l);u&&(!a||ll(u,a)?a=u:a=Ck(u,a))})}),a},u2=function(t,o){return t.reduce(function(e,n){return e.concat(r2(n,o))},[])};var Tq=function(t,o){var e=new Map;return o.forEach(function(n){return e.set(n.node,n)}),t.map(function(n){return e.get(n)}).filter(e2)},d2=function(t,o){var e=document&&fp(),n=mp(t).filter(pp),r=kb(e||t,t,n),i=new Map,a=yk(n,i),s=Bf(n,i).filter(function(f){var m=f.node;return pp(m)});if(!(!s[0]&&(s=a,!s[0]))){var l=yk([r],i).map(function(f){var m=f.node;return m}),u=Tq(l,s),d=u.map(function(f){var m=f.node;return m}),p=c2(d,l,e,o);return p===Sk?{node:l2(a,d,u2(n,i))}:p===void 0?p:u[p]}};c();var xk=function(t){var o=mp(t).filter(pp),e=kb(t,t,o),n=new Map,r=Bf([e],n,!0),i=Bf(o,n).filter(function(a){var s=a.node;return pp(s)}).map(function(a){var s=a.node;return s});return r.map(function(a){var s=a.node,l=a.index;return{node:s,index:l,lockItem:i.indexOf(s)>=0,guard:Df(s)}})};c();var Mq=function(t,o){"focus"in t&&t.focus(o),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus()},Ok=0,_k=!1,p2=function(t,o,e){e===void 0&&(e={});var n=d2(t,o);if(!_k&&n){if(Ok>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),_k=!0,setTimeout(function(){_k=!1},1);return}Ok++,Mq(n.node,e.focusOptions),Ok--}};var Rk=p2;var Lq=function(){return document&&document.activeElement===document.body},Nq=function(){return Lq()||vk()},hp=null,gp=null,yp=null,Wf=!1,Aq=function(){return!0},Dq=function(o){return(hp.whiteList||Aq)(o)},Bq=function(o,e){yp={observerNode:o,portaledElement:e}},Wq=function(o){return yp&&yp.portaledElement===o};function m2(t,o,e,n){var r=null,i=t;do{var a=n[i];if(a.guard)a.node.dataset.focusAutoGuard&&(r=a);else if(a.lockItem){if(i!==t)return;r=null}else break}while((i+=e)!==o);r&&(r.node.tabIndex=0)}var zq=function(o){return o&&"current"in o?o.current:o},Fq=function(o){return o?!!Wf:Wf==="meanwhile"},Vq=function t(o,e,n){return e&&(e.host===o&&(!e.activeElement||n.contains(e.activeElement))||e.parentNode&&t(o,e.parentNode,n))},qq=function(o,e){return e.some(function(n){return Vq(o,n,n)})},xb=function(){var o=!1;if(hp){var e=hp,n=e.observed,r=e.persistentFocus,i=e.autoFocus,a=e.shards,s=e.crossFrame,l=e.focusOptions,u=n||yp&&yp.portaledElement,d=document&&document.activeElement;if(u){var p=[u].concat(a.map(zq).filter(Boolean));if((!d||Dq(d))&&(r||Fq(s)||!Nq()||!gp&&i)&&(u&&!(Sb(p)||d&&qq(d,p)||Wq(d,u))&&(document&&!gp&&d&&!i?(d.blur&&d.blur(),document.body.focus()):(o=Rk(p,gp,{focusOptions:l}),yp={})),Wf=!1,gp=document&&document.activeElement),document){var f=document&&document.activeElement,m=xk(p),h=m.map(function(y){var S=y.node;return S}).indexOf(f);h>-1&&(m.filter(function(y){var S=y.guard,C=y.node;return S&&C.dataset.focusAutoGuard}).forEach(function(y){var S=y.node;return S.removeAttribute("tabIndex")}),m2(h,m.length,1,m),m2(h,-1,-1,m))}}}return o},g2=function(o){xb()&&o&&(o.stopPropagation(),o.preventDefault())},Ob=function(){return sk(xb)},h2=function(o){var e=o.target,n=o.currentTarget;n.contains(e)||Bq(n,e)},Gq=function(){return null},Hq=function(o){var e=o.children;return f2.createElement("div",{onBlur:Ob,onFocus:h2},e)};Hq.propTypes={};var y2=function(){Wf="just",setTimeout(function(){Wf="meanwhile"},0)},Kq=function(){document.addEventListener("focusin",g2),document.addEventListener("focusout",Ob),window.addEventListener("blur",y2)},Xq=function(){document.removeEventListener("focusin",g2),document.removeEventListener("focusout",Ob),window.removeEventListener("blur",y2)};function Uq(t){return t.filter(function(o){var e=o.disabled;return!e})}function Yq(t){var o=t.slice(-1)[0];o&&!hp&&Kq();var e=hp,n=e&&o&&o.id===e.id;hp=o,e&&!n&&(e.onDeactivation(),t.filter(function(r){var i=r.id;return i===e.id}).length||e.returnFocus(!o)),o?(gp=null,(!n||e.observed!==o.observed)&&o.onActivation(),xb(!0),sk(xb)):(Xq(),gp=null)}fb.assignSyncMedium(h2);gb.assignMedium(Ob);HN.assignMedium(function(t){return t({moveFocusInside:Rk,focusInside:Sb})});var v2=jN(Uq,Yq)(Gq);var QFe=wu(hb,v2);c();c();var Mt=b(k());c();c();var _b=b(k());c();c();c();var S2=b(k());c();c();var b2;var w2=function(){if(b2)return b2;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jq(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var o=w2();return o&&t.setAttribute("nonce",o),t}function $q(t,o){t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o))}function Zq(t){var o=document.head||document.getElementsByTagName("head")[0];o.appendChild(t)}var Pk=function(){var t=0,o=null;return{add:function(e){t==0&&(o=jq())&&($q(o,e),Zq(o)),t++},remove:function(){t--,!t&&o&&(o.parentNode&&o.parentNode.removeChild(o),o=null)}}};var Ik=function(){var t=Pk();return function(o,e){S2.useEffect(function(){return t.add(o),function(){t.remove()}},[o&&e])}};var Su=function(){var t=Ik(),o=function(e){var n=e.styles,r=e.dynamic;return t(n,r),null};return o};c();var Jq={left:0,top:0,right:0,gap:0},Ek=function(t){return parseInt(t||"",10)||0},Qq=function(t){var o=window.getComputedStyle(document.body),e=o[t==="padding"?"paddingLeft":"marginLeft"],n=o[t==="padding"?"paddingTop":"marginTop"],r=o[t==="padding"?"paddingRight":"marginRight"];return[Ek(e),Ek(n),Ek(r)]},Tk=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Jq;var o=Qq(t),e=document.documentElement.clientWidth,n=window.innerWidth;return{left:o[0],top:o[1],right:o[2],gap:Math.max(0,n-e+o[2]-o[0])}};var eG=Su(),tG=function(t,o,e,n){var r=t.left,i=t.top,a=t.right,s=t.gap;return e===void 0&&(e="margin"),`
  .`.concat(nk,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([o&&"position: relative ".concat(n,";"),e==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),e==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(yu,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(vu,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(yu," .").concat(yu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(vu," .").concat(vu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body {
    `).concat(rk,": ").concat(s,`px;
  }
`)},Mk=function(t){var o=t.noRelative,e=t.noImportant,n=t.gapMode,r=n===void 0?"margin":n,i=_b.useMemo(function(){return Tk(r)},[r]);return _b.createElement(eG,{styles:tG(i,!o,r,e?"":"!important")})};c();var Lk=!1;if(typeof window<"u")try{zf=Object.defineProperty({},"passive",{get:function(){return Lk=!0,!0}}),window.addEventListener("test",zf,zf),window.removeEventListener("test",zf,zf)}catch{Lk=!1}var zf,Cu=Lk?{passive:!1}:!1;c();var oG=function(t){return t.tagName==="TEXTAREA"},C2=function(t,o){var e=window.getComputedStyle(t);return e[o]!=="hidden"&&!(e.overflowY===e.overflowX&&!oG(t)&&e[o]==="visible")},nG=function(t){return C2(t,"overflowY")},rG=function(t){return C2(t,"overflowX")},Nk=function(t,o){var e=o;do{typeof ShadowRoot<"u"&&e instanceof ShadowRoot&&(e=e.host);var n=k2(t,e);if(n){var r=x2(t,e),i=r[1],a=r[2];if(i>a)return!0}e=e.parentNode}while(e&&e!==document.body);return!1},iG=function(t){var o=t.scrollTop,e=t.scrollHeight,n=t.clientHeight;return[o,e,n]},aG=function(t){var o=t.scrollLeft,e=t.scrollWidth,n=t.clientWidth;return[o,e,n]},k2=function(t,o){return t==="v"?nG(o):rG(o)},x2=function(t,o){return t==="v"?iG(o):aG(o)},sG=function(t,o){return t==="h"&&o==="rtl"?-1:1},O2=function(t,o,e,n,r){var i=sG(t,window.getComputedStyle(o).direction),a=i*n,s=e.target,l=o.contains(s),u=!1,d=a>0,p=0,f=0;do{var m=x2(t,s),h=m[0],y=m[1],S=m[2],C=y-S-i*h;(h||C)&&k2(t,s)&&(p+=C,f+=h),s=s.parentNode}while(!l&&s!==document.body||l&&(o.contains(s)||o===s));return(d&&(r&&p===0||!r&&a>p)||!d&&(r&&f===0||!r&&-a>f))&&(u=!0),u};var Rb=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},_2=function(t){return[t.deltaX,t.deltaY]},R2=function(t){return t&&"current"in t?t.current:t},cG=function(t,o){return t[0]===o[0]&&t[1]===o[1]},lG=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},uG=0,vp=[];function P2(t){var o=Mt.useRef([]),e=Mt.useRef([0,0]),n=Mt.useRef(),r=Mt.useState(uG++)[0],i=Mt.useState(function(){return Su()})[0],a=Mt.useRef(t);Mt.useEffect(function(){a.current=t},[t]),Mt.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var y=Rx([t.lockRef.current],(t.shards||[]).map(R2),!0).filter(Boolean);return y.forEach(function(S){return S.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),y.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var s=Mt.useCallback(function(y,S){if("touches"in y&&y.touches.length===2)return!a.current.allowPinchZoom;var C=Rb(y),x=e.current,O="deltaX"in y?y.deltaX:x[0]-C[0],E="deltaY"in y?y.deltaY:x[1]-C[1],P,L=y.target,R=Math.abs(O)>Math.abs(E)?"h":"v";if("touches"in y&&R==="h"&&L.type==="range")return!1;var T=Nk(R,L);if(!T)return!0;if(T?P=R:(P=R==="v"?"h":"v",T=Nk(R,L)),!T)return!1;if(!n.current&&"changedTouches"in y&&(O||E)&&(n.current=P),!P)return!0;var M=n.current||P;return O2(M,S,y,M==="h"?O:E,!0)},[]),l=Mt.useCallback(function(y){var S=y;if(!(!vp.length||vp[vp.length-1]!==i)){var C="deltaY"in S?_2(S):Rb(S),x=o.current.filter(function(P){return P.name===S.type&&P.target===S.target&&cG(P.delta,C)})[0];if(x&&x.should){S.cancelable&&S.preventDefault();return}if(!x){var O=(a.current.shards||[]).map(R2).filter(Boolean).filter(function(P){return P.contains(S.target)}),E=O.length>0?s(S,O[0]):!a.current.noIsolation;E&&S.cancelable&&S.preventDefault()}}},[]),u=Mt.useCallback(function(y,S,C,x){var O={name:y,delta:S,target:C,should:x};o.current.push(O),setTimeout(function(){o.current=o.current.filter(function(E){return E!==O})},1)},[]),d=Mt.useCallback(function(y){e.current=Rb(y),n.current=void 0},[]),p=Mt.useCallback(function(y){u(y.type,_2(y),y.target,s(y,t.lockRef.current))},[]),f=Mt.useCallback(function(y){u(y.type,Rb(y),y.target,s(y,t.lockRef.current))},[]);Mt.useEffect(function(){return vp.push(i),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Cu),document.addEventListener("touchmove",l,Cu),document.addEventListener("touchstart",d,Cu),function(){vp=vp.filter(function(y){return y!==i}),document.removeEventListener("wheel",l,Cu),document.removeEventListener("touchmove",l,Cu),document.removeEventListener("touchstart",d,Cu)}},[]);var m=t.removeScrollBar,h=t.inert;return Mt.createElement(Mt.Fragment,null,h?Mt.createElement(i,{styles:lG(r)}):null,m?Mt.createElement(Mk,{gapMode:"margin"}):null)}var HVe=wu(db,P2);c();var Eb=b(k());c();var dG=function(t){if(typeof document>"u")return null;var o=Array.isArray(t)?t[0]:t;return o.ownerDocument.body},bp=new WeakMap,Pb=new WeakMap,Ib={},Ak=0,pG=function(t,o,e,n){var r=Array.isArray(t)?t:[t];Ib[e]||(Ib[e]=new WeakMap);var i=Ib[e],a=[],s=new Set,l=new Set(r),u=function(p){!p||s.has(p)||(s.add(p),u(p.parentNode))};r.forEach(u);var d=function(p){!p||l.has(p)||Array.prototype.forEach.call(p.children,function(f){if(s.has(f))d(f);else{var m=f.getAttribute(n),h=m!==null&&m!=="false",y=(bp.get(f)||0)+1,S=(i.get(f)||0)+1;bp.set(f,y),i.set(f,S),a.push(f),y===1&&h&&Pb.set(f,!0),S===1&&f.setAttribute(e,"true"),h||f.setAttribute(n,"true")}})};return d(o),s.clear(),Ak++,function(){a.forEach(function(p){var f=bp.get(p)-1,m=i.get(p)-1;bp.set(p,f),i.set(p,m),f||(Pb.has(p)||p.removeAttribute(n),Pb.delete(p)),m||p.removeAttribute(e)}),Ak--,Ak||(bp=new WeakMap,bp=new WeakMap,Pb=new WeakMap,Ib={})}},I2=function(t,o,e){e===void 0&&(e="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),r=o||dG(t);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live]"))),pG(n,r,e,"aria-hidden")):function(){return null}};c();var E2=b(k());var mG=Su(),fG=`
 [`+vb+`] {
   pointer-events: none !important;
 }
`,T2=function(){return E2.createElement(mG,{styles:fG})};var ul=b(k()),M2=function(t){return"current"in t?t.current:t};function L2(t){var o=t.setLockProps,e=t.onEscapeKey,n=t.onClickOutside,r=t.shards,i=t.onActivation,a=t.onDeactivation,s=t.noIsolation,l=(0,ul.useState)(void 0),u=l[0],d=l[1],p=(0,ul.useRef)(null),f=(0,ul.useRef)(0);return Eb.useEffect(function(){var m=function(C){C.defaultPrevented||(C.code==="Escape"||C.key==="Escape"||C.keyCode===27)&&e&&e(C)},h=function(C){C.defaultPrevented||C.target===p.current||C instanceof MouseEvent&&C.button!==0||r&&r.map(M2).some(function(x){return x&&x.contains(C.target)||x===C.target})||n&&n(C)},y=function(C){h(C),f.current=C.touches.length},S=function(C){f.current=C.touches.length};if(u)return document.addEventListener("keydown",m),document.addEventListener("mousedown",h),document.addEventListener("touchstart",y),document.addEventListener("touchend",S),function(){document.removeEventListener("keydown",m),document.removeEventListener("mousedown",h),document.removeEventListener("touchstart",y),document.removeEventListener("touchend",S)}},[u,n,e]),(0,ul.useEffect)(function(){if(u)return i&&i(u),function(){a&&a()}},[!!u]),(0,ul.useEffect)(function(){var m=function(){return null},h=!1,y=function(C){s||(m=I2(_x([C],(r||[]).map(M2)),document.body,vb)),d(function(){return C})},S=function(){m(),h||d(null)};return o({onMouseDown:function(C){p.current=C.target},onTouchStart:function(C){p.current=C.target},onActivation:y,onDeactivation:S}),function(){h=!0,o(!1)}},[]),Eb.createElement(T2,null)}var N2=wu(yb,L2);var gG=function(t){return Ff.createElement(N2,cn({},t))},Dk=Ff.forwardRef(function(t,o){return Ff.createElement(YN,cn({},t,{ref:o,sideCar:gG}))});var ds=b(q()),K2=b(H2());function X2(t){let o=vr.useRef(null),[e,n]=or(bS),{medias:r,currentIndex:i}=e,a=()=>{n({medias:[],currentIndex:0})},s=()=>{n(d=>({...d,currentIndex:Math.max(d.currentIndex-1,0)}))},l=()=>{n(d=>({...d,currentIndex:Math.min(d.currentIndex+1,d.medias.length-1)}))},u=d=>{n(p=>({...p,currentIndex:d}))};return bc({opened:r.length>0,closeOnClick:!1,closeOnOutsideClick:!1,closeOnScroll:!1,closeOnEsc:!0,onClose:a},o),Qr(r.length?{Left:()=>s(),Right:()=>l()}:{},"all",[n,!r.length]),r.length?vr.createElement(Tn,{ref:o},vr.createElement(Dk,null,vr.createElement(ds.View,{style:Sp.imagesZoonPortal},vr.createElement(K2.default,{imageUrls:r.map(d=>({url:d.url})),index:i,renderIndicator:d=>vr.createElement(ds.View,{style:Sp.indactor},vr.createElement(ds.View,{style:Sp.indicatorElement}),vr.createElement(ds.View,{style:[Sp.indicatorElement,w.alignCenter,w.justifyContentCenter]},vr.createElement(ds.Text,{style:Sp.indicatorText},`${d}/${r.length}`)),vr.createElement(ds.View,{style:[Sp.indicatorElement,w.alignEnd,w.justifyContentCenter]},vr.createElement(V,{icon:v.X,defaultTextStyle:{color:$.WHITE},onPress:()=>a()}))),renderArrowLeft:()=>vr.createElement(V,{icon:v.ChevronLeft,defaultTextStyle:{color:$.WHITE},onPress:()=>s()}),renderArrowRight:()=>vr.createElement(V,{icon:v.ChevronRight,defaultTextStyle:{color:$.WHITE},onPress:()=>l()}),onChange:d=>u(d||0),onCancel:()=>a(),enableSwipeDown:!0})))):null}var Sp=ds.StyleSheet.create({imagesZoonPortal:{position:"fixed",top:0,left:0,right:0,bottom:0},indactor:{height:48,position:"absolute",left:0,top:0,right:0,display:"flex",flexDirection:"row",zIndex:20},indicatorElement:{flex:1},indicatorText:{color:$.WHITE}});c();var U2=b(k());function Y2(t){let o=od(),{navigate:e}=ye(),n=ho(),r=x_(),i=R_(t),a=__(t),s=Yo(i),l=Cw(a,"create-space"),u=Cw(a,"create-collection")&&TG(t,r);return U2.default.useMemo(()=>({createSpace:l?async(d=!0)=>{let p=await _c(),f;try{f=(await p.spaces.createSpace(t.organization,{parent:t.collection})).data}catch(m){throw n.notify({title:"Error while creating space",details:Ta(m),kind:"danger"}),m}return re(Nt(f,{type:"space_create"})),d&&e({screen:{type:"space",space:f.id,organization:t.organization,page:""}}),f}:void 0,createCollection:u?async(d=!0)=>{let p=new Yi("startCollection");p.label("User",o.uid),p.label("Owner type","organization"),p.label("Owner",t.organization),t.collection&&p.label("Collection",t.collection),p.label("Perm",a);let[f,m]=VI(h=>Jx(h,{title:"New Collection",owner:t,at:Gx(s.current.collections),createdBy:o.uid,perm:a}));return p.wrapPromise(m),re(n1(f,{type:"collection_create",collection:f.key,restricted:!1})),d&&e({screen:{type:"collection",collection:f.key,organization:f.organization}}),f}:void 0}),[t.organization,t.collection,o.uid,s,e,l,u])}function TG(t,o){let e=0,n=t.collection;for(;n;){let r=o.collections.find(i=>i.key===n);n=r?r.collection:void 0,e++}return e<Zx}c();var Hk=b(k());c();var Cp=JSON.parse('{"iconWrapper":"iconWrapper_x37cD","icon":"icon_TnMUQ","active":"active_CllGx","ok":"ok_V1sO-","interactive":"interactive_B2TwX","good":"good_nqe9w","bad":"bad_pz0f3"}');function j2(t){let{active:o=!0,interactive:e=!1,size:n,rating:r}=t,i=MG[r];return Hk.createElement(U,{style:[Cp.iconWrapper,Cp[r],o&&Cp.active,e&&Cp.interactive],inlineStyle:{"--rating-size":`${n}px`}},Hk.createElement(i,{style:[Cp.icon]}))}var MG={["ok"]:v.FeedbackOk.CSS,["good"]:v.FeedbackGood.CSS,["bad"]:v.FeedbackBad.CSS};c();var Rp=b(k());c();var Jn=b(k()),kp=b(q());function $2(t){return Jn.createElement(J2,{...t})}function Z2(t){let{space:o,onClose:e}=t,n=hh(o);return Jn.createElement(J2,{onPressGitSync:()=>{e(),n()},...t})}function J2(t){let{sources:o,pickSource:e,onPressGitSync:n,onClose:r}=t,[,i]=_(Q2);return Jn.createElement(ih,{size:"large",onClose:r,title:"Import your content",subtitle:"Choose a file type or platform below to get started importing your data.",footer:Jn.createElement(Oi,{icon:v.GitHub.CSS,kind:"default",title:"Need to stay in sync?",details:n?"Set up GitHub or GitLab Sync and link a repo for two-way syncing.":"Start a new space, set up GitHub or GitLab Sync, and link a repo for two-way syncing.",actions:n?[{label:"Set up now",onPress:n}]:void 0})},Jn.createElement(kp.View,{style:[i.cardsWrapper]},o.map(({title:a,name:s,source:l,icon:u})=>Jn.createElement(LG,{key:a,title:s,onPress:()=>e(l),icon:u}))))}function LG(t){let{title:o,description:e,icon:n,onPress:r,style:i}=t,[,a]=_(W),[,s]=_(Q2);return Jn.createElement(H.TouchableOpacity,{style:[w.directionRow,w.alignCenter,g.Padding.smallVertical,g.Padding.smallRight,s.importCard,i],onPress:r},Jn.createElement(kp.View,{style:g.Margin.smallLeft},typeof n=="function"?Jn.createElement(n,{size:A.ICON_L}):Jn.createElement(jo,{source:n,style:s.importCardImage})),Jn.createElement(kp.View,{style:g.Margin.smallLeft},Jn.createElement(kp.View,null,Jn.createElement(H.Text.Child,{style:[a.Label,a.text],activeStyle:a.primary},o)),Jn.createElement(kp.View,null,Jn.createElement(H.Text.Child,{style:[a.Body,a.textMuted],activeStyle:a.primary},e))))}var Q2=G.create({importCard:t=>({borderWidth:1,borderColor:t.colors.border.main,borderRadius:4,flexShrink:0,flexGrow:0,flexBasis:"32%",padding:g.small,marginRight:g.small,marginBottom:g.small}),importCardImage:{width:A.ICON_L,height:A.ICON_L},cardsWrapper:{flexWrap:"wrap",flexDirection:"row",marginRight:-g.small}});c();function Ou(t){return"organization"in t}c();var Db=b(k());c();var ms=b(k());c();var wa=b(k()),ml=b(q());c();var ba=b(k()),xp=b(q());c();var pl=b(k()),eA=b(q());function tA(t){let{fileIcon:o,files:e,setFiles:n}=t,[,r]=_(W),i=Mo(o,{style:r.primary},[o]),a=pl.useCallback(({item:s})=>{let l=()=>{n(u=>u.filter(d=>d.key!==s.key))};return pl.createElement(Es,{layout:"wide",icon:i,title:s.file.name,buttons:[s.uploaded||s.failed?null:pl.createElement(xe,{size:"medium"}),s.failed?pl.createElement(V,{tint:$.scarlet.base,icon:v.Alert,title:"Failed to upload. Please try again.",onPress:l}):null,pl.createElement(V,{icon:v.X,title:"Remove",onPress:l})]})},[o,n]);return pl.createElement(eA.FlatList,{data:e,renderItem:a})}function Nb(t){let{getSpace:o,files:e,setFiles:n,fileIcon:r,fileExtension:i,limitWarning:a=!1,fileUploadsLimit:s=1/0}=t,[,l]=_(W),u=ho(),d=(h,y)=>{n(S=>S.map(C=>C.key===h?{...C,...y}:C))},p=async h=>{let y=await o();try{let S=await qO({kind:"space_import",space:y.id},h.file);d(h.key,{uploaded:S})}catch(S){throw u.notify({kind:"danger",title:"Error while uploading files",details:"Please try again or contact support if the problem persists.",icon:v.Alert.CSS}),d(h.key,{failed:!0}),S}},f=h=>{let y=[];for(let S of h){if(e.length>=s){u.notify({kind:"danger",title:"Cannot upload file",details:`You can only upload ${s} file for this operation`,timeout:5e3});break}if(S.size>209715200){u.notify({kind:"danger",title:`Your file must be less than ${Tm(209715200)}`,details:`Please try a different file that's below ${Tm(209715200)}`,timeout:5e3});continue}let C={key:ag(),file:S};y.push(C)}n(S=>S.concat(y)),y.forEach(S=>p(S))};return ba.createElement(ba.Fragment,null,ba.createElement(xp.View,null,ba.createElement(z1,{icon:r,onDropFiles:f,onPress:async()=>{let h=await L_();f(h)},hint:`Drop your ${i} file here or choose a file`})),a?ba.createElement(xp.View,{style:g.Margin.smallTop},ba.createElement(xp.Text,{style:[l.Caption,l.textMuted]},"GitBook has limits for imported content,"," ",ba.createElement(qa,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))):null,e.length>0?ba.createElement(xp.View,{style:[g.Margin.mediumTop]},ba.createElement(tA,{fileIcon:r,files:e,setFiles:n})):null)}c();var Gf=b(k()),nA=b(q());function Op(t){let{title:o,subtitle:e,onClose:n,onSubmit:r,children:i}=t;return Gf.default.createElement(ih,{title:o,subtitle:e,footer:Gf.default.createElement(nA.View,{style:[w.directionRow,w.justifyContentEnd]},Gf.default.createElement(V,{kind:"secondary",onPress:n,style:g.Margin.smallRight},"Back"),Gf.default.createElement(V,{kind:"primary",onPress:r},"Start import")),onClose:n},i)}function rA(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=t,[,l]=_(W),[u,d]=wa.useState([]),f=u.some(h=>!h.uploaded)||u.length===0;return wa.createElement(Op,{...t,onSubmit:async()=>{if(!f){let h=await o();i(u.map(y=>y.uploaded?.downloadURL).filter(ue),h)}}},r.length>0?wa.createElement(ml.View,{style:[g.Margin.mediumBottom]},r.map((h,y)=>wa.createElement(ml.View,{key:y,style:[w.directionRow]},wa.createElement(ml.View,{style:[g.Margin.smallRight]},wa.createElement(ml.Text,{style:[l.Body,l.textMid]},`${y+1}.`)),wa.createElement(ml.View,{style:w.flex1},wa.createElement(ml.Text,{style:[l.Body,l.textMid]},h))))):null,wa.createElement(Nb,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:s}))}c();var Ab=b(k());function iA(t){let o=Ab.useRef(),{createSpace:e}=Y2({organization:t.organization});return Ab.useMemo(()=>async()=>{if(o.current)return o.current;if(!e)throw new Error("Cannot import into shared space due to incorrect hook usage");return o.current=await e(!1),o.current},[e,o])}c();var Ho=b(k()),ps=b(q());c();var Sa=b(k()),_u=b(q());function aA(t){let{url:o,setURL:e,placeholder:n="e.g: https://mysite.com/a_file",supportedFormats:r=[],validate:i=vi}=t,[,a]=_(W),s=i(o);return Sa.createElement(Sa.Fragment,null,Sa.createElement(_u.View,null,Sa.createElement(no,{size:"large",placeholder:n,value:o,cleareable:!0,onChangeText:e,feedback:o&&!s?{type:"danger",message:"URL is invalid. It must be a valid absolute URL starting with https:// or http://"}:{type:"none"}})),r.length>1?Sa.createElement(_u.View,{style:[g.Margin.smallTop,w.directionRow,w.alignCenter]},Sa.createElement(_u.View,null,Sa.createElement(v.InfoCircle,{size:A.ICON_S,style:a.info})),Sa.createElement(_u.View,{style:[g.Margin.smallLeft,w.flex1]},Sa.createElement(_u.Text,{style:[a.Caption,a.info]},`Supported formats: ${r.join(", ")}`))):null)}function sA(t){let{getSpace:o,fileIcon:e,fileExtension:n,steps:r=[],startImport:i,limitWarning:a=!1,fileUploadsLimit:s}=t,[,l]=_(W),[u,d]=Ho.useState([]),[p,f]=Ho.useState(""),[m,h]=Ho.useState("files"),y=u.some(O=>!O.uploaded),S=O=>vi(O),C=(y||u.length===0)&&(!p||!S(p));return Ho.createElement(Op,{...t,onSubmit:async()=>{if(!C){let O=await o();i(m==="files"?u.map(E=>E.uploaded?.downloadURL).filter(ue):[p],O)}}},r.length>0?Ho.createElement(ps.View,{style:[g.Margin.mediumBottom]},r.map((O,E)=>Ho.createElement(ps.View,{key:E,style:[w.directionRow]},Ho.createElement(ps.View,{style:[g.Margin.smallRight]},Ho.createElement(ps.Text,{style:[l.Body,l.textMid]},`${E+1}.`)),Ho.createElement(ps.View,{style:w.flex1},Ho.createElement(ps.Text,{style:[l.Body,l.textMid]},O))))):null,Ho.createElement(ps.View,{style:[w.flex1,w.directionRow,w.alignCenter]},Ho.createElement(xc,null,Ho.createElement(xc.Tab,{active:m==="files",onPress:()=>h("files")},"Files"),Ho.createElement(xc.Tab,{active:m==="url",onPress:()=>h("url")},"URL"))),Ho.createElement(ps.View,{style:[w.directionColumn,g.Margin.smallTop]},m==="files"?Ho.createElement(Nb,{getSpace:o,files:u,setFiles:d,fileIcon:e,fileExtension:n,limitWarning:a,fileUploadsLimit:s}):null,m==="url"?Ho.createElement(aA,{url:p,validate:S,setURL:f,placeholder:"https://myapi.io/swagger.yaml",supportedFormats:["JSON","YAML"]}):null))}c();var br=b(k()),_p=b(q());function cA(t){let{title:o="Import a Website",subtitle:e="Enter a link to a web page below to import it into your space.",getSpace:n,startImport:r}=t,[i,a]=br.useState(""),[,s]=_(W),l=i?vi(i):!1,u=async()=>{if(l){let d=await n();r([i],d)}};return br.createElement(Op,{...t,title:o,subtitle:e,onSubmit:u},br.createElement(_p.View,{style:[g.Margin.smallBottom]},br.createElement(Jr,{label:"URL",labelDescription:"We\u2019ll crawl your site and pull in as much of your content as possible.",placeholder:"https://docs.mycompany.com",value:i,onChangeText:a,onSubmit:u,feedback:i?{type:l?"success":"danger",message:l?"":"URL is not valid"}:void 0})),br.createElement(_p.View,{style:g.Margin.mediumBottom},br.createElement(_p.Text,{style:[s.Caption,s.textMuted]},"GitBook has limits for imported content,"," ",br.createElement(qa,{url:"https://docs.gitbook.com/features/import#limits"},"read more here."))),i&&l?br.createElement(br.Suspense,{fallback:null},br.createElement(NG,{url:i})):null)}function NG(t){let{url:o}=t,[{data:e}]=_i([bo("getEmbedByUrl",{},{query:{url:o}})],{throwOnError:!1});return e?br.createElement(_p.View,{style:[g.Margin.mediumBottom]},br.createElement(Ua,{title:e.title,details:e.site,icon:mt(Wa,{source:{uri:e.icon||void 0}}),onPress:()=>{Ts(o)}})):null}function lA(t){return Ou(t.target)?ms.createElement(DG,{...t,target:t.target}):ms.createElement(AG,{...t,target:t.target})}function AG(t){let o=ms.useCallback(async()=>"id"in t.target.space?t.target.space:m_(await p_({operationId:"getSpaceById",params:{spaceId:t.target.space.key}})).data,[t.target.space]);return ms.createElement(uA,{...t,getSpace:o})}function DG(t){let o=iA(t.target);return o?ms.createElement(uA,{...t,getSpace:o}):null}function uA(t){let{sourceInfo:o,startImport:e,target:n,setSource:r,getSpace:i,onBack:a}=t,{source:s}=o??{};if(o===void 0||s===void 0)return null;switch(s){case"website":case"github-wiki":return ms.createElement(cA,{target:n,title:o.title,subtitle:o.subtitle,getSpace:i,startImport:e,onClose:()=>{r(null)}});case"docx":case"markdown":case"html":case"zip":case"dropbox-paper":case"google-docs":case"confluence":case"quip":case"notion":{let l=s==="zip"||s==="confluence"||s==="notion";return ms.createElement(rA,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,limitWarning:l})}case"open-api":return ms.createElement(sA,{target:n,getSpace:i,title:o.title,subtitle:o.subtitle,steps:o.steps,fileIcon:o.fileIcon,fileExtension:o.fileExtension,onClose:a,startImport:e,fileUploadsLimit:1,limitWarning:!0});default:Ce(s)}}c();var De=b(k()),wr=b(q());c();var Kk="https://app.gitbook.com/public/app/assets/confluence-XZRVQN7T.png";var Xk="https://app.gitbook.com/public/app/assets/dropbox-paper-F627BIKK.png";var Uk="https://app.gitbook.com/public/app/assets/google-docs-T6C75XLR.png";var Yk="https://app.gitbook.com/public/app/assets/openapi-H4Y5H3P5.png";var jk="https://app.gitbook.com/public/app/assets/quip-SHLUXOMG.png";function dA(){let[t]=_(),[,o]=_(W),e=Mo(v.FileCode,{style:o.primary}),n=Mo(v.FileText,{style:{color:$.scarlet.light}}),r=Mo(v.FileWord,{style:{color:$.primary.light}}),i=Mo(v.FileCode,{style:{color:$.violet.light}}),a=Mo(v.FileZIP,{style:{color:$.orange.light}}),s=Mo(v.GitHub,{style:{color:t.colors.text.main}}),l=Mo(v.Notion,{style:{color:t.colors.text.main}}),u=Mo(Wa,{source:{uri:Kk}}),d=Mo(Wa,{source:{uri:jk}}),p=Mo(Wa,{source:{uri:Xk}}),f=Mo(Wa,{source:{uri:Uk}}),m=Mo(Wa,{source:{uri:Yk}});return[{name:"Website",title:"Import a Website",subtitle:"Enter a link to a web page below to import it into your space.",source:"website",icon:e,type:"application"},{name:"Markdown",title:"Import a Markdown file",source:"markdown",icon:n,subtitle:"Drag and drop your .md file below to start the import.",fileIcon:v.FileText,fileExtension:".md",type:"file"},{name:"MS Word",title:"Import a Word document",source:"docx",icon:r,subtitle:"Drag and drop your .docx file below to start the import.",fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"HTML",title:"Import a HTML file",source:"html",subtitle:"Drag and drop your .html file below to start the import.",icon:i,fileIcon:v.FileCode,fileExtension:".html",type:"file"},{name:"ZIP",title:"Import a ZIP file",source:"zip",subtitle:"Drag and drop your .zip file below to start the import.",icon:a,fileIcon:v.FileZIP,fileExtension:".zip",type:"file"},{name:"Confluence",title:"Import from Confluence",icon:u,source:"confluence",type:"application",subtitle:"Export your space as ZIP to bring your content from Confluence.",fileExtension:".zip",fileIcon:v.FileZIP,steps:[De.createElement(De.Fragment,null,"Go to ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Space Settings")," for the space you're looking to export and select the"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Content tools")," section."),De.createElement(De.Fragment,null,"Click on the ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Export")," tab, and select"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"HTML"),", then hit"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Next, and Export"),"."),De.createElement(De.Fragment,null,"Choose ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Normal Export")," unless you want to choose specific pages to export.")]},{name:"Notion",title:"Import from Notion",icon:l,source:"notion",type:"application",subtitle:"Export your workspace as Markdown to bring your content from Notion.",steps:[De.createElement(De.Fragment,null,"Go to the Workspace you're looking to export and select the"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"\u2026")," button in the top right."),De.createElement(De.Fragment,null,"Choose ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Export All as Markdown"))],fileIcon:v.FileText,fileExtension:".md"},{name:"GitHub Wiki",title:"Import from GitHub Wiki",subtitle:"Enter a link to a GitHub Wiki below to import it into your space.",icon:s,source:"github-wiki",type:"application"},{name:"Quip",title:"Import from Quip",icon:d,source:"quip",fileIcon:v.FileText,fileExtension:".md",type:"application"},{name:"Dropbox Paper",title:"Import from Dropbox Paper",icon:p,source:"dropbox-paper",steps:[De.createElement(De.Fragment,null,`Click "\u2026" (ellipsis) in the Paper doc you're viewing.`),De.createElement(De.Fragment,null,"Click ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Export"),"."),De.createElement(De.Fragment,null,"Select ",De.createElement(wr.Text,{style:[o.Bold,o.text]},".docx")," and click"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Download"),"."),De.createElement(De.Fragment,null,"Drag your downloaded files to the box below to import.")],fileIcon:v.FileWord,fileExtension:".docx",type:"application"},{name:"Google docs",title:"Import from Google Docs",icon:f,source:"google-docs",type:"application",subtitle:"Export your documents as .docx or webpage to bring your content from Google Docs.",steps:[De.createElement(De.Fragment,null,"Click on ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"File ",">"," Download"),"."),De.createElement(De.Fragment,null,"Choose between ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Microsoft Word")," or"," ",De.createElement(wr.Text,{style:[o.Bold,o.text]},"Web Page"),".")],fileIcon:v.FileWord,fileExtension:".docx"},{name:"OpenAPI",title:"Import from OpenAPI",icon:m,source:"open-api",type:"application",subtitle:"Provide an OpenAPI specification file or URL to import your API.",fileIcon:v.FileText,fileExtension:".yaml or .json",fileUploadsLimit:1}]}function pA({target:t,onStartImport:o,onComplete:e,onBack:n}){let[r,i]=Db.useState(null),a=dA(),s=ho(),l=f=>{f&&(Ou(t)?re(Ag(t.organization,{type:"templates_pick_import",source:f})):re(Nt(t.space,{type:"edit_pick_import",source:f}))),i(f)},u=async(f,m)=>{if(!r)return;let h=await _c(),y={url:f,source:r};if(Ou(t)||!t.page&&!t.changeRequest)return h.spaces.importContent(m.id,y);if(t.page&&t.changeRequest)return h.spaces.importContentInChangeRequestPageById(m.id,t.changeRequest,t.page,y);if(t.page)return h.spaces.importContentInPageById(m.id,t.page,y);if(t.changeRequest)return h.spaces.importContentInChangeRequest(m.id,t.changeRequest,y)},d=async(f,m)=>{if(r){re(r1(m,void 0,{type:"edit_import",source:r})),o?o(m):n();try{(await s.notifyProgress(Promise.all(f.map(async S=>{let C=await u(S,m);return C?C.data:void 0})),{title:"Importing docs",details:"We are importing your docs, this might take a while."})).some(S=>S&&S.totalResources!==S.importedResources)?s.notify({kind:"warning",title:"Incomplete import",timeout:0,icon:v.Alert.CSS,details:"Some of your docs were not imported due to file limits, try splitting them into several imports."}):(s.notify({icon:v.CheckCircle.CSS,kind:"success",title:"Imported docs",details:"Docs have been successfully imported. Enjoy!"}),e&&e(m))}catch(h){throw s.notify({kind:"danger",title:"Error while importing docs",details:Ta(h,"Please try again or contact support if the problem persists."),icon:v.Alert.CSS}),h}}},p=a.find(({source:f})=>f===r);return{modals:Db.createElement(lA,{sourceInfo:p,startImport:d,target:t,setSource:i,onBack:n}),source:r,sources:a,onSelectSource:l}}function O6(t){let{target:o,onStartImport:e,onComplete:n,onClose:r}=t,{modals:i,source:a,sources:s,onSelectSource:l}=pA({onStartImport:d=>{e?e(d):r()},onComplete:n,onBack:()=>l(null),target:o}),[{result:u}]=fh([Ou(o)?null:ea("key"in o.space?o.space.key:o.space.id)]);return Rp.createElement(Rp.Fragment,null,a?i:u?Rp.createElement(Z2,{space:u,sources:s,pickSource:l,onClose:r}):Rp.createElement($2,{sources:s,pickSource:l,onClose:r}))}c();var mA=b(k());var qG=5,fA=Lt({key:"recentSearches",default:[],effects:[Ir.recoilEffect("@recoil/recentSearches",[])]});function gA(){return tr(fA)}function hA(t){let o=Xr(fA);mA.useEffect(()=>{if(!t)return;let e=setTimeout(()=>{o(n=>n.includes(t)?n:[t,...n.slice(0,qG-1)])},3e3);return()=>clearTimeout(e)},[t])}c();var yA=b(k());function vA(t,o){let{space:e,organization:n}=o,r=ph();yA.useEffect(()=>{if(!t)return;let i=setTimeout(()=>{let a={type:r?"public_content_search_type":"search_type",query:t};e?re(Nt(e,a)):n?re(Ag(n,a)):re(a)},700);return()=>{clearTimeout(i)}},[t])}c();var Me=b(k());c();var wn=JSON.parse('{"loadingDelayedText":"loadingDelayedText_WVBF7","loadingDelayedTextVisible":"loadingDelayedTextVisible_y5onq","fullResponse":"fullResponse_adSl0","prompts":"prompts_Th3zf","answerWrapper":"answerWrapper_Uizn-","queryHeading":"queryHeading_kpHvY","prompt":"prompt_F-9A-","promptText":"promptText_G-HnJ","icon":"icon_281MC","question":"question_hc8Vl","actions":"actions_FNzrP","relatedQueries":"relatedQueries_nIpkZ","relatedQueriesHeading":"relatedQueriesHeading_5XnJH","blankSlateNoAiAnswer":"blankSlateNoAiAnswer_rz6wQ","noAiAnswerTitle":"noAiAnswerTitle_VCtzf","noAiAnswerDescription":"noAiAnswerDescription_5edrz","buttons":"buttons_Q48Sx"}');c();var pi=b(k());c();var fl=b(k());function bA(t){let{answer:o,singleSpace:e,organization:n}=t,{navigate:r}=ye(),i=be(),a=fl.useMemo(()=>GG(i,o,e,n),[i,o,e,n]),s=fl.useCallback(d=>{switch(re({type:"ai_search_open_source"}),d.type){case"space":r({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:"",query:void 0}});break;case"page":r({screen:{type:"space",space:d.space.key,organization:d.space.organization,page:d.path,query:void 0}});break;case"capture":r({screen:{type:"capture",capture:d.capture.id,organization:d.organization,query:void 0}});break;case"entity":d.targetURL&&ch(d.targetURL);break;default:Ce(d)}},[r]),l=fl.useCallback(d=>{switch(d.type){case"space":return{icon:ju(mt(No,{code:JO(d.space)})),title:d.space.title||Ba,action:"Go to space"};case"page":return{icon:v.Page.CSS,title:d.page.title,subtitle:d.ancestors.filter(f=>f.id!==d.page.id).map(f=>f.title).join(" \u203A "),nested:!e,action:"Go to page"};case"capture":let p=D_(d.capture);return{title:d.capture.title||B_(d.capture),icon:p.object==="user"?ju(mt(A_,{userId:p.id})):v.Capture.CSS,action:"Go to capture"};case"entity":return{icon:v.ArrowCurveDownRight.CSS,title:d.title,body:d.body,action:"Open"};default:Ce(d)}},[e]),u=fl.useCallback(d=>{if(d?.type==="entityType")return{icon:d.integration?ju(mt(F_,{integrationId:d.integration,bordered:!1})):v.Database.CSS,title:d.title}},[]);return fl.createElement(Oc,{data:a,getKey:UG,renderItem:l,renderGroup:u,getGroupKey:YG,groupItem:jG,onOpen:s})}function GG(t,o,e,n){let r=new Map,i=[];N_(o.sources,s=>{switch(s.type){case"entity":let{entityType:l,entityId:u,integration:d}=s;if(!n)return null;let p=KG(u,l,n);if(!p)return null;let f=p.entityType.includes(`${d}:`)?p.entityType.split(`${d}:`)[1]:p.entityType;i.push({type:"entity",id:p.entityId,title:p.properties.title,body:p.properties.description,targetURL:p.properties.url,groups:[{type:"entityType",entityType:p.entityType,title:WP(f),integration:d}]});break;case"capture":let{captureId:m}=s;if(!n)return null;let h=HG(m,n);if(!h)return null;i.push({type:"capture",capture:h,organization:n});break;case"page":let y=XG(s.space,s.page,t);if(!y)return null;let S=Hu(y.revision,y.page.id),C={type:"page",space:y.space,page:y.page,ancestors:S,path:oo(y.revision,y.page.id)};if(e){i.push(C);break}i.some(O=>O.type==="space"&&O.space.key===y.space.key)||i.push({type:"space",space:y.space}),r.set(y.space.key,(r.get(y.space.key)||[]).concat(C));break;default:Ce(s)}});let a=[];for(let s of i)s&&(a.push(s),s.type==="space"&&(r.get(s.space.key)||[]).forEach(u=>{a.push(u)}));return a}function HG(t,o){return Tw(Il({operationId:"getCapture",params:{organizationId:o,captureId:t}}))?.data}function KG(t,o,e){return Tw(Il({operationId:"getEntity",params:{organizationId:e,entityType:o,entityId:t}}))?.data}function XG(t,o,e){let n=mh([ea(t)])[0]?.result;if(!n)return;let r=Ur(e.store.getRevision(t,n.revision));if(!r)return;let i=r.pages[o];if(!(!i||i.type!=="document"))return{space:n,page:i,revision:r}}function UG(t){switch(t.type){case"space":return`space:${t.space.key}`;case"page":return`page:${t.space.key}/${t.page.id}`;case"capture":return`capture:${t.capture.id}`;case"entity":return`entity:${t.groups[0].entityType}:${t.id}`;default:Ce(t)}}function YG(t){return t&&t.type==="entityType"?t.entityType:""}function jG(t){if(t.type==="entity")return t.groups[0]}c();var wA=JSON.parse('{"aiAnswerFooter":"aiAnswerFooter_pxFSA","sourcesHeadingButton":"sourcesHeadingButton_YdnnI"}');function SA(t){let{answer:o,singleSpace:e,organization:n}=t,[r,i]=pi.useState(!1),a=se();return pi.createElement(U,{style:[D.flex.column]},pi.createElement(U,{style:[D.flex.row]},pi.createElement(U,{style:[D.flex.flex1]},pi.createElement(bt,{size:"medium",trailingIcon:r?v.ChevronDown.CSS:v.ChevronRight.CSS,onPress:()=>{i(!r)},style:[wA.sourcesHeadingButton,_l.uiSmall,_l.colorMuted,D.backgroundColor.transparent,D.padding.none],preventFocusOnPress:!0,label:a("search_answer_sources",`${o.sources.length}`)}))),r?pi.createElement(U,{style:D.margin.mediumTop},pi.createElement(pi.Suspense,{fallback:pi.createElement(Lo,{size:"medium"})},pi.createElement(bA,{answer:o,singleSpace:e,organization:n}))):null)}c();var fs=b(k());function CA(t){let{query:o,answer:e,size:n="small"}=t,[r,i]=fs.useState(!1),a=ho(),s=Kg(),l=se(),u=()=>{s.writeTextAndNotify(e.text)},d=()=>{re({type:"ai_search_upvote_answer",query:o,answer:e.text}),i(!0),a.notify({icon:v.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})},p=()=>{re({type:"ai_search_downvote_answer",query:o,answer:e.text}),i(!0),a.notify({icon:v.ThumbsUp.CSS,title:l("search_answer_feedback_title"),details:l("search_answer_feedback_details")})};return fs.createElement(U,{style:[D.flex.row,D.gap.small]},fs.createElement(V,{size:n,title:l("search_answer_copy"),icon:v.Copy,onPress:u}),r?null:fs.createElement(fs.Fragment,null,fs.createElement(V,{size:n,icon:v.ThumbsUp,title:l("search_answer_feedback_upvote"),onPress:d,style:g.Margin.xsmallLeft}),fs.createElement(V,{size:n,icon:v.ThumbsDown,title:l("search_answer_feedback_downvote"),onPress:p,style:g.Margin.xsmallLeft})))}c();var Zk=b(k());c();var $k=JSON.parse('{"aiSearchSpinner":"aiSearchSpinner_cTH2Q","aiSearchSpinnerAnim":"aiSearchSpinnerAnim_75OX-","aiSearchSpinnerIcon":"aiSearchSpinnerIcon_MOqIL"}');function kA(t){let{size:o=A.ICON_L}=t;return Zk.createElement(U,{style:$k.aiSearchSpinner,inlineStyle:{width:o,height:o}},Zk.createElement(v.AILens.CSS,{style:$k.aiSearchSpinnerIcon}))}function xA(t){let{query:o,target:e}=t,n=Me.useCallback((r,i,a)=>{re(e.space?Nt(e.space,{type:"ai_search_crash",query:o.query}):{type:"ai_search_crash",query:o.query})},[o]);return Me.createElement(og,{fallback:()=>Me.createElement(QG,null),onError:n},Me.createElement(Me.Suspense,{fallback:Me.createElement(ZG,null)},Me.createElement($G,{...t})))}function $G(t){let{target:o,query:e,onAnswerLoaded:n,onSubmitQuery:r}=t,[{data:{answer:i}}]=_i([o.space?bo("askQueryInSpace",{spaceId:o.space.key},{query:{},body:{query:e.query}}):bo("askInOrganization",{organizationId:o.organization},{query:{},body:{query:e.query}})]);if(Me.useEffect(()=>{re(o.space?Nt(o.space,{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!i,hasFollowupQuestions:!!i&&i.followupQuestions.length>0}):{type:"ai_search_view_answer",query:e.query,queriesInMemory:e.previousQueries.length,hasAnswer:!!i,hasFollowupQuestions:!!i&&i.followupQuestions.length>0})},[e,i,o.space]),Me.useEffect(()=>{i&&n?.()},[i,n]),!i)return Me.createElement(JG,{organizationKey:o.organization});let a=s=>{re(o.space?Nt(o.space,{type:"ai_search_pick_followup",query:e.query,followup:s,previousQueriesCount:e.previousQueries.length}):{type:"ai_search_pick_followup",query:e.query,followup:s,previousQueriesCount:e.previousQueries.length}),r(s)};return Me.createElement(U,{style:[D.flex.column,wn.fullResponse]},Me.createElement(At,{style:[wn.queryHeading,D.text.capitalizeFirstLetter,_l.uiHeading]},e.query),Me.createElement(U,{style:wn.answerWrapper},Me.createElement(U,{style:[_l.uiBase,_l.colorMuted]},Me.createElement(td,{markdown:i.text}))),Me.createElement(U,{style:wn.actions},Me.createElement(CA,{query:e.query,answer:i,size:"medium"})),Me.createElement(SA,{answer:i,singleSpace:!!o.space,organization:o.organization}),i.followupQuestions.length>0?Me.createElement(U,{style:wn.relatedQueries},Me.createElement(At,{style:wn.relatedQueriesHeading},"Related queries"),Me.createElement(U,{style:wn.prompts},i.followupQuestions.map(s=>Me.createElement(U,{key:s,style:wn.prompt,as:"button",type:"button",onClick:l=>{l.preventDefault(),a(s)}},Me.createElement(v.SearchOrAsk.CSS,{style:wn.icon}),Me.createElement(At,{style:wn.promptText},s))))):null)}function ZG(t){let[o,e]=Me.useState(!1),n=se();return Me.useEffect(()=>{let r=setTimeout(()=>{e(!0)},3e3);return()=>{clearTimeout(r)}},[]),Me.createElement(Ps,{size:"small",icon:kA,title:n("search_answer_loading")},Me.createElement(At,{style:[wn.loadingDelayedText,o&&wn.loadingDelayedTextVisible]},n("search_answer_loading_wait")))}function JG(t){let{organizationKey:o}=t,e=se(),n=gh("UI_REVAMP"),{navigate:r}=ye();return Me.createElement(U,{style:wn.blankSlateNoAiAnswer},Me.createElement(At,{style:wn.noAiAnswerTitle},e("search_answer_none_title")),Me.createElement(At,{style:wn.noAiAnswerDescription},e(n?"search_answer_none_details_beta":"search_answer_none_details")),o&&n?Me.createElement(U,{style:wn.buttons},Me.createElement(Qw,{kind:"primary",leadingIcon:v.Integrations.CSS,label:"Connect integrations",onPress:()=>{r({screen:{type:"home",organization:o,query:void 0}})}}),Me.createElement(Qw,{kind:"secondary",leadingIcon:v.VSCode.CSS,label:"Record with VSCode",onPress:()=>{window.open("vscode:extension/GitBook.gitbook-vscode","_blank","noopener, noreferer")}})):null)}function QG(t){let o=se();return Me.createElement(Ps,{size:"small",icon:v.Alert,title:o("search_answer_error_title")},o("search_answer_error_details"))}c();var OA=b(k());function Bb(t){let[{data:o}]=_i([t===null||t.documents?.length===0?null:t.space?bo("getRecommendedQuestionsInSpace",{spaceId:t.space.key},{query:{}}):bo("getRecommendedQuestions",{},{query:{},body:{documents:t.documents}})],{suspend:!1,throwOnError:!1});return OA.useMemo(()=>o?o.questions.map(e=>({type:"recommended-question",question:e})):[],[o])}c();var eH=b(k());var tH=Lt({key:"recentAISearches",default:[],effects:[Ir.recoilEffect("@recoil/recentAISearches",[])]});function Wb(){return tr(tH)}c();var sc=b(k());function _A(t){let{allowEnterToOpen:o,target:e,onSubmitAIQuery:n}=t,r=se(),i=Wb(),a=Bb(e),s=sc.useCallback(p=>{switch(p.type){case"recent-search":return{icon:v.Search.CSS,title:p.query,action:r("search_ask")};case"recommended-question":return{icon:v.AILens.CSS,title:p.question,action:r("search_ask")};default:Ce(p)}},[r]),l=sc.useCallback(p=>{switch(p){case"recent-search":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),u=(p,f)=>{switch(p.type){case"recent-search":{n(p.query),re({type:"ai_search_pick_suggestion_recent_search",suggestionIndex:f});break}case"recommended-question":re({type:"ai_search_pick_suggestion_question"}),n(p.question);break;default:Ce(p)}},d=sc.useMemo(()=>[...i.map(f=>({type:"recent-search",query:f})),...a],[i,a]);return d.length===0?sc.createElement(Ps,null,r("search_blankslate_ai")):sc.createElement(U,{style:[D.flex.flex1,D.flex.column]},sc.createElement(Oc,{data:d,getKey:oH,renderItem:s,renderGroup:l,groupItem:nH,getGroupKey:rH,onOpen:u,style:[D.padding.mediumHorizontal,D.padding.mediumVertical],allowEnterToOpen:o}))}function oH(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recommended-question":return`recommended-question:${t.question}`;default:Ce(t)}}function nH(t){return t.type}function rH(t){return t}c();var RA=b(k());var iH=10,aH=Lt({key:"aiSearchQuery",default:{query:"",previousQueries:[]},effects:[Ir.recoilEffect("@recoil/aiSearchQuery",{query:"",previousQueries:[]})]});function PA(){let[t,o]=or(aH),e=RA.useCallback(n=>{o(r=>r?{query:n,previousQueries:[...r.previousQueries.filter(i=>i!==n&&i!==r.query),...r.query?[r.query]:[]].slice(-iH)}:{query:n,previousQueries:[]})},[o]);return[t,e]}c();var Hf=b(k());function IA(t,o,e){let n=Hf.useCallback(a=>{switch(a.type){case"ask-gitbook":{o(a.query,"click_ask_gitbook");break}default:Ce(a.type)}},[o]),r=Hf.useCallback(a=>{switch(a.type){case"ask-gitbook":return{title:a.query,icon:v.SearchOrAsk.CSS,action:"Ask GitBook",standout:!0};default:Ce(a.type)}},[]);return{suggestion:Hf.useMemo(()=>{let a=t.trim();return!e||!lH(t)?null:{type:"ask-gitbook",key:`ask-gitbook:${a}`,query:a}},[t,e]),onOpenSuggestion:n,onRenderSuggestion:r}}var sH=["who","what","where","when","why","how","explain","is","are","was","were","do","does","did","which","whom","whose","can","have","give","tell","show","find"],cH=new Set(sH);function lH(t){if(t.length>25||t.includes("?")||t.includes(" "))return!0;let o=t.toLowerCase().trim().split(/\s+/);if(o.length===0)return!1;for(let e of o)if(cH.has(e))return!0;return!1}c();var co=b(k()),EA=b(q());var uH=Ze("app:crash");function Kf(t){let{children:o}=t,e=co.useCallback((n,r,i)=>{uH.emergency(`An error occured during rendering:

`,n,`

The error is located at:
`,r),re({type:"crash",crashType:Jk(n),sentryEvent:i})},[]);return co.createElement(og,{fallback:n=>co.createElement(dH,{...n}),onError:e,beforeCapture:fH},o)}function dH(t){let{eventId:o,error:e}=t,[,n]=_(gH),r=()=>{Ex({eventId:o||void 0})},i=()=>{window.location.reload()};co.useEffect(()=>{document.querySelector(".gitbook-splashscreen")?.remove()},[]);let a=()=>{switch(Jk(e)){case"network-crash":return co.createElement(mH,{onReload:i,...t});case"crash":default:return co.createElement(pH,{onShareFeedback:r,onReload:i,...t})}};return co.createElement(EA.View,{style:[n.background]},a())}function pH(t){let o=se(),{onReload:e,onShareFeedback:n}=t;return co.createElement(am,{title:o("something_wrong"),action:co.createElement(co.Fragment,null,co.createElement(V,{kind:"primary",size:"medium",onPress:e,style:g.Margin.smallRight},o("reload")),co.createElement(V,{kind:"secondary",size:"medium",onPress:n},o("let_us_know")))},o("we_have_been_notified"))}function mH(t){let{onReload:o}=t,e=se(),n=()=>{window.open("https://docs.gitbook.com/resources/firewall-safelist","_blank")};return co.createElement(am,{title:e("connection_lost"),icon:v.CloudOff,action:co.createElement(co.Fragment,null,co.createElement(V,{kind:"primary",size:"medium",onPress:o,style:g.Margin.smallRight},e("reload")),co.createElement(V,{size:"medium",icon:v.Link,onPress:n},e("network_troubleshooting")))},e("device_offline"))}function fH(t,o){switch(Jk(o)){case"network-crash":t.setTag("error_category","network-crash");break;case"crash":default:t.setTag("error_category","react-crash")}}function Jk(t){return t.name==="FirebaseError"&&t.code==="unavailable"?"network-crash":"crash"}var gH=G.create({background:t=>({backgroundColor:t.colors.background.main,minHeight:"100vh"})});c();var fi=b(k());c();var Qk=b(k());function zb(t){let{children:o,ssrRequestPath:e,ssrRouterContext:n}=t;return n?Qk.createElement(WI,{location:e,context:n},o):Qk.createElement(hS,null,o)}c();var Fb=b(k());function TA(t="https://policies.gitbook.com/privacy/cookies",o=!1){let e=ho(),n=se();Fb.useEffect(()=>{if(!o)return;let r=!1;if(Bg()!==null)return;let i=e.notify({title:n("cookies"),details:n("cookie_prompt",Fb.createElement(qa,{url:t},n("cookie_policy"))),timeout:0,icon:v.Cookies.CSS,actions:[{label:n("reject_all"),onPress:()=>{r=!0,kw(!1),i()}}],onClose:()=>{r||kw(!0)}})},[])}c();var le=b(k()),gs=b(q());c();var MA=JSON.parse('{"withStickyHeader":"withStickyHeader_HQiM-"}');c();var Sr=b(k()),Ru=b(q());var{TOC_DESKTOP_WIDTH:hH}=en,yH=Z.createResponsiveComponent(Ru.TouchableOpacity),vH=H.createInteractiveComponent(yH),ex=hH-g.large-g.large;function Vb(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:i,desktopStyle:a}=t,[,s]=_(W),{getNavigationLinkProps:l}=ye(),d={color:Ka(n)==="light"?$.lightModeText.base:$.darkModeText.base},p=(e?e?.publishedTitle||e?.title:o.publishedTitle||o.title)||Ba,f=p.length>14,m=f?2:1,h=ji(o);return Sr.createElement(vH,{style:[w.directionRow,w.alignCenter],mobileStyle:i,desktopStyle:a,...l({screen:{space:o.key,page:""}}),testID:"public.headerHomeLink",accessibilityLabel:p},r?Sr.createElement(Z.View,{style:[w.flex1,w.directionRow,w.alignCenter,Xf.headerDesktop],mobileStyle:Xf.logoMobile,desktopStyle:Xf.logoDesktop},Sr.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},Sr.createElement(jo,{source:{uri:na(r,{height:40,fit:"contain"})},loading:"priority",style:{maxHeight:40,maxWidth:ex,width:"auto",height:"auto"}})),Sr.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},Sr.createElement(jo,{source:{uri:na(r,{height:30,fit:"contain"})},style:{maxHeight:30,maxWidth:ex,width:"auto",height:"auto"}}))):Sr.createElement(Ru.View,{style:[Xf.headerDesktop,w.flex1,w.directionRow,w.justifyContentStart,w.alignCenter]},Sr.createElement(Ru.View,null,Sr.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},Sr.createElement(Mw,{content:e||o,renderFor:"public-content",size:A.BUTTON_L,style:[g.Margin.mediumRight]})),Sr.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},Sr.createElement(Mw,{content:e||o,renderFor:"public-content",size:A.ICON_XL,style:[g.Margin.mediumRight]}))),Sr.createElement(Z.Text,{style:Xf.textOverflow,mobileStyle:[s.Heading3],desktopStyle:[f?s.Heading3:s.Heading2]},Sr.createElement(H.Text.Child,{style:[d],numberOfLines:m,ellipsizeMode:"tail",inactiveStyle:s.text,activeStyle:h==="bold"?s.textStandout:s.primary},p))))}var Xf=Ru.StyleSheet.create({textOverflow:{overflow:"hidden"},logoMobile:{height:30},logoDesktop:{height:40},headerDesktop:{maxWidth:ex}});c();var Pu=b(k()),Uf=b(q());c();var mi=b(k()),gl=b(q());var bH=Z.createResponsiveComponent(H.TouchableOpacity),wH=H.createInteractiveComponent(Z.View);function tx(t){return`hsla(${g1(t.colors.text.primary).h}, 60%, 70%, 0.1)`}var LA=mi.forwardRef(function(o,e){let{isLast:n,leftIcon:r,icon:i,rightIcon:a,kind:s="primary",children:l,expanded:u=!1,onChevronPress:d,active:p=!1,onPress:f,textStyle:m,href:h}=o,y=H.useInteractiveState(),[S,C]=_(SH),[,x]=_(W),O=s==="primary"?x.textMid:x.textMuted,E=p?x.primary:O,P=f?bH:wH,L=u?v.ChevronDown:v.ChevronRight;return mi.createElement(P,{ref:e,...y.events,style:[C.tocMenuItem,g.Padding.smallHorizontal,g.Margin.smallRight,n?null:g.Margin.xsmallBottom,p?{backgroundColor:tx(S)}:null],hoverStyle:f&&!p?C.tocMenuItemHovered:null,mobileStyle:C.tocMenuItemMobile,desktopStyle:C.tocMenuItemDesktop,onPress:f,href:h&&f?h:void 0},r?mi.createElement(gl.View,{style:[g.Margin.mediumRight]},mi.createElement(r,{size:A.ICON_M,style:[E,m]})):null,i?mi.createElement(gl.View,{style:[g.Margin.mediumRight]},mi.createElement(i,{size:A.ICON_M,style:[E,m]})):null,mi.createElement(gl.Text,{style:[w.flex1,g.Padding.xsmallVertical,s==="group"?x.GroupTitle:x.Label,E,m,p?x.Bold:null]},l),d?mi.createElement(gl.TouchableOpacity,{style:[w.directionRow,w.alignCenter],onPress:d},mi.createElement(L,{size:A.ICON_S,style:E})):null,a?mi.createElement(gl.View,{style:C.tocMenuItemRightIcon},mi.createElement(a,{size:A.ICON_M,style:x.textMuted})):null)}),SH=G.create({tocMenuItem:t=>({flexDirection:"row",alignItems:"center",borderColor:"transparent",borderWidth:1,borderRadius:t.radiuses.medium,minHeight:A.XS}),tocMenuItemMobile:{borderRightWidth:1},tocMenuItemDesktop:{borderRightWidth:0},tocMenuItemHovered:t=>({backgroundColor:t.colors.background.standout}),tocMenuItemRightIcon:{marginLeft:g.small,marginRight:(A.S-A.ICON_M)/2}});var ox=150,CH=200,kH=150;function qb(t){let[,o]=_(NA);return Pu.createElement(Z.View,{style:o.wrapper,mobileStyle:[o.wrapperMobile,g.Margin.smallVertical,g.Margin.smallHorizontal],desktopStyle:[o.wrapperDesktop,g.Margin.smallVertical,g.Margin.xsmallHorizontal]},Pu.createElement(Uf.ScrollView,null,t.children))}function Gb(t){let{title:o,kind:e="default",active:n=!1,onPress:r,isLast:i}=t,[a,s]=_(NA),[,l]=_(W);return Pu.createElement(H.TouchableOpacity,{hoverStyle:s.menuItemHovered,style:[s.menuItem,g.Padding.xsmallVertical,g.Padding.smallHorizontal,i?null:g.Margin.xsmallBottom,n?{backgroundColor:tx(a)}:null],onPress:r},Pu.createElement(Uf.View,{style:[w.directionRow,w.alignCenter,w.justifySpaceBetween]},Pu.createElement(H.Text.Child,{hoverStyle:n?null:l.textStandout,style:[l.Label,e==="link"?l.SemiBold:null,...n?[l.primary,l.Bold]:[l.text]],numberOfLines:2,ellipsizeMode:"tail"},o),Pu.createElement(Uf.View,{style:[g.Margin.mediumLeft]},t.rightElement)))}var NA=G.create({wrapper:t=>({backgroundColor:t.colors.background.main}),wrapperDesktop:{minWidth:ox,maxWidth:CH,maxHeight:kH},wrapperMobile:{width:"auto",maxWidth:"100%",maxHeight:"100%"},menuItem:t=>({borderRadius:t.radiuses.large}),menuItemHovered:t=>({backgroundColor:t.colors.background.muted})});c();var Sn=b(k()),Iu=b(q());function Pp(t){let{backgroundColor:o,currentPage:e,collection:n,variants:r,currentVariant:i,revision:a}=t,{getNavigationLinkProps:s}=ye(),l=se(),u=Sn.useRef(null),[,d]=_(W),p=Sn.useMemo(()=>e?oo(a,e.id):"",[e]);return Sn.createElement(wc,{ref:u,wrapper:xi,closeOnClick:!0,closeOnOutsideClick:!0,anchor:({ref:f,toggle:m,opened:h})=>{let y=h?v.ChevronUp:v.ChevronDown;return Sn.createElement(V,{ref:f,size:"medium",rightIcon:y,kind:Ka(o||$.WHITE)?"default_bold":"default",alignItems:"start",onPress:m,style:[g.Padding.noneHorizontal]},Sn.createElement(Iu.View,{style:[AA.variantsPicker]},Sn.createElement(Iu.Text,{numberOfLines:1,ellipsizeMode:"tail"},i.publishedTitle||i.title||Ba)))}},Sn.createElement(Mn,{kind:"menu",preferredAlignment:"start"},Sn.createElement(Sn.Suspense,{fallback:Sn.createElement(Lo,{size:"small"})},Sn.createElement(qb,null,r.map((f,m,h)=>Sn.createElement(Gb,{key:f.key,title:f.title,active:f.key===i.key,isLast:m===h.length-1,rightElement:f.key===n.primarySpace?Sn.createElement(Iu.Text,{style:[d.textMuted,d.Uppercase,AA.mainLabel]},l("main")):null,...s({screen:{space:f.key,page:p}},()=>{u.current?.close()})}))))))}var AA=Iu.StyleSheet.create({mainLabel:{letterSpacing:1.2},variantsPicker:{maxWidth:ox}});c();var hl=b(k());var xH={color:qp,radius:jx},Ca=hl.createContext([xH,()=>{}]),DA="@gitbook/themeMode";function OH(t,o){let[e,n]=hl.useState(()=>{if(typeof window>"u"||!t.themeModeTogglable)return o;let i=Ir.get(DA);return i!==null?i:o});return{themeMode:e,toggleThemeMode:()=>{n(i=>{let a=i==="light"?"dark":"light";return Ir.set(DA,a),re(o1(t,{type:"public_content_toggle_theme_mode",themeMode:a})),a})}}}function BA(t){let{content:o,isPreview:e,children:n}=t,{color:r,radius:i}=$x(o),{themeMode:a,toggleThemeMode:s}=OH(o,r);hl.useEffect(()=>{window?.document.body.classList.remove("theme-overlay")},[]);let l=e?r:a??r;return ta(u=>{u.setTheme([`${l?`theme-color-${l}`:""}`,`${i?`theme-radius-${i}`:""}`].join(" "))}),hl.createElement(Ca.Provider,{value:[{color:l,radius:i},s]},n)}c();var Hb=b(k());function Cn(t){let[{color:o}]=Hb.useContext(Ca);return Hb.useMemo(()=>uy(t,o),[o,t])}c();var Kb=b(k());var Yf=Kb.forwardRef(function(o,e){let{contentRef:n,style:r,kind:i="default",...a}=o,s=Qe(n);return Kb.createElement(qa,{ref:e,url:s.href,onPress:l=>{l.nativeEvent.metaKey||l.nativeEvent.ctrlKey||(l.preventDefault(),s.open())},kind:i,sameWebTab:!1,style:[go.Body,go.SemiBold,r],numberOfLines:2,ellipsizeMode:"tail",accessibilityLabel:o.title,...a},o.title)});c();var Xb=b(k());function Eu(t){let{content:o,mode:e="switch"}=t,[{color:n},r]=Xb.useContext(Ca),{headerBackgroundColor:i}=Cn(o);return Xb.createElement(vI,{onValueChange:r,value:n==="dark",mode:e,backgroundColor:i})}c();var zA=b(k());c();var WA=JSON.parse('{"publicContainer":"publicContainer_11UZS"}');function Ub(t){let{children:o,style:e}=t;return zA.createElement(U,{style:[WA.publicContainer,e]},o)}c();var cc=b(k()),rx=b(q());c();function nx(t){switch(qh(t)){case"lightest":return{backgroundColor:"rgba(59, 69, 78, 0.1)",textColor:$.lightModeText.base};case"light":return{backgroundColor:"rgba(255, 255, 255, 0.6)",textColor:$.lightModeText.base};case"semiLight":return{backgroundColor:"rgba(255, 255, 255, 0.55)",textColor:$.lightModeText.base};case"medium":return{backgroundColor:"rgba(59, 69, 78, 0.25)",textColor:$.darkModeText.base};case"semiDark":return{backgroundColor:"rgba(59, 69, 78, 0.3)",textColor:$.darkModeText.base};case"dark":return{backgroundColor:"rgba(59, 69, 78, 0.5)",textColor:$.darkModeText.base};case"darkest":default:return{backgroundColor:"rgba(255, 255, 255, 0.2)",textColor:$.darkModeText.base}}}function FA(t){let[,{open:o}]=dh(),e=se();return cc.createElement(V,{icon:v.SearchPublic,onPress:()=>o(),accessibilityLabel:e("search"),...t})}function VA(t){let{contentTheme:o,headerBackgroundColor:e}=t,[,{open:n}]=dh(),r=se(),{textColor:i}=nx(e);return cc.createElement(V,{icon:v.SearchPublic,size:"medium",kind:o==="bold"?"default_bold":"default",alignItems:"start",onPress:()=>n(),style:[g.Padding.noneHorizontal],defaultTextStyle:[{color:i}],accessibilityLabel:r("search")})}function Yb(t){let{headerBackgroundColor:o=$.WHITE,hasAISearch:e=!1}=t,[,{open:n}]=dh(),r=se(),[,i]=_(W),[,a]=_(_H),{backgroundColor:s,textColor:l}=nx(o),u=r(e?"search_placeholder_ask":"search"),d=e?v.SearchOrAsk:v.SearchPublic;return cc.createElement(H.TouchableOpacity,{style:[{backgroundColor:s},a.searchBarButton,w.directionRow,w.justifySpaceBetween,w.alignCenter,g.Padding.mediumLeft,g.Padding.smallRight],activeStyle:a.searchBarButtonActive,accessibilityLabel:u,onPress:()=>n()},cc.createElement(rx.View,{style:[w.directionRow,w.alignCenter]},cc.createElement(d,{size:A.ICON_XS,style:[{color:l},g.Margin.smallRight]}),cc.createElement(H.Text.Child,{style:[i.Label,{color:l}],activeStyle:i.text},u)),cc.createElement(rx.View,null,cc.createElement(In,{shortcut:Ge.SEARCH_OPEN})))}var _H=G.create({searchBarButton:t=>({width:"100%",height:A.BUTTON_L,borderRadius:t.radiuses.large,borderWidth:1,borderColor:"transparent"}),searchBarButtonActive:t=>({borderColor:t.colors.border.mid})});var{PAGE_BODY_DESKTOP_H_PADDING:RH,TOC_DESKTOP_WIDTH:PH,PUBLIC_DESKTOP_HEADER_HEIGHT:IH,PUBLIC_MOBILE_HEADER_HEIGHT:EH}=en,TH=Z.createResponsiveComponent(V),MH=Z.createResponsiveComponent(pe);function GA(t){let{space:o}=t,e=Si(),{headerBackgroundColor:n,headerDisabled:r,headerLinksColor:i,headerLogoURL:a}=Cn(o),s=le.useMemo(()=>({...e,color:Ka(n)}),[n,e]);return le.createElement(Ci,{theme:s},r?le.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},le.createElement(qA,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a})):le.createElement(qA,{...t,headerDisabled:r,headerBackgroundColor:n,headerLinksColor:i,headerLogoURL:a}))}function qA(t){let{space:o,headerDisabled:e,headerBackgroundColor:n,headerLogoURL:r,headerLinksColor:i,revision:a,collection:s,collectionSpaces:l,currentPage:u}=t,[,d]=_(BH[e?"none":ji(o)==="default"?"defaultWithBorder":"default"]),p=um(or(Im),le.useState(!1)),m=zi(u).tableOfContents,h=[yl.searchWrapper,g.Padding.largeLeft,g.Padding.smallRight],[y]=le.useContext(Ca);return le.createElement(le.Fragment,null,le.createElement(MH,{tag:"header",desktopStyle:yl.desktopHeight,mobileStyle:yl.mobileHeight,style:[d.spaceHeader,w.directionRow,w.alignCenter,e?null:{backgroundColor:n}]},le.createElement(Ub,{style:[D.padding.smallHorizontal,D.flex.alignCenter,MA.withStickyHeader]},m?le.createElement(TH,{desktopStyle:"hidden",mobileStyle:"visible",icon:v.Menu,style:g.Margin.smallRight,kind:"grey",rounded:!0,title:p.opened?"Hide Table of Content":"Show Table of Content",onPress:p.toggle}):null,le.createElement(Vb,{space:o,collection:s,headerBackgroundColor:n,headerLogoURL:r,mobileStyle:[yl.autoWidth,g.Padding.noneLeft,g.Padding.mediumRight,w.flexShrink1,w.justifyContentStart,m?null:g.Margin.smallLeft],desktopStyle:[yl.autoWidth,g.Padding.mediumLeft,g.Padding.largeRight,w.justifyContentStart]}),l&&s?.publishingType==="variants"?le.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(Pp,{key:"variants-picker",backgroundColor:n,currentPage:u,collection:s,revision:a,variants:l,currentVariant:o})):null,le.createElement(LH,{space:o,linkColor:i}),o.themeModeTogglable?le.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible"},le.createElement(Eu,{content:o})):null,le.createElement(Ci,{theme:y},le.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[h,yl.searchBarContainer,w.flex1]},le.createElement(Yb,{contentTheme:ji(o),headerBackgroundColor:n,hasAISearch:o.hasAISearch})),le.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden",style:[h]},le.createElement(VA,{contentTheme:ji(o),headerBackgroundColor:n}))))),le.createElement(Z.View,{mobileStyle:"visible",desktopStyle:"hidden"},le.createElement(Ci,{theme:y},le.createElement(DH,{space:o}))))}function LH(t){let{space:o,linkColor:e}=t;return le.createElement(Z.View,{style:[w.directionRow,w.justifyContentEnd,w.alignCenter,w.flex1,g.Padding.mediumLeft],mobileStyle:"hidden"},(o.headerLinks||[]).map((n,r,i)=>n.title?le.createElement(NH,{key:n.title,headerLink:n,linkColor:e}):null))}function NH(t){let{headerLink:o,linkColor:e}=t,n=H.useInteractiveState({hoverDelay:250}),r=H.useInteractiveState(),i=a=>le.createElement(Yf,{ref:a.ref,style:[g.Padding.mediumHorizontal,e?{color:e}:null],title:o.title,contentRef:o.to,...a.events});return o.links&&o.links.length>0?le.createElement(za,{opened:n.hovered||r.hovered,wrapper:xi,anchor:({ref:a})=>i({ref:a,events:n.events})},le.createElement(Mn,{kind:"menu",preferredAlignment:"start"},le.createElement(gs.View,{...r.events},le.createElement(qb,null,o.links.map((a,s,l)=>le.createElement(AH,{key:s,link:a,isLast:s===l.length-1})))))):i({})}function AH(t){let{link:o,isLast:e}=t,n=Qe(o.to);return le.createElement(Gb,{kind:"link",title:o.title,isLast:e,onPress:r=>{r.nativeEvent.metaKey||r.nativeEvent.ctrlKey||(r.preventDefault(),n.open())}})}function DH(t){let{space:o}=t,[e,n]=le.useState(!1),[,{headerLinksMobile:r}]=_(WH),i=e?v.ChevronDown:v.ChevronRight;return!o.headerLinks||o.headerLinks.length===0?null:le.createElement(gs.View,{style:[yl.headerLinksMobile,r,w.justifyContentCenter,g.Padding.medium]},le.createElement(gs.View,{style:[yl.headerLinksMobileButton]},le.createElement(V,{size:"large",rightIcon:i,alignItems:"start",onPress:()=>n(a=>!a),style:[g.Padding.noneHorizontal]},"Links")),e?le.createElement(gs.View,null,o.headerLinks.map((a,s,l)=>a.title?le.createElement(HA,{space:o,link:a,isLast:s===l.length-1}):null)):null)}function HA(t){let{link:o,space:e,isLast:n}=t,[r,i]=le.useState(!1),a="links"in o?o.links||[]:[],s=r?v.ChevronDown:v.ChevronRight,l=ji(e);return le.createElement(gs.View,{style:[w.directionColumn]},le.createElement(gs.View,{style:[w.directionRow,w.alignCenter]},le.createElement(Yf,{style:[g.Padding.smallTop,n?null:g.Padding.smallBottom],kind:l==="bold"?"bold":"default",title:o.title,contentRef:o.to}),a.length>0?le.createElement(V,{size:"large",kind:"link",rightIcon:s,alignItems:"start",onPress:()=>i(u=>!u),style:[g.Padding.noneHorizontal]}):null),r?le.createElement(gs.View,{style:[g.Margin.smallLeft,g.Margin.smallBottom]},a.map((u,d,p)=>le.createElement(HA,{key:d,space:e,link:u,isLast:d===p.length-1}))):null)}var BH={none:G.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1})}),default:G.create({spaceHeader:{zIndex:1,position:"sticky",top:0}}),defaultWithBorder:G.create({spaceHeader:t=>({borderBottomWidth:1,borderBottomColor:t.colors.border.mid,zIndex:1,position:"sticky",top:0})})},WH=G.create({headerLinksMobile:t=>({backgroundColor:t.colors.background.main,borderBottomWidth:1,borderBottomColor:t.colors.border.main})}),yl=gs.StyleSheet.create({searchWrapper:{marginLeft:"auto"},searchBarContainer:{maxWidth:233},autoWidth:{width:"auto"},tocDesktop:{width:PH},headerLinks:{paddingHorizontal:RH-g.medium},headerLinksMobile:{minHeight:A.M},headerLinksMobileButton:{marginRight:"auto"},mobileHeight:{height:EH},desktopHeight:{height:IH}});c();var Ko=b(k());c();var Fr=b(k()),jb=b(q());c();var ka=b(k()),vl=b(q());function KA(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,i=i1(),[,a]=_(W),s=se(),[{result:l,error:u}]=fh([jO(o.key,n.id,i)]);if(u)return null;let d=p=>{p!==l?.rating&&(re({...r,type:"public_content_page_feedback_post",rating:p}),aw(f=>{$O(f,{space:o.key,page:n.id,revision:e.id,visitorId:i,rating:p,previousRating:l?.rating})}))};return ka.createElement(vl.View,{style:[w.directionRow,w.alignCenter]},ka.createElement(vl.View,null,ka.createElement(vl.Text,{style:[a.GroupTitle,a.textMuted]},s("was_it_helpful"))),ka.createElement(vl.View,{style:[w.directionRow,w.alignCenter]},ka.createElement(ix,{tooltip:s("poor_content"),active:l?.rating==="bad",rating:"bad",onPress:d}),ka.createElement(ix,{tooltip:s("ok_content"),active:l?.rating==="ok",rating:"ok",onPress:d}),ka.createElement(ix,{tooltip:s("excellent_content"),active:l?.rating==="good",rating:"good",onPress:d})))}function ix(t){let{active:o,tooltip:e,rating:n,onPress:r}=t;return ka.createElement(Va,{tooltip:e},(i,a)=>ka.createElement(vl.TouchableOpacity,{ref:a,onPress:()=>r(n),style:[g.Margin.smallLeft],accessibilityLabel:e,...i.events},ka.createElement(j2,{active:o,interactive:!0,rating:n,size:A.BUTTON_S})))}c();var xa=b(k()),Ip=b(q()),XA=b(mI());var ax=40,zH=H.createInteractiveComponent(p1);function Ep(t){return xa.createElement(Rl,null,xa.createElement(FH,{...t}))}function FH(t){let{space:o,floating:e}=t,[n,r]=_(VH),[,i]=_(W),a=se(),s=new URLSearchParams({utm_source:"content",utm_medium:"trademark",utm_campaign:o.key}),l=`https://${Ea.homepage.domain}/?${s.toString()}`,u=()=>{re(Nt(o,{type:"public_content_click_trademark"}))};return xa.createElement(Ip.View,{style:e&&r.floatingWrapper},e?xa.createElement(XA.default,{colors:[`${n.colors.background.main}00`,n.colors.background.main],style:r.floatingTopGradient}):null,xa.createElement(Ip.View,{style:e&&[g.Padding.mediumHorizontal,g.Padding.mediumBottom,r.floatingBackground]},xa.createElement(H.TouchableOpacity,{style:[w.directionRow,w.alignCenter,...e?[r.trademarkFloating,g.Padding.smallVertical,g.Padding.mediumHorizontal]:[r.tradeMarkDefault]],activeStyle:i.primary,onPress:u,href:l,target:"_blank"},xa.createElement(zH,{size:ax,style:i.textMuted,activeStyle:i.primary}),xa.createElement(Ip.View,{style:[w.flex1,g.Padding.mediumLeft]},xa.createElement(H.Text.Child,{style:[i.Label,i.textMuted],activeStyle:i.primary},a("powered_by",xa.createElement(Ip.Text,{style:i.Bold},"GitBook")))))))}var VH=G.create({floatingWrapper:{position:"absolute",bottom:0,zIndex:1,width:"100%"},floatingTopGradient:{height:g.medium},floatingBackground:t=>({backgroundColor:t.colors.background.main}),tradeMarkDefault:t=>({backgroundColor:"transparent"}),trademarkFloating:t=>({backgroundColor:t.colors.background.standout,borderRadius:t.radiuses.xlarge})});function UA(t){let{space:o,revision:e,page:n,analyticsContext:r}=t,[,i]=_(W),[,a]=_(qH),s=se(),l=Jp(n.edits),u=cd(n),d=!!l,p=o.hasPublicFeedback,f=!o.hideTrademark&&(u==="editorial"||u==="landing");if(!d&&!p)return null;let m=Fr.createElement(dv,null,Fr.createElement(Fr.Suspense,{fallback:null},Fr.createElement(KA,{space:o,revision:e,page:n,analyticsContext:r})));return Fr.createElement(jb.View,{style:[g.Padding.largeTop,a.footer]},Fr.createElement(Z.View,{tabletStyle:w.directionColumn,desktopStyle:w.directionRow,style:[w.alignCenter,w.justifySpaceBetween]},d?Fr.createElement(Z.View,{tabletStyle:g.Margin.mediumBottom,style:f?[]:[w.flex1]},Fr.createElement(jb.Text,{style:[i.textMuted,i.Label]},s("last_modified",Fr.createElement(r_,{value:new Date(l.updatedAt),onlyDate:!1})))):null,f?Fr.createElement(Ep,{space:o,floating:!1}):null,p?Fr.createElement(Z.View,{tabletStyle:f?"hidden":"visible",desktopStyle:"visible"},m):null),f&&p?Fr.createElement(Z.View,{tabletStyle:"visible",desktopStyle:"hidden",style:[w.directionRow,w.flex1,w.justifyContentCenter,g.Margin.largeTop]},m):null)}var qH=G.create({footer:t=>({borderTopColor:t.colors.border.mid,borderTopWidth:1})});c();var Oa=b(k()),Tp=b(q());var GH=H.createInteractiveComponent(Zr),HH={[Fe]:null,[qe]:g.Margin.smallLeft,[To]:null},YA=Oa.memo(function(o){let{sections:e,activeSection:n}=o,[,r]=_(W),[,i]=_(jA),a=se();return Oa.createElement(Tp.View,{style:[i.pageOutline]},Oa.createElement(Tp.View,{style:[w.directionRow,w.alignCenter,g.Padding.largeHorizontal,g.Margin.smallBottom]},Oa.createElement(Tp.Text,{style:[r.GroupTitle,r.textMuted,r.Bold]},a("outline"))),e.map(s=>s.type===null||s.type===tt?null:Oa.createElement(KH,{key:s.key,section:s,active:n===s.key})))});function KH(t){let{section:o,active:e}=t,[,n]=_(W),[,r]=_(jA),{navigateToHash:i}=ye();return Oa.createElement(H.TouchableOpacity,{style:[w.directionRow,g.Padding.largeHorizontal,r.sectionItem,e&&r.sectionItemActive],onPress:()=>{i(o.anchor)}},o.tag?Oa.createElement(Pr,{backgroundColor:Vl[o.tag]||$.orange.base,style:[r.sectionTag,g.Margin.xsmallRight,w.alignSelfCenter]},Oa.createElement(Tp.Text,{style:[n.textInsideColor,n.MobileCaption,n.Bold,n.Uppercase]},o.tag)):null,Oa.createElement(GH.Child,{style:[n.Label,n.textMid,o.type&&HH[o.type],...e?[n.primary,n.Medium]:[]],hoverStyle:n.primary},o.title))}var jA=G.create({pageOutline:t=>({maxWidth:en.MAX_PAGE_OUTLINE_WIDTH}),sectionItem:{marginTop:g.xsmall,marginBottom:g.xsmall,marginLeft:-1,borderLeftWidth:3,borderLeftColor:"transparent",width:"fit-content",maxWidth:"100%"},sectionItemActive:t=>({borderLeftColor:t.colors.primary.main}),sectionTag:{borderRadius:A.XXS,height:A.XXS,paddingHorizontal:g.small,justifyContent:"center"}});c();var bl=b(k());function $A(t){let{space:o,page:e}=t,[{color:n},r]=bl.useContext(Ca),i=se(),{headerDisabled:a}=Cn(o),{tableOfContents:s}=zi(e),l=!s&&a,u=[l?{key:"pageRead.switchTheme",icon:n==="light"?v.ThemeDark:v.ThemeLight,title:i(n==="light"?"switch_to_dark_theme":"switch_to_light_theme"),trigger:r}:null].filter(ue),[d,p]=Vv(t,u);return bl.createElement(bl.Fragment,null,d,l&&bl.createElement(FA,{kind:"grey",size:"large",title:"Search",rounded:!0}),bl.createElement(sh,{palette:p,icon:v.MoreVertical,kind:"grey",size:"large",title:"Page actions",rounded:!0,testID:"pageToolbar.paletteButton"}))}c();var Mp=b(k());c();var _a=b(k()),ew=b(q());c();var XH=750,UH=g.xxlarge,YH=XH+2*UH,sx=300,jH=220;function ZA(t=0){return t+sx+YH+jH}c();var $f=b(k()),$b=b(q());c();var kn=b(k()),jf=b(q());function cx(t){return kn.createElement(kn.Suspense,{fallback:kn.createElement(JA,{...t})},kn.createElement($H,{...t}))}function $H(t){let{treePage:o}=t,{page:e}=o,n=Qe(e.type==="link"?e.target:void 0);return kn.createElement(JA,{...t,contentRef:n})}function JA(t){let{revision:o,treePage:e,parent:n,currentPage:r,contentRef:i,isLastPage:a}=t,{page:s}=e,{getNavigationHref:l,navigateToPage:u}=zc(),d=r?r.id:null,p=d===s.id,f=!!d&&aR(o,s.id,d),[m,h]=kn.useState(f),[,y]=_(ZH),S=C=>{C.isDefaultPrevented()||C.nativeEvent.metaKey||C.nativeEvent.ctrlKey||(C.preventDefault(),s.type==="document"?u(o,s.id):s.type==="link"&&i?.open())};return kn.useEffect(()=>{f&&h(!0)},[f]),kn.createElement(jf.View,{style:[s.type==="group"&&g.Margin.mediumVertical]},kn.createElement(LA,{isLast:a,kind:s.type==="group"?"group":!n||n.type==="group"?"primary":"secondary",icon:s.emoji?mt(No,{code:s.emoji}):void 0,rightIcon:s.type==="link"?i?i.secondaryIcon:xe:void 0,active:p,expanded:m,onPress:s.type==="group"?void 0:S,href:(()=>s.type==="link"?i?.href:l(o,s.id))(),onChevronPress:e.pages.length>0&&s.type==="document"?C=>{C.preventDefault(),h(x=>!x)}:void 0},s.title),(m||s.type==="group")&&e.pages.length>0?kn.createElement(jf.View,{style:[y.tocItemChildren,...s.type==="group"?[g.Margin.noneLeft]:[g.Margin.smallLeft,g.Margin.xsmallTop,g.Margin.smallBottom]]},e.pages.map((C,x)=>kn.createElement(jf.View,{style:s.type==="group"?null:g.Margin.smallLeft,key:C.renderKey},kn.createElement(cx,{...t,treePage:C,isLastPage:x===e.pages.length-1,parent:s}))),s.type==="group"?null:kn.createElement(jf.View,{style:y.tocItemChildrenLine})):null)}var ZH=G.create({tocItemChildren:{position:"relative"},tocItemChildrenLine:t=>({position:"absolute",top:0,bottom:0,left:0,width:1,backgroundColor:t.colors.border.main})});function Zb(t){let{showingTrademark:o,revision:e}=t,n=$f.useMemo(()=>Nw(e.pages,e.rootPages),[e]);return $f.createElement($b.ScrollView,{style:w.flex1,contentContainerStyle:[g.Padding.mediumVertical,o?JH.scrollviewWithTrademark:null]},n.map((r,i)=>$f.createElement(cx,{key:r.renderKey,...t,treePage:r,isLastPage:i===n.length-1})))}var JH=$b.StyleSheet.create({scrollviewWithTrademark:{paddingBottom:g.medium+ax+2*g.medium}});c();var Qn=b(k()),Jb=b(q());function Qb(t){let{space:o,collection:e,collectionSpaces:n,currentPage:r,revision:i}=t,[,a]=_(QA),{headerBackgroundColor:s,headerLogoURL:l,headerDisabled:u}=Cn(o),d=n&&e?.publishingType==="variants"?Qn.createElement(Pp,{key:"variants-picker",currentVariant:o,collection:e,variants:n,revision:i,currentPage:r}):null;return Qn.createElement(Qn.Fragment,null,u?Qn.createElement(Qn.Fragment,null,Qn.createElement(QH,{key:"space-header",space:o,collection:e,headerBackgroundColor:s,headerLogoURL:l,variantsSwitcher:d}),Qn.createElement(Z.View,{mobileStyle:"hidden",desktopStyle:"visible",style:[a.searchBarSection,w.directionRow,w.justifySpaceBetween,w.alignCenter,g.Margin.mediumRight]},Qn.createElement(Jb.View,{style:[w.flex1,w.directionRow,g.Margin.mediumVertical]},Qn.createElement(Yb,{key:"search-bar",headerBackgroundColor:s,hasAISearch:o.hasAISearch})),o.themeModeTogglable?Qn.createElement(Jb.View,{style:[g.Margin.mediumLeft]},Qn.createElement(Eu,{content:o,mode:"button"})):null)):null)}function QH(t){let{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,variantsSwitcher:i}=t,[,a]=_(QA);return Qn.createElement(Z.View,{style:[a.spaceTitleWrapper,w.directionRow,w.justifyContentCenter,w.alignCenter],mobileStyle:"hidden",desktopStyle:"visible"},Qn.createElement(Vb,{space:o,collection:e,headerBackgroundColor:n,headerLogoURL:r,desktopStyle:w.flex1}),Qn.createElement(Jb.View,{style:[w.alignSelfCenter,g.Margin.smallHorizontal]},i))}var QA=G.create({searchBarSection:t=>({borderColor:t.colors.border.mid,borderBottomWidth:1}),selectedTab:t=>({borderLeftColor:t.colors.primary.main,borderLeftWidth:2}),hoverTab:t=>({backgroundColor:t.colors.background.standout}),tab:{width:"100%",flexDirection:"row",justifyContent:"center",alignItems:"center",outlineStyle:"none",borderWidth:0,borderColor:"transparent",borderLeftWidth:2,height:A.BUTTON_M,lineHeight:A.BUTTON_M,borderRadius:0,paddingHorizontal:g.medium},mainBadge:{fontFamily:m1,fontSize:Fg.xxsmall,lineHeight:A.BUTTON_M,...qg.Bold,textTransform:"uppercase",letterSpacing:1},spaceTitleWrapper:t=>({height:A.L}),variantScrollView:{flexGrow:0,flexShrink:1,height:"fit-content"}});var{PUBLIC_DESKTOP_HEADER_HEIGHT:eK}=en;function eD(t){let{space:o}=t,e=se(),{headerDisabled:n}=Cn(o),[,r]=_(tK[n?"none":"default"]),{desktopSidebarWidth:i}=_a.useContext(ra),a=_a.useMemo(()=>({[ZA(i)]:"visible"}),[i]),s=!o.hideTrademark;return _a.createElement(Z.View,{testID:"page.desktopTableOfContents",mobileStyle:"hidden",desktopStyle:"visible",customBreakpointsStyles:a,style:[r.tocDesktopWrapper,w.directionRow,w.justifyContentEnd]},_a.createElement(pe,{tag:"nav",accessibilityLabel:e("table_of_contents"),style:[oK.tocDesktop,w.directionColumn]},_a.createElement(ew.View,{style:[w.flex1,g.Padding.largeLeft]},_a.createElement(Qb,{...t}),_a.createElement(Zb,{...t,showingTrademark:s})),s?_a.createElement(Ep,{floating:!0,space:o}):null))}var tK={none:G.create({tocDesktopWrapper:t=>({position:"sticky",top:0,height:"100vh",overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})}),default:G.create({tocDesktopWrapper:t=>({position:"sticky",top:g.xxlarge,height:`calc(100vh - ${eK}px)`,overflowY:"auto",alignSelf:"flex-start",backgroundColor:t.colors.background.main,borderRightColor:t.colors.border.mid,borderRightWidth:1})})},oK=ew.StyleSheet.create({tocDesktop:{width:sx}});c();var Vt=b(k()),Hi=b(q());var nK=Z.createResponsiveComponent(Hi.Animated.View),rK=Z.createResponsiveComponent(Hi.Animated.createAnimatedComponent(Hi.TouchableOpacity));function oD(t){let{currentPage:o,space:e,collection:n,collectionSpaces:r,revision:i}=t,a=se(),s=um(or(Im),Vt.useState(!1)),[,l]=_(W),{sidebarMobileLeft:u,showOverlay:d}=s_(s),[p,f]=_(nD);Vt.useEffect(()=>{s.close()},[o?.id]);let m=!e.hideTrademark,h=r&&n?.publishingType==="variants"?Vt.createElement(Pp,{key:"variants-picker",currentVariant:e,collection:n,variants:r,revision:i,currentPage:o}):null,y=!!e.themeModeTogglable,S=y?Vt.createElement(Hi.View,{style:[g.Margin.mediumRight]},Vt.createElement(Eu,{content:e,mode:"button"})):null;return Vt.createElement(Tn,null,Vt.createElement(nK,{style:[f.sidebar,{left:u}],mobileStyle:"visible",desktopStyle:"hidden"},Vt.createElement(pe,{tag:"nav",accessibilityLabel:a("table_of_contents"),style:[w.directionColumn,w.flex1]},Vt.createElement(Hi.View,{style:w.flex1},Vt.createElement(iK,{key:"mobile-closing-bar",switcher:h??S}),y&&h?Vt.createElement(Hi.View,{style:[w.directionRow,w.justifySpaceBetween,w.alignCenter,g.Padding.smallVertical,g.Padding.mediumHorizontal,f.mobileChangeAppearance]},Vt.createElement(Hi.Text,{style:[l.Label,l.text]},a("theme_change_appearance")),Vt.createElement(Eu,{content:e})):null,Vt.createElement(Qb,{...t}),Vt.createElement(Hi.View,{style:[g.Padding.mediumLeft,w.flex1,f.sidebarWrapper]},Vt.createElement(Zb,{...t,showingTrademark:m}))),m?Vt.createElement(Ep,{floating:!0,space:e}):null)),Vt.createElement(rK,{style:[f.screenOverlay,{backgroundColor:u.interpolate({inputRange:[-ah.MOBILE_WIDTH,0],outputRange:[p.colors.backdrop.transparent,p.colors.backdrop.background]})}],mobileStyle:d?"visible":"hidden",desktopStyle:"hidden",onPress:s.closeMobile}))}function iK(t){let[,o]=_(nD),e=um(or(Im),Vt.useState(!1));return Vt.createElement(Z.View,{style:[o.mobileClosingBar,g.Padding.smallHorizontal,w.justifySpaceBetween,w.alignCenter,w.directionRow],mobileStyle:"visible",desktopStyle:"hidden"},Vt.createElement(V,{icon:v.X,size:"large",kind:"default",onPress:()=>e.closeMobile(),style:[w.alignSelfCenter,g.Padding.smallHorizontal],accessibilityLabel:"Close"}),t.switcher)}var tD=10,nD=G.create({sidebar:t=>({backgroundColor:t.colors.background.main,width:ah.MOBILE_WIDTH,maxWidth:"100%",height:"100%",flexDirection:"row",position:"fixed",top:0,bottom:0,zIndex:tD}),sidebarWrapper:t=>({borderRightWidth:1,borderRightColor:t.colors.border.mid}),sidebarCloseButton:{position:"absolute",width:A.BUTTON_M,height:A.BUTTON_M,top:(A.M-A.BUTTON_M)/2,left:ah.MOBILE_WIDTH+A.BUTTON_M/2},screenOverlay:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:tD-1},mobileClosingBar:t=>({height:A.L,borderBottomWidth:1,borderBottomColor:t.colors.border.mid,backgroundColor:t.colors.background.main}),mobileChangeAppearance:t=>({borderBottomWidth:1,borderColor:t.colors.border.mid})});function rD(t){return Mp.createElement(Mp.Fragment,null,Mp.createElement(eD,{...t}),Mp.createElement(oD,{...t}))}var{PUBLIC_DESKTOP_HEADER_HEIGHT:aK}=en;function iD(t){let{space:o,revision:e,screen:n,analyticsContext:r,collection:i,collectionSpaces:a,assetHostname:s,currentPage:l}=t,u=se(),[d,p]=_(sK);oE(o);let{headerDisabled:f}=Cn(o),m=zi(l),h=VP();ta(C=>{C.writeAsync([{type:"meta",name:"description",content:l&&l.description?l.description:""},{type:"meta",name:"og:description",content:l&&l.description?l.description:""},{type:"meta",name:"og:image",content:o.socialPreviewURL?na(o.socialPreviewURL,{height:640,width:1280,fit:"contain"}):lK(o,e,l)},{type:"meta",name:"twitter:card",content:"summary_large_image"}]),o.visibility==="in-collection"?(C.setTitle(l?l.title:u("page_not_found"),i?.publishedTitle||i?.title||Ba),C.writeAsync([{type:"meta",name:"robots",content:i?.visibility!=="public"?"noindex, nofollow":"index"}])):(C.setTitle(l?l.title:u("page_not_found"),o.publishedTitle||o.title||Ba),C.writeAsync([{type:"meta",name:"robots",content:o.visibility!=="public"?"noindex, nofollow":"index"}]))}),nd(l?Dg(o,l,{screen:"space",visibility:o.visibility,pageLayout:cd(l),diffMode:!1}):Nt(o,{screen:"space_page_notfound",visibility:o.visibility}),[o.key,l?.id]),jI(o,l?.id??null);let y=!!m.tableOfContents,S=!!m.outline;if(!l&&n.page){let[C]=S_([t1(o.key,n.page)]);if(C&&e.pages[C.page])return Ko.default.createElement(TE,{to:oo(e,C.page)})}return Ko.default.createElement(Ko.default.Fragment,null,Ko.default.createElement(uK,{space:i||o,assetHostname:s}),Ko.default.createElement(Z.View,{style:[w.flex1,p.spacePageContainerBg],mobileStyle:w.directionColumn,desktopStyle:w.directionRow},Ko.default.createElement(Ub,null,y?Ko.default.createElement(rD,{space:o,revision:e,currentPage:l?.type==="document"?l:null,analyticsContext:r,collection:i,collectionSpaces:a}):null,Ko.default.createElement(Pr,{style:[p.spacePageBody],backgroundColor:d.colors.background.main},Ko.default.createElement(Ko.default.Suspense,{fallback:Ko.default.createElement(Fv,{withPageOutline:l?.layout!=="landing"})},l&&l.type==="document"?Ko.default.createElement(Wv,{screen:n,key:cK(n,e,l),space:o,changeRequest:void 0,revision:e,page:l,scrollRef:h,readOnly:!0,withComments:!1,withToC:y,analyticsContext:r,outline:S?YA:void 0,toolbar:$A,footer:Ko.default.createElement(UA,{space:o,revision:e,page:l,analyticsContext:r}),sideColumnStickyTop:g.large+(f?0:aK)}):Ko.default.createElement(S0,{statusCode:404},Ko.default.createElement(am,{title:u("page_not_found"),action:Ko.default.createElement(b_,{kind:"secondary",size:"medium",to:{screen:{type:"space",space:o.key,page:""}}},u("back_to_home"))},u("page_not_found_long"))))))))}var sK=G.create({spacePageContainerBg:t=>({backgroundColor:t.colors.background.main}),spacePageBody:{flex:1}});function cK(t,o,e){let n=t.space;return n+=`/${t.changeRequest||"main"}`,n+=`/${o.conflicts?"conflicts":"normal"}`,n+=`/${e.id}`,t.diff&&(n+="/diff"),t.revision&&(n+="/revision"),n}function lK(t,o,e){let n=e&&o.rootPages[0]!==e.id?`/page/${e.id}`:"",{primaryColor:r,headerLogoURL:i}=uy(t),a=ji(t),s=`color=${encodeURIComponent(r||"")}&logo=${encodeURIComponent(yc(i||t.iconURL||""))}&theme=${encodeURIComponent(a||"")}`;return`${tg()}/share/space/thumbnail/${t.key}${n}.png?${s}`}function uK(t){let{space:o,assetHostname:e}=t,n=QO(o,"public-content"),[r]=_(),[i,a]=Ko.default.useState(n.iconURL||(n.emoji?`${e}${ZO(n.emoji)}`:null));return Ko.default.useEffect(()=>{if(i)return;let s=192,l=document.createElement("canvas"),u=l.getContext("2d");if(!u)return;l.width=s,l.height=s,u.fillStyle=r.colors.background.main,u.fillRect(0,0,s,s);let d=.7;u.fillStyle=r.colors.text.main,u.font=`400 ${s*d}px gitbook-content-font`,u.textAlign="center",u.textBaseline="middle",u.fillText(o.title.slice(0,1),s/2,s/2),a(l.toDataURL("image/png"))},[o.title,a]),ta(s=>{s.writeAsync([{type:"link",rel:"icon",href:i?yc(i):`${e}/public/images/icon-512.png`},{type:"link",rel:"apple-touch-icon",href:i?yc(i):`${e}/public/images/icon-512.png`}])}),null}c();var Le=b(k()),Cr=b(q());var dK=Z.createResponsiveComponent(pe),aD=200,pK=4*(aD+g.small);function sD(t){let{space:o,collection:e}=t,[,n]=_(W),[,r]=_(gK),i=Le.useMemo(()=>o?.footer||e?.footer,[o,e]);return Le.createElement(Le.Fragment,null,i?Le.createElement(dK,{tag:"footer",style:[w.alignCenter,r.footer]},Le.createElement(Z.View,{desktopStyle:[hs.desktopContainer]},Le.createElement(Z.View,{desktopStyle:w.directionRow,mobileStyle:w.directionColumn},i?.logoURL?Le.createElement(Z.View,{style:[w.directionRow,w.alignStart,g.Padding.xlargeTop,i?.copyright?null:g.Padding.xlargeBottom],desktopStyle:g.Margin.xxlargeHorizontal,mobileStyle:g.Margin.largeHorizontal},Le.createElement(Z.View,{desktopStyle:"visible",mobileStyle:"hidden"},Le.createElement(jo,{source:{uri:i?.logoURL},style:hs.footerImageDesktop,loading:"lazy"})),Le.createElement(Z.View,{desktopStyle:"hidden",mobileStyle:"visible"},Le.createElement(Cr.View,{style:g.Margin.largeLeft},Le.createElement(jo,{source:{uri:i?.logoURL},style:hs.footerImageMobile,loading:"lazy"})))):null,i?.linkGroups?Le.createElement(Z.View,{style:[g.Padding.xlargeTop,i.logoURL?w.alignStart:w.alignCenter,w.flex1,i?.copyright?null:g.Padding.xlargeBottom],mobileStyle:w.alignStart,tabletStyle:g.Padding.largeLeft},Le.createElement(Z.View,{mobileStyle:"hidden",tabletStyle:"hidden",desktopStyle:i.linkGroups.length<3&&!i.logoURL?"visible":"hidden"},Le.createElement(mK,{linkGroups:i.linkGroups})),Le.createElement(Z.View,{mobileStyle:"visible",tabletStyle:"visible",desktopStyle:i.linkGroups.length>=3||i.logoURL?"visible":"hidden"},Le.createElement(fK,{linkGroups:i.linkGroups}))):null),i?.copyright?Le.createElement(Z.View,{style:[w.flex1,g.Padding.xlargeVertical]},Le.createElement(Cr.Text,{style:[hs.copyright,n.textMuted]},i?.copyright)):null)):null)}function mK(t){let{linkGroups:o}=t,[,e]=_(W),n=[],r=o?.map(({title:i})=>i);return o?.forEach(i=>{i?.links?.forEach((a,s)=>{if(n[s]===void 0)return n[s]=[a];n[s].push(a)})}),Le.createElement(Cr.View,{style:[w.flex1,w.justifyContentStart,w.directionRow]},Le.createElement(Cr.View,{style:hs.linkGroupColumnDesktop},Le.createElement(Cr.View,{style:[w.flex1]},r?.map((i,a)=>Le.createElement(Cr.View,{key:i,style:[w.alignStart,a>0?g.Margin.smallTop:null]},Le.createElement(Cr.Text,{style:[e.text,e.Heading3]},i))))),n.map((i,a)=>Le.createElement(Cr.View,{key:a,style:hs.linkGroupColumnDesktop},Le.createElement(cD,{links:i,renderMode:"horizontal"}))))}function fK(t){let{linkGroups:o}=t,[,e]=_(W);return Le.createElement(Z.View,{style:[w.flex1,w.justifyContentStart,w.directionRow],desktopStyle:[hs.linkGroupColumnsDesktop,w.directionRow,w.wrap,w.flexShrink1],mobileStyle:w.directionColumn},o.map((n,r)=>Le.createElement(Z.View,{key:r,desktopStyle:[hs.linkGroupColumnDesktop,g.Margin.xlargeTop],mobileStyle:[hs.linkGroupColumnMobile,g.Margin.xlargeTop,g.Margin.largeLeft]},Le.createElement(Cr.View,{style:w.alignStart},Le.createElement(Cr.Text,{style:[e.text,e.Heading3]},n.title)),Le.createElement(cD,{links:n.links,renderMode:"vertical"}))))}function cD(t){let{links:o,renderMode:e}=t,[,n]=_(W);return Le.createElement(Z.View,{style:[w.alignStart,w.flex1,w.directionColumn],desktopStyle:e==="vertical"?g.Margin.largeTop:null,mobileStyle:g.Margin.smallTop},(o||[]).map((r,i)=>{let a=i===o.length-1;return r.title?Le.createElement(Le.Suspense,{fallback:null,key:r.title},Le.createElement(Cr.View,{style:[hs.referenceLink,e==="horizontal"&&i>0?g.Margin.smallTop:null]},Le.createElement(Yf,{title:r.title,contentRef:r.to,style:[n.textMuted,n.Medium,e==="horizontal"?null:[g.Padding.smallTop,a?null:g.Padding.smallBottom]]}))):null}))}var gK=G.create({footer:t=>({backgroundColor:t.colors.background.mid})}),hs=Cr.StyleSheet.create({linkGroupColumnsDesktop:{maxWidth:pK,marginTop:-g.xlarge},linkGroupColumnDesktop:{width:aD,marginLeft:g.small,paddingRight:g.xlarge},linkGroupColumnMobile:{width:"auto"},desktopContainer:{maxWidth:1280,width:"100%"},copyright:{textAlign:"center"},mobileHeight:{height:"auto"},referenceLink:{maxWidth:"100%"},footerImageDesktop:{maxHeight:150,maxWidth:150,objectFit:"contain"},footerImageMobile:{maxHeight:30,maxWidth:30,objectFit:"contain"}});c();var nn=b(k());c();var on=b(k());c();var Zf=b(k());function lD(t){let{query:o,space:e,onUpdateQuery:n,onSubmitAIQuery:r,allowEnterToOpen:i}=t,a=Zf.useCallback(()=>{n("")},[n]);return o.query?Zf.createElement(xA,{target:{space:e},query:o,onAnswerLoaded:a,onSubmitQuery:r}):Zf.createElement(_A,{target:{space:e},onSubmitAIQuery:r,allowEnterToOpen:i})}c();var lx=b(k());c();var lc=b(k());function uD(t){let{space:o,onUpdateQuery:e,onSubmitAIQuery:n}=t,r=se(),i=gA(),a=Wb(),s=Bb(o.hasAISearch?{space:o}:null),l=lc.useCallback(f=>{switch(f.type){case"recent-search":return{icon:v.Search.CSS,title:f.query,action:r("search")};case"recent-question":return{icon:v.SearchOrAsk.CSS,title:f.question,action:r("search_ask")};case"recommended-question":return{icon:v.SearchOrAsk.CSS,title:f.question,action:r("search_ask")};default:Ce(f)}},[r]),u=lc.useCallback(f=>{switch(f){case"recent-search":return{title:r("search_blankslate_recent_searches")};case"recent-question":return{title:r("search_blankslate_recent_questions")};case"recommended-question":return{title:r("search_blankslate_recommended_questions")};default:return}},[r]),d=(f,m)=>{switch(f.type){case"recent-search":{e(f.query),re(Nt(o,{type:"search_pick_suggestion_recent_search",suggestionIndex:m}));break}case"recent-question":{n(f.question),re(Nt(o,{type:"ai_search_pick_suggestion_recent_search",suggestionIndex:m}));break}case"recommended-question":re(Nt(o,{type:"search_pick_suggestion_question"})),n(f.question);break;default:Ce(f)}},p=lc.useMemo(()=>{let f=o.hasAISearch?a.map(h=>({type:"recent-question",question:h})):[],m=i.filter(h=>!a.includes(h)).map(h=>({type:"recent-search",query:h}));return[...f,...m,...s]},[i,a,s,o.hasAISearch]);return p.length===0?lc.createElement(Ps,null,r("search_blankslate")):lc.createElement(U,{style:[D.flex.flex1,D.flex.column]},lc.createElement(Oc,{data:p,getKey:hK,renderItem:l,renderGroup:u,groupItem:yK,getGroupKey:vK,onOpen:d,style:[D.padding.mediumHorizontal,D.padding.mediumBottom]}))}function hK(t){switch(t.type){case"recent-search":return`recent-search:${t.query}`;case"recent-question":return`recent-question:${t.question}`;case"recommended-question":return`recommended-question:${t.question}`;default:Ce(t)}}function yK(t){return t.type}function vK(t){return t}c();var uc=b(k());function dD(t){let{space:o,hasAI:e,onSubmitAIQuery:n=()=>{}}=t,r=uc.useDeferredValue(t.query),i=se(),{navigate:a}=ye(),s=IA(r,n,e),l=K_({query:r,types:["pages","sections"],hitsPerPage:30,analyticsTags:[{type:"space",space:o.key}]}),u=s.suggestion?[s.suggestion,...l]:l,d=uc.useCallback(m=>{if(m.type==="ask-gitbook")return s.onRenderSuggestion(m);switch(m.type){case"page":return{title:m.title,icon:v.Page.CSS,subtitle:m.ancestors.filter(h=>h.type!=="group"&&h.id!==m.page.id).map(h=>h.title).join(" \u203A "),action:i("search_goto_page")};case"section":return{title:m.title,body:m.body,icon:v.Hash.CSS,nested:!0,action:i("search_goto_section")};default:throw new Error("Unexpected item type")}},[i,r,s.onRenderSuggestion]),p=uc.useCallback(m=>{if(m)return{title:m?.page?.title}},[]),f=uc.useCallback((m,h)=>{if(m.type==="ask-gitbook")return s.onOpenSuggestion(m);if(!(m.type!=="page"&&m.type!=="section"))switch(re(Nt(o,{type:"public_content_search_open_result",resultType:m.type,resultIndex:h})),m.type){case"page":a({screen:{type:"space",space:m.space.key,page:m.path,hash:void 0,query:void 0}});break;case"section":a({screen:{type:"space",space:m.space.key,page:m.path,hash:m.anchor,query:void 0}});break;default:Ce(m)}},[r,s.onOpenSuggestion]);return u.length===0?uc.createElement(Ps,null,i("search_blankslate_query",r)):uc.createElement(Oc,{data:u,getKey:bK,renderItem:d,renderGroup:p,groupItem:SK,getGroupKey:wK,onOpen:f,style:[D.padding.mediumHorizontal,D.padding.mediumBottom]})}function bK(t){return t.key}function wK(t){return t?t.type==="ask-gitbook"?t.type:t.page.id:""}function SK(t){return t.type==="ask-gitbook"?{type:"ask-gitbook"}:t.groups.find(o=>o.type==="page")}function pD(t){let{space:o,query:e,onUpdateQuery:n,onSubmitAIQuery:r}=t;return hA(e),vA(e,{space:o}),e?lx.createElement(dD,{space:o,query:e,hasAI:o.hasAISearch,onSubmitAIQuery:r}):lx.createElement(uD,{space:o,onUpdateQuery:n,onSubmitAIQuery:r})}function mD(t){let{space:o}=t,[e,{open:n,close:r,setQuery:i}]=w_();return Qr({[Ge.SEARCH_OPEN]:()=>{n()},"/":()=>{n()}},["all"],[]),on.createElement(I1,null,typeof e=="string"?on.createElement(CK,{space:o,query:e,setQuery:i,close:r}):null)}function CK(t){let{space:o,query:e,setQuery:n,close:r}=t,i=se(),a=on.useRef(null),[s,l]=PA(),[u,d]=on.useState(!1);nd({screen:"search",searchType:"search"},[]);let p=on.useCallback(h=>{n(h),a.current?.focus()},[n,a]),f=h=>{d(!1),n(h)},m=on.useCallback(h=>{o.hasAISearch&&(d(!0),n(h),l(h),a.current?.focus(),re(Nt(o,{type:"ai_search_submit",query:h,trigger:"press_enter"})))},[!o.hasAISearch,n,l,a]);return on.createElement(u_,{ref:a,inputIcon:o.hasAISearch?v.SearchOrAsk.CSS:v.Search.CSS,rightButton:o.hasAISearch?on.createElement(U,{style:[D.flex.row,D.flex.alignCenter]},u&&e&&e!==s.query?on.createElement(U,{style:[D.margin.mediumRight,D.flex.row,D.flex.alignCenter]},on.createElement(U,{style:D.margin.xsmallRight},on.createElement(At,{style:[D.text.caption,D.textColor.muted]},"Enter")),on.createElement(v.ArrowEnter.CSS,{style:[D.icons.xsmall,D.textColor.muted]})):null):null,query:e,onQueryChange:f,onSubmitQuery:m,onClose:r,queryPlaceholder:o.hasAISearch?i("search_placeholder_ask"):i("search_placeholder")},!u||!o.hasAISearch?on.createElement(pD,{query:e,space:o,onUpdateQuery:p,onSubmitAIQuery:m}):on.createElement(lD,{query:s,space:o,onUpdateQuery:p,onSubmitAIQuery:m,allowEnterToOpen:e.length===0}))}c();var tw=b(k());var Lp=new Map;typeof window<"u"&&(window.GitBook=window.GitBook||{addEventListener:(t,o)=>{Lp.has(t)||Lp.set(t,[]),Lp.get(t).push(o)},removeEventListener:(t,o)=>{if(!Lp.has(t))return;let e=Lp.get(t),n=e.indexOf(o);n!==-1&&e.splice(n,1)}});function fD(t,...o){let e=Lp.get(t);e&&e.forEach(n=>{n(...o)})}function gD(t){if(tw.useContext($o).mode!=="public-content")throw new Error("useInjectIntegrationsScripts can only be used in public-content mode");tw.useEffect(()=>(fD("load"),()=>{fD("unload")}),[t.key])}function ow(t){let{space:o,assetHostname:e,collection:n,collectionSpaces:r,usesCookies:i}=t,{locale:a}=nn.useContext($o),{screen:s}=Ga(),l=be(),u=$I(o.key,s),d=s.type==="space"&&typeof s.changeRequest=="string";if(d&&!u)throw new Ui.NotFound("Change request not found");let p=s.type==="space"&&s.revision,f=d&&u?u.revisionCurrent:p&&s.revision||o.revision,m=Ur(l.store.getRevision(o.key,f));if(!m)throw d?new Ui.NotFound("Change request not found"):s.type==="space"&&s.revision?new Ui.NotFound("Revision not found"):new Error("Expected revision");ZI(o),gD(o);let h=nn.useMemo(()=>Nt(o,{}),[o.key,o.organization,o.collection]);if(s.type!=="space"||s.space!==o.key)throw new Error("screen should be the space we render");nn.useEffect(()=>{if(o.searchKey)return k_(o.searchKey)},[o.searchKey]),ta(x=>{x.write({type:"font",font:o.font||"Inter",fontFamilyName:"gitbook-content-font"}),(s.revision||s.changeRequest||s.sideSheet)&&x.write({type:"meta",name:"robots",content:"noindex"}),x.setLang(a)}),TA(o.privacyPolicyURL,CS(o)||i);let[y,S]=z_(m,s.page),C={space:o.key,...S?{page:S.id}:{},...u?{changeRequest:u.key}:{revision:m.id}};return nn.createElement(nn.Fragment,null,y?nn.createElement(uh,{to:{screen:y}}):null,nn.createElement(PE,{value:C},nn.createElement(GA,{space:o,revision:m,collection:n,currentPage:S,collectionSpaces:r}),nn.createElement(iD,{space:o,revision:m,screen:s,analyticsContext:h,collection:n,collectionSpaces:r,assetHostname:e,currentPage:S}),nn.createElement(sD,{space:o,collection:n}),nn.createElement(mD,{space:o}),nn.createElement(X2,null),nn.createElement(EE,{content:o,contentRef:ea(o.key)})))}c();var ux=b(k());c();function Np(t){return t?t.endsWith("/")?t:`${t}/`:""}function hD(t,o){return e=>{let n=`/${Np(t.basePath)}`;switch(e.type){case"back_office":case"account":case"error_notfound":case"org_invite":case"org_join":case"org_settings":case"root":case"join":case"account_verification":case"integrations":case"import":case"template":case"welcome":case"contentkit_builder":case"capture":case"captures":throw new Error(`Cannot navigate to ${e.type} on public content`);case"home":{if(e.organization){let i=rd.read({type:"organization",organization:e.organization});n=nm(i);break}throw new Error("Cannot navigate to home without an org on public content")}case"user":{let i=YO(e.user);n=nm(i);break}case"collection":{let i=rd.read({type:"collection",collection:e.collection});n=nm(i);break}case"space":{let i=rd.read({type:"space",space:e.space});i.hostname===t.hostname&&(!t.basePath||i.pathname.startsWith(t.basePath))||o?(t.shareLink&&(n+=Np(t.shareLink)),i.pathname!==t.basePath&&(t.basePath?n+=Np(Ux(i.pathname,Np(t.basePath))):n+=Np(i.pathname))):n=nm(i),n+=kK(e);break}case"legacy_space":case"legacy_account":throw new Error("Cannot navigate to legacy urls");default:Ce(e)}let r;if(typeof e.query=="string"){let i=new URLSearchParams;i.set("q",e.query),r=`?${i.toString()}`}return{pathname:n,hash:e.hash,search:r}}}function kK(t){let o="";return t.revision&&(o+=`~/revisions/${t.revision}/`),t.changeRequest&&(o+=`~/changes/${t.changeRequest}/`),o+=`${t.page[0]==="/"?t.page.slice(1):t.page}`,t.sideSheet&&(o=`${Np(o)}~/${t.sideSheet.type}${"tab"in t.sideSheet?`/${t.sideSheet.tab}`:""}`),o}c();function yD(t,o,e,n=[]){return r=>{let{spaceKey:i,pathname:a}=Qx({currentSpaceKey:o,collectionSpaces:n,collection:e,pathname:r.pathname,paths:t}),s={type:"space",space:i,page:""};xK(s,VO(a)),r.hash&&(s.hash=r.hash.replace(/^#/,""));let u=new URLSearchParams(r.search).get("q");return typeof u=="string"&&(s.query=u),s}}function xK(t,o){ww(o,[{path:`/~/revisions/:revision/:page${Pg}`,onMatch:e=>{Object.assign(t,{page:e.params.page,revision:e.params.revision}),Ap(t,e,o)}},{path:"/~/revisions/:revision",onMatch:e=>{Object.assign(t,{revision:e.params.revision,page:""}),Ap(t,e,o)}},{path:`/~/changes/:changeRequest/:page${Pg}`,onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:e.params.page}),Ap(t,e,o)}},{path:"/~/changes/:changeRequest",onMatch:e=>{Object.assign(t,{changeRequest:e.params.changeRequest,revision:void 0,page:""}),Ap(t,e,o)}},{path:`/:page${Pg}`,onMatch:e=>{Object.assign(t,{page:e.params.page,diff:!1}),Ap(t,e,o)}},{path:"/",onMatch:e=>{Object.assign(t,{diff:!1,page:""}),Ap(t,e,o)}}])}function Ap(t,o,e){ww(e,[{path:"/~/share/pdf",onMatch:n=>{Object.assign(t,{sideSheet:{type:"share",tab:"pdf"}})}}],{prefix:o.path})}function nw(t,o,e,n,r){let i=FI(),a=(0,ux.useMemo)(()=>yD(t,e,n,r),[t.hostname,t.basePath,t.shareLink,e,n,r]),s={hostname:t.hostname,pathname:t.basePath},l=(0,ux.useMemo)(()=>hD({hostname:s.hostname,basePath:s.pathname,shareLink:t.shareLink},o),[t.hostname,t.basePath,t.shareLink]);return{forceHardNavigation:!i,getNavigationScreenFromLocation:a,getLocationForNavigationScreen:l}}function vD(t){let{space:o,ssrRequestPath:e,ssrRouterContext:n,basePath:r,hostname:i,customToken:a,shareLink:s,assetHostname:l,preview:u=!1,usesCookies:d=!1}=t,p=nw({hostname:i,basePath:r,shareLink:s},u,o.key),{primaryColor:f}=Cn(o);return fi.createElement(dm,{mode:"public-content",preview:u,locale:o.language},fi.createElement(fi.Suspense,{fallback:fi.createElement(Lo,{size:"large"})},fi.createElement(Rl,{primaryColor:f},fi.createElement(Kf,null,fi.createElement(zb,{ssrRequestPath:e,ssrRouterContext:n},fi.createElement(lh,{persist:!1,...p},fi.createElement(ly,null,a&&typeof window>"u"?fi.createElement(Lo,{size:"large"}):fi.createElement(ow,{space:o,assetHostname:l,usesCookies:d}))))))))}c();var xn=b(k());function bD(t){let{collection:o,basePath:e,hostname:n,customToken:r,collectionSpaces:i,ssrRequestPath:a,ssrRouterContext:s,shareLink:l,assetHostname:u,preview:d=!1,usesCookies:p=!1}=t,f=nw({hostname:n,basePath:e,shareLink:l},d,void 0,o,i),{primaryColor:m}=Cn(o);if(!d&&o.publishingType!=="variants")throw new Error("we do not know how to render anything else than variants for now");return xn.createElement(dm,{mode:"public-content",preview:d,locale:o.language},xn.createElement(Rl,{primaryColor:m},xn.createElement(Kf,null,xn.createElement(zb,{ssrRequestPath:a,ssrRouterContext:s},xn.createElement(lh,{persist:!1,...f},xn.createElement(xn.Suspense,{fallback:xn.createElement(Lo,{size:"large"})},xn.createElement(ly,null,r&&typeof window>"u"?xn.createElement(Lo,{size:"large"}):xn.createElement(OK,{collection:o,collectionSpaces:i,assetHostname:u,usesCookies:p}))))))))}function OK(t){let{screen:o}=Ga();if(o.type!=="space")throw new Error("screen should be a space");let[e]=Rc([ea(o.space)]);if(!e)throw new Error("the space should exist");let{primaryColor:n}=Cn(e);return xn.createElement(dm,{locale:e.language},xn.createElement(Rl,{primaryColor:n},xn.createElement(Kf,null,xn.createElement(ow,{...t,space:e}))))}c();var kr=b(k()),kD=b(q());c();var dx=b(k());async function _K(t){let o=await _c(),{data:e}=await o.hive.generateSpaceHiveReadAccessToken(t);return Object.values(e.contents)}function wD(t){return t.client?dx.createElement(Zw,{client:t.client},t.children):dx.createElement(Zw,{endpoint:X_(),fetchContentAuthToken:_K,store:t.store},t.children)}c();var Tu=b(k());var px=Ze("preview:child");function SD(t,o){let[e,n]=Tu.useState(t),[r,i]=Tu.useState(void 0);return RK(e.footer),Tu.useEffect(()=>{o&&(window.addEventListener("message",a=>{if(a.data.source!=="gitbook-preview-parent"||(px.info("receive message",a.origin,a.data),a.origin!==tg()&&a.origin!=="http://127.0.0.1:5001"))return;let s=Ax(a.data.payload),l=a.data.previewID;px.debug("update content with",s),n(s),i(l),window.parent.postMessage({source:"gitbook-preview-child"},"*")}),px.info("notify parent that we are ready"),window.parent.postMessage({source:"gitbook-preview-child"},"*"))},[o]),[e,r]}function RK(t){let o=Tu.useRef(t);Yu(()=>{t&&t!==o.current&&window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"}),o.current=t},[t])}c();var CD=b(k());function mx(){CD.useEffect(()=>{typeof window>"u"},[])}function fx(t){let o="collection"in t?t.collection:t.space,[e,n]=SD(o,!!t.preview),r=t.hive&&t.hive.client?{client:t.hive.client}:{store:t.hive?.contentStore};return mx(),kr.createElement(Cx,null,kr.createElement(BA,{content:e,isPreview:!!t.preview},kr.createElement(wD,{...r},kr.createElement(PK,{...t,content:e,previewID:n}))))}function PK(t){let{content:o,previewID:e}=t;mx();let[n]=kr.useContext(Ca);return kr.createElement(Ci,{theme:n},kr.createElement(v1,{theme:n},kr.createElement(TT,null,kr.createElement(xI,null,kr.createElement(k1,{enabled:!0},"collection"in t?kr.createElement(bD,{...t,collection:o}):kr.createElement(vD,{...t,space:o})),e?kr.createElement(kD.View,{testID:e}):null))))}c();function gx(t){let o=new URLSearchParams(window.location.search),e=window.location.hash;if(o.has("jwt_token")){o.delete("jwt_token");let i=o.toString();window.history.replaceState({},"",`${window.location.pathname}${i?`?${i}`:""}${e||""}`)}let{dsn:n,tracesSampling:r}={...Ea.sentry,...Ea.sentry.publicContent};Ix({dsn:n,release:Px,projectId:Ea.firebase.projectId,tracesSampling:r}),window.location.hostname!=="127.0.0.1"&&GO(t.hostname),RI({customToken:t.customToken,waitUserReady:!1})}c();function xD(t){t?.firestore&&Ms.fromJS(t.firestore),t?.head&&d1.cache.fromJS(t.head),t?.contentURLs&&rd.fromJS(t.contentURLs),t?.contentRefs&&ca.fromJS(t.contentRefs),t?.screenToContentRefs&&my.fromJS(t.screenToContentRefs),t?.swaggers&&Jl.fromJS(t.swaggers),t?.api&&d_.fromJS(t.api)}c();var OD=Ze("browser-compatibility");function _D(){let t=["webcache.googleusercontent.com","translate.googleusercontent.com","translate.google.com"];return!window.location.hostname||t.includes(window.location.hostname)?(OD.warning("The application is served over an unsupported hostname and has been made static."),!1):IK()?!0:(OD.warning("Your browser is missing required features, the application has been made static."),!1)}function IK(){try{if("\u212B".normalize("NFKD")!=="A\u030A")return!1}catch{return!1}return!(!window.Intl||![].flat)}c();function RD(t){document.readyState==="interactive"||document.readyState==="complete"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}c();var PD=b(qD());function hx(t){return new Yi("ssr.deserializeFromHTML").wrapSync(()=>{let e=PD.default.decompress(t);return e?JSON.parse(e):null})}_D()&&RD(()=>{EK()});async function EK(){let t=window.__GITBOOK_INITIAL_PROPS__,o=hx(t);gx(o),window.__GITBOOK_LAZY_MODULES__&&await H1(window.__GITBOOK_LAZY_MODULES__);let e=window.__GITBOOK_INITIAL_STATE__,n=hx(e);n?(xD(n),yx.AppRegistry.registerComponent("PublicContentApplication",()=>fx),yx.AppRegistry.runApplication("PublicContentApplication",{hydrate:!0,rootTag:document.querySelector(".gitbook-root"),initialProps:o})):console.error("Invalid state received from server, content won't be interactive")}
/*! Bundled license information:

statuses/index.js:
  (*!
   * statuses
   * Copyright(c) 2014 Jonathan Ong
   * Copyright(c) 2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

rangefix/rangefix.js:
  (*!
   * RangeFix v0.2.9
   * https://github.com/edg2s/rangefix
   *
   * Copyright 2014-17 Ed Sanders.
   * Released under the MIT license
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/public-5GNB4EBY.min.js.map
